(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function t(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(c){if(c.ep)return;c.ep=!0;const h=t(c);fetch(c.href,h)}})();var wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var R1={exports:{}},wu={};var K2;function zv(){if(K2)return wu;K2=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,c,h){var p=null;if(h!==void 0&&(p=""+h),c.key!==void 0&&(p=""+c.key),"key"in c){h={};for(var T in c)T!=="key"&&(h[T]=c[T])}else h=c;return c=h.ref,{$$typeof:n,type:s,key:p,ref:c!==void 0?c:null,props:h}}return wu.Fragment=e,wu.jsx=t,wu.jsxs=t,wu}var Z2;function jv(){return Z2||(Z2=1,R1.exports=zv()),R1.exports}var re=jv(),N1={exports:{}},ft={};var J2;function Hv(){if(J2)return ft;J2=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),p=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),L=Symbol.iterator;function j(ee){return ee===null||typeof ee!="object"?null:(ee=L&&ee[L]||ee["@@iterator"],typeof ee=="function"?ee:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,q={};function pe(ee,Ae,Pe){this.props=ee,this.context=Ae,this.refs=q,this.updater=Pe||W}pe.prototype.isReactComponent={},pe.prototype.setState=function(ee,Ae){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,Ae,"setState")},pe.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function le(){}le.prototype=pe.prototype;function ne(ee,Ae,Pe){this.props=ee,this.context=Ae,this.refs=q,this.updater=Pe||W}var Re=ne.prototype=new le;Re.constructor=ne,Z(Re,pe.prototype),Re.isPureReactComponent=!0;var He=Array.isArray;function Be(){}var U={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function B(ee,Ae,Pe){var ke=Pe.ref;return{$$typeof:n,type:ee,key:Ae,ref:ke!==void 0?ke:null,props:Pe}}function J(ee,Ae){return B(ee.type,Ae,ee.props)}function Y(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===n}function X(ee){var Ae={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function(Pe){return Ae[Pe]})}var G=/\/+/g;function We(ee,Ae){return typeof ee=="object"&&ee!==null&&ee.key!=null?X(""+ee.key):Ae.toString(36)}function he(ee){switch(ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason;default:switch(typeof ee.status=="string"?ee.then(Be,Be):(ee.status="pending",ee.then(function(Ae){ee.status==="pending"&&(ee.status="fulfilled",ee.value=Ae)},function(Ae){ee.status==="pending"&&(ee.status="rejected",ee.reason=Ae)})),ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason}}throw ee}function me(ee,Ae,Pe,ke,it){var Le=typeof ee;(Le==="undefined"||Le==="boolean")&&(ee=null);var wt=!1;if(ee===null)wt=!0;else switch(Le){case"bigint":case"string":case"number":wt=!0;break;case"object":switch(ee.$$typeof){case n:case e:wt=!0;break;case S:return wt=ee._init,me(wt(ee._payload),Ae,Pe,ke,it)}}if(wt)return it=it(ee),wt=ke===""?"."+We(ee,0):ke,He(it)?(Pe="",wt!=null&&(Pe=wt.replace(G,"$&/")+"/"),me(it,Ae,Pe,"",function(mr){return mr})):it!=null&&(Y(it)&&(it=J(it,Pe+(it.key==null||ee&&ee.key===it.key?"":(""+it.key).replace(G,"$&/")+"/")+wt)),Ae.push(it)),1;wt=0;var xt=ke===""?".":ke+":";if(He(ee))for(var Jt=0;Jt<ee.length;Jt++)ke=ee[Jt],Le=xt+We(ke,Jt),wt+=me(ke,Ae,Pe,Le,it);else if(Jt=j(ee),typeof Jt=="function")for(ee=Jt.call(ee),Jt=0;!(ke=ee.next()).done;)ke=ke.value,Le=xt+We(ke,Jt++),wt+=me(ke,Ae,Pe,Le,it);else if(Le==="object"){if(typeof ee.then=="function")return me(he(ee),Ae,Pe,ke,it);throw Ae=String(ee),Error("Objects are not valid as a React child (found: "+(Ae==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":Ae)+"). If you meant to render a collection of children, use an array instead.")}return wt}function xe(ee,Ae,Pe){if(ee==null)return ee;var ke=[],it=0;return me(ee,ke,"","",function(Le){return Ae.call(Pe,Le,it++)}),ke}function Ye(ee){if(ee._status===-1){var Ae=ee._result;Ae=Ae(),Ae.then(function(Pe){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=Pe)},function(Pe){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=Pe)}),ee._status===-1&&(ee._status=0,ee._result=Ae)}if(ee._status===1)return ee._result.default;throw ee._result}var lt=typeof reportError=="function"?reportError:function(ee){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ee=="object"&&ee!==null&&typeof ee.message=="string"?String(ee.message):String(ee),error:ee});if(!window.dispatchEvent(Ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ee);return}console.error(ee)},mt={map:xe,forEach:function(ee,Ae,Pe){xe(ee,function(){Ae.apply(this,arguments)},Pe)},count:function(ee){var Ae=0;return xe(ee,function(){Ae++}),Ae},toArray:function(ee){return xe(ee,function(Ae){return Ae})||[]},only:function(ee){if(!Y(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}};return ft.Activity=b,ft.Children=mt,ft.Component=pe,ft.Fragment=t,ft.Profiler=c,ft.PureComponent=ne,ft.StrictMode=s,ft.Suspense=w,ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,ft.__COMPILER_RUNTIME={__proto__:null,c:function(ee){return U.H.useMemoCache(ee)}},ft.cache=function(ee){return function(){return ee.apply(null,arguments)}},ft.cacheSignal=function(){return null},ft.cloneElement=function(ee,Ae,Pe){if(ee==null)throw Error("The argument must be a React element, but you passed "+ee+".");var ke=Z({},ee.props),it=ee.key;if(Ae!=null)for(Le in Ae.key!==void 0&&(it=""+Ae.key),Ae)!F.call(Ae,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&Ae.ref===void 0||(ke[Le]=Ae[Le]);var Le=arguments.length-2;if(Le===1)ke.children=Pe;else if(1<Le){for(var wt=Array(Le),xt=0;xt<Le;xt++)wt[xt]=arguments[xt+2];ke.children=wt}return B(ee.type,it,ke)},ft.createContext=function(ee){return ee={$$typeof:p,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null},ee.Provider=ee,ee.Consumer={$$typeof:h,_context:ee},ee},ft.createElement=function(ee,Ae,Pe){var ke,it={},Le=null;if(Ae!=null)for(ke in Ae.key!==void 0&&(Le=""+Ae.key),Ae)F.call(Ae,ke)&&ke!=="key"&&ke!=="__self"&&ke!=="__source"&&(it[ke]=Ae[ke]);var wt=arguments.length-2;if(wt===1)it.children=Pe;else if(1<wt){for(var xt=Array(wt),Jt=0;Jt<wt;Jt++)xt[Jt]=arguments[Jt+2];it.children=xt}if(ee&&ee.defaultProps)for(ke in wt=ee.defaultProps,wt)it[ke]===void 0&&(it[ke]=wt[ke]);return B(ee,Le,it)},ft.createRef=function(){return{current:null}},ft.forwardRef=function(ee){return{$$typeof:T,render:ee}},ft.isValidElement=Y,ft.lazy=function(ee){return{$$typeof:S,_payload:{_status:-1,_result:ee},_init:Ye}},ft.memo=function(ee,Ae){return{$$typeof:_,type:ee,compare:Ae===void 0?null:Ae}},ft.startTransition=function(ee){var Ae=U.T,Pe={};U.T=Pe;try{var ke=ee(),it=U.S;it!==null&&it(Pe,ke),typeof ke=="object"&&ke!==null&&typeof ke.then=="function"&&ke.then(Be,lt)}catch(Le){lt(Le)}finally{Ae!==null&&Pe.types!==null&&(Ae.types=Pe.types),U.T=Ae}},ft.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},ft.use=function(ee){return U.H.use(ee)},ft.useActionState=function(ee,Ae,Pe){return U.H.useActionState(ee,Ae,Pe)},ft.useCallback=function(ee,Ae){return U.H.useCallback(ee,Ae)},ft.useContext=function(ee){return U.H.useContext(ee)},ft.useDebugValue=function(){},ft.useDeferredValue=function(ee,Ae){return U.H.useDeferredValue(ee,Ae)},ft.useEffect=function(ee,Ae){return U.H.useEffect(ee,Ae)},ft.useEffectEvent=function(ee){return U.H.useEffectEvent(ee)},ft.useId=function(){return U.H.useId()},ft.useImperativeHandle=function(ee,Ae,Pe){return U.H.useImperativeHandle(ee,Ae,Pe)},ft.useInsertionEffect=function(ee,Ae){return U.H.useInsertionEffect(ee,Ae)},ft.useLayoutEffect=function(ee,Ae){return U.H.useLayoutEffect(ee,Ae)},ft.useMemo=function(ee,Ae){return U.H.useMemo(ee,Ae)},ft.useOptimistic=function(ee,Ae){return U.H.useOptimistic(ee,Ae)},ft.useReducer=function(ee,Ae,Pe){return U.H.useReducer(ee,Ae,Pe)},ft.useRef=function(ee){return U.H.useRef(ee)},ft.useState=function(ee){return U.H.useState(ee)},ft.useSyncExternalStore=function(ee,Ae,Pe){return U.H.useSyncExternalStore(ee,Ae,Pe)},ft.useTransition=function(){return U.H.useTransition()},ft.version="19.2.4",ft}var $2;function md(){return $2||($2=1,N1.exports=Hv()),N1.exports}var ge=md();const ci=Fv(ge);var O1={exports:{}},xu={},D1={exports:{}},M1={};var eE;function Gv(){return eE||(eE=1,(function(n){function e(me,xe){var Ye=me.length;me.push(xe);e:for(;0<Ye;){var lt=Ye-1>>>1,mt=me[lt];if(0<c(mt,xe))me[lt]=xe,me[Ye]=mt,Ye=lt;else break e}}function t(me){return me.length===0?null:me[0]}function s(me){if(me.length===0)return null;var xe=me[0],Ye=me.pop();if(Ye!==xe){me[0]=Ye;e:for(var lt=0,mt=me.length,ee=mt>>>1;lt<ee;){var Ae=2*(lt+1)-1,Pe=me[Ae],ke=Ae+1,it=me[ke];if(0>c(Pe,Ye))ke<mt&&0>c(it,Pe)?(me[lt]=it,me[ke]=Ye,lt=ke):(me[lt]=Pe,me[Ae]=Ye,lt=Ae);else if(ke<mt&&0>c(it,Ye))me[lt]=it,me[ke]=Ye,lt=ke;else break e}}return xe}function c(me,xe){var Ye=me.sortIndex-xe.sortIndex;return Ye!==0?Ye:me.id-xe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;n.unstable_now=function(){return h.now()}}else{var p=Date,T=p.now();n.unstable_now=function(){return p.now()-T}}var w=[],_=[],S=1,b=null,L=3,j=!1,W=!1,Z=!1,q=!1,pe=typeof setTimeout=="function"?setTimeout:null,le=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function Re(me){for(var xe=t(_);xe!==null;){if(xe.callback===null)s(_);else if(xe.startTime<=me)s(_),xe.sortIndex=xe.expirationTime,e(w,xe);else break;xe=t(_)}}function He(me){if(Z=!1,Re(me),!W)if(t(w)!==null)W=!0,Be||(Be=!0,X());else{var xe=t(_);xe!==null&&he(He,xe.startTime-me)}}var Be=!1,U=-1,F=5,B=-1;function J(){return q?!0:!(n.unstable_now()-B<F)}function Y(){if(q=!1,Be){var me=n.unstable_now();B=me;var xe=!0;try{e:{W=!1,Z&&(Z=!1,le(U),U=-1),j=!0;var Ye=L;try{t:{for(Re(me),b=t(w);b!==null&&!(b.expirationTime>me&&J());){var lt=b.callback;if(typeof lt=="function"){b.callback=null,L=b.priorityLevel;var mt=lt(b.expirationTime<=me);if(me=n.unstable_now(),typeof mt=="function"){b.callback=mt,Re(me),xe=!0;break t}b===t(w)&&s(w),Re(me)}else s(w);b=t(w)}if(b!==null)xe=!0;else{var ee=t(_);ee!==null&&he(He,ee.startTime-me),xe=!1}}break e}finally{b=null,L=Ye,j=!1}xe=void 0}}finally{xe?X():Be=!1}}}var X;if(typeof ne=="function")X=function(){ne(Y)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,We=G.port2;G.port1.onmessage=Y,X=function(){We.postMessage(null)}}else X=function(){pe(Y,0)};function he(me,xe){U=pe(function(){me(n.unstable_now())},xe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(me){me.callback=null},n.unstable_forceFrameRate=function(me){0>me||125<me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<me?Math.floor(1e3/me):5},n.unstable_getCurrentPriorityLevel=function(){return L},n.unstable_next=function(me){switch(L){case 1:case 2:case 3:var xe=3;break;default:xe=L}var Ye=L;L=xe;try{return me()}finally{L=Ye}},n.unstable_requestPaint=function(){q=!0},n.unstable_runWithPriority=function(me,xe){switch(me){case 1:case 2:case 3:case 4:case 5:break;default:me=3}var Ye=L;L=me;try{return xe()}finally{L=Ye}},n.unstable_scheduleCallback=function(me,xe,Ye){var lt=n.unstable_now();switch(typeof Ye=="object"&&Ye!==null?(Ye=Ye.delay,Ye=typeof Ye=="number"&&0<Ye?lt+Ye:lt):Ye=lt,me){case 1:var mt=-1;break;case 2:mt=250;break;case 5:mt=1073741823;break;case 4:mt=1e4;break;default:mt=5e3}return mt=Ye+mt,me={id:S++,callback:xe,priorityLevel:me,startTime:Ye,expirationTime:mt,sortIndex:-1},Ye>lt?(me.sortIndex=Ye,e(_,me),t(w)===null&&me===t(_)&&(Z?(le(U),U=-1):Z=!0,he(He,Ye-lt))):(me.sortIndex=mt,e(w,me),W||j||(W=!0,Be||(Be=!0,X()))),me},n.unstable_shouldYield=J,n.unstable_wrapCallback=function(me){var xe=L;return function(){var Ye=L;L=xe;try{return me.apply(this,arguments)}finally{L=Ye}}}})(M1)),M1}var tE;function qv(){return tE||(tE=1,D1.exports=Gv()),D1.exports}var L1={exports:{}},ji={};var nE;function Yv(){if(nE)return ji;nE=1;var n=md();function e(w){var _="https://react.dev/errors/"+w;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)_+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+w+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},c=Symbol.for("react.portal");function h(w,_,S){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:b==null?null:""+b,children:w,containerInfo:_,implementation:S}}var p=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function T(w,_){if(w==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return ji.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ji.createPortal=function(w,_){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return h(w,_,null,S)},ji.flushSync=function(w){var _=p.T,S=s.p;try{if(p.T=null,s.p=2,w)return w()}finally{p.T=_,s.p=S,s.d.f()}},ji.preconnect=function(w,_){typeof w=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,s.d.C(w,_))},ji.prefetchDNS=function(w){typeof w=="string"&&s.d.D(w)},ji.preinit=function(w,_){if(typeof w=="string"&&_&&typeof _.as=="string"){var S=_.as,b=T(S,_.crossOrigin),L=typeof _.integrity=="string"?_.integrity:void 0,j=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;S==="style"?s.d.S(w,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:b,integrity:L,fetchPriority:j}):S==="script"&&s.d.X(w,{crossOrigin:b,integrity:L,fetchPriority:j,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},ji.preinitModule=function(w,_){if(typeof w=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var S=T(_.as,_.crossOrigin);s.d.M(w,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&s.d.M(w)},ji.preload=function(w,_){if(typeof w=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var S=_.as,b=T(S,_.crossOrigin);s.d.L(w,S,{crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},ji.preloadModule=function(w,_){if(typeof w=="string")if(_){var S=T(_.as,_.crossOrigin);s.d.m(w,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else s.d.m(w)},ji.requestFormReset=function(w){s.d.r(w)},ji.unstable_batchedUpdates=function(w,_){return w(_)},ji.useFormState=function(w,_,S){return p.H.useFormState(w,_,S)},ji.useFormStatus=function(){return p.H.useHostTransitionStatus()},ji.version="19.2.4",ji}var iE;function Xv(){if(iE)return L1.exports;iE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),L1.exports=Yv(),L1.exports}var rE;function Wv(){if(rE)return xu;rE=1;var n=qv(),e=md(),t=Xv();function s(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function h(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function p(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function T(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function w(i){if(h(i)!==i)throw Error(s(188))}function _(i){var a=i.alternate;if(!a){if(a=h(i),a===null)throw Error(s(188));return a!==i?null:i}for(var u=i,g=a;;){var A=u.return;if(A===null)break;var C=A.alternate;if(C===null){if(g=A.return,g!==null){u=g;continue}break}if(A.child===C.child){for(C=A.child;C;){if(C===u)return w(A),i;if(C===g)return w(A),a;C=C.sibling}throw Error(s(188))}if(u.return!==g.return)u=A,g=C;else{for(var N=!1,k=A.child;k;){if(k===u){N=!0,u=A,g=C;break}if(k===g){N=!0,g=A,u=C;break}k=k.sibling}if(!N){for(k=C.child;k;){if(k===u){N=!0,u=C,g=A;break}if(k===g){N=!0,g=C,u=A;break}k=k.sibling}if(!N)throw Error(s(189))}}if(u.alternate!==g)throw Error(s(190))}if(u.tag!==3)throw Error(s(188));return u.stateNode.current===u?i:a}function S(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=S(i),a!==null)return a;i=i.sibling}return null}var b=Object.assign,L=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),pe=Symbol.for("react.profiler"),le=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),Re=Symbol.for("react.forward_ref"),He=Symbol.for("react.suspense"),Be=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function X(i){return i===null||typeof i!="object"?null:(i=Y&&i[Y]||i["@@iterator"],typeof i=="function"?i:null)}var G=Symbol.for("react.client.reference");function We(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===G?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Z:return"Fragment";case pe:return"Profiler";case q:return"StrictMode";case He:return"Suspense";case Be:return"SuspenseList";case B:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case W:return"Portal";case ne:return i.displayName||"Context";case le:return(i._context.displayName||"Context")+".Consumer";case Re:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case U:return a=i.displayName||null,a!==null?a:We(i.type)||"Memo";case F:a=i._payload,i=i._init;try{return We(i(a))}catch{}}return null}var he=Array.isArray,me=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ye={pending:!1,data:null,method:null,action:null},lt=[],mt=-1;function ee(i){return{current:i}}function Ae(i){0>mt||(i.current=lt[mt],lt[mt]=null,mt--)}function Pe(i,a){mt++,lt[mt]=i.current,i.current=a}var ke=ee(null),it=ee(null),Le=ee(null),wt=ee(null);function xt(i,a){switch(Pe(Le,a),Pe(it,i),Pe(ke,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?_2(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=_2(a),i=A2(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Ae(ke),Pe(ke,i)}function Jt(){Ae(ke),Ae(it),Ae(Le)}function mr(i){i.memoizedState!==null&&Pe(wt,i);var a=ke.current,u=A2(a,i.type);a!==u&&(Pe(it,i),Pe(ke,u))}function qn(i){it.current===i&&(Ae(ke),Ae(it)),wt.current===i&&(Ae(wt),yu._currentValue=Ye)}var as,Tt;function pi(i){if(as===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);as=a&&a[1]||"",Tt=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+as+i+Tt}var Pi=!1;function pr(i,a){if(!i||Pi)return"";Pi=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(a){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(_e){var fe=_e}Reflect.construct(i,[],Ce)}else{try{Ce.call()}catch(_e){fe=_e}i.call(Ce.prototype)}}else{try{throw Error()}catch(_e){fe=_e}(Ce=i())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(_e){if(_e&&fe&&typeof _e.stack=="string")return[_e.stack,fe.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=g.DetermineComponentFrameRoot(),N=C[0],k=C[1];if(N&&k){var Q=N.split(`
`),ue=k.split(`
`);for(A=g=0;g<Q.length&&!Q[g].includes("DetermineComponentFrameRoot");)g++;for(;A<ue.length&&!ue[A].includes("DetermineComponentFrameRoot");)A++;if(g===Q.length||A===ue.length)for(g=Q.length-1,A=ue.length-1;1<=g&&0<=A&&Q[g]!==ue[A];)A--;for(;1<=g&&0<=A;g--,A--)if(Q[g]!==ue[A]){if(g!==1||A!==1)do if(g--,A--,0>A||Q[g]!==ue[A]){var we=`
`+Q[g].replace(" at new "," at ");return i.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",i.displayName)),we}while(1<=g&&0<=A);break}}}finally{Pi=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?pi(u):""}function Nn(i,a){switch(i.tag){case 26:case 27:case 5:return pi(i.type);case 16:return pi("Lazy");case 13:return i.child!==a&&a!==null?pi("Suspense Fallback"):pi("Suspense");case 19:return pi("SuspenseList");case 0:case 15:return pr(i.type,!1);case 11:return pr(i.type.render,!1);case 1:return pr(i.type,!0);case 31:return pi("Activity");default:return""}}function qt(i){try{var a="",u=null;do a+=Nn(i,u),u=i,i=i.return;while(i);return a}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var $e=Object.prototype.hasOwnProperty,xn=n.unstable_scheduleCallback,Fe=n.unstable_cancelCallback,Ma=n.unstable_shouldYield,Vo=n.unstable_requestPaint,yn=n.unstable_now,os=n.unstable_getCurrentPriorityLevel,yi=n.unstable_ImmediatePriority,La=n.unstable_UserBlockingPriority,Ei=n.unstable_NormalPriority,si=n.unstable_LowPriority,Fo=n.unstable_IdlePriority,qs=n.log,Dl=n.unstable_setDisableYieldValue,Yt=null,Ne=null;function Xt(i){if(typeof qs=="function"&&Dl(i),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(Yt,i)}catch{}}var rt=Math.clz32?Math.clz32:Pa,hn=Math.log,Ur=Math.LN2;function Pa(i){return i>>>=0,i===0?32:31-(hn(i)/Ur|0)|0}var yr=256,At=262144,on=4194304;function Er(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function _r(i,a,u){var g=i.pendingLanes;if(g===0)return 0;var A=0,C=i.suspendedLanes,N=i.pingedLanes;i=i.warmLanes;var k=g&134217727;return k!==0?(g=k&~C,g!==0?A=Er(g):(N&=k,N!==0?A=Er(N):u||(u=k&~i,u!==0&&(A=Er(u))))):(k=g&~C,k!==0?A=Er(k):N!==0?A=Er(N):u||(u=g&~i,u!==0&&(A=Er(u)))),A===0?0:a!==0&&a!==A&&(a&C)===0&&(C=A&-A,u=a&-a,C>=u||C===32&&(u&4194048)!==0)?a:A}function On(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function zo(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yn(){var i=on;return on<<=1,(on&62914560)===0&&(on=4194304),i}function _i(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function Vr(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function nr(i,a,u,g,A,C){var N=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var k=i.entanglements,Q=i.expirationTimes,ue=i.hiddenUpdates;for(u=N&~u;0<u;){var we=31-rt(u),Ce=1<<we;k[we]=0,Q[we]=-1;var fe=ue[we];if(fe!==null)for(ue[we]=null,we=0;we<fe.length;we++){var _e=fe[we];_e!==null&&(_e.lane&=-536870913)}u&=~Ce}g!==0&&Ys(i,g,0),C!==0&&A===0&&i.tag!==0&&(i.suspendedLanes|=C&~(N&~a))}function Ys(i,a,u){i.pendingLanes|=a,i.suspendedLanes&=~a;var g=31-rt(a);i.entangledLanes|=a,i.entanglements[g]=i.entanglements[g]|1073741824|u&261930}function Ar(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var g=31-rt(u),A=1<<g;A&a|i[g]&a&&(i[g]|=a),u&=~A}}function Xs(i,a){var u=a&-a;return u=(u&42)!==0?1:Un(u),(u&(i.suspendedLanes|a))!==0?0:u}function Un(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ai(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function wi(){var i=xe.p;return i!==0?i:(i=window.event,i===void 0?32:H2(i.type))}function Ue(i,a){var u=xe.p;try{return xe.p=i,a()}finally{xe.p=u}}var hi=Math.random().toString(36).slice(2),Tn="__reactFiber$"+hi,Ht="__reactProps$"+hi,xi="__reactContainer$"+hi,ls="__reactEvents$"+hi,ka="__reactListeners$"+hi,Wi="__reactHandles$"+hi,Ml="__reactResources$"+hi,Fr="__reactMarker$"+hi;function Ti(i){delete i[Tn],delete i[Ht],delete i[ls],delete i[ka],delete i[Wi]}function mn(i){var a=i[Tn];if(a)return a;for(var u=i.parentNode;u;){if(a=u[xi]||u[Tn]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=I2(i);i!==null;){if(u=i[Tn])return u;i=I2(i)}return a}i=u,u=i.parentNode}return null}function St(i){if(i=i[Tn]||i[xi]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function ki(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(s(33))}function ai(i){var a=i[Ml];return a||(a=i[Ml]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Cn(i){i[Fr]=!0}var Se=new Set,jo={};function Gt(i,a){Ci(i,a),Ci(i+"Capture",a)}function Ci(i,a){for(jo[i]=a,i=0;i<a.length;i++)Se.add(a[i])}var Ho=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dt={},It={};function Et(i){return $e.call(It,i)?!0:$e.call(Dt,i)?!1:Ho.test(i)?It[i]=!0:(Dt[i]=!0,!1)}function Cs(i,a,u){if(Et(a))if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var g=a.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+u)}}function vi(i,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+u)}}function vn(i,a,u,g){if(g===null)i.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(a,u,""+g)}}function Ct(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Si(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Go(i,a,u){var g=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var A=g.get,C=g.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return A.call(this)},set:function(N){u=""+N,C.call(this,N)}}),Object.defineProperty(i,a,{enumerable:g.enumerable}),{getValue:function(){return u},setValue:function(N){u=""+N},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function tt(i){if(!i._valueTracker){var a=Si(i)?"checked":"value";i._valueTracker=Go(i,a,""+i[a])}}function Bi(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),g="";return i&&(g=Si(i)?i.checked?"true":"false":i.value),i=g,i!==u?(a.setValue(i),!0):!1}function zr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var ir=/[\n"\\]/g;function pt(i){return i.replace(ir,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Dn(i,a,u,g,A,C,N,k){i.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?i.type=N:i.removeAttribute("type"),a!=null?N==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+Ct(a)):i.value!==""+Ct(a)&&(i.value=""+Ct(a)):N!=="submit"&&N!=="reset"||i.removeAttribute("value"),a!=null?z(i,N,Ct(a)):u!=null?z(i,N,Ct(u)):g!=null&&i.removeAttribute("value"),A==null&&C!=null&&(i.defaultChecked=!!C),A!=null&&(i.checked=A&&typeof A!="function"&&typeof A!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?i.name=""+Ct(k):i.removeAttribute("name")}function oe(i,a,u,g,A,C,N,k){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.type=C),a!=null||u!=null){if(!(C!=="submit"&&C!=="reset"||a!=null)){tt(i);return}u=u!=null?""+Ct(u):"",a=a!=null?""+Ct(a):u,k||a===i.value||(i.value=a),i.defaultValue=a}g=g??A,g=typeof g!="function"&&typeof g!="symbol"&&!!g,i.checked=k?i.checked:!!g,i.defaultChecked=!!g,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(i.name=N),tt(i)}function z(i,a,u){a==="number"&&zr(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function Ge(i,a,u,g){if(i=i.options,a){a={};for(var A=0;A<u.length;A++)a["$"+u[A]]=!0;for(u=0;u<i.length;u++)A=a.hasOwnProperty("$"+i[u].value),i[u].selected!==A&&(i[u].selected=A),A&&g&&(i[u].defaultSelected=!0)}else{for(u=""+Ct(u),a=null,A=0;A<i.length;A++){if(i[A].value===u){i[A].selected=!0,g&&(i[A].defaultSelected=!0);return}a!==null||i[A].disabled||(a=i[A])}a!==null&&(a.selected=!0)}}function Mn(i,a,u){if(a!=null&&(a=""+Ct(a),a!==i.value&&(i.value=a),u==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=u!=null?""+Ct(u):""}function Xn(i,a,u,g){if(a==null){if(g!=null){if(u!=null)throw Error(s(92));if(he(g)){if(1<g.length)throw Error(s(93));g=g[0]}u=g}u==null&&(u=""),a=u}u=Ct(a),i.defaultValue=u,g=i.textContent,g===u&&g!==""&&g!==null&&(i.value=g),tt(i)}function Ui(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var Ba=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fi(i,a,u){var g=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?g?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":g?i.setProperty(a,u):typeof u!="number"||u===0||Ba.has(a)?a==="float"?i.cssFloat=u:i[a]=(""+u).trim():i[a]=u+"px"}function Qe(i,a,u){if(a!=null&&typeof a!="object")throw Error(s(62));if(i=i.style,u!=null){for(var g in u)!u.hasOwnProperty(g)||a!=null&&a.hasOwnProperty(g)||(g.indexOf("--")===0?i.setProperty(g,""):g==="float"?i.cssFloat="":i[g]="");for(var A in a)g=a[A],a.hasOwnProperty(A)&&u[A]!==g&&fi(i,A,g)}else for(var C in a)a.hasOwnProperty(C)&&fi(i,C,a[C])}function $t(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ss(i){return vs.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Vi(){}var Ws=null;function rr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var fn=null,Fi=null;function zi(i){var a=St(i);if(a&&(i=a.stateNode)){var u=i[Ht]||null;e:switch(i=a.stateNode,a.type){case"input":if(Dn(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+pt(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var g=u[a];if(g!==i&&g.form===i.form){var A=g[Ht]||null;if(!A)throw Error(s(90));Dn(g,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(a=0;a<u.length;a++)g=u[a],g.form===i.form&&Bi(g)}break e;case"textarea":Mn(i,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&Ge(i,!!u.multiple,a,!1)}}}var Ke=!1;function Is(i,a,u){if(Ke)return i(a,u);Ke=!0;try{var g=i(a);return g}finally{if(Ke=!1,(fn!==null||Fi!==null)&&(Jh(),fn&&(a=fn,i=Fi,Fi=fn=null,zi(a),i)))for(a=0;a<i.length;a++)zi(i[a])}}function et(i,a){var u=i.stateNode;if(u===null)return null;var g=u[Ht]||null;if(g===null)return null;u=g[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(i=i.type,g=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!g;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(s(231,a,typeof u));return u}var en=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qs=!1;if(en)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Qs=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch{Qs=!1}var wr=null,xr=null,Ks=null;function cs(){if(Ks)return Ks;var i,a=xr,u=a.length,g,A="value"in wr?wr.value:wr.textContent,C=A.length;for(i=0;i<u&&a[i]===A[i];i++);var N=u-i;for(g=1;g<=N&&a[u-g]===A[C-g];g++);return Ks=A.slice(i,1<g?1-g:void 0)}function Tr(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Qi(){return!0}function sr(){return!1}function Ln(i){function a(u,g,A,C,N){this._reactName=u,this._targetInst=A,this.type=g,this.nativeEvent=C,this.target=N,this.currentTarget=null;for(var k in i)i.hasOwnProperty(k)&&(u=i[k],this[k]=u?u(C):C[k]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Qi:sr,this.isPropagationStopped=sr,this}return b(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Qi)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Qi)},persist:function(){},isPersistent:Qi}),a}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},En=Ln(Ki),us=b({},Ki,{view:0,detail:0}),Ua=Ln(us),hs,Va,jr,Fa=b({},us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==jr&&(jr&&i.type==="mousemove"?(hs=i.screenX-jr.screenX,Va=i.screenY-jr.screenY):Va=hs=0,jr=i),hs)},movementY:function(i){return"movementY"in i?i.movementY:Va}}),zt=Ln(Fa),bs=b({},Fa,{dataTransfer:0}),Zs=Ln(bs),Cr=b({},us,{relatedTarget:0}),Js=Ln(Cr),de=b({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),ht=Ln(de),Sn=b({},Ki,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),$s=Ln(Sn),Yo=b({},Ki,{data:0}),Hr=Ln(Yo),Ll={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},za={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=za[i])?!!a[i]:!1}function Gr(){return In}var vt=b({},us,{key:function(i){if(i.key){var a=Ll[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Tr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Pl[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gr,charCode:function(i){return i.type==="keypress"?Tr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Tr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ea=Ln(vt),qr=b({},Fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bt=Ln(qr),y=b({},us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gr}),I=Ln(y),O=b({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),V=Ln(O),se=b({},Fa,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ee=Ln(se),Me=b({},Ki,{newState:0,oldState:0}),ot=Ln(Me),bn=[9,13,27,32],Vt=en&&"CompositionEvent"in window,dn=null;en&&"documentMode"in document&&(dn=document.documentMode);var Zi=en&&"TextEvent"in window&&!dn,Yr=en&&(!Vt||dn&&8<dn&&11>=dn),di=" ",Ji=!1;function ta(i,a){switch(i){case"keyup":return bn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xr(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ja=!1;function Rs(i,a){switch(i){case"compositionend":return Xr(a);case"keypress":return a.which!==32?null:(Ji=!0,di);case"textInput":return i=a.data,i===di&&Ji?null:i;default:return null}}function kl(i,a){if(ja)return i==="compositionend"||!Vt&&ta(i,a)?(i=cs(),Ks=xr=wr=null,ja=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Yr&&a.locale!=="ko"?null:a.data;default:return null}}var ar={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zc(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!ar[i.type]:a==="textarea"}function vr(i,a,u,g){fn?Fi?Fi.push(g):Fi=[g]:fn=g,a=af(a,"onChange"),0<a.length&&(u=new En("onChange","change",null,u,g),i.push({event:u,listeners:a}))}var Xo=null,na=null;function jd(i){d2(i,0)}function Wo(i){var a=ki(i);if(Bi(a))return i}function Sr(i,a){if(i==="change")return a}var ph=!1;if(en){var Qo;if(en){var ia="oninput"in document;if(!ia){var Mt=document.createElement("div");Mt.setAttribute("oninput","return;"),ia=typeof Mt.oninput=="function"}Qo=ia}else Qo=!1;ph=Qo&&(!document.documentMode||9<document.documentMode)}function Ko(){Xo&&(Xo.detachEvent("onpropertychange",D),na=Xo=null)}function D(i){if(i.propertyName==="value"&&Wo(na)){var a=[];vr(a,na,i,rr(i)),Is(jd,a)}}function r(i,a,u){i==="focusin"?(Ko(),Xo=a,na=u,Xo.attachEvent("onpropertychange",D)):i==="focusout"&&Ko()}function o(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Wo(na)}function l(i,a){if(i==="click")return Wo(a)}function f(i,a){if(i==="input"||i==="change")return Wo(a)}function d(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var m=typeof Object.is=="function"?Object.is:d;function E(i,a){if(m(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),g=Object.keys(a);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var A=u[g];if(!$e.call(a,A)||!m(i[A],a[A]))return!1}return!0}function x(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function v(i,a){var u=x(i);i=0;for(var g;u;){if(u.nodeType===3){if(g=i+u.textContent.length,i<=a&&g>=a)return{node:u,offset:a-i};i=g}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=x(u)}}function R(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?R(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function M(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=zr(i.document);a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=zr(i.document)}return a}function P(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var H=en&&"documentMode"in document&&11>=document.documentMode,K=null,$=null,ae=null,ye=!1;function De(i,a,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ye||K==null||K!==zr(g)||(g=K,"selectionStart"in g&&P(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),ae&&E(ae,g)||(ae=g,g=af($,"onSelect"),0<g.length&&(a=new En("onSelect","select",null,a,u),i.push({event:a,listeners:g}),a.target=K)))}function Oe(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var be={animationend:Oe("Animation","AnimationEnd"),animationiteration:Oe("Animation","AnimationIteration"),animationstart:Oe("Animation","AnimationStart"),transitionrun:Oe("Transition","TransitionRun"),transitionstart:Oe("Transition","TransitionStart"),transitioncancel:Oe("Transition","TransitionCancel"),transitionend:Oe("Transition","TransitionEnd")},_t={},ct={};en&&(ct=document.createElement("div").style,"AnimationEvent"in window||(delete be.animationend.animation,delete be.animationiteration.animation,delete be.animationstart.animation),"TransitionEvent"in window||delete be.transitionend.transition);function Vn(i){if(_t[i])return _t[i];if(!be[i])return i;var a=be[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in ct)return _t[i]=a[u];return i}var or=Vn("animationend"),Ii=Vn("animationiteration"),tn=Vn("animationstart"),oi=Vn("transitionrun"),$i=Vn("transitionstart"),Ha=Vn("transitioncancel"),ra=Vn("transitionend"),yh=new Map,jc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jc.push("scrollEnd");function fs(i,a){yh.set(i,a),Gt(a,[i])}var Eh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Wr=[],Bl=0,Hd=0;function _h(){for(var i=Bl,a=Hd=Bl=0;a<i;){var u=Wr[a];Wr[a++]=null;var g=Wr[a];Wr[a++]=null;var A=Wr[a];Wr[a++]=null;var C=Wr[a];if(Wr[a++]=null,g!==null&&A!==null){var N=g.pending;N===null?A.next=A:(A.next=N.next,N.next=A),g.pending=A}C!==0&&Wm(u,A,C)}}function Ah(i,a,u,g){Wr[Bl++]=i,Wr[Bl++]=a,Wr[Bl++]=u,Wr[Bl++]=g,Hd|=g,i.lanes|=g,i=i.alternate,i!==null&&(i.lanes|=g)}function Gd(i,a,u,g){return Ah(i,a,u,g),wh(i)}function Zo(i,a){return Ah(i,null,null,a),wh(i)}function Wm(i,a,u){i.lanes|=u;var g=i.alternate;g!==null&&(g.lanes|=u);for(var A=!1,C=i.return;C!==null;)C.childLanes|=u,g=C.alternate,g!==null&&(g.childLanes|=u),C.tag===22&&(i=C.stateNode,i===null||i._visibility&1||(A=!0)),i=C,C=C.return;return i.tag===3?(C=i.stateNode,A&&a!==null&&(A=31-rt(u),i=C.hiddenUpdates,g=i[A],g===null?i[A]=[a]:g.push(a),a.lane=u|536870912),C):null}function wh(i){if(50<uu)throw uu=0,$0=null,Error(s(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Ul={};function TC(i,a,u,g){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ir(i,a,u,g){return new TC(i,a,u,g)}function qd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function sa(i,a){var u=i.alternate;return u===null?(u=Ir(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function Qm(i,a){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,a=u.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function xh(i,a,u,g,A,C){var N=0;if(g=i,typeof i=="function")qd(i)&&(N=1);else if(typeof i=="string")N=bv(i,u,ke.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case B:return i=Ir(31,u,a,A),i.elementType=B,i.lanes=C,i;case Z:return Jo(u.children,A,C,a);case q:N=8,A|=24;break;case pe:return i=Ir(12,u,a,A|2),i.elementType=pe,i.lanes=C,i;case He:return i=Ir(13,u,a,A),i.elementType=He,i.lanes=C,i;case Be:return i=Ir(19,u,a,A),i.elementType=Be,i.lanes=C,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case ne:N=10;break e;case le:N=9;break e;case Re:N=11;break e;case U:N=14;break e;case F:N=16,g=null;break e}N=29,u=Error(s(130,i===null?"null":typeof i,"")),g=null}return a=Ir(N,u,a,A),a.elementType=i,a.type=g,a.lanes=C,a}function Jo(i,a,u,g){return i=Ir(7,i,g,a),i.lanes=u,i}function Yd(i,a,u){return i=Ir(6,i,null,a),i.lanes=u,i}function Km(i){var a=Ir(18,null,null,0);return a.stateNode=i,a}function Xd(i,a,u){return a=Ir(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var Zm=new WeakMap;function Qr(i,a){if(typeof i=="object"&&i!==null){var u=Zm.get(i);return u!==void 0?u:(a={value:i,source:a,stack:qt(a)},Zm.set(i,a),a)}return{value:i,source:a,stack:qt(a)}}var Vl=[],Fl=0,Th=null,Hc=0,Kr=[],Zr=0,Ga=null,Ns=1,Os="";function aa(i,a){Vl[Fl++]=Hc,Vl[Fl++]=Th,Th=i,Hc=a}function Jm(i,a,u){Kr[Zr++]=Ns,Kr[Zr++]=Os,Kr[Zr++]=Ga,Ga=i;var g=Ns;i=Os;var A=32-rt(g)-1;g&=~(1<<A),u+=1;var C=32-rt(a)+A;if(30<C){var N=A-A%5;C=(g&(1<<N)-1).toString(32),g>>=N,A-=N,Ns=1<<32-rt(a)+A|u<<A|g,Os=C+i}else Ns=1<<C|u<<A|g,Os=i}function Wd(i){i.return!==null&&(aa(i,1),Jm(i,1,0))}function Qd(i){for(;i===Th;)Th=Vl[--Fl],Vl[Fl]=null,Hc=Vl[--Fl],Vl[Fl]=null;for(;i===Ga;)Ga=Kr[--Zr],Kr[Zr]=null,Os=Kr[--Zr],Kr[Zr]=null,Ns=Kr[--Zr],Kr[Zr]=null}function $m(i,a){Kr[Zr++]=Ns,Kr[Zr++]=Os,Kr[Zr++]=Ga,Ns=a.id,Os=a.overflow,Ga=i}var bi=null,_n=null,Ft=!1,qa=null,Jr=!1,Kd=Error(s(519));function Ya(i){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gc(Qr(a,i)),Kd}function ep(i){var a=i.stateNode,u=i.type,g=i.memoizedProps;switch(a[Tn]=i,a[Ht]=g,u){case"dialog":Nt("cancel",a),Nt("close",a);break;case"iframe":case"object":case"embed":Nt("load",a);break;case"video":case"audio":for(u=0;u<fu.length;u++)Nt(fu[u],a);break;case"source":Nt("error",a);break;case"img":case"image":case"link":Nt("error",a),Nt("load",a);break;case"details":Nt("toggle",a);break;case"input":Nt("invalid",a),oe(a,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Nt("invalid",a);break;case"textarea":Nt("invalid",a),Xn(a,g.value,g.defaultValue,g.children)}u=g.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||g.suppressHydrationWarning===!0||y2(a.textContent,u)?(g.popover!=null&&(Nt("beforetoggle",a),Nt("toggle",a)),g.onScroll!=null&&Nt("scroll",a),g.onScrollEnd!=null&&Nt("scrollend",a),g.onClick!=null&&(a.onclick=Vi),a=!0):a=!1,a||Ya(i,!0)}function tp(i){for(bi=i.return;bi;)switch(bi.tag){case 5:case 31:case 13:Jr=!1;return;case 27:case 3:Jr=!0;return;default:bi=bi.return}}function zl(i){if(i!==bi)return!1;if(!Ft)return tp(i),Ft=!0,!1;var a=i.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||g1(i.type,i.memoizedProps)),u=!u),u&&_n&&Ya(i),tp(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));_n=S2(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));_n=S2(i)}else a===27?(a=_n,ao(i.type)?(i=_1,_1=null,_n=i):_n=a):_n=bi?es(i.stateNode.nextSibling):null;return!0}function $o(){_n=bi=null,Ft=!1}function Zd(){var i=qa;return i!==null&&(hr===null?hr=i:hr.push.apply(hr,i),qa=null),i}function Gc(i){qa===null?qa=[i]:qa.push(i)}var Jd=ee(null),el=null,oa=null;function Xa(i,a,u){Pe(Jd,a._currentValue),a._currentValue=u}function la(i){i._currentValue=Jd.current,Ae(Jd)}function $d(i,a,u){for(;i!==null;){var g=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,g!==null&&(g.childLanes|=a)):g!==null&&(g.childLanes&a)!==a&&(g.childLanes|=a),i===u)break;i=i.return}}function e0(i,a,u,g){var A=i.child;for(A!==null&&(A.return=i);A!==null;){var C=A.dependencies;if(C!==null){var N=A.child;C=C.firstContext;e:for(;C!==null;){var k=C;C=A;for(var Q=0;Q<a.length;Q++)if(k.context===a[Q]){C.lanes|=u,k=C.alternate,k!==null&&(k.lanes|=u),$d(C.return,u,i),g||(N=null);break e}C=k.next}}else if(A.tag===18){if(N=A.return,N===null)throw Error(s(341));N.lanes|=u,C=N.alternate,C!==null&&(C.lanes|=u),$d(N,u,i),N=null}else N=A.child;if(N!==null)N.return=A;else for(N=A;N!==null;){if(N===i){N=null;break}if(A=N.sibling,A!==null){A.return=N.return,N=A;break}N=N.return}A=N}}function jl(i,a,u,g){i=null;for(var A=a,C=!1;A!==null;){if(!C){if((A.flags&524288)!==0)C=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var N=A.alternate;if(N===null)throw Error(s(387));if(N=N.memoizedProps,N!==null){var k=A.type;m(A.pendingProps.value,N.value)||(i!==null?i.push(k):i=[k])}}else if(A===wt.current){if(N=A.alternate,N===null)throw Error(s(387));N.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(i!==null?i.push(yu):i=[yu])}A=A.return}i!==null&&e0(a,i,u,g),a.flags|=262144}function Ch(i){for(i=i.firstContext;i!==null;){if(!m(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function tl(i){el=i,oa=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Ri(i){return np(el,i)}function vh(i,a){return el===null&&tl(i),np(i,a)}function np(i,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},oa===null){if(i===null)throw Error(s(308));oa=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else oa=oa.next=a;return u}var CC=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(u,g){i.push(g)}};this.abort=function(){a.aborted=!0,i.forEach(function(u){return u()})}},vC=n.unstable_scheduleCallback,SC=n.unstable_NormalPriority,Zn={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function t0(){return{controller:new CC,data:new Map,refCount:0}}function qc(i){i.refCount--,i.refCount===0&&vC(SC,function(){i.controller.abort()})}var Yc=null,n0=0,Hl=0,Gl=null;function IC(i,a){if(Yc===null){var u=Yc=[];n0=0,Hl=s1(),Gl={status:"pending",value:void 0,then:function(g){u.push(g)}}}return n0++,a.then(ip,ip),a}function ip(){if(--n0===0&&Yc!==null){Gl!==null&&(Gl.status="fulfilled");var i=Yc;Yc=null,Hl=0,Gl=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function bC(i,a){var u=[],g={status:"pending",value:null,reason:null,then:function(A){u.push(A)}};return i.then(function(){g.status="fulfilled",g.value=a;for(var A=0;A<u.length;A++)(0,u[A])(a)},function(A){for(g.status="rejected",g.reason=A,A=0;A<u.length;A++)(0,u[A])(void 0)}),g}var rp=me.S;me.S=function(i,a){zy=yn(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&IC(i,a),rp!==null&&rp(i,a)};var nl=ee(null);function i0(){var i=nl.current;return i!==null?i:gn.pooledCache}function Sh(i,a){a===null?Pe(nl,nl.current):Pe(nl,a.pool)}function sp(){var i=i0();return i===null?null:{parent:Zn._currentValue,pool:i}}var ql=Error(s(460)),r0=Error(s(474)),Ih=Error(s(542)),bh={then:function(){}};function ap(i){return i=i.status,i==="fulfilled"||i==="rejected"}function op(i,a,u){switch(u=i[u],u===void 0?i.push(a):u!==a&&(a.then(Vi,Vi),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,cp(i),i;default:if(typeof a.status=="string")a.then(Vi,Vi);else{if(i=gn,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=a,i.status="pending",i.then(function(g){if(a.status==="pending"){var A=a;A.status="fulfilled",A.value=g}},function(g){if(a.status==="pending"){var A=a;A.status="rejected",A.reason=g}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,cp(i),i}throw rl=a,ql}}function il(i){try{var a=i._init;return a(i._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(rl=u,ql):u}}var rl=null;function lp(){if(rl===null)throw Error(s(459));var i=rl;return rl=null,i}function cp(i){if(i===ql||i===Ih)throw Error(s(483))}var Yl=null,Xc=0;function Rh(i){var a=Xc;return Xc+=1,Yl===null&&(Yl=[]),op(Yl,i,a)}function Wc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Nh(i,a){throw a.$$typeof===L?Error(s(525)):(i=Object.prototype.toString.call(a),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function up(i){function a(ie,te){if(i){var ce=ie.deletions;ce===null?(ie.deletions=[te],ie.flags|=16):ce.push(te)}}function u(ie,te){if(!i)return null;for(;te!==null;)a(ie,te),te=te.sibling;return null}function g(ie){for(var te=new Map;ie!==null;)ie.key!==null?te.set(ie.key,ie):te.set(ie.index,ie),ie=ie.sibling;return te}function A(ie,te){return ie=sa(ie,te),ie.index=0,ie.sibling=null,ie}function C(ie,te,ce){return ie.index=ce,i?(ce=ie.alternate,ce!==null?(ce=ce.index,ce<te?(ie.flags|=67108866,te):ce):(ie.flags|=67108866,te)):(ie.flags|=1048576,te)}function N(ie){return i&&ie.alternate===null&&(ie.flags|=67108866),ie}function k(ie,te,ce,Te){return te===null||te.tag!==6?(te=Yd(ce,ie.mode,Te),te.return=ie,te):(te=A(te,ce),te.return=ie,te)}function Q(ie,te,ce,Te){var Ze=ce.type;return Ze===Z?we(ie,te,ce.props.children,Te,ce.key):te!==null&&(te.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===F&&il(Ze)===te.type)?(te=A(te,ce.props),Wc(te,ce),te.return=ie,te):(te=xh(ce.type,ce.key,ce.props,null,ie.mode,Te),Wc(te,ce),te.return=ie,te)}function ue(ie,te,ce,Te){return te===null||te.tag!==4||te.stateNode.containerInfo!==ce.containerInfo||te.stateNode.implementation!==ce.implementation?(te=Xd(ce,ie.mode,Te),te.return=ie,te):(te=A(te,ce.children||[]),te.return=ie,te)}function we(ie,te,ce,Te,Ze){return te===null||te.tag!==7?(te=Jo(ce,ie.mode,Te,Ze),te.return=ie,te):(te=A(te,ce),te.return=ie,te)}function Ce(ie,te,ce){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return te=Yd(""+te,ie.mode,ce),te.return=ie,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case j:return ce=xh(te.type,te.key,te.props,null,ie.mode,ce),Wc(ce,te),ce.return=ie,ce;case W:return te=Xd(te,ie.mode,ce),te.return=ie,te;case F:return te=il(te),Ce(ie,te,ce)}if(he(te)||X(te))return te=Jo(te,ie.mode,ce,null),te.return=ie,te;if(typeof te.then=="function")return Ce(ie,Rh(te),ce);if(te.$$typeof===ne)return Ce(ie,vh(ie,te),ce);Nh(ie,te)}return null}function fe(ie,te,ce,Te){var Ze=te!==null?te.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return Ze!==null?null:k(ie,te,""+ce,Te);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case j:return ce.key===Ze?Q(ie,te,ce,Te):null;case W:return ce.key===Ze?ue(ie,te,ce,Te):null;case F:return ce=il(ce),fe(ie,te,ce,Te)}if(he(ce)||X(ce))return Ze!==null?null:we(ie,te,ce,Te,null);if(typeof ce.then=="function")return fe(ie,te,Rh(ce),Te);if(ce.$$typeof===ne)return fe(ie,te,vh(ie,ce),Te);Nh(ie,ce)}return null}function _e(ie,te,ce,Te,Ze){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return ie=ie.get(ce)||null,k(te,ie,""+Te,Ze);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case j:return ie=ie.get(Te.key===null?ce:Te.key)||null,Q(te,ie,Te,Ze);case W:return ie=ie.get(Te.key===null?ce:Te.key)||null,ue(te,ie,Te,Ze);case F:return Te=il(Te),_e(ie,te,ce,Te,Ze)}if(he(Te)||X(Te))return ie=ie.get(ce)||null,we(te,ie,Te,Ze,null);if(typeof Te.then=="function")return _e(ie,te,ce,Rh(Te),Ze);if(Te.$$typeof===ne)return _e(ie,te,ce,vh(te,Te),Ze);Nh(te,Te)}return null}function qe(ie,te,ce,Te){for(var Ze=null,Qt=null,Xe=te,yt=te=0,Pt=null;Xe!==null&&yt<ce.length;yt++){Xe.index>yt?(Pt=Xe,Xe=null):Pt=Xe.sibling;var Kt=fe(ie,Xe,ce[yt],Te);if(Kt===null){Xe===null&&(Xe=Pt);break}i&&Xe&&Kt.alternate===null&&a(ie,Xe),te=C(Kt,te,yt),Qt===null?Ze=Kt:Qt.sibling=Kt,Qt=Kt,Xe=Pt}if(yt===ce.length)return u(ie,Xe),Ft&&aa(ie,yt),Ze;if(Xe===null){for(;yt<ce.length;yt++)Xe=Ce(ie,ce[yt],Te),Xe!==null&&(te=C(Xe,te,yt),Qt===null?Ze=Xe:Qt.sibling=Xe,Qt=Xe);return Ft&&aa(ie,yt),Ze}for(Xe=g(Xe);yt<ce.length;yt++)Pt=_e(Xe,ie,yt,ce[yt],Te),Pt!==null&&(i&&Pt.alternate!==null&&Xe.delete(Pt.key===null?yt:Pt.key),te=C(Pt,te,yt),Qt===null?Ze=Pt:Qt.sibling=Pt,Qt=Pt);return i&&Xe.forEach(function(ho){return a(ie,ho)}),Ft&&aa(ie,yt),Ze}function nt(ie,te,ce,Te){if(ce==null)throw Error(s(151));for(var Ze=null,Qt=null,Xe=te,yt=te=0,Pt=null,Kt=ce.next();Xe!==null&&!Kt.done;yt++,Kt=ce.next()){Xe.index>yt?(Pt=Xe,Xe=null):Pt=Xe.sibling;var ho=fe(ie,Xe,Kt.value,Te);if(ho===null){Xe===null&&(Xe=Pt);break}i&&Xe&&ho.alternate===null&&a(ie,Xe),te=C(ho,te,yt),Qt===null?Ze=ho:Qt.sibling=ho,Qt=ho,Xe=Pt}if(Kt.done)return u(ie,Xe),Ft&&aa(ie,yt),Ze;if(Xe===null){for(;!Kt.done;yt++,Kt=ce.next())Kt=Ce(ie,Kt.value,Te),Kt!==null&&(te=C(Kt,te,yt),Qt===null?Ze=Kt:Qt.sibling=Kt,Qt=Kt);return Ft&&aa(ie,yt),Ze}for(Xe=g(Xe);!Kt.done;yt++,Kt=ce.next())Kt=_e(Xe,ie,yt,Kt.value,Te),Kt!==null&&(i&&Kt.alternate!==null&&Xe.delete(Kt.key===null?yt:Kt.key),te=C(Kt,te,yt),Qt===null?Ze=Kt:Qt.sibling=Kt,Qt=Kt);return i&&Xe.forEach(function(Vv){return a(ie,Vv)}),Ft&&aa(ie,yt),Ze}function un(ie,te,ce,Te){if(typeof ce=="object"&&ce!==null&&ce.type===Z&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case j:e:{for(var Ze=ce.key;te!==null;){if(te.key===Ze){if(Ze=ce.type,Ze===Z){if(te.tag===7){u(ie,te.sibling),Te=A(te,ce.props.children),Te.return=ie,ie=Te;break e}}else if(te.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===F&&il(Ze)===te.type){u(ie,te.sibling),Te=A(te,ce.props),Wc(Te,ce),Te.return=ie,ie=Te;break e}u(ie,te);break}else a(ie,te);te=te.sibling}ce.type===Z?(Te=Jo(ce.props.children,ie.mode,Te,ce.key),Te.return=ie,ie=Te):(Te=xh(ce.type,ce.key,ce.props,null,ie.mode,Te),Wc(Te,ce),Te.return=ie,ie=Te)}return N(ie);case W:e:{for(Ze=ce.key;te!==null;){if(te.key===Ze)if(te.tag===4&&te.stateNode.containerInfo===ce.containerInfo&&te.stateNode.implementation===ce.implementation){u(ie,te.sibling),Te=A(te,ce.children||[]),Te.return=ie,ie=Te;break e}else{u(ie,te);break}else a(ie,te);te=te.sibling}Te=Xd(ce,ie.mode,Te),Te.return=ie,ie=Te}return N(ie);case F:return ce=il(ce),un(ie,te,ce,Te)}if(he(ce))return qe(ie,te,ce,Te);if(X(ce)){if(Ze=X(ce),typeof Ze!="function")throw Error(s(150));return ce=Ze.call(ce),nt(ie,te,ce,Te)}if(typeof ce.then=="function")return un(ie,te,Rh(ce),Te);if(ce.$$typeof===ne)return un(ie,te,vh(ie,ce),Te);Nh(ie,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,te!==null&&te.tag===6?(u(ie,te.sibling),Te=A(te,ce),Te.return=ie,ie=Te):(u(ie,te),Te=Yd(ce,ie.mode,Te),Te.return=ie,ie=Te),N(ie)):u(ie,te)}return function(ie,te,ce,Te){try{Xc=0;var Ze=un(ie,te,ce,Te);return Yl=null,Ze}catch(Xe){if(Xe===ql||Xe===Ih)throw Xe;var Qt=Ir(29,Xe,null,ie.mode);return Qt.lanes=Te,Qt.return=ie,Qt}}}var sl=up(!0),hp=up(!1),Wa=!1;function s0(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function a0(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Qa(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ka(i,a,u){var g=i.updateQueue;if(g===null)return null;if(g=g.shared,(Zt&2)!==0){var A=g.pending;return A===null?a.next=a:(a.next=A.next,A.next=a),g.pending=a,a=wh(i),Wm(i,null,u),a}return Ah(i,g,a,u),wh(i)}function Qc(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var g=a.lanes;g&=i.pendingLanes,u|=g,a.lanes=u,Ar(i,u)}}function o0(i,a){var u=i.updateQueue,g=i.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var A=null,C=null;if(u=u.firstBaseUpdate,u!==null){do{var N={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};C===null?A=C=N:C=C.next=N,u=u.next}while(u!==null);C===null?A=C=a:C=C.next=a}else A=C=a;u={baseState:g.baseState,firstBaseUpdate:A,lastBaseUpdate:C,shared:g.shared,callbacks:g.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}var l0=!1;function Kc(){if(l0){var i=Gl;if(i!==null)throw i}}function Zc(i,a,u,g){l0=!1;var A=i.updateQueue;Wa=!1;var C=A.firstBaseUpdate,N=A.lastBaseUpdate,k=A.shared.pending;if(k!==null){A.shared.pending=null;var Q=k,ue=Q.next;Q.next=null,N===null?C=ue:N.next=ue,N=Q;var we=i.alternate;we!==null&&(we=we.updateQueue,k=we.lastBaseUpdate,k!==N&&(k===null?we.firstBaseUpdate=ue:k.next=ue,we.lastBaseUpdate=Q))}if(C!==null){var Ce=A.baseState;N=0,we=ue=Q=null,k=C;do{var fe=k.lane&-536870913,_e=fe!==k.lane;if(_e?(Lt&fe)===fe:(g&fe)===fe){fe!==0&&fe===Hl&&(l0=!0),we!==null&&(we=we.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var qe=i,nt=k;fe=a;var un=u;switch(nt.tag){case 1:if(qe=nt.payload,typeof qe=="function"){Ce=qe.call(un,Ce,fe);break e}Ce=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=nt.payload,fe=typeof qe=="function"?qe.call(un,Ce,fe):qe,fe==null)break e;Ce=b({},Ce,fe);break e;case 2:Wa=!0}}fe=k.callback,fe!==null&&(i.flags|=64,_e&&(i.flags|=8192),_e=A.callbacks,_e===null?A.callbacks=[fe]:_e.push(fe))}else _e={lane:fe,tag:k.tag,payload:k.payload,callback:k.callback,next:null},we===null?(ue=we=_e,Q=Ce):we=we.next=_e,N|=fe;if(k=k.next,k===null){if(k=A.shared.pending,k===null)break;_e=k,k=_e.next,_e.next=null,A.lastBaseUpdate=_e,A.shared.pending=null}}while(!0);we===null&&(Q=Ce),A.baseState=Q,A.firstBaseUpdate=ue,A.lastBaseUpdate=we,C===null&&(A.shared.lanes=0),to|=N,i.lanes=N,i.memoizedState=Ce}}function fp(i,a){if(typeof i!="function")throw Error(s(191,i));i.call(a)}function dp(i,a){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)fp(u[i],a)}var Xl=ee(null),Oh=ee(0);function gp(i,a){i=ya,Pe(Oh,i),Pe(Xl,a),ya=i|a.baseLanes}function c0(){Pe(Oh,ya),Pe(Xl,Xl.current)}function u0(){ya=Oh.current,Ae(Xl),Ae(Oh)}var br=ee(null),$r=null;function Za(i){var a=i.alternate;Pe(Wn,Wn.current&1),Pe(br,i),$r===null&&(a===null||Xl.current!==null||a.memoizedState!==null)&&($r=i)}function h0(i){Pe(Wn,Wn.current),Pe(br,i),$r===null&&($r=i)}function mp(i){i.tag===22?(Pe(Wn,Wn.current),Pe(br,i),$r===null&&($r=i)):Ja()}function Ja(){Pe(Wn,Wn.current),Pe(br,br.current)}function Rr(i){Ae(br),$r===i&&($r=null),Ae(Wn)}var Wn=ee(0);function Dh(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||y1(u)||E1(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ca=0,gt=null,ln=null,Jn=null,Mh=!1,Wl=!1,al=!1,Lh=0,Jc=0,Ql=null,RC=0;function Fn(){throw Error(s(321))}function f0(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!m(i[u],a[u]))return!1;return!0}function d0(i,a,u,g,A,C){return ca=C,gt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,me.H=i===null||i.memoizedState===null?Jp:b0,al=!1,C=u(g,A),al=!1,Wl&&(C=yp(a,u,g,A)),pp(i),C}function pp(i){me.H=tu;var a=ln!==null&&ln.next!==null;if(ca=0,Jn=ln=gt=null,Mh=!1,Jc=0,Ql=null,a)throw Error(s(300));i===null||$n||(i=i.dependencies,i!==null&&Ch(i)&&($n=!0))}function yp(i,a,u,g){gt=i;var A=0;do{if(Wl&&(Ql=null),Jc=0,Wl=!1,25<=A)throw Error(s(301));if(A+=1,Jn=ln=null,i.updateQueue!=null){var C=i.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}me.H=$p,C=a(u,g)}while(Wl);return C}function NC(){var i=me.H,a=i.useState()[0];return a=typeof a.then=="function"?$c(a):a,i=i.useState()[0],(ln!==null?ln.memoizedState:null)!==i&&(gt.flags|=1024),a}function g0(){var i=Lh!==0;return Lh=0,i}function m0(i,a,u){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~u}function p0(i){if(Mh){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Mh=!1}ca=0,Jn=ln=gt=null,Wl=!1,Jc=Lh=0,Ql=null}function er(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jn===null?gt.memoizedState=Jn=i:Jn=Jn.next=i,Jn}function Qn(){if(ln===null){var i=gt.alternate;i=i!==null?i.memoizedState:null}else i=ln.next;var a=Jn===null?gt.memoizedState:Jn.next;if(a!==null)Jn=a,ln=i;else{if(i===null)throw gt.alternate===null?Error(s(467)):Error(s(310));ln=i,i={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},Jn===null?gt.memoizedState=Jn=i:Jn=Jn.next=i}return Jn}function Ph(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $c(i){var a=Jc;return Jc+=1,Ql===null&&(Ql=[]),i=op(Ql,i,a),a=gt,(Jn===null?a.memoizedState:Jn.next)===null&&(a=a.alternate,me.H=a===null||a.memoizedState===null?Jp:b0),i}function kh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return $c(i);if(i.$$typeof===ne)return Ri(i)}throw Error(s(438,String(i)))}function y0(i){var a=null,u=gt.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var g=gt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(a={data:g.data.map(function(A){return A.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=Ph(),gt.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(i),g=0;g<i;g++)u[g]=J;return a.index++,u}function ua(i,a){return typeof a=="function"?a(i):a}function Bh(i){var a=Qn();return E0(a,ln,i)}function E0(i,a,u){var g=i.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=u;var A=i.baseQueue,C=g.pending;if(C!==null){if(A!==null){var N=A.next;A.next=C.next,C.next=N}a.baseQueue=A=C,g.pending=null}if(C=i.baseState,A===null)i.memoizedState=C;else{a=A.next;var k=N=null,Q=null,ue=a,we=!1;do{var Ce=ue.lane&-536870913;if(Ce!==ue.lane?(Lt&Ce)===Ce:(ca&Ce)===Ce){var fe=ue.revertLane;if(fe===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),Ce===Hl&&(we=!0);else if((ca&fe)===fe){ue=ue.next,fe===Hl&&(we=!0);continue}else Ce={lane:0,revertLane:ue.revertLane,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},Q===null?(k=Q=Ce,N=C):Q=Q.next=Ce,gt.lanes|=fe,to|=fe;Ce=ue.action,al&&u(C,Ce),C=ue.hasEagerState?ue.eagerState:u(C,Ce)}else fe={lane:Ce,revertLane:ue.revertLane,gesture:ue.gesture,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},Q===null?(k=Q=fe,N=C):Q=Q.next=fe,gt.lanes|=Ce,to|=Ce;ue=ue.next}while(ue!==null&&ue!==a);if(Q===null?N=C:Q.next=k,!m(C,i.memoizedState)&&($n=!0,we&&(u=Gl,u!==null)))throw u;i.memoizedState=C,i.baseState=N,i.baseQueue=Q,g.lastRenderedState=C}return A===null&&(g.lanes=0),[i.memoizedState,g.dispatch]}function _0(i){var a=Qn(),u=a.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=i;var g=u.dispatch,A=u.pending,C=a.memoizedState;if(A!==null){u.pending=null;var N=A=A.next;do C=i(C,N.action),N=N.next;while(N!==A);m(C,a.memoizedState)||($n=!0),a.memoizedState=C,a.baseQueue===null&&(a.baseState=C),u.lastRenderedState=C}return[C,g]}function Ep(i,a,u){var g=gt,A=Qn(),C=Ft;if(C){if(u===void 0)throw Error(s(407));u=u()}else u=a();var N=!m((ln||A).memoizedState,u);if(N&&(A.memoizedState=u,$n=!0),A=A.queue,x0(wp.bind(null,g,A,i),[i]),A.getSnapshot!==a||N||Jn!==null&&Jn.memoizedState.tag&1){if(g.flags|=2048,Kl(9,{destroy:void 0},Ap.bind(null,g,A,u,a),null),gn===null)throw Error(s(349));C||(ca&127)!==0||_p(g,a,u)}return u}function _p(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=gt.updateQueue,a===null?(a=Ph(),gt.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function Ap(i,a,u,g){a.value=u,a.getSnapshot=g,xp(a)&&Tp(i)}function wp(i,a,u){return u(function(){xp(a)&&Tp(i)})}function xp(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!m(i,u)}catch{return!0}}function Tp(i){var a=Zo(i,2);a!==null&&fr(a,i,2)}function A0(i){var a=er();if(typeof i=="function"){var u=i;if(i=u(),al){Xt(!0);try{u()}finally{Xt(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:i},a}function Cp(i,a,u,g){return i.baseState=u,E0(i,ln,typeof g=="function"?g:ua)}function OC(i,a,u,g,A){if(Fh(i))throw Error(s(485));if(i=a.action,i!==null){var C={payload:A,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){C.listeners.push(N)}};me.T!==null?u(!0):C.isTransition=!1,g(C),u=a.pending,u===null?(C.next=a.pending=C,vp(a,C)):(C.next=u.next,a.pending=u.next=C)}}function vp(i,a){var u=a.action,g=a.payload,A=i.state;if(a.isTransition){var C=me.T,N={};me.T=N;try{var k=u(A,g),Q=me.S;Q!==null&&Q(N,k),Sp(i,a,k)}catch(ue){w0(i,a,ue)}finally{C!==null&&N.types!==null&&(C.types=N.types),me.T=C}}else try{C=u(A,g),Sp(i,a,C)}catch(ue){w0(i,a,ue)}}function Sp(i,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(g){Ip(i,a,g)},function(g){return w0(i,a,g)}):Ip(i,a,u)}function Ip(i,a,u){a.status="fulfilled",a.value=u,bp(a),i.state=u,a=i.pending,a!==null&&(u=a.next,u===a?i.pending=null:(u=u.next,a.next=u,vp(i,u)))}function w0(i,a,u){var g=i.pending;if(i.pending=null,g!==null){g=g.next;do a.status="rejected",a.reason=u,bp(a),a=a.next;while(a!==g)}i.action=null}function bp(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Rp(i,a){return a}function Np(i,a){if(Ft){var u=gn.formState;if(u!==null){e:{var g=gt;if(Ft){if(_n){t:{for(var A=_n,C=Jr;A.nodeType!==8;){if(!C){A=null;break t}if(A=es(A.nextSibling),A===null){A=null;break t}}C=A.data,A=C==="F!"||C==="F"?A:null}if(A){_n=es(A.nextSibling),g=A.data==="F!";break e}}Ya(g)}g=!1}g&&(a=u[0])}}return u=er(),u.memoizedState=u.baseState=a,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rp,lastRenderedState:a},u.queue=g,u=Qp.bind(null,gt,g),g.dispatch=u,g=A0(!1),C=I0.bind(null,gt,!1,g.queue),g=er(),A={state:a,dispatch:null,action:i,pending:null},g.queue=A,u=OC.bind(null,gt,A,C,u),A.dispatch=u,g.memoizedState=i,[a,u,!1]}function Op(i){var a=Qn();return Dp(a,ln,i)}function Dp(i,a,u){if(a=E0(i,a,Rp)[0],i=Bh(ua)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var g=$c(a)}catch(N){throw N===ql?Ih:N}else g=a;a=Qn();var A=a.queue,C=A.dispatch;return u!==a.memoizedState&&(gt.flags|=2048,Kl(9,{destroy:void 0},DC.bind(null,A,u),null)),[g,C,i]}function DC(i,a){i.action=a}function Mp(i){var a=Qn(),u=ln;if(u!==null)return Dp(a,u,i);Qn(),a=a.memoizedState,u=Qn();var g=u.queue.dispatch;return u.memoizedState=i,[a,g,!1]}function Kl(i,a,u,g){return i={tag:i,create:u,deps:g,inst:a,next:null},a=gt.updateQueue,a===null&&(a=Ph(),gt.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=i.next=i:(g=u.next,u.next=i,i.next=g,a.lastEffect=i),i}function Lp(){return Qn().memoizedState}function Uh(i,a,u,g){var A=er();gt.flags|=i,A.memoizedState=Kl(1|a,{destroy:void 0},u,g===void 0?null:g)}function Vh(i,a,u,g){var A=Qn();g=g===void 0?null:g;var C=A.memoizedState.inst;ln!==null&&g!==null&&f0(g,ln.memoizedState.deps)?A.memoizedState=Kl(a,C,u,g):(gt.flags|=i,A.memoizedState=Kl(1|a,C,u,g))}function Pp(i,a){Uh(8390656,8,i,a)}function x0(i,a){Vh(2048,8,i,a)}function MC(i){gt.flags|=4;var a=gt.updateQueue;if(a===null)a=Ph(),gt.updateQueue=a,a.events=[i];else{var u=a.events;u===null?a.events=[i]:u.push(i)}}function kp(i){var a=Qn().memoizedState;return MC({ref:a,nextImpl:i}),function(){if((Zt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function Bp(i,a){return Vh(4,2,i,a)}function Up(i,a){return Vh(4,4,i,a)}function Vp(i,a){if(typeof a=="function"){i=i();var u=a(i);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Fp(i,a,u){u=u!=null?u.concat([i]):null,Vh(4,4,Vp.bind(null,a,i),u)}function T0(){}function zp(i,a){var u=Qn();a=a===void 0?null:a;var g=u.memoizedState;return a!==null&&f0(a,g[1])?g[0]:(u.memoizedState=[i,a],i)}function jp(i,a){var u=Qn();a=a===void 0?null:a;var g=u.memoizedState;if(a!==null&&f0(a,g[1]))return g[0];if(g=i(),al){Xt(!0);try{i()}finally{Xt(!1)}}return u.memoizedState=[g,a],g}function C0(i,a,u){return u===void 0||(ca&1073741824)!==0&&(Lt&261930)===0?i.memoizedState=a:(i.memoizedState=u,i=Hy(),gt.lanes|=i,to|=i,u)}function Hp(i,a,u,g){return m(u,a)?u:Xl.current!==null?(i=C0(i,u,g),m(i,a)||($n=!0),i):(ca&42)===0||(ca&1073741824)!==0&&(Lt&261930)===0?($n=!0,i.memoizedState=u):(i=Hy(),gt.lanes|=i,to|=i,a)}function Gp(i,a,u,g,A){var C=xe.p;xe.p=C!==0&&8>C?C:8;var N=me.T,k={};me.T=k,I0(i,!1,a,u);try{var Q=A(),ue=me.S;if(ue!==null&&ue(k,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var we=bC(Q,g);eu(i,a,we,Dr(i))}else eu(i,a,g,Dr(i))}catch(Ce){eu(i,a,{then:function(){},status:"rejected",reason:Ce},Dr())}finally{xe.p=C,N!==null&&k.types!==null&&(N.types=k.types),me.T=N}}function LC(){}function v0(i,a,u,g){if(i.tag!==5)throw Error(s(476));var A=qp(i).queue;Gp(i,A,a,Ye,u===null?LC:function(){return Yp(i),u(g)})}function qp(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:Ye,baseState:Ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:Ye},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:u},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function Yp(i){var a=qp(i);a.next===null&&(a=i.alternate.memoizedState),eu(i,a.next.queue,{},Dr())}function S0(){return Ri(yu)}function Xp(){return Qn().memoizedState}function Wp(){return Qn().memoizedState}function PC(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var u=Dr();i=Qa(u);var g=Ka(a,i,u);g!==null&&(fr(g,a,u),Qc(g,a,u)),a={cache:t0()},i.payload=a;return}a=a.return}}function kC(i,a,u){var g=Dr();u={lane:g,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Fh(i)?Kp(a,u):(u=Gd(i,a,u,g),u!==null&&(fr(u,i,g),Zp(u,a,g)))}function Qp(i,a,u){var g=Dr();eu(i,a,u,g)}function eu(i,a,u,g){var A={lane:g,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Fh(i))Kp(a,A);else{var C=i.alternate;if(i.lanes===0&&(C===null||C.lanes===0)&&(C=a.lastRenderedReducer,C!==null))try{var N=a.lastRenderedState,k=C(N,u);if(A.hasEagerState=!0,A.eagerState=k,m(k,N))return Ah(i,a,A,0),gn===null&&_h(),!1}catch{}if(u=Gd(i,a,A,g),u!==null)return fr(u,i,g),Zp(u,a,g),!0}return!1}function I0(i,a,u,g){if(g={lane:2,revertLane:s1(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Fh(i)){if(a)throw Error(s(479))}else a=Gd(i,u,g,2),a!==null&&fr(a,i,2)}function Fh(i){var a=i.alternate;return i===gt||a!==null&&a===gt}function Kp(i,a){Wl=Mh=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function Zp(i,a,u){if((u&4194048)!==0){var g=a.lanes;g&=i.pendingLanes,u|=g,a.lanes=u,Ar(i,u)}}var tu={readContext:Ri,use:kh,useCallback:Fn,useContext:Fn,useEffect:Fn,useImperativeHandle:Fn,useLayoutEffect:Fn,useInsertionEffect:Fn,useMemo:Fn,useReducer:Fn,useRef:Fn,useState:Fn,useDebugValue:Fn,useDeferredValue:Fn,useTransition:Fn,useSyncExternalStore:Fn,useId:Fn,useHostTransitionStatus:Fn,useFormState:Fn,useActionState:Fn,useOptimistic:Fn,useMemoCache:Fn,useCacheRefresh:Fn};tu.useEffectEvent=Fn;var Jp={readContext:Ri,use:kh,useCallback:function(i,a){return er().memoizedState=[i,a===void 0?null:a],i},useContext:Ri,useEffect:Pp,useImperativeHandle:function(i,a,u){u=u!=null?u.concat([i]):null,Uh(4194308,4,Vp.bind(null,a,i),u)},useLayoutEffect:function(i,a){return Uh(4194308,4,i,a)},useInsertionEffect:function(i,a){Uh(4,2,i,a)},useMemo:function(i,a){var u=er();a=a===void 0?null:a;var g=i();if(al){Xt(!0);try{i()}finally{Xt(!1)}}return u.memoizedState=[g,a],g},useReducer:function(i,a,u){var g=er();if(u!==void 0){var A=u(a);if(al){Xt(!0);try{u(a)}finally{Xt(!1)}}}else A=a;return g.memoizedState=g.baseState=A,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:A},g.queue=i,i=i.dispatch=kC.bind(null,gt,i),[g.memoizedState,i]},useRef:function(i){var a=er();return i={current:i},a.memoizedState=i},useState:function(i){i=A0(i);var a=i.queue,u=Qp.bind(null,gt,a);return a.dispatch=u,[i.memoizedState,u]},useDebugValue:T0,useDeferredValue:function(i,a){var u=er();return C0(u,i,a)},useTransition:function(){var i=A0(!1);return i=Gp.bind(null,gt,i.queue,!0,!1),er().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,u){var g=gt,A=er();if(Ft){if(u===void 0)throw Error(s(407));u=u()}else{if(u=a(),gn===null)throw Error(s(349));(Lt&127)!==0||_p(g,a,u)}A.memoizedState=u;var C={value:u,getSnapshot:a};return A.queue=C,Pp(wp.bind(null,g,C,i),[i]),g.flags|=2048,Kl(9,{destroy:void 0},Ap.bind(null,g,C,u,a),null),u},useId:function(){var i=er(),a=gn.identifierPrefix;if(Ft){var u=Os,g=Ns;u=(g&~(1<<32-rt(g)-1)).toString(32)+u,a="_"+a+"R_"+u,u=Lh++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=RC++,a="_"+a+"r_"+u.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:S0,useFormState:Np,useActionState:Np,useOptimistic:function(i){var a=er();a.memoizedState=a.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=I0.bind(null,gt,!0,u),u.dispatch=a,[i,a]},useMemoCache:y0,useCacheRefresh:function(){return er().memoizedState=PC.bind(null,gt)},useEffectEvent:function(i){var a=er(),u={impl:i};return a.memoizedState=u,function(){if((Zt&2)!==0)throw Error(s(440));return u.impl.apply(void 0,arguments)}}},b0={readContext:Ri,use:kh,useCallback:zp,useContext:Ri,useEffect:x0,useImperativeHandle:Fp,useInsertionEffect:Bp,useLayoutEffect:Up,useMemo:jp,useReducer:Bh,useRef:Lp,useState:function(){return Bh(ua)},useDebugValue:T0,useDeferredValue:function(i,a){var u=Qn();return Hp(u,ln.memoizedState,i,a)},useTransition:function(){var i=Bh(ua)[0],a=Qn().memoizedState;return[typeof i=="boolean"?i:$c(i),a]},useSyncExternalStore:Ep,useId:Xp,useHostTransitionStatus:S0,useFormState:Op,useActionState:Op,useOptimistic:function(i,a){var u=Qn();return Cp(u,ln,i,a)},useMemoCache:y0,useCacheRefresh:Wp};b0.useEffectEvent=kp;var $p={readContext:Ri,use:kh,useCallback:zp,useContext:Ri,useEffect:x0,useImperativeHandle:Fp,useInsertionEffect:Bp,useLayoutEffect:Up,useMemo:jp,useReducer:_0,useRef:Lp,useState:function(){return _0(ua)},useDebugValue:T0,useDeferredValue:function(i,a){var u=Qn();return ln===null?C0(u,i,a):Hp(u,ln.memoizedState,i,a)},useTransition:function(){var i=_0(ua)[0],a=Qn().memoizedState;return[typeof i=="boolean"?i:$c(i),a]},useSyncExternalStore:Ep,useId:Xp,useHostTransitionStatus:S0,useFormState:Mp,useActionState:Mp,useOptimistic:function(i,a){var u=Qn();return ln!==null?Cp(u,ln,i,a):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:y0,useCacheRefresh:Wp};$p.useEffectEvent=kp;function R0(i,a,u,g){a=i.memoizedState,u=u(g,a),u=u==null?a:b({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var N0={enqueueSetState:function(i,a,u){i=i._reactInternals;var g=Dr(),A=Qa(g);A.payload=a,u!=null&&(A.callback=u),a=Ka(i,A,g),a!==null&&(fr(a,i,g),Qc(a,i,g))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var g=Dr(),A=Qa(g);A.tag=1,A.payload=a,u!=null&&(A.callback=u),a=Ka(i,A,g),a!==null&&(fr(a,i,g),Qc(a,i,g))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=Dr(),g=Qa(u);g.tag=2,a!=null&&(g.callback=a),a=Ka(i,g,u),a!==null&&(fr(a,i,u),Qc(a,i,u))}};function ey(i,a,u,g,A,C,N){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(g,C,N):a.prototype&&a.prototype.isPureReactComponent?!E(u,g)||!E(A,C):!0}function ty(i,a,u,g){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,g),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,g),a.state!==i&&N0.enqueueReplaceState(a,a.state,null)}function ol(i,a){var u=a;if("ref"in a){u={};for(var g in a)g!=="ref"&&(u[g]=a[g])}if(i=i.defaultProps){u===a&&(u=b({},u));for(var A in i)u[A]===void 0&&(u[A]=i[A])}return u}function ny(i){Eh(i)}function iy(i){console.error(i)}function ry(i){Eh(i)}function zh(i,a){try{var u=i.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(g){setTimeout(function(){throw g})}}function sy(i,a,u){try{var g=i.onCaughtError;g(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function O0(i,a,u){return u=Qa(u),u.tag=3,u.payload={element:null},u.callback=function(){zh(i,a)},u}function ay(i){return i=Qa(i),i.tag=3,i}function oy(i,a,u,g){var A=u.type.getDerivedStateFromError;if(typeof A=="function"){var C=g.value;i.payload=function(){return A(C)},i.callback=function(){sy(a,u,g)}}var N=u.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(i.callback=function(){sy(a,u,g),typeof A!="function"&&(no===null?no=new Set([this]):no.add(this));var k=g.stack;this.componentDidCatch(g.value,{componentStack:k!==null?k:""})})}function BC(i,a,u,g,A){if(u.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(a=u.alternate,a!==null&&jl(a,u,A,!0),u=br.current,u!==null){switch(u.tag){case 31:case 13:return $r===null?$h():u.alternate===null&&zn===0&&(zn=3),u.flags&=-257,u.flags|=65536,u.lanes=A,g===bh?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([g]):a.add(g),n1(i,g,A)),!1;case 22:return u.flags|=65536,g===bh?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([g])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([g]):u.add(g)),n1(i,g,A)),!1}throw Error(s(435,u.tag))}return n1(i,g,A),$h(),!1}if(Ft)return a=br.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=A,g!==Kd&&(i=Error(s(422),{cause:g}),Gc(Qr(i,u)))):(g!==Kd&&(a=Error(s(423),{cause:g}),Gc(Qr(a,u))),i=i.current.alternate,i.flags|=65536,A&=-A,i.lanes|=A,g=Qr(g,u),A=O0(i.stateNode,g,A),o0(i,A),zn!==4&&(zn=2)),!1;var C=Error(s(520),{cause:g});if(C=Qr(C,u),cu===null?cu=[C]:cu.push(C),zn!==4&&(zn=2),a===null)return!0;g=Qr(g,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,i=A&-A,u.lanes|=i,i=O0(u.stateNode,g,i),o0(u,i),!1;case 1:if(a=u.type,C=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(no===null||!no.has(C))))return u.flags|=65536,A&=-A,u.lanes|=A,A=ay(A),oy(A,i,u,g),o0(u,A),!1}u=u.return}while(u!==null);return!1}var D0=Error(s(461)),$n=!1;function Ni(i,a,u,g){a.child=i===null?hp(a,null,u,g):sl(a,i.child,u,g)}function ly(i,a,u,g,A){u=u.render;var C=a.ref;if("ref"in g){var N={};for(var k in g)k!=="ref"&&(N[k]=g[k])}else N=g;return tl(a),g=d0(i,a,u,N,C,A),k=g0(),i!==null&&!$n?(m0(i,a,A),ha(i,a,A)):(Ft&&k&&Wd(a),a.flags|=1,Ni(i,a,g,A),a.child)}function cy(i,a,u,g,A){if(i===null){var C=u.type;return typeof C=="function"&&!qd(C)&&C.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=C,uy(i,a,C,g,A)):(i=xh(u.type,null,g,a,a.mode,A),i.ref=a.ref,i.return=a,a.child=i)}if(C=i.child,!F0(i,A)){var N=C.memoizedProps;if(u=u.compare,u=u!==null?u:E,u(N,g)&&i.ref===a.ref)return ha(i,a,A)}return a.flags|=1,i=sa(C,g),i.ref=a.ref,i.return=a,a.child=i}function uy(i,a,u,g,A){if(i!==null){var C=i.memoizedProps;if(E(C,g)&&i.ref===a.ref)if($n=!1,a.pendingProps=g=C,F0(i,A))(i.flags&131072)!==0&&($n=!0);else return a.lanes=i.lanes,ha(i,a,A)}return M0(i,a,u,g,A)}function hy(i,a,u,g){var A=g.children,C=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((a.flags&128)!==0){if(C=C!==null?C.baseLanes|u:u,i!==null){for(g=a.child=i.child,A=0;g!==null;)A=A|g.lanes|g.childLanes,g=g.sibling;g=A&~C}else g=0,a.child=null;return fy(i,a,C,u,g)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Sh(a,C!==null?C.cachePool:null),C!==null?gp(a,C):c0(),mp(a);else return g=a.lanes=536870912,fy(i,a,C!==null?C.baseLanes|u:u,u,g)}else C!==null?(Sh(a,C.cachePool),gp(a,C),Ja(),a.memoizedState=null):(i!==null&&Sh(a,null),c0(),Ja());return Ni(i,a,A,u),a.child}function nu(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function fy(i,a,u,g,A){var C=i0();return C=C===null?null:{parent:Zn._currentValue,pool:C},a.memoizedState={baseLanes:u,cachePool:C},i!==null&&Sh(a,null),c0(),mp(a),i!==null&&jl(i,a,g,!0),a.childLanes=A,null}function jh(i,a){return a=Gh({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function dy(i,a,u){return sl(a,i.child,null,u),i=jh(a,a.pendingProps),i.flags|=2,Rr(a),a.memoizedState=null,i}function UC(i,a,u){var g=a.pendingProps,A=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(Ft){if(g.mode==="hidden")return i=jh(a,g),a.lanes=536870912,nu(null,i);if(h0(a),(i=_n)?(i=v2(i,Jr),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Ga!==null?{id:Ns,overflow:Os}:null,retryLane:536870912,hydrationErrors:null},u=Km(i),u.return=a,a.child=u,bi=a,_n=null)):i=null,i===null)throw Ya(a);return a.lanes=536870912,null}return jh(a,g)}var C=i.memoizedState;if(C!==null){var N=C.dehydrated;if(h0(a),A)if(a.flags&256)a.flags&=-257,a=dy(i,a,u);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(s(558));else if($n||jl(i,a,u,!1),A=(u&i.childLanes)!==0,$n||A){if(g=gn,g!==null&&(N=Xs(g,u),N!==0&&N!==C.retryLane))throw C.retryLane=N,Zo(i,N),fr(g,i,N),D0;$h(),a=dy(i,a,u)}else i=C.treeContext,_n=es(N.nextSibling),bi=a,Ft=!0,qa=null,Jr=!1,i!==null&&$m(a,i),a=jh(a,g),a.flags|=4096;return a}return i=sa(i.child,{mode:g.mode,children:g.children}),i.ref=a.ref,a.child=i,i.return=a,i}function Hh(i,a){var u=a.ref;if(u===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(s(284));(i===null||i.ref!==u)&&(a.flags|=4194816)}}function M0(i,a,u,g,A){return tl(a),u=d0(i,a,u,g,void 0,A),g=g0(),i!==null&&!$n?(m0(i,a,A),ha(i,a,A)):(Ft&&g&&Wd(a),a.flags|=1,Ni(i,a,u,A),a.child)}function gy(i,a,u,g,A,C){return tl(a),a.updateQueue=null,u=yp(a,g,u,A),pp(i),g=g0(),i!==null&&!$n?(m0(i,a,C),ha(i,a,C)):(Ft&&g&&Wd(a),a.flags|=1,Ni(i,a,u,C),a.child)}function my(i,a,u,g,A){if(tl(a),a.stateNode===null){var C=Ul,N=u.contextType;typeof N=="object"&&N!==null&&(C=Ri(N)),C=new u(g,C),a.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=N0,a.stateNode=C,C._reactInternals=a,C=a.stateNode,C.props=g,C.state=a.memoizedState,C.refs={},s0(a),N=u.contextType,C.context=typeof N=="object"&&N!==null?Ri(N):Ul,C.state=a.memoizedState,N=u.getDerivedStateFromProps,typeof N=="function"&&(R0(a,u,N,g),C.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(N=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),N!==C.state&&N0.enqueueReplaceState(C,C.state,null),Zc(a,g,C,A),Kc(),C.state=a.memoizedState),typeof C.componentDidMount=="function"&&(a.flags|=4194308),g=!0}else if(i===null){C=a.stateNode;var k=a.memoizedProps,Q=ol(u,k);C.props=Q;var ue=C.context,we=u.contextType;N=Ul,typeof we=="object"&&we!==null&&(N=Ri(we));var Ce=u.getDerivedStateFromProps;we=typeof Ce=="function"||typeof C.getSnapshotBeforeUpdate=="function",k=a.pendingProps!==k,we||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(k||ue!==N)&&ty(a,C,g,N),Wa=!1;var fe=a.memoizedState;C.state=fe,Zc(a,g,C,A),Kc(),ue=a.memoizedState,k||fe!==ue||Wa?(typeof Ce=="function"&&(R0(a,u,Ce,g),ue=a.memoizedState),(Q=Wa||ey(a,u,Q,g,fe,ue,N))?(we||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(a.flags|=4194308)):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=g,a.memoizedState=ue),C.props=g,C.state=ue,C.context=N,g=Q):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),g=!1)}else{C=a.stateNode,a0(i,a),N=a.memoizedProps,we=ol(u,N),C.props=we,Ce=a.pendingProps,fe=C.context,ue=u.contextType,Q=Ul,typeof ue=="object"&&ue!==null&&(Q=Ri(ue)),k=u.getDerivedStateFromProps,(ue=typeof k=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(N!==Ce||fe!==Q)&&ty(a,C,g,Q),Wa=!1,fe=a.memoizedState,C.state=fe,Zc(a,g,C,A),Kc();var _e=a.memoizedState;N!==Ce||fe!==_e||Wa||i!==null&&i.dependencies!==null&&Ch(i.dependencies)?(typeof k=="function"&&(R0(a,u,k,g),_e=a.memoizedState),(we=Wa||ey(a,u,we,g,fe,_e,Q)||i!==null&&i.dependencies!==null&&Ch(i.dependencies))?(ue||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(g,_e,Q),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(g,_e,Q)),typeof C.componentDidUpdate=="function"&&(a.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof C.componentDidUpdate!="function"||N===i.memoizedProps&&fe===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&fe===i.memoizedState||(a.flags|=1024),a.memoizedProps=g,a.memoizedState=_e),C.props=g,C.state=_e,C.context=Q,g=we):(typeof C.componentDidUpdate!="function"||N===i.memoizedProps&&fe===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&fe===i.memoizedState||(a.flags|=1024),g=!1)}return C=g,Hh(i,a),g=(a.flags&128)!==0,C||g?(C=a.stateNode,u=g&&typeof u.getDerivedStateFromError!="function"?null:C.render(),a.flags|=1,i!==null&&g?(a.child=sl(a,i.child,null,A),a.child=sl(a,null,u,A)):Ni(i,a,u,A),a.memoizedState=C.state,i=a.child):i=ha(i,a,A),i}function py(i,a,u,g){return $o(),a.flags|=256,Ni(i,a,u,g),a.child}var L0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function P0(i){return{baseLanes:i,cachePool:sp()}}function k0(i,a,u){return i=i!==null?i.childLanes&~u:0,a&&(i|=Or),i}function yy(i,a,u){var g=a.pendingProps,A=!1,C=(a.flags&128)!==0,N;if((N=C)||(N=i!==null&&i.memoizedState===null?!1:(Wn.current&2)!==0),N&&(A=!0,a.flags&=-129),N=(a.flags&32)!==0,a.flags&=-33,i===null){if(Ft){if(A?Za(a):Ja(),(i=_n)?(i=v2(i,Jr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Ga!==null?{id:Ns,overflow:Os}:null,retryLane:536870912,hydrationErrors:null},u=Km(i),u.return=a,a.child=u,bi=a,_n=null)):i=null,i===null)throw Ya(a);return E1(i)?a.lanes=32:a.lanes=536870912,null}var k=g.children;return g=g.fallback,A?(Ja(),A=a.mode,k=Gh({mode:"hidden",children:k},A),g=Jo(g,A,u,null),k.return=a,g.return=a,k.sibling=g,a.child=k,g=a.child,g.memoizedState=P0(u),g.childLanes=k0(i,N,u),a.memoizedState=L0,nu(null,g)):(Za(a),B0(a,k))}var Q=i.memoizedState;if(Q!==null&&(k=Q.dehydrated,k!==null)){if(C)a.flags&256?(Za(a),a.flags&=-257,a=U0(i,a,u)):a.memoizedState!==null?(Ja(),a.child=i.child,a.flags|=128,a=null):(Ja(),k=g.fallback,A=a.mode,g=Gh({mode:"visible",children:g.children},A),k=Jo(k,A,u,null),k.flags|=2,g.return=a,k.return=a,g.sibling=k,a.child=g,sl(a,i.child,null,u),g=a.child,g.memoizedState=P0(u),g.childLanes=k0(i,N,u),a.memoizedState=L0,a=nu(null,g));else if(Za(a),E1(k)){if(N=k.nextSibling&&k.nextSibling.dataset,N)var ue=N.dgst;N=ue,g=Error(s(419)),g.stack="",g.digest=N,Gc({value:g,source:null,stack:null}),a=U0(i,a,u)}else if($n||jl(i,a,u,!1),N=(u&i.childLanes)!==0,$n||N){if(N=gn,N!==null&&(g=Xs(N,u),g!==0&&g!==Q.retryLane))throw Q.retryLane=g,Zo(i,g),fr(N,i,g),D0;y1(k)||$h(),a=U0(i,a,u)}else y1(k)?(a.flags|=192,a.child=i.child,a=null):(i=Q.treeContext,_n=es(k.nextSibling),bi=a,Ft=!0,qa=null,Jr=!1,i!==null&&$m(a,i),a=B0(a,g.children),a.flags|=4096);return a}return A?(Ja(),k=g.fallback,A=a.mode,Q=i.child,ue=Q.sibling,g=sa(Q,{mode:"hidden",children:g.children}),g.subtreeFlags=Q.subtreeFlags&65011712,ue!==null?k=sa(ue,k):(k=Jo(k,A,u,null),k.flags|=2),k.return=a,g.return=a,g.sibling=k,a.child=g,nu(null,g),g=a.child,k=i.child.memoizedState,k===null?k=P0(u):(A=k.cachePool,A!==null?(Q=Zn._currentValue,A=A.parent!==Q?{parent:Q,pool:Q}:A):A=sp(),k={baseLanes:k.baseLanes|u,cachePool:A}),g.memoizedState=k,g.childLanes=k0(i,N,u),a.memoizedState=L0,nu(i.child,g)):(Za(a),u=i.child,i=u.sibling,u=sa(u,{mode:"visible",children:g.children}),u.return=a,u.sibling=null,i!==null&&(N=a.deletions,N===null?(a.deletions=[i],a.flags|=16):N.push(i)),a.child=u,a.memoizedState=null,u)}function B0(i,a){return a=Gh({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function Gh(i,a){return i=Ir(22,i,null,a),i.lanes=0,i}function U0(i,a,u){return sl(a,i.child,null,u),i=B0(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Ey(i,a,u){i.lanes|=a;var g=i.alternate;g!==null&&(g.lanes|=a),$d(i.return,a,u)}function V0(i,a,u,g,A,C){var N=i.memoizedState;N===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:A,treeForkCount:C}:(N.isBackwards=a,N.rendering=null,N.renderingStartTime=0,N.last=g,N.tail=u,N.tailMode=A,N.treeForkCount=C)}function _y(i,a,u){var g=a.pendingProps,A=g.revealOrder,C=g.tail;g=g.children;var N=Wn.current,k=(N&2)!==0;if(k?(N=N&1|2,a.flags|=128):N&=1,Pe(Wn,N),Ni(i,a,g,u),g=Ft?Hc:0,!k&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ey(i,u,a);else if(i.tag===19)Ey(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(A){case"forwards":for(u=a.child,A=null;u!==null;)i=u.alternate,i!==null&&Dh(i)===null&&(A=u),u=u.sibling;u=A,u===null?(A=a.child,a.child=null):(A=u.sibling,u.sibling=null),V0(a,!1,A,u,C,g);break;case"backwards":case"unstable_legacy-backwards":for(u=null,A=a.child,a.child=null;A!==null;){if(i=A.alternate,i!==null&&Dh(i)===null){a.child=A;break}i=A.sibling,A.sibling=u,u=A,A=i}V0(a,!0,u,null,C,g);break;case"together":V0(a,!1,null,null,void 0,g);break;default:a.memoizedState=null}return a.child}function ha(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),to|=a.lanes,(u&a.childLanes)===0)if(i!==null){if(jl(i,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(s(153));if(a.child!==null){for(i=a.child,u=sa(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=sa(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function F0(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Ch(i)))}function VC(i,a,u){switch(a.tag){case 3:xt(a,a.stateNode.containerInfo),Xa(a,Zn,i.memoizedState.cache),$o();break;case 27:case 5:mr(a);break;case 4:xt(a,a.stateNode.containerInfo);break;case 10:Xa(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,h0(a),null;break;case 13:var g=a.memoizedState;if(g!==null)return g.dehydrated!==null?(Za(a),a.flags|=128,null):(u&a.child.childLanes)!==0?yy(i,a,u):(Za(a),i=ha(i,a,u),i!==null?i.sibling:null);Za(a);break;case 19:var A=(i.flags&128)!==0;if(g=(u&a.childLanes)!==0,g||(jl(i,a,u,!1),g=(u&a.childLanes)!==0),A){if(g)return _y(i,a,u);a.flags|=128}if(A=a.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Pe(Wn,Wn.current),g)break;return null;case 22:return a.lanes=0,hy(i,a,u,a.pendingProps);case 24:Xa(a,Zn,i.memoizedState.cache)}return ha(i,a,u)}function Ay(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps)$n=!0;else{if(!F0(i,u)&&(a.flags&128)===0)return $n=!1,VC(i,a,u);$n=(i.flags&131072)!==0}else $n=!1,Ft&&(a.flags&1048576)!==0&&Jm(a,Hc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var g=a.pendingProps;if(i=il(a.elementType),a.type=i,typeof i=="function")qd(i)?(g=ol(i,g),a.tag=1,a=my(null,a,i,g,u)):(a.tag=0,a=M0(null,a,i,g,u));else{if(i!=null){var A=i.$$typeof;if(A===Re){a.tag=11,a=ly(null,a,i,g,u);break e}else if(A===U){a.tag=14,a=cy(null,a,i,g,u);break e}}throw a=We(i)||i,Error(s(306,a,""))}}return a;case 0:return M0(i,a,a.type,a.pendingProps,u);case 1:return g=a.type,A=ol(g,a.pendingProps),my(i,a,g,A,u);case 3:e:{if(xt(a,a.stateNode.containerInfo),i===null)throw Error(s(387));g=a.pendingProps;var C=a.memoizedState;A=C.element,a0(i,a),Zc(a,g,null,u);var N=a.memoizedState;if(g=N.cache,Xa(a,Zn,g),g!==C.cache&&e0(a,[Zn],u,!0),Kc(),g=N.element,C.isDehydrated)if(C={element:g,isDehydrated:!1,cache:N.cache},a.updateQueue.baseState=C,a.memoizedState=C,a.flags&256){a=py(i,a,g,u);break e}else if(g!==A){A=Qr(Error(s(424)),a),Gc(A),a=py(i,a,g,u);break e}else for(i=a.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,_n=es(i.firstChild),bi=a,Ft=!0,qa=null,Jr=!0,u=hp(a,null,g,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if($o(),g===A){a=ha(i,a,u);break e}Ni(i,a,g,u)}a=a.child}return a;case 26:return Hh(i,a),i===null?(u=O2(a.type,null,a.pendingProps,null))?a.memoizedState=u:Ft||(u=a.type,i=a.pendingProps,g=of(Le.current).createElement(u),g[Tn]=a,g[Ht]=i,Oi(g,u,i),Cn(g),a.stateNode=g):a.memoizedState=O2(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return mr(a),i===null&&Ft&&(g=a.stateNode=b2(a.type,a.pendingProps,Le.current),bi=a,Jr=!0,A=_n,ao(a.type)?(_1=A,_n=es(g.firstChild)):_n=A),Ni(i,a,a.pendingProps.children,u),Hh(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&Ft&&((A=g=_n)&&(g=mv(g,a.type,a.pendingProps,Jr),g!==null?(a.stateNode=g,bi=a,_n=es(g.firstChild),Jr=!1,A=!0):A=!1),A||Ya(a)),mr(a),A=a.type,C=a.pendingProps,N=i!==null?i.memoizedProps:null,g=C.children,g1(A,C)?g=null:N!==null&&g1(A,N)&&(a.flags|=32),a.memoizedState!==null&&(A=d0(i,a,NC,null,null,u),yu._currentValue=A),Hh(i,a),Ni(i,a,g,u),a.child;case 6:return i===null&&Ft&&((i=u=_n)&&(u=pv(u,a.pendingProps,Jr),u!==null?(a.stateNode=u,bi=a,_n=null,i=!0):i=!1),i||Ya(a)),null;case 13:return yy(i,a,u);case 4:return xt(a,a.stateNode.containerInfo),g=a.pendingProps,i===null?a.child=sl(a,null,g,u):Ni(i,a,g,u),a.child;case 11:return ly(i,a,a.type,a.pendingProps,u);case 7:return Ni(i,a,a.pendingProps,u),a.child;case 8:return Ni(i,a,a.pendingProps.children,u),a.child;case 12:return Ni(i,a,a.pendingProps.children,u),a.child;case 10:return g=a.pendingProps,Xa(a,a.type,g.value),Ni(i,a,g.children,u),a.child;case 9:return A=a.type._context,g=a.pendingProps.children,tl(a),A=Ri(A),g=g(A),a.flags|=1,Ni(i,a,g,u),a.child;case 14:return cy(i,a,a.type,a.pendingProps,u);case 15:return uy(i,a,a.type,a.pendingProps,u);case 19:return _y(i,a,u);case 31:return UC(i,a,u);case 22:return hy(i,a,u,a.pendingProps);case 24:return tl(a),g=Ri(Zn),i===null?(A=i0(),A===null&&(A=gn,C=t0(),A.pooledCache=C,C.refCount++,C!==null&&(A.pooledCacheLanes|=u),A=C),a.memoizedState={parent:g,cache:A},s0(a),Xa(a,Zn,A)):((i.lanes&u)!==0&&(a0(i,a),Zc(a,null,null,u),Kc()),A=i.memoizedState,C=a.memoizedState,A.parent!==g?(A={parent:g,cache:g},a.memoizedState=A,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=A),Xa(a,Zn,g)):(g=C.cache,Xa(a,Zn,g),g!==A.cache&&e0(a,[Zn],u,!0))),Ni(i,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function fa(i){i.flags|=4}function z0(i,a,u,g,A){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(A&335544128)===A)if(i.stateNode.complete)i.flags|=8192;else if(Xy())i.flags|=8192;else throw rl=bh,r0}else i.flags&=-16777217}function wy(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!k2(a))if(Xy())i.flags|=8192;else throw rl=bh,r0}function qh(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Yn():536870912,i.lanes|=a,ec|=a)}function iu(i,a){if(!Ft)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:g.sibling=null}}function An(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,g=0;if(a)for(var A=i.child;A!==null;)u|=A.lanes|A.childLanes,g|=A.subtreeFlags&65011712,g|=A.flags&65011712,A.return=i,A=A.sibling;else for(A=i.child;A!==null;)u|=A.lanes|A.childLanes,g|=A.subtreeFlags,g|=A.flags,A.return=i,A=A.sibling;return i.subtreeFlags|=g,i.childLanes=u,a}function FC(i,a,u){var g=a.pendingProps;switch(Qd(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(a),null;case 1:return An(a),null;case 3:return u=a.stateNode,g=null,i!==null&&(g=i.memoizedState.cache),a.memoizedState.cache!==g&&(a.flags|=2048),la(Zn),Jt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(zl(a)?fa(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Zd())),An(a),null;case 26:var A=a.type,C=a.memoizedState;return i===null?(fa(a),C!==null?(An(a),wy(a,C)):(An(a),z0(a,A,null,g,u))):C?C!==i.memoizedState?(fa(a),An(a),wy(a,C)):(An(a),a.flags&=-16777217):(i=i.memoizedProps,i!==g&&fa(a),An(a),z0(a,A,i,g,u)),null;case 27:if(qn(a),u=Le.current,A=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==g&&fa(a);else{if(!g){if(a.stateNode===null)throw Error(s(166));return An(a),null}i=ke.current,zl(a)?ep(a):(i=b2(A,g,u),a.stateNode=i,fa(a))}return An(a),null;case 5:if(qn(a),A=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==g&&fa(a);else{if(!g){if(a.stateNode===null)throw Error(s(166));return An(a),null}if(C=ke.current,zl(a))ep(a);else{var N=of(Le.current);switch(C){case 1:C=N.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:C=N.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":C=N.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":C=N.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":C=N.createElement("div"),C.innerHTML="<script><\/script>",C=C.removeChild(C.firstChild);break;case"select":C=typeof g.is=="string"?N.createElement("select",{is:g.is}):N.createElement("select"),g.multiple?C.multiple=!0:g.size&&(C.size=g.size);break;default:C=typeof g.is=="string"?N.createElement(A,{is:g.is}):N.createElement(A)}}C[Tn]=a,C[Ht]=g;e:for(N=a.child;N!==null;){if(N.tag===5||N.tag===6)C.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===a)break e;for(;N.sibling===null;){if(N.return===null||N.return===a)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}a.stateNode=C;e:switch(Oi(C,A,g),A){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&fa(a)}}return An(a),z0(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,u),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==g&&fa(a);else{if(typeof g!="string"&&a.stateNode===null)throw Error(s(166));if(i=Le.current,zl(a)){if(i=a.stateNode,u=a.memoizedProps,g=null,A=bi,A!==null)switch(A.tag){case 27:case 5:g=A.memoizedProps}i[Tn]=a,i=!!(i.nodeValue===u||g!==null&&g.suppressHydrationWarning===!0||y2(i.nodeValue,u)),i||Ya(a,!0)}else i=of(i).createTextNode(g),i[Tn]=a,a.stateNode=i}return An(a),null;case 31:if(u=a.memoizedState,i===null||i.memoizedState!==null){if(g=zl(a),u!==null){if(i===null){if(!g)throw Error(s(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Tn]=a}else $o(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;An(a),i=!1}else u=Zd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=u),i=!0;if(!i)return a.flags&256?(Rr(a),a):(Rr(a),null);if((a.flags&128)!==0)throw Error(s(558))}return An(a),null;case 13:if(g=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(A=zl(a),g!==null&&g.dehydrated!==null){if(i===null){if(!A)throw Error(s(318));if(A=a.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(s(317));A[Tn]=a}else $o(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;An(a),A=!1}else A=Zd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=A),A=!0;if(!A)return a.flags&256?(Rr(a),a):(Rr(a),null)}return Rr(a),(a.flags&128)!==0?(a.lanes=u,a):(u=g!==null,i=i!==null&&i.memoizedState!==null,u&&(g=a.child,A=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(A=g.alternate.memoizedState.cachePool.pool),C=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(C=g.memoizedState.cachePool.pool),C!==A&&(g.flags|=2048)),u!==i&&u&&(a.child.flags|=8192),qh(a,a.updateQueue),An(a),null);case 4:return Jt(),i===null&&c1(a.stateNode.containerInfo),An(a),null;case 10:return la(a.type),An(a),null;case 19:if(Ae(Wn),g=a.memoizedState,g===null)return An(a),null;if(A=(a.flags&128)!==0,C=g.rendering,C===null)if(A)iu(g,!1);else{if(zn!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(C=Dh(i),C!==null){for(a.flags|=128,iu(g,!1),i=C.updateQueue,a.updateQueue=i,qh(a,i),a.subtreeFlags=0,i=u,u=a.child;u!==null;)Qm(u,i),u=u.sibling;return Pe(Wn,Wn.current&1|2),Ft&&aa(a,g.treeForkCount),a.child}i=i.sibling}g.tail!==null&&yn()>Kh&&(a.flags|=128,A=!0,iu(g,!1),a.lanes=4194304)}else{if(!A)if(i=Dh(C),i!==null){if(a.flags|=128,A=!0,i=i.updateQueue,a.updateQueue=i,qh(a,i),iu(g,!0),g.tail===null&&g.tailMode==="hidden"&&!C.alternate&&!Ft)return An(a),null}else 2*yn()-g.renderingStartTime>Kh&&u!==536870912&&(a.flags|=128,A=!0,iu(g,!1),a.lanes=4194304);g.isBackwards?(C.sibling=a.child,a.child=C):(i=g.last,i!==null?i.sibling=C:a.child=C,g.last=C)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=yn(),i.sibling=null,u=Wn.current,Pe(Wn,A?u&1|2:u&1),Ft&&aa(a,g.treeForkCount),i):(An(a),null);case 22:case 23:return Rr(a),u0(),g=a.memoizedState!==null,i!==null?i.memoizedState!==null!==g&&(a.flags|=8192):g&&(a.flags|=8192),g?(u&536870912)!==0&&(a.flags&128)===0&&(An(a),a.subtreeFlags&6&&(a.flags|=8192)):An(a),u=a.updateQueue,u!==null&&qh(a,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),g=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(g=a.memoizedState.cachePool.pool),g!==u&&(a.flags|=2048),i!==null&&Ae(nl),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),la(Zn),An(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function zC(i,a){switch(Qd(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return la(Zn),Jt(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return qn(a),null;case 31:if(a.memoizedState!==null){if(Rr(a),a.alternate===null)throw Error(s(340));$o()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(Rr(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(s(340));$o()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Ae(Wn),null;case 4:return Jt(),null;case 10:return la(a.type),null;case 22:case 23:return Rr(a),u0(),i!==null&&Ae(nl),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return la(Zn),null;case 25:return null;default:return null}}function xy(i,a){switch(Qd(a),a.tag){case 3:la(Zn),Jt();break;case 26:case 27:case 5:qn(a);break;case 4:Jt();break;case 31:a.memoizedState!==null&&Rr(a);break;case 13:Rr(a);break;case 19:Ae(Wn);break;case 10:la(a.type);break;case 22:case 23:Rr(a),u0(),i!==null&&Ae(nl);break;case 24:la(Zn)}}function ru(i,a){try{var u=a.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var A=g.next;u=A;do{if((u.tag&i)===i){g=void 0;var C=u.create,N=u.inst;g=C(),N.destroy=g}u=u.next}while(u!==A)}}catch(k){sn(a,a.return,k)}}function $a(i,a,u){try{var g=a.updateQueue,A=g!==null?g.lastEffect:null;if(A!==null){var C=A.next;g=C;do{if((g.tag&i)===i){var N=g.inst,k=N.destroy;if(k!==void 0){N.destroy=void 0,A=a;var Q=u,ue=k;try{ue()}catch(we){sn(A,Q,we)}}}g=g.next}while(g!==C)}}catch(we){sn(a,a.return,we)}}function Ty(i){var a=i.updateQueue;if(a!==null){var u=i.stateNode;try{dp(a,u)}catch(g){sn(i,i.return,g)}}}function Cy(i,a,u){u.props=ol(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(g){sn(i,a,g)}}function su(i,a){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var g=i.stateNode;break;case 30:g=i.stateNode;break;default:g=i.stateNode}typeof u=="function"?i.refCleanup=u(g):u.current=g}}catch(A){sn(i,a,A)}}function Ds(i,a){var u=i.ref,g=i.refCleanup;if(u!==null)if(typeof g=="function")try{g()}catch(A){sn(i,a,A)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(A){sn(i,a,A)}else u.current=null}function vy(i){var a=i.type,u=i.memoizedProps,g=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&g.focus();break e;case"img":u.src?g.src=u.src:u.srcSet&&(g.srcset=u.srcSet)}}catch(A){sn(i,i.return,A)}}function j0(i,a,u){try{var g=i.stateNode;cv(g,i.type,u,a),g[Ht]=a}catch(A){sn(i,i.return,A)}}function Sy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ao(i.type)||i.tag===4}function H0(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Sy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ao(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function G0(i,a,u){var g=i.tag;if(g===5||g===6)i=i.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(i),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Vi));else if(g!==4&&(g===27&&ao(i.type)&&(u=i.stateNode,a=null),i=i.child,i!==null))for(G0(i,a,u),i=i.sibling;i!==null;)G0(i,a,u),i=i.sibling}function Yh(i,a,u){var g=i.tag;if(g===5||g===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(g!==4&&(g===27&&ao(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(Yh(i,a,u),i=i.sibling;i!==null;)Yh(i,a,u),i=i.sibling}function Iy(i){var a=i.stateNode,u=i.memoizedProps;try{for(var g=i.type,A=a.attributes;A.length;)a.removeAttributeNode(A[0]);Oi(a,g,u),a[Tn]=i,a[Ht]=u}catch(C){sn(i,i.return,C)}}var da=!1,ei=!1,q0=!1,by=typeof WeakSet=="function"?WeakSet:Set,gi=null;function jC(i,a){if(i=i.containerInfo,f1=gf,i=M(i),P(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var A=g.anchorOffset,C=g.focusNode;g=g.focusOffset;try{u.nodeType,C.nodeType}catch{u=null;break e}var N=0,k=-1,Q=-1,ue=0,we=0,Ce=i,fe=null;t:for(;;){for(var _e;Ce!==u||A!==0&&Ce.nodeType!==3||(k=N+A),Ce!==C||g!==0&&Ce.nodeType!==3||(Q=N+g),Ce.nodeType===3&&(N+=Ce.nodeValue.length),(_e=Ce.firstChild)!==null;)fe=Ce,Ce=_e;for(;;){if(Ce===i)break t;if(fe===u&&++ue===A&&(k=N),fe===C&&++we===g&&(Q=N),(_e=Ce.nextSibling)!==null)break;Ce=fe,fe=Ce.parentNode}Ce=_e}u=k===-1||Q===-1?null:{start:k,end:Q}}else u=null}u=u||{start:0,end:0}}else u=null;for(d1={focusedElem:i,selectionRange:u},gf=!1,gi=a;gi!==null;)if(a=gi,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,gi=i;else for(;gi!==null;){switch(a=gi,C=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(u=0;u<i.length;u++)A=i[u],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&C!==null){i=void 0,u=a,A=C.memoizedProps,C=C.memoizedState,g=u.stateNode;try{var qe=ol(u.type,A);i=g.getSnapshotBeforeUpdate(qe,C),g.__reactInternalSnapshotBeforeUpdate=i}catch(nt){sn(u,u.return,nt)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,u=i.nodeType,u===9)p1(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":p1(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=a.sibling,i!==null){i.return=a.return,gi=i;break}gi=a.return}}function Ry(i,a,u){var g=u.flags;switch(u.tag){case 0:case 11:case 15:ma(i,u),g&4&&ru(5,u);break;case 1:if(ma(i,u),g&4)if(i=u.stateNode,a===null)try{i.componentDidMount()}catch(N){sn(u,u.return,N)}else{var A=ol(u.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(A,a,i.__reactInternalSnapshotBeforeUpdate)}catch(N){sn(u,u.return,N)}}g&64&&Ty(u),g&512&&su(u,u.return);break;case 3:if(ma(i,u),g&64&&(i=u.updateQueue,i!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{dp(i,a)}catch(N){sn(u,u.return,N)}}break;case 27:a===null&&g&4&&Iy(u);case 26:case 5:ma(i,u),a===null&&g&4&&vy(u),g&512&&su(u,u.return);break;case 12:ma(i,u);break;case 31:ma(i,u),g&4&&Dy(i,u);break;case 13:ma(i,u),g&4&&My(i,u),g&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=ZC.bind(null,u),yv(i,u))));break;case 22:if(g=u.memoizedState!==null||da,!g){a=a!==null&&a.memoizedState!==null||ei,A=da;var C=ei;da=g,(ei=a)&&!C?pa(i,u,(u.subtreeFlags&8772)!==0):ma(i,u),da=A,ei=C}break;case 30:break;default:ma(i,u)}}function Ny(i){var a=i.alternate;a!==null&&(i.alternate=null,Ny(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Ti(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Rn=null,lr=!1;function ga(i,a,u){for(u=u.child;u!==null;)Oy(i,a,u),u=u.sibling}function Oy(i,a,u){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(Yt,u)}catch{}switch(u.tag){case 26:ei||Ds(u,a),ga(i,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:ei||Ds(u,a);var g=Rn,A=lr;ao(u.type)&&(Rn=u.stateNode,lr=!1),ga(i,a,u),gu(u.stateNode),Rn=g,lr=A;break;case 5:ei||Ds(u,a);case 6:if(g=Rn,A=lr,Rn=null,ga(i,a,u),Rn=g,lr=A,Rn!==null)if(lr)try{(Rn.nodeType===9?Rn.body:Rn.nodeName==="HTML"?Rn.ownerDocument.body:Rn).removeChild(u.stateNode)}catch(C){sn(u,a,C)}else try{Rn.removeChild(u.stateNode)}catch(C){sn(u,a,C)}break;case 18:Rn!==null&&(lr?(i=Rn,T2(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),lc(i)):T2(Rn,u.stateNode));break;case 4:g=Rn,A=lr,Rn=u.stateNode.containerInfo,lr=!0,ga(i,a,u),Rn=g,lr=A;break;case 0:case 11:case 14:case 15:$a(2,u,a),ei||$a(4,u,a),ga(i,a,u);break;case 1:ei||(Ds(u,a),g=u.stateNode,typeof g.componentWillUnmount=="function"&&Cy(u,a,g)),ga(i,a,u);break;case 21:ga(i,a,u);break;case 22:ei=(g=ei)||u.memoizedState!==null,ga(i,a,u),ei=g;break;default:ga(i,a,u)}}function Dy(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{lc(i)}catch(u){sn(a,a.return,u)}}}function My(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{lc(i)}catch(u){sn(a,a.return,u)}}function HC(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new by),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new by),a;default:throw Error(s(435,i.tag))}}function Xh(i,a){var u=HC(i);a.forEach(function(g){if(!u.has(g)){u.add(g);var A=JC.bind(null,i,g);g.then(A,A)}})}function cr(i,a){var u=a.deletions;if(u!==null)for(var g=0;g<u.length;g++){var A=u[g],C=i,N=a,k=N;e:for(;k!==null;){switch(k.tag){case 27:if(ao(k.type)){Rn=k.stateNode,lr=!1;break e}break;case 5:Rn=k.stateNode,lr=!1;break e;case 3:case 4:Rn=k.stateNode.containerInfo,lr=!0;break e}k=k.return}if(Rn===null)throw Error(s(160));Oy(C,N,A),Rn=null,lr=!1,C=A.alternate,C!==null&&(C.return=null),A.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Ly(a,i),a=a.sibling}var ds=null;function Ly(i,a){var u=i.alternate,g=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:cr(a,i),ur(i),g&4&&($a(3,i,i.return),ru(3,i),$a(5,i,i.return));break;case 1:cr(a,i),ur(i),g&512&&(ei||u===null||Ds(u,u.return)),g&64&&da&&(i=i.updateQueue,i!==null&&(g=i.callbacks,g!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?g:u.concat(g))));break;case 26:var A=ds;if(cr(a,i),ur(i),g&512&&(ei||u===null||Ds(u,u.return)),g&4){var C=u!==null?u.memoizedState:null;if(g=i.memoizedState,u===null)if(g===null)if(i.stateNode===null){e:{g=i.type,u=i.memoizedProps,A=A.ownerDocument||A;t:switch(g){case"title":C=A.getElementsByTagName("title")[0],(!C||C[Fr]||C[Tn]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=A.createElement(g),A.head.insertBefore(C,A.querySelector("head > title"))),Oi(C,g,u),C[Tn]=i,Cn(C),g=C;break e;case"link":var N=L2("link","href",A).get(g+(u.href||""));if(N){for(var k=0;k<N.length;k++)if(C=N[k],C.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&C.getAttribute("rel")===(u.rel==null?null:u.rel)&&C.getAttribute("title")===(u.title==null?null:u.title)&&C.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){N.splice(k,1);break t}}C=A.createElement(g),Oi(C,g,u),A.head.appendChild(C);break;case"meta":if(N=L2("meta","content",A).get(g+(u.content||""))){for(k=0;k<N.length;k++)if(C=N[k],C.getAttribute("content")===(u.content==null?null:""+u.content)&&C.getAttribute("name")===(u.name==null?null:u.name)&&C.getAttribute("property")===(u.property==null?null:u.property)&&C.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&C.getAttribute("charset")===(u.charSet==null?null:u.charSet)){N.splice(k,1);break t}}C=A.createElement(g),Oi(C,g,u),A.head.appendChild(C);break;default:throw Error(s(468,g))}C[Tn]=i,Cn(C),g=C}i.stateNode=g}else P2(A,i.type,i.stateNode);else i.stateNode=M2(A,g,i.memoizedProps);else C!==g?(C===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):C.count--,g===null?P2(A,i.type,i.stateNode):M2(A,g,i.memoizedProps)):g===null&&i.stateNode!==null&&j0(i,i.memoizedProps,u.memoizedProps)}break;case 27:cr(a,i),ur(i),g&512&&(ei||u===null||Ds(u,u.return)),u!==null&&g&4&&j0(i,i.memoizedProps,u.memoizedProps);break;case 5:if(cr(a,i),ur(i),g&512&&(ei||u===null||Ds(u,u.return)),i.flags&32){A=i.stateNode;try{Ui(A,"")}catch(qe){sn(i,i.return,qe)}}g&4&&i.stateNode!=null&&(A=i.memoizedProps,j0(i,A,u!==null?u.memoizedProps:A)),g&1024&&(q0=!0);break;case 6:if(cr(a,i),ur(i),g&4){if(i.stateNode===null)throw Error(s(162));g=i.memoizedProps,u=i.stateNode;try{u.nodeValue=g}catch(qe){sn(i,i.return,qe)}}break;case 3:if(uf=null,A=ds,ds=lf(a.containerInfo),cr(a,i),ds=A,ur(i),g&4&&u!==null&&u.memoizedState.isDehydrated)try{lc(a.containerInfo)}catch(qe){sn(i,i.return,qe)}q0&&(q0=!1,Py(i));break;case 4:g=ds,ds=lf(i.stateNode.containerInfo),cr(a,i),ur(i),ds=g;break;case 12:cr(a,i),ur(i);break;case 31:cr(a,i),ur(i),g&4&&(g=i.updateQueue,g!==null&&(i.updateQueue=null,Xh(i,g)));break;case 13:cr(a,i),ur(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Qh=yn()),g&4&&(g=i.updateQueue,g!==null&&(i.updateQueue=null,Xh(i,g)));break;case 22:A=i.memoizedState!==null;var Q=u!==null&&u.memoizedState!==null,ue=da,we=ei;if(da=ue||A,ei=we||Q,cr(a,i),ei=we,da=ue,ur(i),g&8192)e:for(a=i.stateNode,a._visibility=A?a._visibility&-2:a._visibility|1,A&&(u===null||Q||da||ei||ll(i)),u=null,a=i;;){if(a.tag===5||a.tag===26){if(u===null){Q=u=a;try{if(C=Q.stateNode,A)N=C.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{k=Q.stateNode;var Ce=Q.memoizedProps.style,fe=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;k.style.display=fe==null||typeof fe=="boolean"?"":(""+fe).trim()}}catch(qe){sn(Q,Q.return,qe)}}}else if(a.tag===6){if(u===null){Q=a;try{Q.stateNode.nodeValue=A?"":Q.memoizedProps}catch(qe){sn(Q,Q.return,qe)}}}else if(a.tag===18){if(u===null){Q=a;try{var _e=Q.stateNode;A?C2(_e,!0):C2(Q.stateNode,!1)}catch(qe){sn(Q,Q.return,qe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}g&4&&(g=i.updateQueue,g!==null&&(u=g.retryQueue,u!==null&&(g.retryQueue=null,Xh(i,u))));break;case 19:cr(a,i),ur(i),g&4&&(g=i.updateQueue,g!==null&&(i.updateQueue=null,Xh(i,g)));break;case 30:break;case 21:break;default:cr(a,i),ur(i)}}function ur(i){var a=i.flags;if(a&2){try{for(var u,g=i.return;g!==null;){if(Sy(g)){u=g;break}g=g.return}if(u==null)throw Error(s(160));switch(u.tag){case 27:var A=u.stateNode,C=H0(i);Yh(i,C,A);break;case 5:var N=u.stateNode;u.flags&32&&(Ui(N,""),u.flags&=-33);var k=H0(i);Yh(i,k,N);break;case 3:case 4:var Q=u.stateNode.containerInfo,ue=H0(i);G0(i,ue,Q);break;default:throw Error(s(161))}}catch(we){sn(i,i.return,we)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function Py(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;Py(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function ma(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Ry(i,a.alternate,a),a=a.sibling}function ll(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:$a(4,a,a.return),ll(a);break;case 1:Ds(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&Cy(a,a.return,u),ll(a);break;case 27:gu(a.stateNode);case 26:case 5:Ds(a,a.return),ll(a);break;case 22:a.memoizedState===null&&ll(a);break;case 30:ll(a);break;default:ll(a)}i=i.sibling}}function pa(i,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var g=a.alternate,A=i,C=a,N=C.flags;switch(C.tag){case 0:case 11:case 15:pa(A,C,u),ru(4,C);break;case 1:if(pa(A,C,u),g=C,A=g.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(ue){sn(g,g.return,ue)}if(g=C,A=g.updateQueue,A!==null){var k=g.stateNode;try{var Q=A.shared.hiddenCallbacks;if(Q!==null)for(A.shared.hiddenCallbacks=null,A=0;A<Q.length;A++)fp(Q[A],k)}catch(ue){sn(g,g.return,ue)}}u&&N&64&&Ty(C),su(C,C.return);break;case 27:Iy(C);case 26:case 5:pa(A,C,u),u&&g===null&&N&4&&vy(C),su(C,C.return);break;case 12:pa(A,C,u);break;case 31:pa(A,C,u),u&&N&4&&Dy(A,C);break;case 13:pa(A,C,u),u&&N&4&&My(A,C);break;case 22:C.memoizedState===null&&pa(A,C,u),su(C,C.return);break;case 30:break;default:pa(A,C,u)}a=a.sibling}}function Y0(i,a){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&qc(u))}function X0(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&qc(i))}function gs(i,a,u,g){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)ky(i,a,u,g),a=a.sibling}function ky(i,a,u,g){var A=a.flags;switch(a.tag){case 0:case 11:case 15:gs(i,a,u,g),A&2048&&ru(9,a);break;case 1:gs(i,a,u,g);break;case 3:gs(i,a,u,g),A&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&qc(i)));break;case 12:if(A&2048){gs(i,a,u,g),i=a.stateNode;try{var C=a.memoizedProps,N=C.id,k=C.onPostCommit;typeof k=="function"&&k(N,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Q){sn(a,a.return,Q)}}else gs(i,a,u,g);break;case 31:gs(i,a,u,g);break;case 13:gs(i,a,u,g);break;case 23:break;case 22:C=a.stateNode,N=a.alternate,a.memoizedState!==null?C._visibility&2?gs(i,a,u,g):au(i,a):C._visibility&2?gs(i,a,u,g):(C._visibility|=2,Zl(i,a,u,g,(a.subtreeFlags&10256)!==0||!1)),A&2048&&Y0(N,a);break;case 24:gs(i,a,u,g),A&2048&&X0(a.alternate,a);break;default:gs(i,a,u,g)}}function Zl(i,a,u,g,A){for(A=A&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var C=i,N=a,k=u,Q=g,ue=N.flags;switch(N.tag){case 0:case 11:case 15:Zl(C,N,k,Q,A),ru(8,N);break;case 23:break;case 22:var we=N.stateNode;N.memoizedState!==null?we._visibility&2?Zl(C,N,k,Q,A):au(C,N):(we._visibility|=2,Zl(C,N,k,Q,A)),A&&ue&2048&&Y0(N.alternate,N);break;case 24:Zl(C,N,k,Q,A),A&&ue&2048&&X0(N.alternate,N);break;default:Zl(C,N,k,Q,A)}a=a.sibling}}function au(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=i,g=a,A=g.flags;switch(g.tag){case 22:au(u,g),A&2048&&Y0(g.alternate,g);break;case 24:au(u,g),A&2048&&X0(g.alternate,g);break;default:au(u,g)}a=a.sibling}}var ou=8192;function Jl(i,a,u){if(i.subtreeFlags&ou)for(i=i.child;i!==null;)By(i,a,u),i=i.sibling}function By(i,a,u){switch(i.tag){case 26:Jl(i,a,u),i.flags&ou&&i.memoizedState!==null&&Rv(u,ds,i.memoizedState,i.memoizedProps);break;case 5:Jl(i,a,u);break;case 3:case 4:var g=ds;ds=lf(i.stateNode.containerInfo),Jl(i,a,u),ds=g;break;case 22:i.memoizedState===null&&(g=i.alternate,g!==null&&g.memoizedState!==null?(g=ou,ou=16777216,Jl(i,a,u),ou=g):Jl(i,a,u));break;default:Jl(i,a,u)}}function Uy(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function lu(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var g=a[u];gi=g,Fy(g,i)}Uy(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Vy(i),i=i.sibling}function Vy(i){switch(i.tag){case 0:case 11:case 15:lu(i),i.flags&2048&&$a(9,i,i.return);break;case 3:lu(i);break;case 12:lu(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,Wh(i)):lu(i);break;default:lu(i)}}function Wh(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var g=a[u];gi=g,Fy(g,i)}Uy(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:$a(8,a,a.return),Wh(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,Wh(a));break;default:Wh(a)}i=i.sibling}}function Fy(i,a){for(;gi!==null;){var u=gi;switch(u.tag){case 0:case 11:case 15:$a(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var g=u.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:qc(u.memoizedState.cache)}if(g=u.child,g!==null)g.return=u,gi=g;else e:for(u=i;gi!==null;){g=gi;var A=g.sibling,C=g.return;if(Ny(g),g===u){gi=null;break e}if(A!==null){A.return=C,gi=A;break e}gi=C}}}var GC={getCacheForType:function(i){var a=Ri(Zn),u=a.data.get(i);return u===void 0&&(u=i(),a.data.set(i,u)),u},cacheSignal:function(){return Ri(Zn).controller.signal}},qC=typeof WeakMap=="function"?WeakMap:Map,Zt=0,gn=null,Rt=null,Lt=0,rn=0,Nr=null,eo=!1,$l=!1,W0=!1,ya=0,zn=0,to=0,cl=0,Q0=0,Or=0,ec=0,cu=null,hr=null,K0=!1,Qh=0,zy=0,Kh=1/0,Zh=null,no=null,li=0,io=null,tc=null,Ea=0,Z0=0,J0=null,jy=null,uu=0,$0=null;function Dr(){return(Zt&2)!==0&&Lt!==0?Lt&-Lt:me.T!==null?s1():wi()}function Hy(){if(Or===0)if((Lt&536870912)===0||Ft){var i=At;At<<=1,(At&3932160)===0&&(At=262144),Or=i}else Or=536870912;return i=br.current,i!==null&&(i.flags|=32),Or}function fr(i,a,u){(i===gn&&(rn===2||rn===9)||i.cancelPendingCommit!==null)&&(nc(i,0),ro(i,Lt,Or,!1)),Vr(i,u),((Zt&2)===0||i!==gn)&&(i===gn&&((Zt&2)===0&&(cl|=u),zn===4&&ro(i,Lt,Or,!1)),Ms(i))}function Gy(i,a,u){if((Zt&6)!==0)throw Error(s(327));var g=!u&&(a&127)===0&&(a&i.expiredLanes)===0||On(i,a),A=g?WC(i,a):t1(i,a,!0),C=g;do{if(A===0){$l&&!g&&ro(i,a,0,!1);break}else{if(u=i.current.alternate,C&&!YC(u)){A=t1(i,a,!1),C=!1;continue}if(A===2){if(C=a,i.errorRecoveryDisabledLanes&C)var N=0;else N=i.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){a=N;e:{var k=i;A=cu;var Q=k.current.memoizedState.isDehydrated;if(Q&&(nc(k,N).flags|=256),N=t1(k,N,!1),N!==2){if(W0&&!Q){k.errorRecoveryDisabledLanes|=C,cl|=C,A=4;break e}C=hr,hr=A,C!==null&&(hr===null?hr=C:hr.push.apply(hr,C))}A=N}if(C=!1,A!==2)continue}}if(A===1){nc(i,0),ro(i,a,0,!0);break}e:{switch(g=i,C=A,C){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:ro(g,a,Or,!eo);break e;case 2:hr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(A=Qh+300-yn(),10<A)){if(ro(g,a,Or,!eo),_r(g,0,!0)!==0)break e;Ea=a,g.timeoutHandle=w2(qy.bind(null,g,u,hr,Zh,K0,a,Or,cl,ec,eo,C,"Throttled",-0,0),A);break e}qy(g,u,hr,Zh,K0,a,Or,cl,ec,eo,C,null,-0,0)}}break}while(!0);Ms(i)}function qy(i,a,u,g,A,C,N,k,Q,ue,we,Ce,fe,_e){if(i.timeoutHandle=-1,Ce=a.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vi},By(a,C,Ce);var qe=(C&62914560)===C?Qh-yn():(C&4194048)===C?zy-yn():0;if(qe=Nv(Ce,qe),qe!==null){Ea=C,i.cancelPendingCommit=qe($y.bind(null,i,a,C,u,g,A,N,k,Q,we,Ce,null,fe,_e)),ro(i,C,N,!ue);return}}$y(i,a,C,u,g,A,N,k,Q)}function YC(i){for(var a=i;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var g=0;g<u.length;g++){var A=u[g],C=A.getSnapshot;A=A.value;try{if(!m(C(),A))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ro(i,a,u,g){a&=~Q0,a&=~cl,i.suspendedLanes|=a,i.pingedLanes&=~a,g&&(i.warmLanes|=a),g=i.expirationTimes;for(var A=a;0<A;){var C=31-rt(A),N=1<<C;g[C]=-1,A&=~N}u!==0&&Ys(i,u,a)}function Jh(){return(Zt&6)===0?(hu(0),!1):!0}function e1(){if(Rt!==null){if(rn===0)var i=Rt.return;else i=Rt,oa=el=null,p0(i),Yl=null,Xc=0,i=Rt;for(;i!==null;)xy(i.alternate,i),i=i.return;Rt=null}}function nc(i,a){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,fv(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),Ea=0,e1(),gn=i,Rt=u=sa(i.current,null),Lt=a,rn=0,Nr=null,eo=!1,$l=On(i,a),W0=!1,ec=Or=Q0=cl=to=zn=0,hr=cu=null,K0=!1,(a&8)!==0&&(a|=a&32);var g=i.entangledLanes;if(g!==0)for(i=i.entanglements,g&=a;0<g;){var A=31-rt(g),C=1<<A;a|=i[A],g&=~C}return ya=a,_h(),u}function Yy(i,a){gt=null,me.H=tu,a===ql||a===Ih?(a=lp(),rn=3):a===r0?(a=lp(),rn=4):rn=a===D0?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Nr=a,Rt===null&&(zn=1,zh(i,Qr(a,i.current)))}function Xy(){var i=br.current;return i===null?!0:(Lt&4194048)===Lt?$r===null:(Lt&62914560)===Lt||(Lt&536870912)!==0?i===$r:!1}function Wy(){var i=me.H;return me.H=tu,i===null?tu:i}function Qy(){var i=me.A;return me.A=GC,i}function $h(){zn=4,eo||(Lt&4194048)!==Lt&&br.current!==null||($l=!0),(to&134217727)===0&&(cl&134217727)===0||gn===null||ro(gn,Lt,Or,!1)}function t1(i,a,u){var g=Zt;Zt|=2;var A=Wy(),C=Qy();(gn!==i||Lt!==a)&&(Zh=null,nc(i,a)),a=!1;var N=zn;e:do try{if(rn!==0&&Rt!==null){var k=Rt,Q=Nr;switch(rn){case 8:e1(),N=6;break e;case 3:case 2:case 9:case 6:br.current===null&&(a=!0);var ue=rn;if(rn=0,Nr=null,ic(i,k,Q,ue),u&&$l){N=0;break e}break;default:ue=rn,rn=0,Nr=null,ic(i,k,Q,ue)}}XC(),N=zn;break}catch(we){Yy(i,we)}while(!0);return a&&i.shellSuspendCounter++,oa=el=null,Zt=g,me.H=A,me.A=C,Rt===null&&(gn=null,Lt=0,_h()),N}function XC(){for(;Rt!==null;)Ky(Rt)}function WC(i,a){var u=Zt;Zt|=2;var g=Wy(),A=Qy();gn!==i||Lt!==a?(Zh=null,Kh=yn()+500,nc(i,a)):$l=On(i,a);e:do try{if(rn!==0&&Rt!==null){a=Rt;var C=Nr;t:switch(rn){case 1:rn=0,Nr=null,ic(i,a,C,1);break;case 2:case 9:if(ap(C)){rn=0,Nr=null,Zy(a);break}a=function(){rn!==2&&rn!==9||gn!==i||(rn=7),Ms(i)},C.then(a,a);break e;case 3:rn=7;break e;case 4:rn=5;break e;case 7:ap(C)?(rn=0,Nr=null,Zy(a)):(rn=0,Nr=null,ic(i,a,C,7));break;case 5:var N=null;switch(Rt.tag){case 26:N=Rt.memoizedState;case 5:case 27:var k=Rt;if(N?k2(N):k.stateNode.complete){rn=0,Nr=null;var Q=k.sibling;if(Q!==null)Rt=Q;else{var ue=k.return;ue!==null?(Rt=ue,ef(ue)):Rt=null}break t}}rn=0,Nr=null,ic(i,a,C,5);break;case 6:rn=0,Nr=null,ic(i,a,C,6);break;case 8:e1(),zn=6;break e;default:throw Error(s(462))}}QC();break}catch(we){Yy(i,we)}while(!0);return oa=el=null,me.H=g,me.A=A,Zt=u,Rt!==null?0:(gn=null,Lt=0,_h(),zn)}function QC(){for(;Rt!==null&&!Ma();)Ky(Rt)}function Ky(i){var a=Ay(i.alternate,i,ya);i.memoizedProps=i.pendingProps,a===null?ef(i):Rt=a}function Zy(i){var a=i,u=a.alternate;switch(a.tag){case 15:case 0:a=gy(u,a,a.pendingProps,a.type,void 0,Lt);break;case 11:a=gy(u,a,a.pendingProps,a.type.render,a.ref,Lt);break;case 5:p0(a);default:xy(u,a),a=Rt=Qm(a,ya),a=Ay(u,a,ya)}i.memoizedProps=i.pendingProps,a===null?ef(i):Rt=a}function ic(i,a,u,g){oa=el=null,p0(a),Yl=null,Xc=0;var A=a.return;try{if(BC(i,A,a,u,Lt)){zn=1,zh(i,Qr(u,i.current)),Rt=null;return}}catch(C){if(A!==null)throw Rt=A,C;zn=1,zh(i,Qr(u,i.current)),Rt=null;return}a.flags&32768?(Ft||g===1?i=!0:$l||(Lt&536870912)!==0?i=!1:(eo=i=!0,(g===2||g===9||g===3||g===6)&&(g=br.current,g!==null&&g.tag===13&&(g.flags|=16384))),Jy(a,i)):ef(a)}function ef(i){var a=i;do{if((a.flags&32768)!==0){Jy(a,eo);return}i=a.return;var u=FC(a.alternate,a,ya);if(u!==null){Rt=u;return}if(a=a.sibling,a!==null){Rt=a;return}Rt=a=i}while(a!==null);zn===0&&(zn=5)}function Jy(i,a){do{var u=zC(i.alternate,i);if(u!==null){u.flags&=32767,Rt=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(i=i.sibling,i!==null)){Rt=i;return}Rt=i=u}while(i!==null);zn=6,Rt=null}function $y(i,a,u,g,A,C,N,k,Q){i.cancelPendingCommit=null;do tf();while(li!==0);if((Zt&6)!==0)throw Error(s(327));if(a!==null){if(a===i.current)throw Error(s(177));if(C=a.lanes|a.childLanes,C|=Hd,nr(i,u,C,N,k,Q),i===gn&&(Rt=gn=null,Lt=0),tc=a,io=i,Ea=u,Z0=C,J0=A,jy=g,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,$C(Ei,function(){return r2(),null})):(i.callbackNode=null,i.callbackPriority=0),g=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||g){g=me.T,me.T=null,A=xe.p,xe.p=2,N=Zt,Zt|=4;try{jC(i,a,u)}finally{Zt=N,xe.p=A,me.T=g}}li=1,e2(),t2(),n2()}}function e2(){if(li===1){li=0;var i=io,a=tc,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=me.T,me.T=null;var g=xe.p;xe.p=2;var A=Zt;Zt|=4;try{Ly(a,i);var C=d1,N=M(i.containerInfo),k=C.focusedElem,Q=C.selectionRange;if(N!==k&&k&&k.ownerDocument&&R(k.ownerDocument.documentElement,k)){if(Q!==null&&P(k)){var ue=Q.start,we=Q.end;if(we===void 0&&(we=ue),"selectionStart"in k)k.selectionStart=ue,k.selectionEnd=Math.min(we,k.value.length);else{var Ce=k.ownerDocument||document,fe=Ce&&Ce.defaultView||window;if(fe.getSelection){var _e=fe.getSelection(),qe=k.textContent.length,nt=Math.min(Q.start,qe),un=Q.end===void 0?nt:Math.min(Q.end,qe);!_e.extend&&nt>un&&(N=un,un=nt,nt=N);var ie=v(k,nt),te=v(k,un);if(ie&&te&&(_e.rangeCount!==1||_e.anchorNode!==ie.node||_e.anchorOffset!==ie.offset||_e.focusNode!==te.node||_e.focusOffset!==te.offset)){var ce=Ce.createRange();ce.setStart(ie.node,ie.offset),_e.removeAllRanges(),nt>un?(_e.addRange(ce),_e.extend(te.node,te.offset)):(ce.setEnd(te.node,te.offset),_e.addRange(ce))}}}}for(Ce=[],_e=k;_e=_e.parentNode;)_e.nodeType===1&&Ce.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<Ce.length;k++){var Te=Ce[k];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}gf=!!f1,d1=f1=null}finally{Zt=A,xe.p=g,me.T=u}}i.current=a,li=2}}function t2(){if(li===2){li=0;var i=io,a=tc,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=me.T,me.T=null;var g=xe.p;xe.p=2;var A=Zt;Zt|=4;try{Ry(i,a.alternate,a)}finally{Zt=A,xe.p=g,me.T=u}}li=3}}function n2(){if(li===4||li===3){li=0,Vo();var i=io,a=tc,u=Ea,g=jy;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?li=5:(li=0,tc=io=null,i2(i,i.pendingLanes));var A=i.pendingLanes;if(A===0&&(no=null),Ai(u),a=a.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(Yt,a,void 0,(a.current.flags&128)===128)}catch{}if(g!==null){a=me.T,A=xe.p,xe.p=2,me.T=null;try{for(var C=i.onRecoverableError,N=0;N<g.length;N++){var k=g[N];C(k.value,{componentStack:k.stack})}}finally{me.T=a,xe.p=A}}(Ea&3)!==0&&tf(),Ms(i),A=i.pendingLanes,(u&261930)!==0&&(A&42)!==0?i===$0?uu++:(uu=0,$0=i):uu=0,hu(0)}}function i2(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,qc(a)))}function tf(){return e2(),t2(),n2(),r2()}function r2(){if(li!==5)return!1;var i=io,a=Z0;Z0=0;var u=Ai(Ea),g=me.T,A=xe.p;try{xe.p=32>u?32:u,me.T=null,u=J0,J0=null;var C=io,N=Ea;if(li=0,tc=io=null,Ea=0,(Zt&6)!==0)throw Error(s(331));var k=Zt;if(Zt|=4,Vy(C.current),ky(C,C.current,N,u),Zt=k,hu(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(Yt,C)}catch{}return!0}finally{xe.p=A,me.T=g,i2(i,a)}}function s2(i,a,u){a=Qr(u,a),a=O0(i.stateNode,a,2),i=Ka(i,a,2),i!==null&&(Vr(i,2),Ms(i))}function sn(i,a,u){if(i.tag===3)s2(i,i,u);else for(;a!==null;){if(a.tag===3){s2(a,i,u);break}else if(a.tag===1){var g=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(no===null||!no.has(g))){i=Qr(u,i),u=ay(2),g=Ka(a,u,2),g!==null&&(oy(u,g,a,i),Vr(g,2),Ms(g));break}}a=a.return}}function n1(i,a,u){var g=i.pingCache;if(g===null){g=i.pingCache=new qC;var A=new Set;g.set(a,A)}else A=g.get(a),A===void 0&&(A=new Set,g.set(a,A));A.has(u)||(W0=!0,A.add(u),i=KC.bind(null,i,a,u),a.then(i,i))}function KC(i,a,u){var g=i.pingCache;g!==null&&g.delete(a),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,gn===i&&(Lt&u)===u&&(zn===4||zn===3&&(Lt&62914560)===Lt&&300>yn()-Qh?(Zt&2)===0&&nc(i,0):Q0|=u,ec===Lt&&(ec=0)),Ms(i)}function a2(i,a){a===0&&(a=Yn()),i=Zo(i,a),i!==null&&(Vr(i,a),Ms(i))}function ZC(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),a2(i,u)}function JC(i,a){var u=0;switch(i.tag){case 31:case 13:var g=i.stateNode,A=i.memoizedState;A!==null&&(u=A.retryLane);break;case 19:g=i.stateNode;break;case 22:g=i.stateNode._retryCache;break;default:throw Error(s(314))}g!==null&&g.delete(a),a2(i,u)}function $C(i,a){return xn(i,a)}var nf=null,rc=null,i1=!1,rf=!1,r1=!1,so=0;function Ms(i){i!==rc&&i.next===null&&(rc===null?nf=rc=i:rc=rc.next=i),rf=!0,i1||(i1=!0,tv())}function hu(i,a){if(!r1&&rf){r1=!0;do for(var u=!1,g=nf;g!==null;){if(i!==0){var A=g.pendingLanes;if(A===0)var C=0;else{var N=g.suspendedLanes,k=g.pingedLanes;C=(1<<31-rt(42|i)+1)-1,C&=A&~(N&~k),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(u=!0,u2(g,C))}else C=Lt,C=_r(g,g===gn?C:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(C&3)===0||On(g,C)||(u=!0,u2(g,C));g=g.next}while(u);r1=!1}}function ev(){o2()}function o2(){rf=i1=!1;var i=0;so!==0&&hv()&&(i=so);for(var a=yn(),u=null,g=nf;g!==null;){var A=g.next,C=l2(g,a);C===0?(g.next=null,u===null?nf=A:u.next=A,A===null&&(rc=u)):(u=g,(i!==0||(C&3)!==0)&&(rf=!0)),g=A}li!==0&&li!==5||hu(i),so!==0&&(so=0)}function l2(i,a){for(var u=i.suspendedLanes,g=i.pingedLanes,A=i.expirationTimes,C=i.pendingLanes&-62914561;0<C;){var N=31-rt(C),k=1<<N,Q=A[N];Q===-1?((k&u)===0||(k&g)!==0)&&(A[N]=zo(k,a)):Q<=a&&(i.expiredLanes|=k),C&=~k}if(a=gn,u=Lt,u=_r(i,i===a?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),g=i.callbackNode,u===0||i===a&&(rn===2||rn===9)||i.cancelPendingCommit!==null)return g!==null&&g!==null&&Fe(g),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||On(i,u)){if(a=u&-u,a===i.callbackPriority)return a;switch(g!==null&&Fe(g),Ai(u)){case 2:case 8:u=La;break;case 32:u=Ei;break;case 268435456:u=Fo;break;default:u=Ei}return g=c2.bind(null,i),u=xn(u,g),i.callbackPriority=a,i.callbackNode=u,a}return g!==null&&g!==null&&Fe(g),i.callbackPriority=2,i.callbackNode=null,2}function c2(i,a){if(li!==0&&li!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(tf()&&i.callbackNode!==u)return null;var g=Lt;return g=_r(i,i===gn?g:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),g===0?null:(Gy(i,g,a),l2(i,yn()),i.callbackNode!=null&&i.callbackNode===u?c2.bind(null,i):null)}function u2(i,a){if(tf())return null;Gy(i,a,!0)}function tv(){dv(function(){(Zt&6)!==0?xn(yi,ev):o2()})}function s1(){if(so===0){var i=Hl;i===0&&(i=yr,yr<<=1,(yr&261888)===0&&(yr=256)),so=i}return so}function h2(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ss(""+i)}function f2(i,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,i.id&&u.setAttribute("form",i.id),a.parentNode.insertBefore(u,a),i=new FormData(i),u.parentNode.removeChild(u),i}function nv(i,a,u,g,A){if(a==="submit"&&u&&u.stateNode===A){var C=h2((A[Ht]||null).action),N=g.submitter;N&&(a=(a=N[Ht]||null)?h2(a.formAction):N.getAttribute("formAction"),a!==null&&(C=a,N=null));var k=new En("action","action",null,g,A);i.push({event:k,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(so!==0){var Q=N?f2(A,N):new FormData(A);v0(u,{pending:!0,data:Q,method:A.method,action:C},null,Q)}}else typeof C=="function"&&(k.preventDefault(),Q=N?f2(A,N):new FormData(A),v0(u,{pending:!0,data:Q,method:A.method,action:C},C,Q))},currentTarget:A}]})}}for(var a1=0;a1<jc.length;a1++){var o1=jc[a1],iv=o1.toLowerCase(),rv=o1[0].toUpperCase()+o1.slice(1);fs(iv,"on"+rv)}fs(or,"onAnimationEnd"),fs(Ii,"onAnimationIteration"),fs(tn,"onAnimationStart"),fs("dblclick","onDoubleClick"),fs("focusin","onFocus"),fs("focusout","onBlur"),fs(oi,"onTransitionRun"),fs($i,"onTransitionStart"),fs(Ha,"onTransitionCancel"),fs(ra,"onTransitionEnd"),Ci("onMouseEnter",["mouseout","mouseover"]),Ci("onMouseLeave",["mouseout","mouseover"]),Ci("onPointerEnter",["pointerout","pointerover"]),Ci("onPointerLeave",["pointerout","pointerover"]),Gt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fu));function d2(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var g=i[u],A=g.event;g=g.listeners;e:{var C=void 0;if(a)for(var N=g.length-1;0<=N;N--){var k=g[N],Q=k.instance,ue=k.currentTarget;if(k=k.listener,Q!==C&&A.isPropagationStopped())break e;C=k,A.currentTarget=ue;try{C(A)}catch(we){Eh(we)}A.currentTarget=null,C=Q}else for(N=0;N<g.length;N++){if(k=g[N],Q=k.instance,ue=k.currentTarget,k=k.listener,Q!==C&&A.isPropagationStopped())break e;C=k,A.currentTarget=ue;try{C(A)}catch(we){Eh(we)}A.currentTarget=null,C=Q}}}}function Nt(i,a){var u=a[ls];u===void 0&&(u=a[ls]=new Set);var g=i+"__bubble";u.has(g)||(g2(a,i,2,!1),u.add(g))}function l1(i,a,u){var g=0;a&&(g|=4),g2(u,i,g,a)}var sf="_reactListening"+Math.random().toString(36).slice(2);function c1(i){if(!i[sf]){i[sf]=!0,Se.forEach(function(u){u!=="selectionchange"&&(sv.has(u)||l1(u,!1,i),l1(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[sf]||(a[sf]=!0,l1("selectionchange",!1,a))}}function g2(i,a,u,g){switch(H2(a)){case 2:var A=Mv;break;case 8:A=Lv;break;default:A=C1}u=A.bind(null,a,u,i),A=void 0,!Qs||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(A=!0),g?A!==void 0?i.addEventListener(a,u,{capture:!0,passive:A}):i.addEventListener(a,u,!0):A!==void 0?i.addEventListener(a,u,{passive:A}):i.addEventListener(a,u,!1)}function u1(i,a,u,g,A){var C=g;if((a&1)===0&&(a&2)===0&&g!==null)e:for(;;){if(g===null)return;var N=g.tag;if(N===3||N===4){var k=g.stateNode.containerInfo;if(k===A)break;if(N===4)for(N=g.return;N!==null;){var Q=N.tag;if((Q===3||Q===4)&&N.stateNode.containerInfo===A)return;N=N.return}for(;k!==null;){if(N=mn(k),N===null)return;if(Q=N.tag,Q===5||Q===6||Q===26||Q===27){g=C=N;continue e}k=k.parentNode}}g=g.return}Is(function(){var ue=C,we=rr(u),Ce=[];e:{var fe=yh.get(i);if(fe!==void 0){var _e=En,qe=i;switch(i){case"keypress":if(Tr(u)===0)break e;case"keydown":case"keyup":_e=ea;break;case"focusin":qe="focus",_e=Js;break;case"focusout":qe="blur",_e=Js;break;case"beforeblur":case"afterblur":_e=Js;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=zt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=Zs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=I;break;case or:case Ii:case tn:_e=ht;break;case ra:_e=V;break;case"scroll":case"scrollend":_e=Ua;break;case"wheel":_e=Ee;break;case"copy":case"cut":case"paste":_e=$s;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=bt;break;case"toggle":case"beforetoggle":_e=ot}var nt=(a&4)!==0,un=!nt&&(i==="scroll"||i==="scrollend"),ie=nt?fe!==null?fe+"Capture":null:fe;nt=[];for(var te=ue,ce;te!==null;){var Te=te;if(ce=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||ce===null||ie===null||(Te=et(te,ie),Te!=null&&nt.push(du(te,Te,ce))),un)break;te=te.return}0<nt.length&&(fe=new _e(fe,qe,null,u,we),Ce.push({event:fe,listeners:nt}))}}if((a&7)===0){e:{if(fe=i==="mouseover"||i==="pointerover",_e=i==="mouseout"||i==="pointerout",fe&&u!==Ws&&(qe=u.relatedTarget||u.fromElement)&&(mn(qe)||qe[xi]))break e;if((_e||fe)&&(fe=we.window===we?we:(fe=we.ownerDocument)?fe.defaultView||fe.parentWindow:window,_e?(qe=u.relatedTarget||u.toElement,_e=ue,qe=qe?mn(qe):null,qe!==null&&(un=h(qe),nt=qe.tag,qe!==un||nt!==5&&nt!==27&&nt!==6)&&(qe=null)):(_e=null,qe=ue),_e!==qe)){if(nt=zt,Te="onMouseLeave",ie="onMouseEnter",te="mouse",(i==="pointerout"||i==="pointerover")&&(nt=bt,Te="onPointerLeave",ie="onPointerEnter",te="pointer"),un=_e==null?fe:ki(_e),ce=qe==null?fe:ki(qe),fe=new nt(Te,te+"leave",_e,u,we),fe.target=un,fe.relatedTarget=ce,Te=null,mn(we)===ue&&(nt=new nt(ie,te+"enter",qe,u,we),nt.target=ce,nt.relatedTarget=un,Te=nt),un=Te,_e&&qe)t:{for(nt=av,ie=_e,te=qe,ce=0,Te=ie;Te;Te=nt(Te))ce++;Te=0;for(var Ze=te;Ze;Ze=nt(Ze))Te++;for(;0<ce-Te;)ie=nt(ie),ce--;for(;0<Te-ce;)te=nt(te),Te--;for(;ce--;){if(ie===te||te!==null&&ie===te.alternate){nt=ie;break t}ie=nt(ie),te=nt(te)}nt=null}else nt=null;_e!==null&&m2(Ce,fe,_e,nt,!1),qe!==null&&un!==null&&m2(Ce,un,qe,nt,!0)}}e:{if(fe=ue?ki(ue):window,_e=fe.nodeName&&fe.nodeName.toLowerCase(),_e==="select"||_e==="input"&&fe.type==="file")var Qt=Sr;else if(zc(fe))if(ph)Qt=f;else{Qt=o;var Xe=r}else _e=fe.nodeName,!_e||_e.toLowerCase()!=="input"||fe.type!=="checkbox"&&fe.type!=="radio"?ue&&$t(ue.elementType)&&(Qt=Sr):Qt=l;if(Qt&&(Qt=Qt(i,ue))){vr(Ce,Qt,u,we);break e}Xe&&Xe(i,fe,ue),i==="focusout"&&ue&&fe.type==="number"&&ue.memoizedProps.value!=null&&z(fe,"number",fe.value)}switch(Xe=ue?ki(ue):window,i){case"focusin":(zc(Xe)||Xe.contentEditable==="true")&&(K=Xe,$=ue,ae=null);break;case"focusout":ae=$=K=null;break;case"mousedown":ye=!0;break;case"contextmenu":case"mouseup":case"dragend":ye=!1,De(Ce,u,we);break;case"selectionchange":if(H)break;case"keydown":case"keyup":De(Ce,u,we)}var yt;if(Vt)e:{switch(i){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else ja?ta(i,u)&&(Pt="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Pt="onCompositionStart");Pt&&(Yr&&u.locale!=="ko"&&(ja||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&ja&&(yt=cs()):(wr=we,xr="value"in wr?wr.value:wr.textContent,ja=!0)),Xe=af(ue,Pt),0<Xe.length&&(Pt=new Hr(Pt,i,null,u,we),Ce.push({event:Pt,listeners:Xe}),yt?Pt.data=yt:(yt=Xr(u),yt!==null&&(Pt.data=yt)))),(yt=Zi?Rs(i,u):kl(i,u))&&(Pt=af(ue,"onBeforeInput"),0<Pt.length&&(Xe=new Hr("onBeforeInput","beforeinput",null,u,we),Ce.push({event:Xe,listeners:Pt}),Xe.data=yt)),nv(Ce,i,ue,u,we)}d2(Ce,a)})}function du(i,a,u){return{instance:i,listener:a,currentTarget:u}}function af(i,a){for(var u=a+"Capture",g=[];i!==null;){var A=i,C=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||C===null||(A=et(i,u),A!=null&&g.unshift(du(i,A,C)),A=et(i,a),A!=null&&g.push(du(i,A,C))),i.tag===3)return g;i=i.return}return[]}function av(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function m2(i,a,u,g,A){for(var C=a._reactName,N=[];u!==null&&u!==g;){var k=u,Q=k.alternate,ue=k.stateNode;if(k=k.tag,Q!==null&&Q===g)break;k!==5&&k!==26&&k!==27||ue===null||(Q=ue,A?(ue=et(u,C),ue!=null&&N.unshift(du(u,ue,Q))):A||(ue=et(u,C),ue!=null&&N.push(du(u,ue,Q)))),u=u.return}N.length!==0&&i.push({event:a,listeners:N})}var ov=/\r\n?/g,lv=/\u0000|\uFFFD/g;function p2(i){return(typeof i=="string"?i:""+i).replace(ov,`
`).replace(lv,"")}function y2(i,a){return a=p2(a),p2(i)===a}function cn(i,a,u,g,A,C){switch(u){case"children":typeof g=="string"?a==="body"||a==="textarea"&&g===""||Ui(i,g):(typeof g=="number"||typeof g=="bigint")&&a!=="body"&&Ui(i,""+g);break;case"className":vi(i,"class",g);break;case"tabIndex":vi(i,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":vi(i,u,g);break;case"style":Qe(i,g,C);break;case"data":if(a!=="object"){vi(i,"data",g);break}case"src":case"href":if(g===""&&(a!=="a"||u!=="href")){i.removeAttribute(u);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){i.removeAttribute(u);break}g=Ss(""+g),i.setAttribute(u,g);break;case"action":case"formAction":if(typeof g=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(u==="formAction"?(a!=="input"&&cn(i,a,"name",A.name,A,null),cn(i,a,"formEncType",A.formEncType,A,null),cn(i,a,"formMethod",A.formMethod,A,null),cn(i,a,"formTarget",A.formTarget,A,null)):(cn(i,a,"encType",A.encType,A,null),cn(i,a,"method",A.method,A,null),cn(i,a,"target",A.target,A,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){i.removeAttribute(u);break}g=Ss(""+g),i.setAttribute(u,g);break;case"onClick":g!=null&&(i.onclick=Vi);break;case"onScroll":g!=null&&Nt("scroll",i);break;case"onScrollEnd":g!=null&&Nt("scrollend",i);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(u=g.__html,u!=null){if(A.children!=null)throw Error(s(60));i.innerHTML=u}}break;case"multiple":i.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":i.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){i.removeAttribute("xlink:href");break}u=Ss(""+g),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(u,""+g):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":g===!0?i.setAttribute(u,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(u,g):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?i.setAttribute(u,g):i.removeAttribute(u);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?i.removeAttribute(u):i.setAttribute(u,g);break;case"popover":Nt("beforetoggle",i),Nt("toggle",i),Cs(i,"popover",g);break;case"xlinkActuate":vn(i,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":vn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":vn(i,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":vn(i,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":vn(i,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":vn(i,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":vn(i,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":vn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":vn(i,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Cs(i,"is",g);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=qo.get(u)||u,Cs(i,u,g))}}function h1(i,a,u,g,A,C){switch(u){case"style":Qe(i,g,C);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(u=g.__html,u!=null){if(A.children!=null)throw Error(s(60));i.innerHTML=u}}break;case"children":typeof g=="string"?Ui(i,g):(typeof g=="number"||typeof g=="bigint")&&Ui(i,""+g);break;case"onScroll":g!=null&&Nt("scroll",i);break;case"onScrollEnd":g!=null&&Nt("scrollend",i);break;case"onClick":g!=null&&(i.onclick=Vi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jo.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(A=u.endsWith("Capture"),a=u.slice(2,A?u.length-7:void 0),C=i[Ht]||null,C=C!=null?C[u]:null,typeof C=="function"&&i.removeEventListener(a,C,A),typeof g=="function")){typeof C!="function"&&C!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(a,g,A);break e}u in i?i[u]=g:g===!0?i.setAttribute(u,""):Cs(i,u,g)}}}function Oi(i,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",i),Nt("load",i);var g=!1,A=!1,C;for(C in u)if(u.hasOwnProperty(C)){var N=u[C];if(N!=null)switch(C){case"src":g=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:cn(i,a,C,N,u,null)}}A&&cn(i,a,"srcSet",u.srcSet,u,null),g&&cn(i,a,"src",u.src,u,null);return;case"input":Nt("invalid",i);var k=C=N=A=null,Q=null,ue=null;for(g in u)if(u.hasOwnProperty(g)){var we=u[g];if(we!=null)switch(g){case"name":A=we;break;case"type":N=we;break;case"checked":Q=we;break;case"defaultChecked":ue=we;break;case"value":C=we;break;case"defaultValue":k=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(s(137,a));break;default:cn(i,a,g,we,u,null)}}oe(i,C,k,Q,ue,N,A,!1);return;case"select":Nt("invalid",i),g=N=C=null;for(A in u)if(u.hasOwnProperty(A)&&(k=u[A],k!=null))switch(A){case"value":C=k;break;case"defaultValue":N=k;break;case"multiple":g=k;default:cn(i,a,A,k,u,null)}a=C,u=N,i.multiple=!!g,a!=null?Ge(i,!!g,a,!1):u!=null&&Ge(i,!!g,u,!0);return;case"textarea":Nt("invalid",i),C=A=g=null;for(N in u)if(u.hasOwnProperty(N)&&(k=u[N],k!=null))switch(N){case"value":g=k;break;case"defaultValue":A=k;break;case"children":C=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(s(91));break;default:cn(i,a,N,k,u,null)}Xn(i,g,A,C);return;case"option":for(Q in u)u.hasOwnProperty(Q)&&(g=u[Q],g!=null)&&(Q==="selected"?i.selected=g&&typeof g!="function"&&typeof g!="symbol":cn(i,a,Q,g,u,null));return;case"dialog":Nt("beforetoggle",i),Nt("toggle",i),Nt("cancel",i),Nt("close",i);break;case"iframe":case"object":Nt("load",i);break;case"video":case"audio":for(g=0;g<fu.length;g++)Nt(fu[g],i);break;case"image":Nt("error",i),Nt("load",i);break;case"details":Nt("toggle",i);break;case"embed":case"source":case"link":Nt("error",i),Nt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ue in u)if(u.hasOwnProperty(ue)&&(g=u[ue],g!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:cn(i,a,ue,g,u,null)}return;default:if($t(a)){for(we in u)u.hasOwnProperty(we)&&(g=u[we],g!==void 0&&h1(i,a,we,g,u,void 0));return}}for(k in u)u.hasOwnProperty(k)&&(g=u[k],g!=null&&cn(i,a,k,g,u,null))}function cv(i,a,u,g){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,C=null,N=null,k=null,Q=null,ue=null,we=null;for(_e in u){var Ce=u[_e];if(u.hasOwnProperty(_e)&&Ce!=null)switch(_e){case"checked":break;case"value":break;case"defaultValue":Q=Ce;default:g.hasOwnProperty(_e)||cn(i,a,_e,null,g,Ce)}}for(var fe in g){var _e=g[fe];if(Ce=u[fe],g.hasOwnProperty(fe)&&(_e!=null||Ce!=null))switch(fe){case"type":C=_e;break;case"name":A=_e;break;case"checked":ue=_e;break;case"defaultChecked":we=_e;break;case"value":N=_e;break;case"defaultValue":k=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(s(137,a));break;default:_e!==Ce&&cn(i,a,fe,_e,g,Ce)}}Dn(i,N,k,Q,ue,we,C,A);return;case"select":_e=N=k=fe=null;for(C in u)if(Q=u[C],u.hasOwnProperty(C)&&Q!=null)switch(C){case"value":break;case"multiple":_e=Q;default:g.hasOwnProperty(C)||cn(i,a,C,null,g,Q)}for(A in g)if(C=g[A],Q=u[A],g.hasOwnProperty(A)&&(C!=null||Q!=null))switch(A){case"value":fe=C;break;case"defaultValue":k=C;break;case"multiple":N=C;default:C!==Q&&cn(i,a,A,C,g,Q)}a=k,u=N,g=_e,fe!=null?Ge(i,!!u,fe,!1):!!g!=!!u&&(a!=null?Ge(i,!!u,a,!0):Ge(i,!!u,u?[]:"",!1));return;case"textarea":_e=fe=null;for(k in u)if(A=u[k],u.hasOwnProperty(k)&&A!=null&&!g.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:cn(i,a,k,null,g,A)}for(N in g)if(A=g[N],C=u[N],g.hasOwnProperty(N)&&(A!=null||C!=null))switch(N){case"value":fe=A;break;case"defaultValue":_e=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:A!==C&&cn(i,a,N,A,g,C)}Mn(i,fe,_e);return;case"option":for(var qe in u)fe=u[qe],u.hasOwnProperty(qe)&&fe!=null&&!g.hasOwnProperty(qe)&&(qe==="selected"?i.selected=!1:cn(i,a,qe,null,g,fe));for(Q in g)fe=g[Q],_e=u[Q],g.hasOwnProperty(Q)&&fe!==_e&&(fe!=null||_e!=null)&&(Q==="selected"?i.selected=fe&&typeof fe!="function"&&typeof fe!="symbol":cn(i,a,Q,fe,g,_e));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in u)fe=u[nt],u.hasOwnProperty(nt)&&fe!=null&&!g.hasOwnProperty(nt)&&cn(i,a,nt,null,g,fe);for(ue in g)if(fe=g[ue],_e=u[ue],g.hasOwnProperty(ue)&&fe!==_e&&(fe!=null||_e!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(s(137,a));break;default:cn(i,a,ue,fe,g,_e)}return;default:if($t(a)){for(var un in u)fe=u[un],u.hasOwnProperty(un)&&fe!==void 0&&!g.hasOwnProperty(un)&&h1(i,a,un,void 0,g,fe);for(we in g)fe=g[we],_e=u[we],!g.hasOwnProperty(we)||fe===_e||fe===void 0&&_e===void 0||h1(i,a,we,fe,g,_e);return}}for(var ie in u)fe=u[ie],u.hasOwnProperty(ie)&&fe!=null&&!g.hasOwnProperty(ie)&&cn(i,a,ie,null,g,fe);for(Ce in g)fe=g[Ce],_e=u[Ce],!g.hasOwnProperty(Ce)||fe===_e||fe==null&&_e==null||cn(i,a,Ce,fe,g,_e)}function E2(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function uv(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,u=performance.getEntriesByType("resource"),g=0;g<u.length;g++){var A=u[g],C=A.transferSize,N=A.initiatorType,k=A.duration;if(C&&k&&E2(N)){for(N=0,k=A.responseEnd,g+=1;g<u.length;g++){var Q=u[g],ue=Q.startTime;if(ue>k)break;var we=Q.transferSize,Ce=Q.initiatorType;we&&E2(Ce)&&(Q=Q.responseEnd,N+=we*(Q<k?1:(k-ue)/(Q-ue)))}if(--g,a+=8*(C+N)/(A.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var f1=null,d1=null;function of(i){return i.nodeType===9?i:i.ownerDocument}function _2(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function A2(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function g1(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var m1=null;function hv(){var i=window.event;return i&&i.type==="popstate"?i===m1?!1:(m1=i,!0):(m1=null,!1)}var w2=typeof setTimeout=="function"?setTimeout:void 0,fv=typeof clearTimeout=="function"?clearTimeout:void 0,x2=typeof Promise=="function"?Promise:void 0,dv=typeof queueMicrotask=="function"?queueMicrotask:typeof x2<"u"?function(i){return x2.resolve(null).then(i).catch(gv)}:w2;function gv(i){setTimeout(function(){throw i})}function ao(i){return i==="head"}function T2(i,a){var u=a,g=0;do{var A=u.nextSibling;if(i.removeChild(u),A&&A.nodeType===8)if(u=A.data,u==="/$"||u==="/&"){if(g===0){i.removeChild(A),lc(a);return}g--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")g++;else if(u==="html")gu(i.ownerDocument.documentElement);else if(u==="head"){u=i.ownerDocument.head,gu(u);for(var C=u.firstChild;C;){var N=C.nextSibling,k=C.nodeName;C[Fr]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&C.rel.toLowerCase()==="stylesheet"||u.removeChild(C),C=N}}else u==="body"&&gu(i.ownerDocument.body);u=A}while(u);lc(a)}function C2(i,a){var u=i;i=0;do{var g=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(i===0)break;i--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||i++;u=g}while(u)}function p1(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":p1(u),Ti(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function mv(i,a,u,g){for(;i.nodeType===1;){var A=u;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!g&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(g){if(!i[Fr])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(C=i.getAttribute("rel"),C==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(C!==A.rel||i.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||i.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||i.getAttribute("title")!==(A.title==null?null:A.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(C=i.getAttribute("src"),(C!==(A.src==null?null:A.src)||i.getAttribute("type")!==(A.type==null?null:A.type)||i.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&C&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var C=A.name==null?null:""+A.name;if(A.type==="hidden"&&i.getAttribute("name")===C)return i}else return i;if(i=es(i.nextSibling),i===null)break}return null}function pv(i,a,u){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=es(i.nextSibling),i===null))return null;return i}function v2(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=es(i.nextSibling),i===null))return null;return i}function y1(i){return i.data==="$?"||i.data==="$~"}function E1(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function yv(i,a){var u=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||u.readyState!=="loading")a();else{var g=function(){a(),u.removeEventListener("DOMContentLoaded",g)};u.addEventListener("DOMContentLoaded",g),i._reactRetry=g}}function es(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var _1=null;function S2(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"||u==="/&"){if(a===0)return es(i.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}i=i.nextSibling}return null}function I2(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return i;a--}else u!=="/$"&&u!=="/&"||a++}i=i.previousSibling}return null}function b2(i,a,u){switch(a=of(u),i){case"html":if(i=a.documentElement,!i)throw Error(s(452));return i;case"head":if(i=a.head,!i)throw Error(s(453));return i;case"body":if(i=a.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function gu(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Ti(i)}var ts=new Map,R2=new Set;function lf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var _a=xe.d;xe.d={f:Ev,r:_v,D:Av,C:wv,L:xv,m:Tv,X:vv,S:Cv,M:Sv};function Ev(){var i=_a.f(),a=Jh();return i||a}function _v(i){var a=St(i);a!==null&&a.tag===5&&a.type==="form"?Yp(a):_a.r(i)}var sc=typeof document>"u"?null:document;function N2(i,a,u){var g=sc;if(g&&typeof a=="string"&&a){var A=pt(a);A='link[rel="'+i+'"][href="'+A+'"]',typeof u=="string"&&(A+='[crossorigin="'+u+'"]'),R2.has(A)||(R2.add(A),i={rel:i,crossOrigin:u,href:a},g.querySelector(A)===null&&(a=g.createElement("link"),Oi(a,"link",i),Cn(a),g.head.appendChild(a)))}}function Av(i){_a.D(i),N2("dns-prefetch",i,null)}function wv(i,a){_a.C(i,a),N2("preconnect",i,a)}function xv(i,a,u){_a.L(i,a,u);var g=sc;if(g&&i&&a){var A='link[rel="preload"][as="'+pt(a)+'"]';a==="image"&&u&&u.imageSrcSet?(A+='[imagesrcset="'+pt(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(A+='[imagesizes="'+pt(u.imageSizes)+'"]')):A+='[href="'+pt(i)+'"]';var C=A;switch(a){case"style":C=ac(i);break;case"script":C=oc(i)}ts.has(C)||(i=b({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:i,as:a},u),ts.set(C,i),g.querySelector(A)!==null||a==="style"&&g.querySelector(mu(C))||a==="script"&&g.querySelector(pu(C))||(a=g.createElement("link"),Oi(a,"link",i),Cn(a),g.head.appendChild(a)))}}function Tv(i,a){_a.m(i,a);var u=sc;if(u&&i){var g=a&&typeof a.as=="string"?a.as:"script",A='link[rel="modulepreload"][as="'+pt(g)+'"][href="'+pt(i)+'"]',C=A;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=oc(i)}if(!ts.has(C)&&(i=b({rel:"modulepreload",href:i},a),ts.set(C,i),u.querySelector(A)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(pu(C)))return}g=u.createElement("link"),Oi(g,"link",i),Cn(g),u.head.appendChild(g)}}}function Cv(i,a,u){_a.S(i,a,u);var g=sc;if(g&&i){var A=ai(g).hoistableStyles,C=ac(i);a=a||"default";var N=A.get(C);if(!N){var k={loading:0,preload:null};if(N=g.querySelector(mu(C)))k.loading=5;else{i=b({rel:"stylesheet",href:i,"data-precedence":a},u),(u=ts.get(C))&&A1(i,u);var Q=N=g.createElement("link");Cn(Q),Oi(Q,"link",i),Q._p=new Promise(function(ue,we){Q.onload=ue,Q.onerror=we}),Q.addEventListener("load",function(){k.loading|=1}),Q.addEventListener("error",function(){k.loading|=2}),k.loading|=4,cf(N,a,g)}N={type:"stylesheet",instance:N,count:1,state:k},A.set(C,N)}}}function vv(i,a){_a.X(i,a);var u=sc;if(u&&i){var g=ai(u).hoistableScripts,A=oc(i),C=g.get(A);C||(C=u.querySelector(pu(A)),C||(i=b({src:i,async:!0},a),(a=ts.get(A))&&w1(i,a),C=u.createElement("script"),Cn(C),Oi(C,"link",i),u.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},g.set(A,C))}}function Sv(i,a){_a.M(i,a);var u=sc;if(u&&i){var g=ai(u).hoistableScripts,A=oc(i),C=g.get(A);C||(C=u.querySelector(pu(A)),C||(i=b({src:i,async:!0,type:"module"},a),(a=ts.get(A))&&w1(i,a),C=u.createElement("script"),Cn(C),Oi(C,"link",i),u.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},g.set(A,C))}}function O2(i,a,u,g){var A=(A=Le.current)?lf(A):null;if(!A)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=ac(u.href),u=ai(A).hoistableStyles,g=u.get(a),g||(g={type:"style",instance:null,count:0,state:null},u.set(a,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=ac(u.href);var C=ai(A).hoistableStyles,N=C.get(i);if(N||(A=A.ownerDocument||A,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(i,N),(C=A.querySelector(mu(i)))&&!C._p&&(N.instance=C,N.state.loading=5),ts.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ts.set(i,u),C||Iv(A,i,u,N.state))),a&&g===null)throw Error(s(528,""));return N}if(a&&g!==null)throw Error(s(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=oc(u),u=ai(A).hoistableScripts,g=u.get(a),g||(g={type:"script",instance:null,count:0,state:null},u.set(a,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function ac(i){return'href="'+pt(i)+'"'}function mu(i){return'link[rel="stylesheet"]['+i+"]"}function D2(i){return b({},i,{"data-precedence":i.precedence,precedence:null})}function Iv(i,a,u,g){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?g.loading=1:(a=i.createElement("link"),g.preload=a,a.addEventListener("load",function(){return g.loading|=1}),a.addEventListener("error",function(){return g.loading|=2}),Oi(a,"link",u),Cn(a),i.head.appendChild(a))}function oc(i){return'[src="'+pt(i)+'"]'}function pu(i){return"script[async]"+i}function M2(i,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var g=i.querySelector('style[data-href~="'+pt(u.href)+'"]');if(g)return a.instance=g,Cn(g),g;var A=b({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return g=(i.ownerDocument||i).createElement("style"),Cn(g),Oi(g,"style",A),cf(g,u.precedence,i),a.instance=g;case"stylesheet":A=ac(u.href);var C=i.querySelector(mu(A));if(C)return a.state.loading|=4,a.instance=C,Cn(C),C;g=D2(u),(A=ts.get(A))&&A1(g,A),C=(i.ownerDocument||i).createElement("link"),Cn(C);var N=C;return N._p=new Promise(function(k,Q){N.onload=k,N.onerror=Q}),Oi(C,"link",g),a.state.loading|=4,cf(C,u.precedence,i),a.instance=C;case"script":return C=oc(u.src),(A=i.querySelector(pu(C)))?(a.instance=A,Cn(A),A):(g=u,(A=ts.get(C))&&(g=b({},u),w1(g,A)),i=i.ownerDocument||i,A=i.createElement("script"),Cn(A),Oi(A,"link",g),i.head.appendChild(A),a.instance=A);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(g=a.instance,a.state.loading|=4,cf(g,u.precedence,i));return a.instance}function cf(i,a,u){for(var g=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=g.length?g[g.length-1]:null,C=A,N=0;N<g.length;N++){var k=g[N];if(k.dataset.precedence===a)C=k;else if(C!==A)break}C?C.parentNode.insertBefore(i,C.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(i,a.firstChild))}function A1(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function w1(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var uf=null;function L2(i,a,u){if(uf===null){var g=new Map,A=uf=new Map;A.set(u,g)}else A=uf,g=A.get(u),g||(g=new Map,A.set(u,g));if(g.has(i))return g;for(g.set(i,null),u=u.getElementsByTagName(i),A=0;A<u.length;A++){var C=u[A];if(!(C[Fr]||C[Tn]||i==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var N=C.getAttribute(a)||"";N=i+N;var k=g.get(N);k?k.push(C):g.set(N,[C])}}return g}function P2(i,a,u){i=i.ownerDocument||i,i.head.insertBefore(u,a==="title"?i.querySelector("head > title"):null)}function bv(i,a,u){if(u===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(i=a.disabled,typeof a.precedence=="string"&&i==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function k2(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function Rv(i,a,u,g){if(u.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var A=ac(g.href),C=a.querySelector(mu(A));if(C){a=C._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=hf.bind(i),a.then(i,i)),u.state.loading|=4,u.instance=C,Cn(C);return}C=a.ownerDocument||a,g=D2(g),(A=ts.get(A))&&A1(g,A),C=C.createElement("link"),Cn(C);var N=C;N._p=new Promise(function(k,Q){N.onload=k,N.onerror=Q}),Oi(C,"link",g),u.instance=C}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(i.count++,u=hf.bind(i),a.addEventListener("load",u),a.addEventListener("error",u))}}var x1=0;function Nv(i,a){return i.stylesheets&&i.count===0&&df(i,i.stylesheets),0<i.count||0<i.imgCount?function(u){var g=setTimeout(function(){if(i.stylesheets&&df(i,i.stylesheets),i.unsuspend){var C=i.unsuspend;i.unsuspend=null,C()}},6e4+a);0<i.imgBytes&&x1===0&&(x1=62500*uv());var A=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&df(i,i.stylesheets),i.unsuspend)){var C=i.unsuspend;i.unsuspend=null,C()}},(i.imgBytes>x1?50:800)+a);return i.unsuspend=u,function(){i.unsuspend=null,clearTimeout(g),clearTimeout(A)}}:null}function hf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)df(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var ff=null;function df(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,ff=new Map,a.forEach(Ov,i),ff=null,hf.call(i))}function Ov(i,a){if(!(a.state.loading&4)){var u=ff.get(i);if(u)var g=u.get(null);else{u=new Map,ff.set(i,u);for(var A=i.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<A.length;C++){var N=A[C];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(u.set(N.dataset.precedence,N),g=N)}g&&u.set(null,g)}A=a.instance,N=A.getAttribute("data-precedence"),C=u.get(N)||g,C===g&&u.set(null,A),u.set(N,A),this.count++,g=hf.bind(this),A.addEventListener("load",g),A.addEventListener("error",g),C?C.parentNode.insertBefore(A,C.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(A,i.firstChild)),a.state.loading|=4}}var yu={$$typeof:ne,Provider:null,Consumer:null,_currentValue:Ye,_currentValue2:Ye,_threadCount:0};function Dv(i,a,u,g,A,C,N,k,Q){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_i(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_i(0),this.hiddenUpdates=_i(null),this.identifierPrefix=g,this.onUncaughtError=A,this.onCaughtError=C,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function B2(i,a,u,g,A,C,N,k,Q,ue,we,Ce){return i=new Dv(i,a,u,N,Q,ue,we,Ce,k),a=1,C===!0&&(a|=24),C=Ir(3,null,null,a),i.current=C,C.stateNode=i,a=t0(),a.refCount++,i.pooledCache=a,a.refCount++,C.memoizedState={element:g,isDehydrated:u,cache:a},s0(C),i}function U2(i){return i?(i=Ul,i):Ul}function V2(i,a,u,g,A,C){A=U2(A),g.context===null?g.context=A:g.pendingContext=A,g=Qa(a),g.payload={element:u},C=C===void 0?null:C,C!==null&&(g.callback=C),u=Ka(i,g,a),u!==null&&(fr(u,i,a),Qc(u,i,a))}function F2(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function T1(i,a){F2(i,a),(i=i.alternate)&&F2(i,a)}function z2(i){if(i.tag===13||i.tag===31){var a=Zo(i,67108864);a!==null&&fr(a,i,67108864),T1(i,67108864)}}function j2(i){if(i.tag===13||i.tag===31){var a=Dr();a=Un(a);var u=Zo(i,a);u!==null&&fr(u,i,a),T1(i,a)}}var gf=!0;function Mv(i,a,u,g){var A=me.T;me.T=null;var C=xe.p;try{xe.p=2,C1(i,a,u,g)}finally{xe.p=C,me.T=A}}function Lv(i,a,u,g){var A=me.T;me.T=null;var C=xe.p;try{xe.p=8,C1(i,a,u,g)}finally{xe.p=C,me.T=A}}function C1(i,a,u,g){if(gf){var A=v1(g);if(A===null)u1(i,a,g,mf,u),G2(i,g);else if(kv(A,i,a,u,g))g.stopPropagation();else if(G2(i,g),a&4&&-1<Pv.indexOf(i)){for(;A!==null;){var C=St(A);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var N=Er(C.pendingLanes);if(N!==0){var k=C;for(k.pendingLanes|=2,k.entangledLanes|=2;N;){var Q=1<<31-rt(N);k.entanglements[1]|=Q,N&=~Q}Ms(C),(Zt&6)===0&&(Kh=yn()+500,hu(0))}}break;case 31:case 13:k=Zo(C,2),k!==null&&fr(k,C,2),Jh(),T1(C,2)}if(C=v1(g),C===null&&u1(i,a,g,mf,u),C===A)break;A=C}A!==null&&g.stopPropagation()}else u1(i,a,g,null,u)}}function v1(i){return i=rr(i),S1(i)}var mf=null;function S1(i){if(mf=null,i=mn(i),i!==null){var a=h(i);if(a===null)i=null;else{var u=a.tag;if(u===13){if(i=p(a),i!==null)return i;i=null}else if(u===31){if(i=T(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return mf=i,null}function H2(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(os()){case yi:return 2;case La:return 8;case Ei:case si:return 32;case Fo:return 268435456;default:return 32}default:return 32}}var I1=!1,oo=null,lo=null,co=null,Eu=new Map,_u=new Map,uo=[],Pv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function G2(i,a){switch(i){case"focusin":case"focusout":oo=null;break;case"dragenter":case"dragleave":lo=null;break;case"mouseover":case"mouseout":co=null;break;case"pointerover":case"pointerout":Eu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":_u.delete(a.pointerId)}}function Au(i,a,u,g,A,C){return i===null||i.nativeEvent!==C?(i={blockedOn:a,domEventName:u,eventSystemFlags:g,nativeEvent:C,targetContainers:[A]},a!==null&&(a=St(a),a!==null&&z2(a)),i):(i.eventSystemFlags|=g,a=i.targetContainers,A!==null&&a.indexOf(A)===-1&&a.push(A),i)}function kv(i,a,u,g,A){switch(a){case"focusin":return oo=Au(oo,i,a,u,g,A),!0;case"dragenter":return lo=Au(lo,i,a,u,g,A),!0;case"mouseover":return co=Au(co,i,a,u,g,A),!0;case"pointerover":var C=A.pointerId;return Eu.set(C,Au(Eu.get(C)||null,i,a,u,g,A)),!0;case"gotpointercapture":return C=A.pointerId,_u.set(C,Au(_u.get(C)||null,i,a,u,g,A)),!0}return!1}function q2(i){var a=mn(i.target);if(a!==null){var u=h(a);if(u!==null){if(a=u.tag,a===13){if(a=p(u),a!==null){i.blockedOn=a,Ue(i.priority,function(){j2(u)});return}}else if(a===31){if(a=T(u),a!==null){i.blockedOn=a,Ue(i.priority,function(){j2(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function pf(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=v1(i.nativeEvent);if(u===null){u=i.nativeEvent;var g=new u.constructor(u.type,u);Ws=g,u.target.dispatchEvent(g),Ws=null}else return a=St(u),a!==null&&z2(a),i.blockedOn=u,!1;a.shift()}return!0}function Y2(i,a,u){pf(i)&&u.delete(a)}function Bv(){I1=!1,oo!==null&&pf(oo)&&(oo=null),lo!==null&&pf(lo)&&(lo=null),co!==null&&pf(co)&&(co=null),Eu.forEach(Y2),_u.forEach(Y2)}function yf(i,a){i.blockedOn===a&&(i.blockedOn=null,I1||(I1=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Bv)))}var Ef=null;function X2(i){Ef!==i&&(Ef=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ef===i&&(Ef=null);for(var a=0;a<i.length;a+=3){var u=i[a],g=i[a+1],A=i[a+2];if(typeof g!="function"){if(S1(g||u)===null)continue;break}var C=St(u);C!==null&&(i.splice(a,3),a-=3,v0(C,{pending:!0,data:A,method:u.method,action:g},g,A))}}))}function lc(i){function a(Q){return yf(Q,i)}oo!==null&&yf(oo,i),lo!==null&&yf(lo,i),co!==null&&yf(co,i),Eu.forEach(a),_u.forEach(a);for(var u=0;u<uo.length;u++){var g=uo[u];g.blockedOn===i&&(g.blockedOn=null)}for(;0<uo.length&&(u=uo[0],u.blockedOn===null);)q2(u),u.blockedOn===null&&uo.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(g=0;g<u.length;g+=3){var A=u[g],C=u[g+1],N=A[Ht]||null;if(typeof C=="function")N||X2(u);else if(N){var k=null;if(C&&C.hasAttribute("formAction")){if(A=C,N=C[Ht]||null)k=N.formAction;else if(S1(A)!==null)continue}else k=N.action;typeof k=="function"?u[g+1]=k:(u.splice(g,3),g-=3),X2(u)}}}function W2(){function i(C){C.canIntercept&&C.info==="react-transition"&&C.intercept({handler:function(){return new Promise(function(N){return A=N})},focusReset:"manual",scroll:"manual"})}function a(){A!==null&&(A(),A=null),g||setTimeout(u,20)}function u(){if(!g&&!navigation.transition){var C=navigation.currentEntry;C&&C.url!=null&&navigation.navigate(C.url,{state:C.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,A=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){g=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),A!==null&&(A(),A=null)}}}function b1(i){this._internalRoot=i}_f.prototype.render=b1.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(s(409));var u=a.current,g=Dr();V2(u,g,i,a,null,null)},_f.prototype.unmount=b1.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;V2(i.current,2,null,i,null,null),Jh(),a[xi]=null}};function _f(i){this._internalRoot=i}_f.prototype.unstable_scheduleHydration=function(i){if(i){var a=wi();i={blockedOn:null,target:i,priority:a};for(var u=0;u<uo.length&&a!==0&&a<uo[u].priority;u++);uo.splice(u,0,i),u===0&&q2(i)}};var Q2=e.version;if(Q2!=="19.2.4")throw Error(s(527,Q2,"19.2.4"));xe.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=_(a),i=i!==null?S(i):null,i=i===null?null:i.stateNode,i};var Uv={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:me,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Af.isDisabled&&Af.supportsFiber)try{Yt=Af.inject(Uv),Ne=Af}catch{}}return xu.createRoot=function(i,a){if(!c(i))throw Error(s(299));var u=!1,g="",A=ny,C=iy,N=ry;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(A=a.onUncaughtError),a.onCaughtError!==void 0&&(C=a.onCaughtError),a.onRecoverableError!==void 0&&(N=a.onRecoverableError)),a=B2(i,1,!1,null,null,u,g,null,A,C,N,W2),i[xi]=a.current,c1(i),new b1(a)},xu.hydrateRoot=function(i,a,u){if(!c(i))throw Error(s(299));var g=!1,A="",C=ny,N=iy,k=ry,Q=null;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(A=u.identifierPrefix),u.onUncaughtError!==void 0&&(C=u.onUncaughtError),u.onCaughtError!==void 0&&(N=u.onCaughtError),u.onRecoverableError!==void 0&&(k=u.onRecoverableError),u.formState!==void 0&&(Q=u.formState)),a=B2(i,1,!0,a,u??null,g,A,Q,C,N,k,W2),a.context=U2(null),u=a.current,g=Dr(),g=Un(g),A=Qa(g),A.callback=null,Ka(u,A,g),u=g,a.current.lanes=u,Vr(a,u),Ms(a),i[xi]=a.current,c1(i),new _f(a)},xu.version="19.2.4",xu}var sE;function Qv(){if(sE)return O1.exports;sE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),O1.exports=Wv(),O1.exports}var Kv=Qv(),P1={exports:{}},k1={};var aE;function Zv(){if(aE)return k1;aE=1;var n=md().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return k1.c=function(e){return n.H.useMemoCache(e)},k1}var oE;function Jv(){return oE||(oE=1,P1.exports=Zv()),P1.exports}var pd=Jv();var lE="popstate";function $v(n={}){function e(s,c){let{pathname:h,search:p,hash:T}=s.location;return tg("",{pathname:h,search:p,hash:T},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function t(s,c){return typeof c=="string"?c:Fu(c)}return tS(e,t,null,n)}function kn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function js(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function eS(){return Math.random().toString(36).substring(2,10)}function cE(n,e){return{usr:n.state,key:n.key,idx:e}}function tg(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Nc(e):e,state:t,key:e&&e.key||s||eS()}}function Fu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Nc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function tS(n,e,t,s={}){let{window:c=document.defaultView,v5Compat:h=!1}=s,p=c.history,T="POP",w=null,_=S();_==null&&(_=0,p.replaceState({...p.state,idx:_},""));function S(){return(p.state||{idx:null}).idx}function b(){T="POP";let q=S(),pe=q==null?null:q-_;_=q,w&&w({action:T,location:Z.location,delta:pe})}function L(q,pe){T="PUSH";let le=tg(Z.location,q,pe);_=S()+1;let ne=cE(le,_),Re=Z.createHref(le);try{p.pushState(ne,"",Re)}catch(He){if(He instanceof DOMException&&He.name==="DataCloneError")throw He;c.location.assign(Re)}h&&w&&w({action:T,location:Z.location,delta:1})}function j(q,pe){T="REPLACE";let le=tg(Z.location,q,pe);_=S();let ne=cE(le,_),Re=Z.createHref(le);p.replaceState(ne,"",Re),h&&w&&w({action:T,location:Z.location,delta:0})}function W(q){return nS(q)}let Z={get action(){return T},get location(){return n(c,p)},listen(q){if(w)throw new Error("A history only accepts one active listener");return c.addEventListener(lE,b),w=q,()=>{c.removeEventListener(lE,b),w=null}},createHref(q){return e(c,q)},createURL:W,encodeLocation(q){let pe=W(q);return{pathname:pe.pathname,search:pe.search,hash:pe.hash}},push:L,replace:j,go(q){return p.go(q)}};return Z}function nS(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),kn(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:Fu(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function BA(n,e,t="/"){return iS(n,e,t,!1)}function iS(n,e,t,s){let c=typeof e=="string"?Nc(e):e,h=Sa(c.pathname||"/",t);if(h==null)return null;let p=UA(n);rS(p);let T=null;for(let w=0;T==null&&w<p.length;++w){let _=mS(h);T=dS(p[w],_,s)}return T}function UA(n,e=[],t=[],s="",c=!1){let h=(p,T,w=c,_)=>{let S={relativePath:_===void 0?p.path||"":_,caseSensitive:p.caseSensitive===!0,childrenIndex:T,route:p};if(S.relativePath.startsWith("/")){if(!S.relativePath.startsWith(s)&&w)return;kn(S.relativePath.startsWith(s),`Absolute route path "${S.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),S.relativePath=S.relativePath.slice(s.length)}let b=Ca([s,S.relativePath]),L=t.concat(S);p.children&&p.children.length>0&&(kn(p.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),UA(p.children,e,L,b,w)),!(p.path==null&&!p.index)&&e.push({path:b,score:hS(b,p.index),routesMeta:L})};return n.forEach((p,T)=>{if(p.path===""||!p.path?.includes("?"))h(p,T);else for(let w of VA(p.path))h(p,T,!0,w)}),e}function VA(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,c=t.endsWith("?"),h=t.replace(/\?$/,"");if(s.length===0)return c?[h,""]:[h];let p=VA(s.join("/")),T=[];return T.push(...p.map(w=>w===""?h:[h,w].join("/"))),c&&T.push(...p),T.map(w=>n.startsWith("/")&&w===""?"/":w)}function rS(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:fS(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var sS=/^:[\w-]+$/,aS=3,oS=2,lS=1,cS=10,uS=-2,uE=n=>n==="*";function hS(n,e){let t=n.split("/"),s=t.length;return t.some(uE)&&(s+=uS),e&&(s+=oS),t.filter(c=>!uE(c)).reduce((c,h)=>c+(sS.test(h)?aS:h===""?lS:cS),s)}function fS(n,e){return n.length===e.length&&n.slice(0,-1).every((s,c)=>s===e[c])?n[n.length-1]-e[e.length-1]:0}function dS(n,e,t=!1){let{routesMeta:s}=n,c={},h="/",p=[];for(let T=0;T<s.length;++T){let w=s[T],_=T===s.length-1,S=h==="/"?e:e.slice(h.length)||"/",b=Hf({path:w.relativePath,caseSensitive:w.caseSensitive,end:_},S),L=w.route;if(!b&&_&&t&&!s[s.length-1].route.index&&(b=Hf({path:w.relativePath,caseSensitive:w.caseSensitive,end:!1},S)),!b)return null;Object.assign(c,b.params),p.push({params:c,pathname:Ca([h,b.pathname]),pathnameBase:_S(Ca([h,b.pathnameBase])),route:L}),b.pathnameBase!=="/"&&(h=Ca([h,b.pathnameBase]))}return p}function Hf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=gS(n.path,n.caseSensitive,n.end),c=e.match(t);if(!c)return null;let h=c[0],p=h.replace(/(.)\/+$/,"$1"),T=c.slice(1);return{params:s.reduce((_,{paramName:S,isOptional:b},L)=>{if(S==="*"){let W=T[L]||"";p=h.slice(0,h.length-W.length).replace(/(.)\/+$/,"$1")}const j=T[L];return b&&!j?_[S]=void 0:_[S]=(j||"").replace(/%2F/g,"/"),_},{}),pathname:h,pathnameBase:p,pattern:n}}function gS(n,e=!1,t=!0){js(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],c="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,T,w)=>(s.push({paramName:T,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),c+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?c+="\\/*$":n!==""&&n!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,e?void 0:"i"),s]}function mS(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return js(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Sa(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}var pS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function yS(n,e="/"){let{pathname:t,search:s="",hash:c=""}=typeof n=="string"?Nc(n):n,h;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?h=hE(t.substring(1),"/"):h=hE(t,e)):h=e,{pathname:h,search:AS(s),hash:wS(c)}}function hE(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(c=>{c===".."?t.length>1&&t.pop():c!=="."&&t.push(c)}),t.length>1?t.join("/"):"/"}function B1(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ES(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function FA(n){let e=ES(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function zA(n,e,t,s=!1){let c;typeof n=="string"?c=Nc(n):(c={...n},kn(!c.pathname||!c.pathname.includes("?"),B1("?","pathname","search",c)),kn(!c.pathname||!c.pathname.includes("#"),B1("#","pathname","hash",c)),kn(!c.search||!c.search.includes("#"),B1("#","search","hash",c)));let h=n===""||c.pathname==="",p=h?"/":c.pathname,T;if(p==null)T=t;else{let b=e.length-1;if(!s&&p.startsWith("..")){let L=p.split("/");for(;L[0]==="..";)L.shift(),b-=1;c.pathname=L.join("/")}T=b>=0?e[b]:"/"}let w=yS(c,T),_=p&&p!=="/"&&p.endsWith("/"),S=(h||p===".")&&t.endsWith("/");return!w.pathname.endsWith("/")&&(_||S)&&(w.pathname+="/"),w}var Ca=n=>n.join("/").replace(/\/\/+/g,"/"),_S=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),AS=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,wS=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,xS=class{constructor(n,e,t,s=!1){this.status=n,this.statusText=e||"",this.internal=s,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function TS(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function CS(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var jA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function HA(n,e){let t=n;if(typeof t!="string"||!pS.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let s=t,c=!1;if(jA)try{let h=new URL(window.location.href),p=t.startsWith("//")?new URL(h.protocol+t):new URL(t),T=Sa(p.pathname,e);p.origin===h.origin&&T!=null?t=T+p.search+p.hash:c=!0}catch{js(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:c,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var GA=["POST","PUT","PATCH","DELETE"];new Set(GA);var vS=["GET",...GA];new Set(vS);var Oc=ge.createContext(null);Oc.displayName="DataRouter";var yd=ge.createContext(null);yd.displayName="DataRouterState";var SS=ge.createContext(!1),qA=ge.createContext({isTransitioning:!1});qA.displayName="ViewTransition";var IS=ge.createContext(new Map);IS.displayName="Fetchers";var bS=ge.createContext(null);bS.displayName="Await";var ss=ge.createContext(null);ss.displayName="Navigation";var th=ge.createContext(null);th.displayName="Location";var Oa=ge.createContext({outlet:null,matches:[],isDataRoute:!1});Oa.displayName="Route";var Bg=ge.createContext(null);Bg.displayName="RouteError";var YA="REACT_ROUTER_ERROR",RS="REDIRECT",NS="ROUTE_ERROR_RESPONSE";function OS(n){if(n.startsWith(`${YA}:${RS}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function DS(n){if(n.startsWith(`${YA}:${NS}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new xS(e.status,e.statusText,e.data)}catch{}}function MS(n,{relative:e}={}){kn(nh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=ge.useContext(ss),{hash:c,pathname:h,search:p}=ih(n,{relative:e}),T=h;return t!=="/"&&(T=h==="/"?t:Ca([t,h])),s.createHref({pathname:T,search:p,hash:c})}function nh(){return ge.useContext(th)!=null}function Sl(){return kn(nh(),"useLocation() may be used only in the context of a <Router> component."),ge.useContext(th).location}var XA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function WA(n){ge.useContext(ss).static||ge.useLayoutEffect(n)}function Ug(){let{isDataRoute:n}=ge.useContext(Oa);return n?YS():LS()}function LS(){kn(nh(),"useNavigate() may be used only in the context of a <Router> component.");let n=ge.useContext(Oc),{basename:e,navigator:t}=ge.useContext(ss),{matches:s}=ge.useContext(Oa),{pathname:c}=Sl(),h=JSON.stringify(FA(s)),p=ge.useRef(!1);return WA(()=>{p.current=!0}),ge.useCallback((w,_={})=>{if(js(p.current,XA),!p.current)return;if(typeof w=="number"){t.go(w);return}let S=zA(w,JSON.parse(h),c,_.relative==="path");n==null&&e!=="/"&&(S.pathname=S.pathname==="/"?e:Ca([e,S.pathname])),(_.replace?t.replace:t.push)(S,_.state,_)},[e,t,h,c,n])}ge.createContext(null);function ih(n,{relative:e}={}){let{matches:t}=ge.useContext(Oa),{pathname:s}=Sl(),c=JSON.stringify(FA(t));return ge.useMemo(()=>zA(n,JSON.parse(c),s,e==="path"),[n,c,s,e])}function PS(n,e){return QA(n,e)}function QA(n,e,t,s,c){kn(nh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=ge.useContext(ss),{matches:p}=ge.useContext(Oa),T=p[p.length-1],w=T?T.params:{},_=T?T.pathname:"/",S=T?T.pathnameBase:"/",b=T&&T.route;{let le=b&&b.path||"";ZA(_,!b||le.endsWith("*")||le.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${_}" (under <Route path="${le}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${le}"> to <Route path="${le==="/"?"*":`${le}/*`}">.`)}let L=Sl(),j;if(e){let le=typeof e=="string"?Nc(e):e;kn(S==="/"||le.pathname?.startsWith(S),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${le.pathname}" was given in the \`location\` prop.`),j=le}else j=L;let W=j.pathname||"/",Z=W;if(S!=="/"){let le=S.replace(/^\//,"").split("/");Z="/"+W.replace(/^\//,"").split("/").slice(le.length).join("/")}let q=BA(n,{pathname:Z});js(b||q!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),js(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let pe=FS(q&&q.map(le=>Object.assign({},le,{params:Object.assign({},w,le.params),pathname:Ca([S,h.encodeLocation?h.encodeLocation(le.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:le.pathname]),pathnameBase:le.pathnameBase==="/"?S:Ca([S,h.encodeLocation?h.encodeLocation(le.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:le.pathnameBase])})),p,t,s,c);return e&&pe?ge.createElement(th.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},pe):pe}function kS(){let n=qS(),e=TS(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:s},h={padding:"2px 4px",backgroundColor:s},p=null;return console.error("Error handled by React Router default ErrorBoundary:",n),p=ge.createElement(ge.Fragment,null,ge.createElement("p",null," Hey developer "),ge.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ge.createElement("code",{style:h},"ErrorBoundary")," or"," ",ge.createElement("code",{style:h},"errorElement")," prop on your route.")),ge.createElement(ge.Fragment,null,ge.createElement("h2",null,"Unexpected Application Error!"),ge.createElement("h3",{style:{fontStyle:"italic"}},e),t?ge.createElement("pre",{style:c},t):null,p)}var BS=ge.createElement(kS,null),KA=class extends ge.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=DS(n.digest);t&&(n=t)}let e=n!==void 0?ge.createElement(Oa.Provider,{value:this.props.routeContext},ge.createElement(Bg.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?ge.createElement(US,{error:n},e):e}};KA.contextType=SS;var U1=new WeakMap;function US({children:n,error:e}){let{basename:t}=ge.useContext(ss);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=OS(e.digest);if(s){let c=U1.get(e);if(c)throw c;let h=HA(s.location,t);if(jA&&!U1.get(e))if(h.isExternal||s.reloadDocument)window.location.href=h.absoluteURL||h.to;else{const p=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(h.to,{replace:s.replace}));throw U1.set(e,p),p}return ge.createElement("meta",{httpEquiv:"refresh",content:`0;url=${h.absoluteURL||h.to}`})}}return n}function VS({routeContext:n,match:e,children:t}){let s=ge.useContext(Oc);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),ge.createElement(Oa.Provider,{value:n},t)}function FS(n,e=[],t=null,s=null,c=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let h=n,p=t?.errors;if(p!=null){let S=h.findIndex(b=>b.route.id&&p?.[b.route.id]!==void 0);kn(S>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(p).join(",")}`),h=h.slice(0,Math.min(h.length,S+1))}let T=!1,w=-1;if(t)for(let S=0;S<h.length;S++){let b=h[S];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(w=S),b.route.id){let{loaderData:L,errors:j}=t,W=b.route.loader&&!L.hasOwnProperty(b.route.id)&&(!j||j[b.route.id]===void 0);if(b.route.lazy||W){T=!0,w>=0?h=h.slice(0,w+1):h=[h[0]];break}}}let _=t&&s?(S,b)=>{s(S,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:CS(t.matches),errorInfo:b})}:void 0;return h.reduceRight((S,b,L)=>{let j,W=!1,Z=null,q=null;t&&(j=p&&b.route.id?p[b.route.id]:void 0,Z=b.route.errorElement||BS,T&&(w<0&&L===0?(ZA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),W=!0,q=null):w===L&&(W=!0,q=b.route.hydrateFallbackElement||null)));let pe=e.concat(h.slice(0,L+1)),le=()=>{let ne;return j?ne=Z:W?ne=q:b.route.Component?ne=ge.createElement(b.route.Component,null):b.route.element?ne=b.route.element:ne=S,ge.createElement(VS,{match:b,routeContext:{outlet:S,matches:pe,isDataRoute:t!=null},children:ne})};return t&&(b.route.ErrorBoundary||b.route.errorElement||L===0)?ge.createElement(KA,{location:t.location,revalidation:t.revalidation,component:Z,error:j,children:le(),routeContext:{outlet:null,matches:pe,isDataRoute:!0},onError:_}):le()},null)}function Vg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zS(n){let e=ge.useContext(Oc);return kn(e,Vg(n)),e}function jS(n){let e=ge.useContext(yd);return kn(e,Vg(n)),e}function HS(n){let e=ge.useContext(Oa);return kn(e,Vg(n)),e}function Fg(n){let e=HS(n),t=e.matches[e.matches.length-1];return kn(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function GS(){return Fg("useRouteId")}function qS(){let n=ge.useContext(Bg),e=jS("useRouteError"),t=Fg("useRouteError");return n!==void 0?n:e.errors?.[t]}function YS(){let{router:n}=zS("useNavigate"),e=Fg("useNavigate"),t=ge.useRef(!1);return WA(()=>{t.current=!0}),ge.useCallback(async(c,h={})=>{js(t.current,XA),t.current&&(typeof c=="number"?await n.navigate(c):await n.navigate(c,{fromRouteId:e,...h}))},[n,e])}var fE={};function ZA(n,e,t){!e&&!fE[n]&&(fE[n]=!0,js(!1,t))}ge.memo(XS);function XS({routes:n,future:e,state:t,onError:s}){return QA(n,void 0,t,s,e)}function uc(n){kn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function WS({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:c,static:h=!1,unstable_useTransitions:p}){kn(!nh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let T=n.replace(/^\/*/,"/"),w=ge.useMemo(()=>({basename:T,navigator:c,static:h,unstable_useTransitions:p,future:{}}),[T,c,h,p]);typeof t=="string"&&(t=Nc(t));let{pathname:_="/",search:S="",hash:b="",state:L=null,key:j="default"}=t,W=ge.useMemo(()=>{let Z=Sa(_,T);return Z==null?null:{location:{pathname:Z,search:S,hash:b,state:L,key:j},navigationType:s}},[T,_,S,b,L,j,s]);return js(W!=null,`<Router basename="${T}"> is not able to match the URL "${_}${S}${b}" because it does not start with the basename, so the <Router> won't render anything.`),W==null?null:ge.createElement(ss.Provider,{value:w},ge.createElement(th.Provider,{children:e,value:W}))}function QS({children:n,location:e}){return PS(ng(n),e)}function ng(n,e=[]){let t=[];return ge.Children.forEach(n,(s,c)=>{if(!ge.isValidElement(s))return;let h=[...e,c];if(s.type===ge.Fragment){t.push.apply(t,ng(s.props.children,h));return}kn(s.type===uc,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),kn(!s.props.index||!s.props.children,"An index route cannot have child routes.");let p={id:s.props.id||h.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(p.children=ng(s.props.children,h)),t.push(p)}),t}var Rf="get",Nf="application/x-www-form-urlencoded";function Ed(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function KS(n){return Ed(n)&&n.tagName.toLowerCase()==="button"}function ZS(n){return Ed(n)&&n.tagName.toLowerCase()==="form"}function JS(n){return Ed(n)&&n.tagName.toLowerCase()==="input"}function $S(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function eI(n,e){return n.button===0&&(!e||e==="_self")&&!$S(n)}var xf=null;function tI(){if(xf===null)try{new FormData(document.createElement("form"),0),xf=!1}catch{xf=!0}return xf}var nI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function V1(n){return n!=null&&!nI.has(n)?(js(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Nf}"`),null):n}function iI(n,e){let t,s,c,h,p;if(ZS(n)){let T=n.getAttribute("action");s=T?Sa(T,e):null,t=n.getAttribute("method")||Rf,c=V1(n.getAttribute("enctype"))||Nf,h=new FormData(n)}else if(KS(n)||JS(n)&&(n.type==="submit"||n.type==="image")){let T=n.form;if(T==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let w=n.getAttribute("formaction")||T.getAttribute("action");if(s=w?Sa(w,e):null,t=n.getAttribute("formmethod")||T.getAttribute("method")||Rf,c=V1(n.getAttribute("formenctype"))||V1(T.getAttribute("enctype"))||Nf,h=new FormData(T,n),!tI()){let{name:_,type:S,value:b}=n;if(S==="image"){let L=_?`${_}.`:"";h.append(`${L}x`,"0"),h.append(`${L}y`,"0")}else _&&h.append(_,b)}}else{if(Ed(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Rf,s=null,c=Nf,p=n}return h&&c==="text/plain"&&(p=h,h=void 0),{action:s,method:t.toLowerCase(),encType:c,formData:h,body:p}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function zg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function rI(n,e,t,s){let c=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?c.pathname.endsWith("/")?c.pathname=`${c.pathname}_.${s}`:c.pathname=`${c.pathname}.${s}`:c.pathname==="/"?c.pathname=`_root.${s}`:e&&Sa(c.pathname,e)==="/"?c.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${s}`,c}async function sI(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function aI(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function oI(n,e,t){let s=await Promise.all(n.map(async c=>{let h=e.routes[c.route.id];if(h){let p=await sI(h,t);return p.links?p.links():[]}return[]}));return hI(s.flat(1).filter(aI).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function dE(n,e,t,s,c,h){let p=(w,_)=>t[_]?w.route.id!==t[_].route.id:!0,T=(w,_)=>t[_].pathname!==w.pathname||t[_].route.path?.endsWith("*")&&t[_].params["*"]!==w.params["*"];return h==="assets"?e.filter((w,_)=>p(w,_)||T(w,_)):h==="data"?e.filter((w,_)=>{let S=s.routes[w.route.id];if(!S||!S.hasLoader)return!1;if(p(w,_)||T(w,_))return!0;if(w.route.shouldRevalidate){let b=w.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:w.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function lI(n,e,{includeHydrateFallback:t}={}){return cI(n.map(s=>{let c=e.routes[s.route.id];if(!c)return[];let h=[c.module];return c.clientActionModule&&(h=h.concat(c.clientActionModule)),c.clientLoaderModule&&(h=h.concat(c.clientLoaderModule)),t&&c.hydrateFallbackModule&&(h=h.concat(c.hydrateFallbackModule)),c.imports&&(h=h.concat(c.imports)),h}).flat(1))}function cI(n){return[...new Set(n)]}function uI(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function hI(n,e){let t=new Set;return new Set(e),n.reduce((s,c)=>{let h=JSON.stringify(uI(c));return t.has(h)||(t.add(h),s.push({key:h,link:c})),s},[])}function JA(){let n=ge.useContext(Oc);return zg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function fI(){let n=ge.useContext(yd);return zg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var jg=ge.createContext(void 0);jg.displayName="FrameworkContext";function $A(){let n=ge.useContext(jg);return zg(n,"You must render this element inside a <HydratedRouter> element"),n}function dI(n,e){let t=ge.useContext(jg),[s,c]=ge.useState(!1),[h,p]=ge.useState(!1),{onFocus:T,onBlur:w,onMouseEnter:_,onMouseLeave:S,onTouchStart:b}=e,L=ge.useRef(null);ge.useEffect(()=>{if(n==="render"&&p(!0),n==="viewport"){let Z=pe=>{pe.forEach(le=>{p(le.isIntersecting)})},q=new IntersectionObserver(Z,{threshold:.5});return L.current&&q.observe(L.current),()=>{q.disconnect()}}},[n]),ge.useEffect(()=>{if(s){let Z=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout(Z)}}},[s]);let j=()=>{c(!0)},W=()=>{c(!1),p(!1)};return t?n!=="intent"?[h,L,{}]:[h,L,{onFocus:Tu(T,j),onBlur:Tu(w,W),onMouseEnter:Tu(_,j),onMouseLeave:Tu(S,W),onTouchStart:Tu(b,j)}]:[!1,L,{}]}function Tu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function gI({page:n,...e}){let{router:t}=JA(),s=ge.useMemo(()=>BA(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?ge.createElement(pI,{page:n,matches:s,...e}):null}function mI(n){let{manifest:e,routeModules:t}=$A(),[s,c]=ge.useState([]);return ge.useEffect(()=>{let h=!1;return oI(n,e,t).then(p=>{h||c(p)}),()=>{h=!0}},[n,e,t]),s}function pI({page:n,matches:e,...t}){let s=Sl(),{future:c,manifest:h,routeModules:p}=$A(),{basename:T}=JA(),{loaderData:w,matches:_}=fI(),S=ge.useMemo(()=>dE(n,e,_,h,s,"data"),[n,e,_,h,s]),b=ge.useMemo(()=>dE(n,e,_,h,s,"assets"),[n,e,_,h,s]),L=ge.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let Z=new Set,q=!1;if(e.forEach(le=>{let ne=h.routes[le.route.id];!ne||!ne.hasLoader||(!S.some(Re=>Re.route.id===le.route.id)&&le.route.id in w&&p[le.route.id]?.shouldRevalidate||ne.hasClientLoader?q=!0:Z.add(le.route.id))}),Z.size===0)return[];let pe=rI(n,T,c.unstable_trailingSlashAwareDataRequests,"data");return q&&Z.size>0&&pe.searchParams.set("_routes",e.filter(le=>Z.has(le.route.id)).map(le=>le.route.id).join(",")),[pe.pathname+pe.search]},[T,c.unstable_trailingSlashAwareDataRequests,w,s,h,S,e,n,p]),j=ge.useMemo(()=>lI(b,h),[b,h]),W=mI(b);return ge.createElement(ge.Fragment,null,L.map(Z=>ge.createElement("link",{key:Z,rel:"prefetch",as:"fetch",href:Z,...t})),j.map(Z=>ge.createElement("link",{key:Z,rel:"modulepreload",href:Z,...t})),W.map(({key:Z,link:q})=>ge.createElement("link",{key:Z,nonce:t.nonce,...q,crossOrigin:q.crossOrigin??t.crossOrigin})))}function yI(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var EI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{EI&&(window.__reactRouterVersion="7.13.0")}catch{}function _I({basename:n,children:e,unstable_useTransitions:t,window:s}){let c=ge.useRef();c.current==null&&(c.current=$v({window:s,v5Compat:!0}));let h=c.current,[p,T]=ge.useState({action:h.action,location:h.location}),w=ge.useCallback(_=>{t===!1?T(_):ge.startTransition(()=>T(_))},[t]);return ge.useLayoutEffect(()=>h.listen(w),[h,w]),ge.createElement(WS,{basename:n,children:e,location:p.location,navigationType:p.action,navigator:h,unstable_useTransitions:t})}var ew=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zu=ge.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:c,reloadDocument:h,replace:p,state:T,target:w,to:_,preventScrollReset:S,viewTransition:b,unstable_defaultShouldRevalidate:L,...j},W){let{basename:Z,unstable_useTransitions:q}=ge.useContext(ss),pe=typeof _=="string"&&ew.test(_),le=HA(_,Z);_=le.to;let ne=MS(_,{relative:c}),[Re,He,Be]=dI(s,j),U=TI(_,{replace:p,state:T,target:w,preventScrollReset:S,relative:c,viewTransition:b,unstable_defaultShouldRevalidate:L,unstable_useTransitions:q});function F(J){e&&e(J),J.defaultPrevented||U(J)}let B=ge.createElement("a",{...j,...Be,href:le.absoluteURL||ne,onClick:le.isExternal||h?e:F,ref:yI(W,He),target:w,"data-discover":!pe&&t==="render"?"true":void 0});return Re&&!pe?ge.createElement(ge.Fragment,null,B,ge.createElement(gI,{page:ne})):B});zu.displayName="Link";var AI=ge.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:c=!1,style:h,to:p,viewTransition:T,children:w,..._},S){let b=ih(p,{relative:_.relative}),L=Sl(),j=ge.useContext(yd),{navigator:W,basename:Z}=ge.useContext(ss),q=j!=null&&bI(b)&&T===!0,pe=W.encodeLocation?W.encodeLocation(b).pathname:b.pathname,le=L.pathname,ne=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;t||(le=le.toLowerCase(),ne=ne?ne.toLowerCase():null,pe=pe.toLowerCase()),ne&&Z&&(ne=Sa(ne,Z)||ne);const Re=pe!=="/"&&pe.endsWith("/")?pe.length-1:pe.length;let He=le===pe||!c&&le.startsWith(pe)&&le.charAt(Re)==="/",Be=ne!=null&&(ne===pe||!c&&ne.startsWith(pe)&&ne.charAt(pe.length)==="/"),U={isActive:He,isPending:Be,isTransitioning:q},F=He?e:void 0,B;typeof s=="function"?B=s(U):B=[s,He?"active":null,Be?"pending":null,q?"transitioning":null].filter(Boolean).join(" ");let J=typeof h=="function"?h(U):h;return ge.createElement(zu,{..._,"aria-current":F,className:B,ref:S,style:J,to:p,viewTransition:T},typeof w=="function"?w(U):w)});AI.displayName="NavLink";var wI=ge.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:c,state:h,method:p=Rf,action:T,onSubmit:w,relative:_,preventScrollReset:S,viewTransition:b,unstable_defaultShouldRevalidate:L,...j},W)=>{let{unstable_useTransitions:Z}=ge.useContext(ss),q=SI(),pe=II(T,{relative:_}),le=p.toLowerCase()==="get"?"get":"post",ne=typeof T=="string"&&ew.test(T),Re=He=>{if(w&&w(He),He.defaultPrevented)return;He.preventDefault();let Be=He.nativeEvent.submitter,U=Be?.getAttribute("formmethod")||p,F=()=>q(Be||He.currentTarget,{fetcherKey:e,method:U,navigate:t,replace:c,state:h,relative:_,preventScrollReset:S,viewTransition:b,unstable_defaultShouldRevalidate:L});Z&&t!==!1?ge.startTransition(()=>F()):F()};return ge.createElement("form",{ref:W,method:le,action:pe,onSubmit:s?w:Re,...j,"data-discover":!ne&&n==="render"?"true":void 0})});wI.displayName="Form";function xI(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tw(n){let e=ge.useContext(Oc);return kn(e,xI(n)),e}function TI(n,{target:e,replace:t,state:s,preventScrollReset:c,relative:h,viewTransition:p,unstable_defaultShouldRevalidate:T,unstable_useTransitions:w}={}){let _=Ug(),S=Sl(),b=ih(n,{relative:h});return ge.useCallback(L=>{if(eI(L,e)){L.preventDefault();let j=t!==void 0?t:Fu(S)===Fu(b),W=()=>_(n,{replace:j,state:s,preventScrollReset:c,relative:h,viewTransition:p,unstable_defaultShouldRevalidate:T});w?ge.startTransition(()=>W()):W()}},[S,_,b,t,s,e,n,c,h,p,T,w])}var CI=0,vI=()=>`__${String(++CI)}__`;function SI(){let{router:n}=tw("useSubmit"),{basename:e}=ge.useContext(ss),t=GS(),s=n.fetch,c=n.navigate;return ge.useCallback(async(h,p={})=>{let{action:T,method:w,encType:_,formData:S,body:b}=iI(h,e);if(p.navigate===!1){let L=p.fetcherKey||vI();await s(L,t,p.action||T,{unstable_defaultShouldRevalidate:p.unstable_defaultShouldRevalidate,preventScrollReset:p.preventScrollReset,formData:S,body:b,formMethod:p.method||w,formEncType:p.encType||_,flushSync:p.flushSync})}else await c(p.action||T,{unstable_defaultShouldRevalidate:p.unstable_defaultShouldRevalidate,preventScrollReset:p.preventScrollReset,formData:S,body:b,formMethod:p.method||w,formEncType:p.encType||_,replace:p.replace,state:p.state,fromRouteId:t,flushSync:p.flushSync,viewTransition:p.viewTransition})},[s,c,e,t])}function II(n,{relative:e}={}){let{basename:t}=ge.useContext(ss),s=ge.useContext(Oa);kn(s,"useFormAction must be used inside a RouteContext");let[c]=s.matches.slice(-1),h={...ih(n||".",{relative:e})},p=Sl();if(n==null){h.search=p.search;let T=new URLSearchParams(h.search),w=T.getAll("index");if(w.some(S=>S==="")){T.delete("index"),w.filter(b=>b).forEach(b=>T.append("index",b));let S=T.toString();h.search=S?`?${S}`:""}}return(!n||n===".")&&c.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(h.pathname=h.pathname==="/"?t:Ca([t,h.pathname])),Fu(h)}function bI(n,{relative:e}={}){let t=ge.useContext(qA);kn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=tw("useViewTransitionState"),c=ih(n,{relative:e});if(!t.isTransitioning)return!1;let h=Sa(t.currentLocation.pathname,s)||t.currentLocation.pathname,p=Sa(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Hf(c.pathname,p)!=null||Hf(c.pathname,h)!=null}const nw=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();const RI=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const NI=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());const gE=n=>{const e=NI(n);return e.charAt(0).toUpperCase()+e.slice(1)};var OI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const DI=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const MI=ge.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:c="",children:h,iconNode:p,...T},w)=>ge.createElement("svg",{ref:w,...OI,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:nw("lucide",c),...!h&&!DI(T)&&{"aria-hidden":"true"},...T},[...p.map(([_,S])=>ge.createElement(_,S)),...Array.isArray(h)?h:[h]]));const Dc=(n,e)=>{const t=ge.forwardRef(({className:s,...c},h)=>ge.createElement(MI,{ref:h,iconNode:e,className:nw(`lucide-${RI(gE(n))}`,`lucide-${n}`,s),...c}));return t.displayName=gE(n),t};const LI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],mE=Dc("arrow-right",LI);const PI=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kI=Dc("clock",PI);const BI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],UI=Dc("globe",BI);const VI=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],FI=Dc("shield-check",VI);const zI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],jI=Dc("users",zI);const HI=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],pE=Dc("zap",HI),GI=()=>{const n=pd.c(10);let e;n[0]===Symbol.for("react.memo_cache_sentinel")?(e=re.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-50 text-blue-600 px-4 py-2 rounded-full text-sm font-bold mb-8 shadow-sm",children:[re.jsx(pE,{size:16,fill:"currentColor",className:"animate-pulse"}),re.jsx("span",{children:"Real-time Queue Sync Active"})]}),n[0]=e):e=n[0];let t,s;n[1]===Symbol.for("react.memo_cache_sentinel")?(t=re.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-slate-900 mb-6 tracking-tight leading-tight",children:["Skip the Wait, ",re.jsx("br",{}),re.jsx("span",{className:"text-blue-600",children:"Join Digitally."})]}),s=re.jsx("p",{className:"text-lg md:text-xl text-slate-600 max-w-2xl mx-auto mb-16 leading-relaxed",children:"Smart queue management with a simple scan. Track your turn from anywhere. No more standing in long lines."}),n[1]=t,n[2]=s):(t=n[1],s=n[2]);let c;n[3]===Symbol.for("react.memo_cache_sentinel")?(c=re.jsxs("div",{children:[re.jsx("div",{className:"bg-blue-100 w-16 h-16 rounded-2xl flex items-center justify-center mb-6 group-hover:rotate-6 transition-transform",children:re.jsx(jI,{className:"text-blue-600",size:32})}),re.jsx("h3",{className:"text-3xl font-bold text-slate-800 mb-3 flex items-center gap-2",children:"Join a Queue"}),re.jsx("p",{className:"text-slate-500 text-lg",children:"Scan a QR code to get your virtual token. Get live updates on your position and wait time."})]}),n[3]=c):c=n[3];let h;n[4]===Symbol.for("react.memo_cache_sentinel")?(h=re.jsx(zu,{to:"/queueflow/user",className:"group",children:re.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-xl shadow-slate-200/50 border-b-8 border-blue-600 hover:-translate-y-3 transition-all duration-300 text-left h-full flex flex-col justify-between",children:[c,re.jsxs("div",{className:"mt-8 flex items-center text-blue-600 font-bold group-hover:gap-2 transition-all",children:["Open Scanner ",re.jsx(mE,{size:20,className:"ml-2"})]})]})}),n[4]=h):h=n[4];let p;n[5]===Symbol.for("react.memo_cache_sentinel")?(p=re.jsxs("div",{children:[re.jsx("div",{className:"bg-purple-100 w-16 h-16 rounded-2xl flex items-center justify-center mb-6 group-hover:-rotate-6 transition-transform",children:re.jsx(FI,{className:"text-purple-600",size:32})}),re.jsx("h3",{className:"text-3xl font-bold text-slate-800 mb-3 flex items-center gap-2",children:"Admin Panel"}),re.jsx("p",{className:"text-slate-500 text-lg",children:"Create queues, generate QR codes, and manage your visitors with real-time controls."})]}),n[5]=p):p=n[5];let T;n[6]===Symbol.for("react.memo_cache_sentinel")?(T=re.jsxs("div",{className:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto px-4",children:[h,re.jsx(zu,{to:"/queueflow/admin-login",className:"group",children:re.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-xl shadow-slate-200/50 border-b-8 border-purple-600 hover:-translate-y-3 transition-all duration-300 text-left h-full flex flex-col justify-between",children:[p,re.jsxs("div",{className:"mt-8 flex items-center text-purple-600 font-bold group-hover:gap-2 transition-all",children:["Login as Admin ",re.jsx(mE,{size:20,className:"ml-2"})]})]})})]}),n[6]=T):T=n[6];let w;n[7]===Symbol.for("react.memo_cache_sentinel")?(w=re.jsxs("div",{className:"flex flex-col items-center group",children:[re.jsx("div",{className:"bg-white shadow-md p-4 rounded-full mb-4 text-slate-700 group-hover:text-blue-600 transition-colors",children:re.jsx(kI,{size:24})}),re.jsx("h4",{className:"font-bold text-slate-800 text-lg",children:"Save Time"}),re.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Reduce waiting by 80%"})]}),n[7]=w):w=n[7];let _;n[8]===Symbol.for("react.memo_cache_sentinel")?(_=re.jsxs("div",{className:"flex flex-col items-center group",children:[re.jsx("div",{className:"bg-white shadow-md p-4 rounded-full mb-4 text-slate-700 group-hover:text-blue-600 transition-colors",children:re.jsx(UI,{size:24})}),re.jsx("h4",{className:"font-bold text-slate-800 text-lg",children:"Access Anywhere"}),re.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Check status on mobile"})]}),n[8]=_):_=n[8];let S;return n[9]===Symbol.for("react.memo_cache_sentinel")?(S=re.jsx("div",{className:"min-h-screen bg-slate-50 font-sans",children:re.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-16 text-center",children:[e,t,s,T,re.jsxs("div",{className:"mt-28 grid grid-cols-1 sm:grid-cols-3 gap-12 border-t border-slate-200 pt-16",children:[w,_,re.jsxs("div",{className:"flex flex-col items-center group",children:[re.jsx("div",{className:"bg-white shadow-md p-4 rounded-full mb-4 text-slate-700 group-hover:text-blue-600 transition-colors",children:re.jsx(pE,{size:24})}),re.jsx("h4",{className:"font-bold text-slate-800 text-lg",children:"Live Updates"}),re.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Real-time synchronization"})]})]})]})}),n[9]=S):S=n[9],S},qI=()=>{};var yE={};const iw=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let c=n.charCodeAt(s);c<128?e[t++]=c:c<2048?(e[t++]=c>>6|192,e[t++]=c&63|128):(c&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(c=65536+((c&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=c>>18|240,e[t++]=c>>12&63|128,e[t++]=c>>6&63|128,e[t++]=c&63|128):(e[t++]=c>>12|224,e[t++]=c>>6&63|128,e[t++]=c&63|128)}return e},YI=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const c=n[t++];if(c<128)e[s++]=String.fromCharCode(c);else if(c>191&&c<224){const h=n[t++];e[s++]=String.fromCharCode((c&31)<<6|h&63)}else if(c>239&&c<365){const h=n[t++],p=n[t++],T=n[t++],w=((c&7)<<18|(h&63)<<12|(p&63)<<6|T&63)-65536;e[s++]=String.fromCharCode(55296+(w>>10)),e[s++]=String.fromCharCode(56320+(w&1023))}else{const h=n[t++],p=n[t++];e[s++]=String.fromCharCode((c&15)<<12|(h&63)<<6|p&63)}}return e.join("")},rw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let c=0;c<n.length;c+=3){const h=n[c],p=c+1<n.length,T=p?n[c+1]:0,w=c+2<n.length,_=w?n[c+2]:0,S=h>>2,b=(h&3)<<4|T>>4;let L=(T&15)<<2|_>>6,j=_&63;w||(j=64,p||(L=64)),s.push(t[S],t[b],t[L],t[j])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(iw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):YI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let c=0;c<n.length;){const h=t[n.charAt(c++)],T=c<n.length?t[n.charAt(c)]:0;++c;const _=c<n.length?t[n.charAt(c)]:64;++c;const b=c<n.length?t[n.charAt(c)]:64;if(++c,h==null||T==null||_==null||b==null)throw new XI;const L=h<<2|T>>4;if(s.push(L),_!==64){const j=T<<4&240|_>>2;if(s.push(j),b!==64){const W=_<<6&192|b;s.push(W)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class XI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WI=function(n){const e=iw(n);return rw.encodeByteArray(e,!0)},Gf=function(n){return WI(n).replace(/\./g,"")},sw=function(n){try{return rw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function QI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const KI=()=>QI().__FIREBASE_DEFAULTS__,ZI=()=>{if(typeof process>"u"||typeof yE>"u")return;const n=yE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},JI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&sw(n[1]);return e&&JSON.parse(e)},_d=()=>{try{return qI()||KI()||ZI()||JI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},aw=n=>_d()?.emulatorHosts?.[n],$I=n=>{const e=aw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},ow=()=>_d()?.config,lw=n=>_d()?.[`_${n}`];class eb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function Mc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cw(n){return(await fetch(n,{credentials:"include"})).ok}function tb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",c=n.iat||0,h=n.sub||n.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p={iss:`https://securetoken.google.com/${s}`,aud:s,iat:c,exp:c+3600,auth_time:c,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Gf(JSON.stringify(t)),Gf(JSON.stringify(p)),""].join(".")}const Du={};function nb(){const n={prod:[],emulator:[]};for(const e of Object.keys(Du))Du[e]?n.emulator.push(e):n.prod.push(e);return n}function ib(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let EE=!1;function uw(n,e){if(typeof window>"u"||typeof document>"u"||!Mc(window.location.host)||Du[n]===e||Du[n]||EE)return;Du[n]=e;function t(L){return`__firebase__banner__${L}`}const s="__firebase__banner",h=nb().prod.length>0;function p(){const L=document.getElementById(s);L&&L.remove()}function T(L){L.style.display="flex",L.style.background="#7faaf0",L.style.position="fixed",L.style.bottom="5px",L.style.left="5px",L.style.padding=".5em",L.style.borderRadius="5px",L.style.alignItems="center"}function w(L,j){L.setAttribute("width","24"),L.setAttribute("id",j),L.setAttribute("height","24"),L.setAttribute("viewBox","0 0 24 24"),L.setAttribute("fill","none"),L.style.marginLeft="-6px"}function _(){const L=document.createElement("span");return L.style.cursor="pointer",L.style.marginLeft="16px",L.style.fontSize="24px",L.innerHTML=" &times;",L.onclick=()=>{EE=!0,p()},L}function S(L,j){L.setAttribute("id",j),L.innerText="Learn more",L.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",L.setAttribute("target","__blank"),L.style.paddingLeft="5px",L.style.textDecoration="underline"}function b(){const L=ib(s),j=t("text"),W=document.getElementById(j)||document.createElement("span"),Z=t("learnmore"),q=document.getElementById(Z)||document.createElement("a"),pe=t("preprendIcon"),le=document.getElementById(pe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(L.created){const ne=L.element;T(ne),S(q,Z);const Re=_();w(le,pe),ne.append(le,W,q,Re),document.body.appendChild(ne)}h?(W.innerText="Preview backend disconnected.",le.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(le.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function Xi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xi())}function sb(){const n=_d()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ab(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hw(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ob(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lb(){const n=Xi();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function cb(){return!sb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fw(){try{return typeof indexedDB=="object"}catch{return!1}}function dw(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(s);c.onsuccess=()=>{c.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},c.onupgradeneeded=()=>{t=!1},c.onerror=()=>{e(c.error?.message||"")}}catch(t){e(t)}})}function ub(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const hb="FirebaseError";class Ts extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=hb,Object.setPrototypeOf(this,Ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Il.prototype.create)}}class Il{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},c=`${this.service}/${e}`,h=this.errors[e],p=h?fb(h,s):"Error",T=`${this.serviceName}: ${p} (${c}).`;return new Ts(c,T,s)}}function fb(n,e){return n.replace(db,(t,s)=>{const c=e[s];return c!=null?String(c):`<${s}?>`})}const db=/\{\$([^}]+)}/g;function gb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Io(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const c of t){if(!s.includes(c))return!1;const h=n[c],p=e[c];if(_E(h)&&_E(p)){if(!Io(h,p))return!1}else if(h!==p)return!1}for(const c of s)if(!t.includes(c))return!1;return!0}function _E(n){return n!==null&&typeof n=="object"}function rh(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(c=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(c))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function vu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[c,h]=s.split("=");e[decodeURIComponent(c)]=decodeURIComponent(h)}}),e}function Su(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function mb(n,e){const t=new pb(n,e);return t.subscribe.bind(t)}class pb{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let c;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");yb(e,["next","error","complete"])?c=e:c={next:e,error:t,complete:s},c.next===void 0&&(c.next=F1),c.error===void 0&&(c.error=F1),c.complete===void 0&&(c.complete=F1);const h=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?c.error(this.finalError):c.complete()}catch{}}),this.observers.push(c),h}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yb(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function F1(){}const Eb=1e3,_b=2,Ab=14400*1e3,wb=.5;function AE(n,e=Eb,t=_b){const s=e*Math.pow(t,n),c=Math.round(wb*s*(Math.random()-.5)*2);return Math.min(Ab,s+c)}function Gn(n){return n&&n._delegate?n._delegate:n}class As{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ul="[DEFAULT]";class xb{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new eb;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:t});c&&s.resolve(c)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(c){if(s)return null;throw c}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Cb(e))try{this.getOrInitializeService({instanceIdentifier:ul})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(t);try{const h=this.getOrInitializeService({instanceIdentifier:c});s.resolve(h)}catch{}}}}clearInstance(e=ul){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ul){return this.instances.has(e)}getOptions(e=ul){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[h,p]of this.instancesDeferred.entries()){const T=this.normalizeInstanceIdentifier(h);s===T&&p.resolve(c)}return c}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),c=this.onInitCallbacks.get(s)??new Set;c.add(e),this.onInitCallbacks.set(s,c);const h=this.instances.get(s);return h&&e(h,s),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const c of s)try{c(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Tb(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ul){return this.component?this.component.multipleInstances?e:ul:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Tb(n){return n===ul?void 0:n}function Cb(n){return n.instantiationMode==="EAGER"}class vb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var kt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(kt||(kt={}));const Sb={debug:kt.DEBUG,verbose:kt.VERBOSE,info:kt.INFO,warn:kt.WARN,error:kt.ERROR,silent:kt.SILENT},Ib=kt.INFO,bb={[kt.DEBUG]:"log",[kt.VERBOSE]:"log",[kt.INFO]:"info",[kt.WARN]:"warn",[kt.ERROR]:"error"},Rb=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),c=bb[e];if(c)console[c](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ad{constructor(e){this.name=e,this._logLevel=Ib,this._logHandler=Rb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Sb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,kt.DEBUG,...e),this._logHandler(this,kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,kt.VERBOSE,...e),this._logHandler(this,kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,kt.INFO,...e),this._logHandler(this,kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,kt.WARN,...e),this._logHandler(this,kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,kt.ERROR,...e),this._logHandler(this,kt.ERROR,...e)}}const Nb=(n,e)=>e.some(t=>n instanceof t);let wE,xE;function Ob(){return wE||(wE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Db(){return xE||(xE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gw=new WeakMap,ig=new WeakMap,mw=new WeakMap,z1=new WeakMap,Hg=new WeakMap;function Mb(n){const e=new Promise((t,s)=>{const c=()=>{n.removeEventListener("success",h),n.removeEventListener("error",p)},h=()=>{t(wo(n.result)),c()},p=()=>{s(n.error),c()};n.addEventListener("success",h),n.addEventListener("error",p)});return e.then(t=>{t instanceof IDBCursor&&gw.set(t,n)}).catch(()=>{}),Hg.set(e,n),e}function Lb(n){if(ig.has(n))return;const e=new Promise((t,s)=>{const c=()=>{n.removeEventListener("complete",h),n.removeEventListener("error",p),n.removeEventListener("abort",p)},h=()=>{t(),c()},p=()=>{s(n.error||new DOMException("AbortError","AbortError")),c()};n.addEventListener("complete",h),n.addEventListener("error",p),n.addEventListener("abort",p)});ig.set(n,e)}let rg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ig.get(n);if(e==="objectStoreNames")return n.objectStoreNames||mw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Pb(n){rg=n(rg)}function kb(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(j1(this),e,...t);return mw.set(s,e.sort?e.sort():[e]),wo(s)}:Db().includes(n)?function(...e){return n.apply(j1(this),e),wo(gw.get(this))}:function(...e){return wo(n.apply(j1(this),e))}}function Bb(n){return typeof n=="function"?kb(n):(n instanceof IDBTransaction&&Lb(n),Nb(n,Ob())?new Proxy(n,rg):n)}function wo(n){if(n instanceof IDBRequest)return Mb(n);if(z1.has(n))return z1.get(n);const e=Bb(n);return e!==n&&(z1.set(n,e),Hg.set(e,n)),e}const j1=n=>Hg.get(n);function pw(n,e,{blocked:t,upgrade:s,blocking:c,terminated:h}={}){const p=indexedDB.open(n,e),T=wo(p);return s&&p.addEventListener("upgradeneeded",w=>{s(wo(p.result),w.oldVersion,w.newVersion,wo(p.transaction),w)}),t&&p.addEventListener("blocked",w=>t(w.oldVersion,w.newVersion,w)),T.then(w=>{h&&w.addEventListener("close",()=>h()),c&&w.addEventListener("versionchange",_=>c(_.oldVersion,_.newVersion,_))}).catch(()=>{}),T}const Ub=["get","getKey","getAll","getAllKeys","count"],Vb=["put","add","delete","clear"],H1=new Map;function TE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(H1.get(e))return H1.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,c=Vb.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(c||Ub.includes(t)))return;const h=async function(p,...T){const w=this.transaction(p,c?"readwrite":"readonly");let _=w.store;return s&&(_=_.index(T.shift())),(await Promise.all([_[t](...T),c&&w.done]))[0]};return H1.set(e,h),h}Pb(n=>({...n,get:(e,t,s)=>TE(e,t)||n.get(e,t,s),has:(e,t)=>!!TE(e,t)||n.has(e,t)}));class Fb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(zb(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function zb(n){return n.getComponent()?.type==="VERSION"}const sg="@firebase/app",CE="0.14.7";const Ia=new Ad("@firebase/app"),jb="@firebase/app-compat",Hb="@firebase/analytics-compat",Gb="@firebase/analytics",qb="@firebase/app-check-compat",Yb="@firebase/app-check",Xb="@firebase/auth",Wb="@firebase/auth-compat",Qb="@firebase/database",Kb="@firebase/data-connect",Zb="@firebase/database-compat",Jb="@firebase/functions",$b="@firebase/functions-compat",e3="@firebase/installations",t3="@firebase/installations-compat",n3="@firebase/messaging",i3="@firebase/messaging-compat",r3="@firebase/performance",s3="@firebase/performance-compat",a3="@firebase/remote-config",o3="@firebase/remote-config-compat",l3="@firebase/storage",c3="@firebase/storage-compat",u3="@firebase/firestore",h3="@firebase/ai",f3="@firebase/firestore-compat",d3="firebase",g3="12.8.0";const ag="[DEFAULT]",m3={[sg]:"fire-core",[jb]:"fire-core-compat",[Gb]:"fire-analytics",[Hb]:"fire-analytics-compat",[Yb]:"fire-app-check",[qb]:"fire-app-check-compat",[Xb]:"fire-auth",[Wb]:"fire-auth-compat",[Qb]:"fire-rtdb",[Kb]:"fire-data-connect",[Zb]:"fire-rtdb-compat",[Jb]:"fire-fn",[$b]:"fire-fn-compat",[e3]:"fire-iid",[t3]:"fire-iid-compat",[n3]:"fire-fcm",[i3]:"fire-fcm-compat",[r3]:"fire-perf",[s3]:"fire-perf-compat",[a3]:"fire-rc",[o3]:"fire-rc-compat",[l3]:"fire-gcs",[c3]:"fire-gcs-compat",[u3]:"fire-fst",[f3]:"fire-fst-compat",[h3]:"fire-vertex","fire-js":"fire-js",[d3]:"fire-js-all"};const qf=new Map,p3=new Map,og=new Map;function vE(n,e){try{n.container.addComponent(e)}catch(t){Ia.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Hs(n){const e=n.name;if(og.has(e))return Ia.debug(`There were multiple attempts to register component ${e}.`),!1;og.set(e,n);for(const t of qf.values())vE(t,n);for(const t of p3.values())vE(t,n);return!0}function bl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ns(n){return n==null?!1:n.settings!==void 0}const y3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xo=new Il("app","Firebase",y3);class E3{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new As("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xo.create("app-deleted",{appName:this._name})}}const Lc=g3;function yw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:ag,automaticDataCollectionEnabled:!0,...e},c=s.name;if(typeof c!="string"||!c)throw xo.create("bad-app-name",{appName:String(c)});if(t||(t=ow()),!t)throw xo.create("no-options");const h=qf.get(c);if(h){if(Io(t,h.options)&&Io(s,h.config))return h;throw xo.create("duplicate-app",{appName:c})}const p=new vb(c);for(const w of og.values())p.addComponent(w);const T=new E3(t,s,p);return qf.set(c,T),T}function Gg(n=ag){const e=qf.get(n);if(!e&&n===ag&&ow())return yw();if(!e)throw xo.create("no-app",{appName:n});return e}function rs(n,e,t){let s=m3[n]??n;t&&(s+=`-${t}`);const c=s.match(/\s|\//),h=e.match(/\s|\//);if(c||h){const p=[`Unable to register library "${s}" with version "${e}":`];c&&p.push(`library name "${s}" contains illegal characters (whitespace or "/")`),c&&h&&p.push("and"),h&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ia.warn(p.join(" "));return}Hs(new As(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const _3="firebase-heartbeat-database",A3=1,ju="firebase-heartbeat-store";let G1=null;function Ew(){return G1||(G1=pw(_3,A3,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ju)}catch(t){console.warn(t)}}}}).catch(n=>{throw xo.create("idb-open",{originalErrorMessage:n.message})})),G1}async function w3(n){try{const t=(await Ew()).transaction(ju),s=await t.objectStore(ju).get(_w(n));return await t.done,s}catch(e){if(e instanceof Ts)Ia.warn(e.message);else{const t=xo.create("idb-get",{originalErrorMessage:e?.message});Ia.warn(t.message)}}}async function SE(n,e){try{const s=(await Ew()).transaction(ju,"readwrite");await s.objectStore(ju).put(e,_w(n)),await s.done}catch(t){if(t instanceof Ts)Ia.warn(t.message);else{const s=xo.create("idb-set",{originalErrorMessage:t?.message});Ia.warn(s.message)}}}function _w(n){return`${n.name}!${n.options.appId}`}const x3=1024,T3=30;class C3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new S3(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=IE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(c=>c.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>T3){const c=I3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ia.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=IE(),{heartbeatsToSend:t,unsentEntries:s}=v3(this._heartbeatsCache.heartbeats),c=Gf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(e){return Ia.warn(e),""}}}function IE(){return new Date().toISOString().substring(0,10)}function v3(n,e=x3){const t=[];let s=n.slice();for(const c of n){const h=t.find(p=>p.agent===c.agent);if(h){if(h.dates.push(c.date),bE(t)>e){h.dates.pop();break}}else if(t.push({agent:c.agent,dates:[c.date]}),bE(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class S3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fw()?dw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await w3(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return SE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return SE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function bE(n){return Gf(JSON.stringify({version:2,heartbeats:n})).length}function I3(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}function b3(n){Hs(new As("platform-logger",e=>new Fb(e),"PRIVATE")),Hs(new As("heartbeat",e=>new C3(e),"PRIVATE")),rs(sg,CE,n),rs(sg,CE,"esm2020"),rs("fire-js","")}b3("");var R3="firebase",N3="12.8.0";rs(R3,N3,"app");const Aw="@firebase/installations",qg="0.6.19";const ww=1e4,xw=`w:${qg}`,Tw="FIS_v2",O3="https://firebaseinstallations.googleapis.com/v1",D3=3600*1e3,M3="installations",L3="Installations";const P3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},pl=new Il(M3,L3,P3);function Cw(n){return n instanceof Ts&&n.code.includes("request-failed")}function vw({projectId:n}){return`${O3}/projects/${n}/installations`}function Sw(n){return{token:n.token,requestStatus:2,expiresIn:B3(n.expiresIn),creationTime:Date.now()}}async function Iw(n,e){const s=(await e.json()).error;return pl.create("request-failed",{requestName:n,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function bw({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function k3(n,{refreshToken:e}){const t=bw(n);return t.append("Authorization",U3(e)),t}async function Rw(n){const e=await n();return e.status>=500&&e.status<600?n():e}function B3(n){return Number(n.replace("s","000"))}function U3(n){return`${Tw} ${n}`}async function V3({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const s=vw(n),c=bw(n),h=e.getImmediate({optional:!0});if(h){const _=await h.getHeartbeatsHeader();_&&c.append("x-firebase-client",_)}const p={fid:t,authVersion:Tw,appId:n.appId,sdkVersion:xw},T={method:"POST",headers:c,body:JSON.stringify(p)},w=await Rw(()=>fetch(s,T));if(w.ok){const _=await w.json();return{fid:_.fid||t,registrationStatus:2,refreshToken:_.refreshToken,authToken:Sw(_.authToken)}}else throw await Iw("Create Installation",w)}function Nw(n){return new Promise(e=>{setTimeout(e,n)})}function F3(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}const z3=/^[cdef][\w-]{21}$/,lg="";function j3(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=H3(n);return z3.test(t)?t:lg}catch{return lg}}function H3(n){return F3(n).substr(0,22)}function wd(n){return`${n.appName}!${n.appId}`}const Ow=new Map;function Dw(n,e){const t=wd(n);Mw(t,e),G3(t,e)}function Mw(n,e){const t=Ow.get(n);if(t)for(const s of t)s(e)}function G3(n,e){const t=q3();t&&t.postMessage({key:n,fid:e}),Y3()}let hl=null;function q3(){return!hl&&"BroadcastChannel"in self&&(hl=new BroadcastChannel("[Firebase] FID Change"),hl.onmessage=n=>{Mw(n.data.key,n.data.fid)}),hl}function Y3(){Ow.size===0&&hl&&(hl.close(),hl=null)}const X3="firebase-installations-database",W3=1,yl="firebase-installations-store";let q1=null;function Yg(){return q1||(q1=pw(X3,W3,{upgrade:(n,e)=>{e===0&&n.createObjectStore(yl)}})),q1}async function Yf(n,e){const t=wd(n),c=(await Yg()).transaction(yl,"readwrite"),h=c.objectStore(yl),p=await h.get(t);return await h.put(e,t),await c.done,(!p||p.fid!==e.fid)&&Dw(n,e.fid),e}async function Lw(n){const e=wd(n),s=(await Yg()).transaction(yl,"readwrite");await s.objectStore(yl).delete(e),await s.done}async function xd(n,e){const t=wd(n),c=(await Yg()).transaction(yl,"readwrite"),h=c.objectStore(yl),p=await h.get(t),T=e(p);return T===void 0?await h.delete(t):await h.put(T,t),await c.done,T&&(!p||p.fid!==T.fid)&&Dw(n,T.fid),T}async function Xg(n){let e;const t=await xd(n.appConfig,s=>{const c=Q3(s),h=K3(n,c);return e=h.registrationPromise,h.installationEntry});return t.fid===lg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function Q3(n){const e=n||{fid:j3(),registrationStatus:0};return Pw(e)}function K3(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const c=Promise.reject(pl.create("app-offline"));return{installationEntry:e,registrationPromise:c}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=Z3(n,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:J3(n)}:{installationEntry:e}}async function Z3(n,e){try{const t=await V3(n,e);return Yf(n.appConfig,t)}catch(t){throw Cw(t)&&t.customData.serverCode===409?await Lw(n.appConfig):await Yf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function J3(n){let e=await RE(n.appConfig);for(;e.registrationStatus===1;)await Nw(100),e=await RE(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await Xg(n);return s||t}return e}function RE(n){return xd(n,e=>{if(!e)throw pl.create("installation-not-found");return Pw(e)})}function Pw(n){return $3(n)?{fid:n.fid,registrationStatus:0}:n}function $3(n){return n.registrationStatus===1&&n.registrationTime+ww<Date.now()}async function e4({appConfig:n,heartbeatServiceProvider:e},t){const s=t4(n,t),c=k3(n,t),h=e.getImmediate({optional:!0});if(h){const _=await h.getHeartbeatsHeader();_&&c.append("x-firebase-client",_)}const p={installation:{sdkVersion:xw,appId:n.appId}},T={method:"POST",headers:c,body:JSON.stringify(p)},w=await Rw(()=>fetch(s,T));if(w.ok){const _=await w.json();return Sw(_)}else throw await Iw("Generate Auth Token",w)}function t4(n,{fid:e}){return`${vw(n)}/${e}/authTokens:generate`}async function Wg(n,e=!1){let t;const s=await xd(n.appConfig,h=>{if(!kw(h))throw pl.create("not-registered");const p=h.authToken;if(!e&&r4(p))return h;if(p.requestStatus===1)return t=n4(n,e),h;{if(!navigator.onLine)throw pl.create("app-offline");const T=a4(h);return t=i4(n,T),T}});return t?await t:s.authToken}async function n4(n,e){let t=await NE(n.appConfig);for(;t.authToken.requestStatus===1;)await Nw(100),t=await NE(n.appConfig);const s=t.authToken;return s.requestStatus===0?Wg(n,e):s}function NE(n){return xd(n,e=>{if(!kw(e))throw pl.create("not-registered");const t=e.authToken;return o4(t)?{...e,authToken:{requestStatus:0}}:e})}async function i4(n,e){try{const t=await e4(n,e),s={...e,authToken:t};return await Yf(n.appConfig,s),t}catch(t){if(Cw(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Lw(n.appConfig);else{const s={...e,authToken:{requestStatus:0}};await Yf(n.appConfig,s)}throw t}}function kw(n){return n!==void 0&&n.registrationStatus===2}function r4(n){return n.requestStatus===2&&!s4(n)}function s4(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+D3}function a4(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function o4(n){return n.requestStatus===1&&n.requestTime+ww<Date.now()}async function l4(n){const e=n,{installationEntry:t,registrationPromise:s}=await Xg(e);return s?s.catch(console.error):Wg(e).catch(console.error),t.fid}async function c4(n,e=!1){const t=n;return await u4(t),(await Wg(t,e)).token}async function u4(n){const{registrationPromise:e}=await Xg(n);e&&await e}function h4(n){if(!n||!n.options)throw Y1("App Configuration");if(!n.name)throw Y1("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Y1(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Y1(n){return pl.create("missing-app-config-values",{valueName:n})}const Bw="installations",f4="installations-internal",d4=n=>{const e=n.getProvider("app").getImmediate(),t=h4(e),s=bl(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},g4=n=>{const e=n.getProvider("app").getImmediate(),t=bl(e,Bw).getImmediate();return{getId:()=>l4(t),getToken:c=>c4(t,c)}};function m4(){Hs(new As(Bw,d4,"PUBLIC")),Hs(new As(f4,g4,"PRIVATE"))}m4();rs(Aw,qg);rs(Aw,qg,"esm2020");const Xf="analytics",p4="firebase_id",y4="origin",E4=60*1e3,_4="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Qg="https://www.googletagmanager.com/gtag/js";const tr=new Ad("@firebase/analytics");const A4={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Br=new Il("analytics","Analytics",A4);function w4(n){if(!n.startsWith(Qg)){const e=Br.create("invalid-gtag-resource",{gtagURL:n});return tr.warn(e.message),""}return n}function Uw(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function x4(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function T4(n,e){const t=x4("firebase-js-sdk-policy",{createScriptURL:w4}),s=document.createElement("script"),c=`${Qg}?l=${n}&id=${e}`;s.src=t?t?.createScriptURL(c):c,s.async=!0,document.head.appendChild(s)}function C4(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function v4(n,e,t,s,c,h){const p=s[c];try{if(p)await e[p];else{const w=(await Uw(t)).find(_=>_.measurementId===c);w&&await e[w.appId]}}catch(T){tr.error(T)}n("config",c,h)}async function S4(n,e,t,s,c){try{let h=[];if(c&&c.send_to){let p=c.send_to;Array.isArray(p)||(p=[p]);const T=await Uw(t);for(const w of p){const _=T.find(b=>b.measurementId===w),S=_&&e[_.appId];if(S)h.push(S);else{h=[];break}}}h.length===0&&(h=Object.values(e)),await Promise.all(h),n("event",s,c||{})}catch(h){tr.error(h)}}function I4(n,e,t,s){async function c(h,...p){try{if(h==="event"){const[T,w]=p;await S4(n,e,t,T,w)}else if(h==="config"){const[T,w]=p;await v4(n,e,t,s,T,w)}else if(h==="consent"){const[T,w]=p;n("consent",T,w)}else if(h==="get"){const[T,w,_]=p;n("get",T,w,_)}else if(h==="set"){const[T]=p;n("set",T)}else n(h,...p)}catch(T){tr.error(T)}}return c}function b4(n,e,t,s,c){let h=function(...p){window[s].push(arguments)};return window[c]&&typeof window[c]=="function"&&(h=window[c]),window[c]=I4(h,n,e,t),{gtagCore:h,wrappedGtag:window[c]}}function R4(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Qg)&&t.src.includes(n))return t;return null}const N4=30,O4=1e3;class D4{constructor(e={},t=O4){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Vw=new D4;function M4(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function L4(n){const{appId:e,apiKey:t}=n,s={method:"GET",headers:M4(t)},c=_4.replace("{app-id}",e),h=await fetch(c,s);if(h.status!==200&&h.status!==304){let p="";try{const T=await h.json();T.error?.message&&(p=T.error.message)}catch{}throw Br.create("config-fetch-failed",{httpStatus:h.status,responseMessage:p})}return h.json()}async function P4(n,e=Vw,t){const{appId:s,apiKey:c,measurementId:h}=n.options;if(!s)throw Br.create("no-app-id");if(!c){if(h)return{measurementId:h,appId:s};throw Br.create("no-api-key")}const p=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},T=new U4;return setTimeout(async()=>{T.abort()},E4),Fw({appId:s,apiKey:c,measurementId:h},p,T,e)}async function Fw(n,{throttleEndTimeMillis:e,backoffCount:t},s,c=Vw){const{appId:h,measurementId:p}=n;try{await k4(s,e)}catch(T){if(p)return tr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${T?.message}]`),{appId:h,measurementId:p};throw T}try{const T=await L4(n);return c.deleteThrottleMetadata(h),T}catch(T){const w=T;if(!B4(w)){if(c.deleteThrottleMetadata(h),p)return tr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${w?.message}]`),{appId:h,measurementId:p};throw T}const _=Number(w?.customData?.httpStatus)===503?AE(t,c.intervalMillis,N4):AE(t,c.intervalMillis),S={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return c.setThrottleMetadata(h,S),tr.debug(`Calling attemptFetch again in ${_} millis`),Fw(n,S,s,c)}}function k4(n,e){return new Promise((t,s)=>{const c=Math.max(e-Date.now(),0),h=setTimeout(t,c);n.addEventListener(()=>{clearTimeout(h),s(Br.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function B4(n){if(!(n instanceof Ts)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class U4{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function V4(n,e,t,s,c){if(c&&c.global){n("event",t,s);return}else{const h=await e,p={...s,send_to:h};n("event",t,p)}}async function F4(n,e,t,s){if(s&&s.global){const c={};for(const h of Object.keys(t))c[`user_properties.${h}`]=t[h];return n("set",c),Promise.resolve()}else{const c=await e;n("config",c,{update:!0,user_properties:t})}}async function z4(){if(fw())try{await dw()}catch(n){return tr.warn(Br.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return tr.warn(Br.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function j4(n,e,t,s,c,h,p){const T=P4(n);T.then(L=>{t[L.measurementId]=L.appId,n.options.measurementId&&L.measurementId!==n.options.measurementId&&tr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${L.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(L=>tr.error(L)),e.push(T);const w=z4().then(L=>{if(L)return s.getId()}),[_,S]=await Promise.all([T,w]);R4(h)||T4(h,_.measurementId),c("js",new Date);const b=p?.config??{};return b[y4]="firebase",b.update=!0,S!=null&&(b[p4]=S),c("config",_.measurementId,b),_.measurementId}class H4{constructor(e){this.app=e}_delete(){return delete Ec[this.app.options.appId],Promise.resolve()}}let Ec={},OE=[];const DE={};let X1="dataLayer",G4="gtag",ME,Kg,LE=!1;function q4(){const n=[];if(hw()&&n.push("This is a browser extension environment."),ub()||n.push("Cookies are not available."),n.length>0){const e=n.map((s,c)=>`(${c+1}) ${s}`).join(" "),t=Br.create("invalid-analytics-context",{errorInfo:e});tr.warn(t.message)}}function Y4(n,e,t){q4();const s=n.options.appId;if(!s)throw Br.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)tr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Br.create("no-api-key");if(Ec[s]!=null)throw Br.create("already-exists",{id:s});if(!LE){C4(X1);const{wrappedGtag:h,gtagCore:p}=b4(Ec,OE,DE,X1,G4);Kg=h,ME=p,LE=!0}return Ec[s]=j4(n,OE,DE,e,ME,X1,t),new H4(n)}function X4(n=Gg()){n=Gn(n);const e=bl(n,Xf);return e.isInitialized()?e.getImmediate():W4(n)}function W4(n,e={}){const t=bl(n,Xf);if(t.isInitialized()){const c=t.getImmediate();if(Io(e,t.getOptions()))return c;throw Br.create("already-initialized")}return t.initialize({options:e})}function Q4(n,e,t){n=Gn(n),F4(Kg,Ec[n.app.options.appId],e,t).catch(s=>tr.error(s))}function K4(n,e,t,s){n=Gn(n),V4(Kg,Ec[n.app.options.appId],e,t,s).catch(c=>tr.error(c))}const PE="@firebase/analytics",kE="0.10.19";function Z4(){Hs(new As(Xf,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),c=e.getProvider("installations-internal").getImmediate();return Y4(s,c,t)},"PUBLIC")),Hs(new As("analytics-internal",n,"PRIVATE")),rs(PE,kE),rs(PE,kE,"esm2020");function n(e){try{const t=e.getProvider(Xf).getImmediate();return{logEvent:(s,c,h)=>K4(t,s,c,h),setUserProperties:(s,c)=>Q4(t,s,c)}}catch(t){throw Br.create("interop-component-reg-failed",{reason:t})}}}Z4();function zw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const J4=zw,jw=new Il("auth","Firebase",zw());const Wf=new Ad("@firebase/auth");function $4(n,...e){Wf.logLevel<=kt.WARN&&Wf.warn(`Auth (${Lc}): ${n}`,...e)}function Of(n,...e){Wf.logLevel<=kt.ERROR&&Wf.error(`Auth (${Lc}): ${n}`,...e)}function ws(n,...e){throw Zg(n,...e)}function ks(n,...e){return Zg(n,...e)}function Hw(n,e,t){const s={...J4(),[e]:t};return new Il("auth","Firebase",s).create(e,{appName:n.name})}function va(n){return Hw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zg(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return jw.create(n,...e)}function st(n,e,...t){if(!n)throw Zg(e,...t)}function wa(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Of(e),new Error(e)}function ba(n,e){n||wa(e)}function cg(){return typeof self<"u"&&self.location?.href||""}function eR(){return BE()==="http:"||BE()==="https:"}function BE(){return typeof self<"u"&&self.location?.protocol||null}function tR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eR()||hw()||"connection"in navigator)?navigator.onLine:!0}function nR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class sh{constructor(e,t){this.shortDelay=e,this.longDelay=t,ba(t>e,"Short delay should be less than long delay!"),this.isMobile=rb()||ob()}get(){return tR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Jg(n,e){ba(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Gw{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const iR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const rR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sR=new sh(3e4,6e4);function Po(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ko(n,e,t,s,c={}){return qw(n,c,async()=>{let h={},p={};s&&(e==="GET"?p=s:h={body:JSON.stringify(s)});const T=rh({key:n.config.apiKey,...p}).slice(1),w=await n._getAdditionalHeaders();w["Content-Type"]="application/json",n.languageCode&&(w["X-Firebase-Locale"]=n.languageCode);const _={method:e,headers:w,...h};return ab()||(_.referrerPolicy="no-referrer"),n.emulatorConfig&&Mc(n.emulatorConfig.host)&&(_.credentials="include"),Gw.fetch()(await Yw(n,n.config.apiHost,t,T),_)})}async function qw(n,e,t){n._canInitEmulator=!1;const s={...iR,...e};try{const c=new oR(n),h=await Promise.race([t(),c.promise]);c.clearNetworkTimeout();const p=await h.json();if("needConfirmation"in p)throw Tf(n,"account-exists-with-different-credential",p);if(h.ok&&!("errorMessage"in p))return p;{const T=h.ok?p.errorMessage:p.error.message,[w,_]=T.split(" : ");if(w==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tf(n,"credential-already-in-use",p);if(w==="EMAIL_EXISTS")throw Tf(n,"email-already-in-use",p);if(w==="USER_DISABLED")throw Tf(n,"user-disabled",p);const S=s[w]||w.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw Hw(n,S,_);ws(n,S)}}catch(c){if(c instanceof Ts)throw c;ws(n,"network-request-failed",{message:String(c)})}}async function ah(n,e,t,s,c={}){const h=await ko(n,e,t,s,c);return"mfaPendingCredential"in h&&ws(n,"multi-factor-auth-required",{_serverResponse:h}),h}async function Yw(n,e,t,s){const c=`${e}${t}?${s}`,h=n,p=h.config.emulator?Jg(n.config,c):`${n.config.apiScheme}://${c}`;return rR.includes(t)&&(await h._persistenceManagerAvailable,h._getPersistenceType()==="COOKIE")?h._getPersistence()._getFinalTarget(p).toString():p}function aR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(ks(this.auth,"network-request-failed")),sR.get())})}}function Tf(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const c=ks(n,e,s);return c.customData._tokenResponse=t,c}function UE(n){return n!==void 0&&n.enterprise!==void 0}class lR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return aR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cR(n,e){return ko(n,"GET","/v2/recaptchaConfig",Po(n,e))}async function uR(n,e){return ko(n,"POST","/v1/accounts:delete",e)}async function Qf(n,e){return ko(n,"POST","/v1/accounts:lookup",e)}function Mu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hR(n,e=!1){const t=Gn(n),s=await t.getIdToken(e),c=$g(s);st(c&&c.exp&&c.auth_time&&c.iat,t.auth,"internal-error");const h=typeof c.firebase=="object"?c.firebase:void 0,p=h?.sign_in_provider;return{claims:c,token:s,authTime:Mu(W1(c.auth_time)),issuedAtTime:Mu(W1(c.iat)),expirationTime:Mu(W1(c.exp)),signInProvider:p||null,signInSecondFactor:h?.sign_in_second_factor||null}}function W1(n){return Number(n)*1e3}function $g(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Of("JWT malformed, contained fewer than 3 sections"),null;try{const c=sw(t);return c?JSON.parse(c):(Of("Failed to decode base64 JWT payload"),null)}catch(c){return Of("Caught error parsing JWT payload as JSON",c?.toString()),null}}function VE(n){const e=$g(n);return st(e,"internal-error"),st(typeof e.exp<"u","internal-error"),st(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Hu(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ts&&fR(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function fR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class dR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class ug{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mu(this.lastLoginAt),this.creationTime=Mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Kf(n){const e=n.auth,t=await n.getIdToken(),s=await Hu(n,Qf(e,{idToken:t}));st(s?.users.length,e,"internal-error");const c=s.users[0];n._notifyReloadListener(c);const h=c.providerUserInfo?.length?Xw(c.providerUserInfo):[],p=mR(n.providerData,h),T=n.isAnonymous,w=!(n.email&&c.passwordHash)&&!p?.length,_=T?w:!1,S={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:p,metadata:new ug(c.createdAt,c.lastLoginAt),isAnonymous:_};Object.assign(n,S)}async function gR(n){const e=Gn(n);await Kf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mR(n,e){return[...n.filter(s=>!e.some(c=>c.providerId===s.providerId)),...e]}function Xw(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function pR(n,e){const t=await qw(n,{},async()=>{const s=rh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:c,apiKey:h}=n.config,p=await Yw(n,c,"/v1/token",`key=${h}`),T=await n._getAdditionalHeaders();T["Content-Type"]="application/x-www-form-urlencoded";const w={method:"POST",headers:T,body:s};return n.emulatorConfig&&Mc(n.emulatorConfig.host)&&(w.credentials="include"),Gw.fetch()(p,w)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function yR(n,e){return ko(n,"POST","/v2/accounts:revokeToken",Po(n,e))}class _c{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){st(e.idToken,"internal-error"),st(typeof e.idToken<"u","internal-error"),st(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):VE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){st(e.length!==0,"internal-error");const t=VE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(st(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:c,expiresIn:h}=await pR(e,t);this.updateTokensAndExpiration(s,c,Number(h))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:c,expirationTime:h}=t,p=new _c;return s&&(st(typeof s=="string","internal-error",{appName:e}),p.refreshToken=s),c&&(st(typeof c=="string","internal-error",{appName:e}),p.accessToken=c),h&&(st(typeof h=="number","internal-error",{appName:e}),p.expirationTime=h),p}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _c,this.toJSON())}_performRefresh(){return wa("not implemented")}}function fo(n,e){st(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ys{constructor({uid:e,auth:t,stsTokenManager:s,...c}){this.providerId="firebase",this.proactiveRefresh=new dR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new ug(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const t=await Hu(this,this.stsTokenManager.getToken(this.auth,e));return st(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return hR(this,e)}reload(){return gR(this)}_assign(e){this!==e&&(st(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ys({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){st(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Kf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ns(this.auth.app))return Promise.reject(va(this.auth));const e=await this.getIdToken();return await Hu(this,uR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,c=t.email??void 0,h=t.phoneNumber??void 0,p=t.photoURL??void 0,T=t.tenantId??void 0,w=t._redirectEventId??void 0,_=t.createdAt??void 0,S=t.lastLoginAt??void 0,{uid:b,emailVerified:L,isAnonymous:j,providerData:W,stsTokenManager:Z}=t;st(b&&Z,e,"internal-error");const q=_c.fromJSON(this.name,Z);st(typeof b=="string",e,"internal-error"),fo(s,e.name),fo(c,e.name),st(typeof L=="boolean",e,"internal-error"),st(typeof j=="boolean",e,"internal-error"),fo(h,e.name),fo(p,e.name),fo(T,e.name),fo(w,e.name),fo(_,e.name),fo(S,e.name);const pe=new ys({uid:b,auth:e,email:c,emailVerified:L,displayName:s,isAnonymous:j,photoURL:p,phoneNumber:h,tenantId:T,stsTokenManager:q,createdAt:_,lastLoginAt:S});return W&&Array.isArray(W)&&(pe.providerData=W.map(le=>({...le}))),w&&(pe._redirectEventId=w),pe}static async _fromIdTokenResponse(e,t,s=!1){const c=new _c;c.updateFromServerResponse(t);const h=new ys({uid:t.localId,auth:e,stsTokenManager:c,isAnonymous:s});return await Kf(h),h}static async _fromGetAccountInfoResponse(e,t,s){const c=t.users[0];st(c.localId!==void 0,"internal-error");const h=c.providerUserInfo!==void 0?Xw(c.providerUserInfo):[],p=!(c.email&&c.passwordHash)&&!h?.length,T=new _c;T.updateFromIdToken(s);const w=new ys({uid:c.localId,auth:e,stsTokenManager:T,isAnonymous:p}),_={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:h,metadata:new ug(c.createdAt,c.lastLoginAt),isAnonymous:!(c.email&&c.passwordHash)&&!h?.length};return Object.assign(w,_),w}}const FE=new Map;function xa(n){ba(n instanceof Function,"Expected a class definition");let e=FE.get(n);return e?(ba(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,FE.set(n,e),e)}class Ww{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ww.type="NONE";const zE=Ww;function Df(n,e,t){return`firebase:${n}:${e}:${t}`}class Ac{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:c,name:h}=this.auth;this.fullUserKey=Df(this.userKey,c.apiKey,h),this.fullPersistenceKey=Df("persistence",c.apiKey,h),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Qf(this.auth,{idToken:e}).catch(()=>{});return t?ys._fromGetAccountInfoResponse(this.auth,t,e):null}return ys._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Ac(xa(zE),e,s);const c=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let h=c[0]||xa(zE);const p=Df(s,e.config.apiKey,e.name);let T=null;for(const _ of t)try{const S=await _._get(p);if(S){let b;if(typeof S=="string"){const L=await Qf(e,{idToken:S}).catch(()=>{});if(!L)break;b=await ys._fromGetAccountInfoResponse(e,L,S)}else b=ys._fromJSON(e,S);_!==h&&(T=b),h=_;break}}catch{}const w=c.filter(_=>_._shouldAllowMigration);return!h._shouldAllowMigration||!w.length?new Ac(h,e,s):(h=w[0],T&&await h._set(p,T.toJSON()),await Promise.all(t.map(async _=>{if(_!==h)try{await _._remove(p)}catch{}})),new Ac(h,e,s))}}function jE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Jw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Qw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ex(e))return"Blackberry";if(tx(e))return"Webos";if(Kw(e))return"Safari";if((e.includes("chrome/")||Zw(e))&&!e.includes("edge/"))return"Chrome";if($w(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if(s?.length===2)return s[1]}return"Other"}function Qw(n=Xi()){return/firefox\//i.test(n)}function Kw(n=Xi()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Zw(n=Xi()){return/crios\//i.test(n)}function Jw(n=Xi()){return/iemobile/i.test(n)}function $w(n=Xi()){return/android/i.test(n)}function ex(n=Xi()){return/blackberry/i.test(n)}function tx(n=Xi()){return/webos/i.test(n)}function em(n=Xi()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ER(n=Xi()){return em(n)&&!!window.navigator?.standalone}function _R(){return lb()&&document.documentMode===10}function nx(n=Xi()){return em(n)||$w(n)||tx(n)||ex(n)||/windows phone/i.test(n)||Jw(n)}function ix(n,e=[]){let t;switch(n){case"Browser":t=jE(Xi());break;case"Worker":t=`${jE(Xi())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Lc}/${s}`}class AR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=h=>new Promise((p,T)=>{try{const w=e(h);p(w)}catch(w){T(w)}});s.onAbort=t,this.queue.push(s);const c=this.queue.length-1;return()=>{this.queue[c]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const c of t)try{c()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function wR(n,e={}){return ko(n,"GET","/v2/passwordPolicy",Po(n,e))}const xR=6;class TR{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??xR,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,c=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),c&&(t.meetsMaxPasswordLength=e.length<=c)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let c=0;c<e.length;c++)s=e.charAt(c),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,c,h){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=c)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=h))}}class CR{constructor(e,t,s,c){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=c,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new HE(this),this.idTokenSubscription=new HE(this),this.beforeStateQueue=new AR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=c.sdkClientVersion,this._persistenceManagerAvailable=new Promise(h=>this._resolvePersistenceManagerAvailable=h)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=xa(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ac.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Qf(this,{idToken:e}),s=await ys._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ns(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(p,p))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=this.redirectUser?._redirectEventId,p=s?._redirectEventId,T=await this.tryRedirectSignIn(e);(!h||h===p)&&T?.user&&(s=T.user,c=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(s)}catch(h){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return st(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Kf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ns(this.app))return Promise.reject(va(this));const t=e?Gn(e):null;return t&&st(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&st(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ns(this.app)?Promise.reject(va(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ns(this.app)?Promise.reject(va(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wR(this),t=new TR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Il("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await yR(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&xa(e)||this._popupRedirectResolver;st(t,this,"argument-error"),this.redirectPersistenceManager=await Ac.create(this,[xa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,c){if(this._deleted)return()=>{};const h=typeof t=="function"?t:t.next.bind(t);let p=!1;const T=this._isInitialized?Promise.resolve():this._initializationPromise;if(st(T,this,"internal-error"),T.then(()=>{p||h(this.currentUser)}),typeof t=="function"){const w=e.addObserver(t,s,c);return()=>{p=!0,w()}}else{const w=e.addObserver(t);return()=>{p=!0,w()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return st(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ix(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(ns(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&$4(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Rl(n){return Gn(n)}class HE{constructor(e){this.auth=e,this.observer=null,this.addObserver=mb(t=>this.observer=t)}get next(){return st(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Td={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vR(n){Td=n}function rx(n){return Td.loadJS(n)}function SR(){return Td.recaptchaEnterpriseScript}function IR(){return Td.gapiScript}function bR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class RR{constructor(){this.enterprise=new NR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class NR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const OR="recaptcha-enterprise",sx="NO_RECAPTCHA";class DR{constructor(e){this.type=OR,this.auth=Rl(e)}async verify(e="verify",t=!1){async function s(h){if(!t){if(h.tenantId==null&&h._agentRecaptchaConfig!=null)return h._agentRecaptchaConfig.siteKey;if(h.tenantId!=null&&h._tenantRecaptchaConfigs[h.tenantId]!==void 0)return h._tenantRecaptchaConfigs[h.tenantId].siteKey}return new Promise(async(p,T)=>{cR(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(w=>{if(w.recaptchaKey===void 0)T(new Error("recaptcha Enterprise site key undefined"));else{const _=new lR(w);return h.tenantId==null?h._agentRecaptchaConfig=_:h._tenantRecaptchaConfigs[h.tenantId]=_,p(_.siteKey)}}).catch(w=>{T(w)})})}function c(h,p,T){const w=window.grecaptcha;UE(w)?w.enterprise.ready(()=>{w.enterprise.execute(h,{action:e}).then(_=>{p(_)}).catch(()=>{p(sx)})}):T(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new RR().execute("siteKey",{action:"verify"}):new Promise((h,p)=>{s(this.auth).then(T=>{if(!t&&UE(window.grecaptcha))c(T,h,p);else{if(typeof window>"u"){p(new Error("RecaptchaVerifier is only supported in browser"));return}let w=SR();w.length!==0&&(w+=T),rx(w).then(()=>{c(T,h,p)}).catch(_=>{p(_)})}}).catch(T=>{p(T)})})}}async function GE(n,e,t,s=!1,c=!1){const h=new DR(n);let p;if(c)p=sx;else try{p=await h.verify(t)}catch{p=await h.verify(t,!0)}const T={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in T){const w=T.phoneEnrollmentInfo.phoneNumber,_=T.phoneEnrollmentInfo.recaptchaToken;Object.assign(T,{phoneEnrollmentInfo:{phoneNumber:w,recaptchaToken:_,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in T){const w=T.phoneSignInInfo.recaptchaToken;Object.assign(T,{phoneSignInInfo:{recaptchaToken:w,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return T}return s?Object.assign(T,{captchaResp:p}):Object.assign(T,{captchaResponse:p}),Object.assign(T,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(T,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),T}async function hg(n,e,t,s,c){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await GE(n,e,t,t==="getOobCode");return s(n,h)}else return s(n,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await GE(n,e,t,t==="getOobCode");return s(n,p)}else return Promise.reject(h)})}function MR(n,e){const t=bl(n,"auth");if(t.isInitialized()){const c=t.getImmediate(),h=t.getOptions();if(Io(h,e??{}))return c;ws(c,"already-initialized")}return t.initialize({options:e})}function LR(n,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(xa);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e?.popupRedirectResolver)}function PR(n,e,t){const s=Rl(n);st(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const c=!1,h=ax(e),{host:p,port:T}=kR(e),w=T===null?"":`:${T}`,_={url:`${h}//${p}${w}/`},S=Object.freeze({host:p,port:T,protocol:h.replace(":",""),options:Object.freeze({disableWarnings:c})});if(!s._canInitEmulator){st(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),st(Io(_,s.config.emulator)&&Io(S,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=S,s.settings.appVerificationDisabledForTesting=!0,Mc(p)?(cw(`${h}//${p}${w}`),uw("Auth",!0)):BR()}function ax(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function kR(n){const e=ax(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",c=/^(\[[^\]]+\])(:|$)/.exec(s);if(c){const h=c[1];return{host:h,port:qE(s.substr(h.length+1))}}else{const[h,p]=s.split(":");return{host:h,port:qE(p)}}}function qE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function BR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class tm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wa("not implemented")}_getIdTokenResponse(e){return wa("not implemented")}_linkToIdToken(e,t){return wa("not implemented")}_getReauthenticationResolver(e){return wa("not implemented")}}async function UR(n,e){return ko(n,"POST","/v1/accounts:signUp",e)}async function VR(n,e){return ah(n,"POST","/v1/accounts:signInWithPassword",Po(n,e))}async function FR(n,e){return ah(n,"POST","/v1/accounts:signInWithEmailLink",Po(n,e))}async function zR(n,e){return ah(n,"POST","/v1/accounts:signInWithEmailLink",Po(n,e))}class Gu extends tm{constructor(e,t,s,c=null){super("password",s),this._email=e,this._password=t,this._tenantId=c}static _fromEmailAndPassword(e,t){return new Gu(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Gu(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hg(e,t,"signInWithPassword",VR);case"emailLink":return FR(e,{email:this._email,oobCode:this._password});default:ws(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hg(e,s,"signUpPassword",UR);case"emailLink":return zR(e,{idToken:t,email:this._email,oobCode:this._password});default:ws(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function wc(n,e){return ah(n,"POST","/v1/accounts:signInWithIdp",Po(n,e))}const jR="http://localhost";class El extends tm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new El(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ws("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:c,...h}=t;if(!s||!c)return null;const p=new El(s,c);return p.idToken=h.idToken||void 0,p.accessToken=h.accessToken||void 0,p.secret=h.secret,p.nonce=h.nonce,p.pendingToken=h.pendingToken||null,p}_getIdTokenResponse(e){const t=this.buildRequest();return wc(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,wc(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wc(e,t)}buildRequest(){const e={requestUri:jR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=rh(t)}return e}}function HR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GR(n){const e=vu(Su(n)).link,t=e?vu(Su(e)).deep_link_id:null,s=vu(Su(n)).deep_link_id;return(s?vu(Su(s)).link:null)||s||t||e||n}class nm{constructor(e){const t=vu(Su(e)),s=t.apiKey??null,c=t.oobCode??null,h=HR(t.mode??null);st(s&&c&&h,"argument-error"),this.apiKey=s,this.operation=h,this.code=c,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=GR(e);try{return new nm(t)}catch{return null}}}class Pc{constructor(){this.providerId=Pc.PROVIDER_ID}static credential(e,t){return Gu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=nm.parseLink(t);return st(s,"argument-error"),Gu._fromEmailAndCode(e,s.code,s.tenantId)}}Pc.PROVIDER_ID="password";Pc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Pc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ox{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class oh extends ox{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class po extends oh{constructor(){super("facebook.com")}static credential(e){return El._fromParams({providerId:po.PROVIDER_ID,signInMethod:po.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return po.credentialFromTaggedObject(e)}static credentialFromError(e){return po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return po.credential(e.oauthAccessToken)}catch{return null}}}po.FACEBOOK_SIGN_IN_METHOD="facebook.com";po.PROVIDER_ID="facebook.com";class yo extends oh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return El._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return yo.credential(t,s)}catch{return null}}}yo.GOOGLE_SIGN_IN_METHOD="google.com";yo.PROVIDER_ID="google.com";class Eo extends oh{constructor(){super("github.com")}static credential(e){return El._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Eo.credential(e.oauthAccessToken)}catch{return null}}}Eo.GITHUB_SIGN_IN_METHOD="github.com";Eo.PROVIDER_ID="github.com";class _o extends oh{constructor(){super("twitter.com")}static credential(e,t){return El._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return _o.credential(t,s)}catch{return null}}}_o.TWITTER_SIGN_IN_METHOD="twitter.com";_o.PROVIDER_ID="twitter.com";async function qR(n,e){return ah(n,"POST","/v1/accounts:signUp",Po(n,e))}class _l{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,c=!1){const h=await ys._fromIdTokenResponse(e,s,c),p=YE(s);return new _l({user:h,providerId:p,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const c=YE(s);return new _l({user:e,providerId:c,_tokenResponse:s,operationType:t})}}function YE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Zf extends Ts{constructor(e,t,s,c){super(t.code,t.message),this.operationType=s,this.user=c,Object.setPrototypeOf(this,Zf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,c){return new Zf(e,t,s,c)}}function lx(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(h=>{throw h.code==="auth/multi-factor-auth-required"?Zf._fromErrorAndOperation(n,h,e,s):h})}async function YR(n,e,t=!1){const s=await Hu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return _l._forOperation(n,"link",s)}async function XR(n,e,t=!1){const{auth:s}=n;if(ns(s.app))return Promise.reject(va(s));const c="reauthenticate";try{const h=await Hu(n,lx(s,c,e,n),t);st(h.idToken,s,"internal-error");const p=$g(h.idToken);st(p,s,"internal-error");const{sub:T}=p;return st(n.uid===T,s,"user-mismatch"),_l._forOperation(n,c,h)}catch(h){throw h?.code==="auth/user-not-found"&&ws(s,"user-mismatch"),h}}async function cx(n,e,t=!1){if(ns(n.app))return Promise.reject(va(n));const s="signIn",c=await lx(n,s,e),h=await _l._fromIdTokenResponse(n,s,c);return t||await n._updateCurrentUser(h.user),h}async function WR(n,e){return cx(Rl(n),e)}async function ux(n){const e=Rl(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function QR(n,e,t){if(ns(n.app))return Promise.reject(va(n));const s=Rl(n),p=await hg(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qR).catch(w=>{throw w.code==="auth/password-does-not-meet-requirements"&&ux(n),w}),T=await _l._fromIdTokenResponse(s,"signIn",p);return await s._updateCurrentUser(T.user),T}function KR(n,e,t){return ns(n.app)?Promise.reject(va(n)):WR(Gn(n),Pc.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&ux(n),s})}function ZR(n,e,t,s){return Gn(n).onIdTokenChanged(e,t,s)}function JR(n,e,t){return Gn(n).beforeAuthStateChanged(e,t)}function $R(n,e,t,s){return Gn(n).onAuthStateChanged(e,t,s)}function eN(n){return Gn(n).signOut()}const Jf="__sak";class hx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jf,"1"),this.storage.removeItem(Jf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const tN=1e3,nN=10;class fx extends hx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),c=this.localCache[t];s!==c&&e(t,c,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((p,T,w)=>{this.notifyListeners(p,w)});return}const s=e.key;t?this.detachListener():this.stopPolling();const c=()=>{const p=this.storage.getItem(s);!t&&this.localCache[s]===p||this.notifyListeners(s,p)},h=this.storage.getItem(s);_R()&&h!==e.newValue&&e.newValue!==e.oldValue?setTimeout(c,nN):c()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const c of Array.from(s))c(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},tN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}fx.type="LOCAL";const iN=fx;class dx extends hx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}dx.type="SESSION";const gx=dx;function rN(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Cd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(c=>c.isListeningto(e));if(t)return t;const s=new Cd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:c,data:h}=t.data,p=this.handlersMap[c];if(!p?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:c});const T=Array.from(p).map(async _=>_(t.origin,h)),w=await rN(T);t.ports[0].postMessage({status:"done",eventId:s,eventType:c,response:w})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cd.receivers=[];function im(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}class sN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const c=typeof MessageChannel<"u"?new MessageChannel:null;if(!c)throw new Error("connection_unavailable");let h,p;return new Promise((T,w)=>{const _=im("",20);c.port1.start();const S=setTimeout(()=>{w(new Error("unsupported_event"))},s);p={messageChannel:c,onMessage(b){const L=b;if(L.data.eventId===_)switch(L.data.status){case"ack":clearTimeout(S),h=setTimeout(()=>{w(new Error("timeout"))},3e3);break;case"done":clearTimeout(h),T(L.data.response);break;default:clearTimeout(S),clearTimeout(h),w(new Error("invalid_response"));break}}},this.handlers.add(p),c.port1.addEventListener("message",p.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[c.port2])}).finally(()=>{p&&this.removeMessageHandler(p)})}}function Bs(){return window}function aN(n){Bs().location.href=n}function mx(){return typeof Bs().WorkerGlobalScope<"u"&&typeof Bs().importScripts=="function"}async function oN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lN(){return navigator?.serviceWorker?.controller||null}function cN(){return mx()?self:null}const px="firebaseLocalStorageDb",uN=1,$f="firebaseLocalStorage",yx="fbase_key";class lh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function vd(n,e){return n.transaction([$f],e?"readwrite":"readonly").objectStore($f)}function hN(){const n=indexedDB.deleteDatabase(px);return new lh(n).toPromise()}function fg(){const n=indexedDB.open(px,uN);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore($f,{keyPath:yx})}catch(c){t(c)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains($f)?e(s):(s.close(),await hN(),e(await fg()))})})}async function XE(n,e,t){const s=vd(n,!0).put({[yx]:e,value:t});return new lh(s).toPromise()}async function fN(n,e){const t=vd(n,!1).get(e),s=await new lh(t).toPromise();return s===void 0?null:s.value}function WE(n,e){const t=vd(n,!0).delete(e);return new lh(t).toPromise()}const dN=800,gN=3;class Ex{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>gN)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cd._getInstance(cN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await oN(),!this.activeServiceWorker)return;this.sender=new sN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fg();return await XE(e,Jf,"1"),await WE(e,Jf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>XE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>fN(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>WE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(c=>{const h=vd(c,!1).getAll();return new lh(h).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:c,value:h}of e)s.add(c),JSON.stringify(this.localCache[c])!==JSON.stringify(h)&&(this.notifyListeners(c,h),t.push(c));for(const c of Object.keys(this.localCache))this.localCache[c]&&!s.has(c)&&(this.notifyListeners(c,null),t.push(c));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const c of Array.from(s))c(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ex.type="LOCAL";const mN=Ex;new sh(3e4,6e4);function pN(n,e){return e?xa(e):(st(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class rm extends tm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function yN(n){return cx(n.auth,new rm(n),n.bypassAuthState)}function EN(n){const{auth:e,user:t}=n;return st(t,e,"internal-error"),XR(t,new rm(n),n.bypassAuthState)}async function _N(n){const{auth:e,user:t}=n;return st(t,e,"internal-error"),YR(t,new rm(n),n.bypassAuthState)}class _x{constructor(e,t,s,c,h=!1){this.auth=e,this.resolver=s,this.user=c,this.bypassAuthState=h,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:c,tenantId:h,error:p,type:T}=e;if(p){this.reject(p);return}const w={auth:this.auth,requestUri:t,sessionId:s,tenantId:h||void 0,postBody:c||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(T)(w))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yN;case"linkViaPopup":case"linkViaRedirect":return _N;case"reauthViaPopup":case"reauthViaRedirect":return EN;default:ws(this.auth,"internal-error")}}resolve(e){ba(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ba(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const AN=new sh(2e3,1e4);class mc extends _x{constructor(e,t,s,c,h){super(e,t,c,h),this.provider=s,this.authWindow=null,this.pollId=null,mc.currentPopupAction&&mc.currentPopupAction.cancel(),mc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return st(e,this.auth,"internal-error"),e}async onExecution(){ba(this.filter.length===1,"Popup operations only handle one event");const e=im();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ks(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ks(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ks(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AN.get())};e()}}mc.currentPopupAction=null;const wN="pendingRedirect",Mf=new Map;class xN extends _x{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Mf.get(this.auth._key());if(!e){try{const s=await TN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Mf.set(this.auth._key(),e)}return this.bypassAuthState||Mf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TN(n,e){const t=SN(e),s=vN(n);if(!await s._isAvailable())return!1;const c=await s._get(t)==="true";return await s._remove(t),c}function CN(n,e){Mf.set(n._key(),e)}function vN(n){return xa(n._redirectPersistence)}function SN(n){return Df(wN,n.config.apiKey,n.name)}async function IN(n,e,t=!1){if(ns(n.app))return Promise.reject(va(n));const s=Rl(n),c=pN(s,e),p=await new xN(s,c,t).execute();return p&&!t&&(delete p.user._redirectEventId,await s._persistUserIfCurrent(p.user),await s._setRedirectUser(null,e)),p}const bN=600*1e3;class RN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Ax(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ks(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bN&&this.cachedEventUids.clear(),this.cachedEventUids.has(QE(e))}saveEventToCache(e){this.cachedEventUids.add(QE(e)),this.lastProcessedEventTime=Date.now()}}function QE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Ax({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function NN(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ax(n);default:return!1}}async function ON(n,e={}){return ko(n,"GET","/v1/projects",e)}const DN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MN=/^https?/;async function LN(n){if(n.config.emulator)return;const{authorizedDomains:e}=await ON(n);for(const t of e)try{if(PN(t))return}catch{}ws(n,"unauthorized-domain")}function PN(n){const e=cg(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const p=new URL(n);return p.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&p.hostname===s}if(!MN.test(t))return!1;if(DN.test(n))return s===n;const c=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+c+"|"+c+")$","i").test(s)}const kN=new sh(3e4,6e4);function KE(){const n=Bs().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function BN(n){return new Promise((e,t)=>{function s(){KE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{KE(),t(ks(n,"network-request-failed"))},timeout:kN.get()})}if(Bs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Bs().gapi?.load)s();else{const c=bR("iframefcb");return Bs()[c]=()=>{gapi.load?s():t(ks(n,"network-request-failed"))},rx(`${IR()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw Lf=null,e})}let Lf=null;function UN(n){return Lf=Lf||BN(n),Lf}const VN=new sh(5e3,15e3),FN="__/auth/iframe",zN="emulator/auth/iframe",jN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GN(n){const e=n.config;st(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Jg(e,zN):`https://${n.config.authDomain}/${FN}`,s={apiKey:e.apiKey,appName:n.name,v:Lc},c=HN.get(n.config.apiHost);c&&(s.eid=c);const h=n._getFrameworks();return h.length&&(s.fw=h.join(",")),`${t}?${rh(s).slice(1)}`}async function qN(n){const e=await UN(n),t=Bs().gapi;return st(t,n,"internal-error"),e.open({where:document.body,url:GN(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jN,dontclear:!0},s=>new Promise(async(c,h)=>{await s.restyle({setHideOnLeave:!1});const p=ks(n,"network-request-failed"),T=Bs().setTimeout(()=>{h(p)},VN.get());function w(){Bs().clearTimeout(T),c(s)}s.ping(w).then(w,()=>{h(p)})}))}const YN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XN=500,WN=600,QN="_blank",KN="http://localhost";class ZE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZN(n,e,t,s=XN,c=WN){const h=Math.max((window.screen.availHeight-c)/2,0).toString(),p=Math.max((window.screen.availWidth-s)/2,0).toString();let T="";const w={...YN,width:s.toString(),height:c.toString(),top:h,left:p},_=Xi().toLowerCase();t&&(T=Zw(_)?QN:t),Qw(_)&&(e=e||KN,w.scrollbars="yes");const S=Object.entries(w).reduce((L,[j,W])=>`${L}${j}=${W},`,"");if(ER(_)&&T!=="_self")return JN(e||"",T),new ZE(null);const b=window.open(e||"",T,S);st(b,n,"popup-blocked");try{b.focus()}catch{}return new ZE(b)}function JN(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const $N="__/auth/handler",e8="emulator/auth/handler",t8=encodeURIComponent("fac");async function JE(n,e,t,s,c,h){st(n.config.authDomain,n,"auth-domain-config-required"),st(n.config.apiKey,n,"invalid-api-key");const p={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Lc,eventId:c};if(e instanceof ox){e.setDefaultLanguage(n.languageCode),p.providerId=e.providerId||"",gb(e.getCustomParameters())||(p.customParameters=JSON.stringify(e.getCustomParameters()));for(const[S,b]of Object.entries({}))p[S]=b}if(e instanceof oh){const S=e.getScopes().filter(b=>b!=="");S.length>0&&(p.scopes=S.join(","))}n.tenantId&&(p.tid=n.tenantId);const T=p;for(const S of Object.keys(T))T[S]===void 0&&delete T[S];const w=await n._getAppCheckToken(),_=w?`#${t8}=${encodeURIComponent(w)}`:"";return`${n8(n)}?${rh(T).slice(1)}${_}`}function n8({config:n}){return n.emulator?Jg(n,e8):`https://${n.authDomain}/${$N}`}const Q1="webStorageSupport";class i8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gx,this._completeRedirectFn=IN,this._overrideRedirectResult=CN}async _openPopup(e,t,s,c){ba(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const h=await JE(e,t,s,cg(),c);return ZN(e,h,im())}async _openRedirect(e,t,s,c){await this._originValidation(e);const h=await JE(e,t,s,cg(),c);return aN(h),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:c,promise:h}=this.eventManagers[t];return c?Promise.resolve(c):(ba(h,"If manager is not set, promise should be"),h)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await qN(e),s=new RN(e);return t.register("authEvent",c=>(st(c?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(c.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Q1,{type:Q1},c=>{const h=c?.[0]?.[Q1];h!==void 0&&t(!!h),ws(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=LN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nx()||Kw()||em()}}const r8=i8;var $E="@firebase/auth",e_="1.12.0";class s8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){st(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function a8(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function o8(n){Hs(new As("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),c=e.getProvider("heartbeat"),h=e.getProvider("app-check-internal"),{apiKey:p,authDomain:T}=s.options;st(p&&!p.includes(":"),"invalid-api-key",{appName:s.name});const w={apiKey:p,authDomain:T,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ix(n)},_=new CR(s,c,h,w);return LR(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Hs(new As("auth-internal",e=>{const t=Rl(e.getProvider("auth").getImmediate());return(s=>new s8(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),rs($E,e_,a8(n)),rs($E,e_,"esm2020")}const l8=300,c8=lw("authIdTokenMaxAge")||l8;let t_=null;const u8=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>c8)return;const c=t?.token;t_!==c&&(t_=c,await fetch(n,{method:c?"POST":"DELETE",headers:c?{Authorization:`Bearer ${c}`}:{}}))};function h8(n=Gg()){const e=bl(n,"auth");if(e.isInitialized())return e.getImmediate();const t=MR(n,{popupRedirectResolver:r8,persistence:[mN,iN,gx]}),s=lw("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const h=new URL(s,location.origin);if(location.origin===h.origin){const p=u8(h.toString());JR(t,p,()=>p(t.currentUser)),ZR(t,T=>p(T))}}const c=aw("auth");return c&&PR(t,`http://${c}`),t}function f8(){return document.getElementsByTagName("head")?.[0]??document}vR({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=c=>{const h=ks("internal-error");h.customData=c,t(h)},s.type="text/javascript",s.charset="UTF-8",f8().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});o8("Browser");var n_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var To,wx;(function(){var n;function e(U,F){function B(){}B.prototype=F.prototype,U.F=F.prototype,U.prototype=new B,U.prototype.constructor=U,U.D=function(J,Y,X){for(var G=Array(arguments.length-2),We=2;We<arguments.length;We++)G[We-2]=arguments[We];return F.prototype[Y].apply(J,G)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function c(U,F,B){B||(B=0);const J=Array(16);if(typeof F=="string")for(var Y=0;Y<16;++Y)J[Y]=F.charCodeAt(B++)|F.charCodeAt(B++)<<8|F.charCodeAt(B++)<<16|F.charCodeAt(B++)<<24;else for(Y=0;Y<16;++Y)J[Y]=F[B++]|F[B++]<<8|F[B++]<<16|F[B++]<<24;F=U.g[0],B=U.g[1],Y=U.g[2];let X=U.g[3],G;G=F+(X^B&(Y^X))+J[0]+3614090360&4294967295,F=B+(G<<7&4294967295|G>>>25),G=X+(Y^F&(B^Y))+J[1]+3905402710&4294967295,X=F+(G<<12&4294967295|G>>>20),G=Y+(B^X&(F^B))+J[2]+606105819&4294967295,Y=X+(G<<17&4294967295|G>>>15),G=B+(F^Y&(X^F))+J[3]+3250441966&4294967295,B=Y+(G<<22&4294967295|G>>>10),G=F+(X^B&(Y^X))+J[4]+4118548399&4294967295,F=B+(G<<7&4294967295|G>>>25),G=X+(Y^F&(B^Y))+J[5]+1200080426&4294967295,X=F+(G<<12&4294967295|G>>>20),G=Y+(B^X&(F^B))+J[6]+2821735955&4294967295,Y=X+(G<<17&4294967295|G>>>15),G=B+(F^Y&(X^F))+J[7]+4249261313&4294967295,B=Y+(G<<22&4294967295|G>>>10),G=F+(X^B&(Y^X))+J[8]+1770035416&4294967295,F=B+(G<<7&4294967295|G>>>25),G=X+(Y^F&(B^Y))+J[9]+2336552879&4294967295,X=F+(G<<12&4294967295|G>>>20),G=Y+(B^X&(F^B))+J[10]+4294925233&4294967295,Y=X+(G<<17&4294967295|G>>>15),G=B+(F^Y&(X^F))+J[11]+2304563134&4294967295,B=Y+(G<<22&4294967295|G>>>10),G=F+(X^B&(Y^X))+J[12]+1804603682&4294967295,F=B+(G<<7&4294967295|G>>>25),G=X+(Y^F&(B^Y))+J[13]+4254626195&4294967295,X=F+(G<<12&4294967295|G>>>20),G=Y+(B^X&(F^B))+J[14]+2792965006&4294967295,Y=X+(G<<17&4294967295|G>>>15),G=B+(F^Y&(X^F))+J[15]+1236535329&4294967295,B=Y+(G<<22&4294967295|G>>>10),G=F+(Y^X&(B^Y))+J[1]+4129170786&4294967295,F=B+(G<<5&4294967295|G>>>27),G=X+(B^Y&(F^B))+J[6]+3225465664&4294967295,X=F+(G<<9&4294967295|G>>>23),G=Y+(F^B&(X^F))+J[11]+643717713&4294967295,Y=X+(G<<14&4294967295|G>>>18),G=B+(X^F&(Y^X))+J[0]+3921069994&4294967295,B=Y+(G<<20&4294967295|G>>>12),G=F+(Y^X&(B^Y))+J[5]+3593408605&4294967295,F=B+(G<<5&4294967295|G>>>27),G=X+(B^Y&(F^B))+J[10]+38016083&4294967295,X=F+(G<<9&4294967295|G>>>23),G=Y+(F^B&(X^F))+J[15]+3634488961&4294967295,Y=X+(G<<14&4294967295|G>>>18),G=B+(X^F&(Y^X))+J[4]+3889429448&4294967295,B=Y+(G<<20&4294967295|G>>>12),G=F+(Y^X&(B^Y))+J[9]+568446438&4294967295,F=B+(G<<5&4294967295|G>>>27),G=X+(B^Y&(F^B))+J[14]+3275163606&4294967295,X=F+(G<<9&4294967295|G>>>23),G=Y+(F^B&(X^F))+J[3]+4107603335&4294967295,Y=X+(G<<14&4294967295|G>>>18),G=B+(X^F&(Y^X))+J[8]+1163531501&4294967295,B=Y+(G<<20&4294967295|G>>>12),G=F+(Y^X&(B^Y))+J[13]+2850285829&4294967295,F=B+(G<<5&4294967295|G>>>27),G=X+(B^Y&(F^B))+J[2]+4243563512&4294967295,X=F+(G<<9&4294967295|G>>>23),G=Y+(F^B&(X^F))+J[7]+1735328473&4294967295,Y=X+(G<<14&4294967295|G>>>18),G=B+(X^F&(Y^X))+J[12]+2368359562&4294967295,B=Y+(G<<20&4294967295|G>>>12),G=F+(B^Y^X)+J[5]+4294588738&4294967295,F=B+(G<<4&4294967295|G>>>28),G=X+(F^B^Y)+J[8]+2272392833&4294967295,X=F+(G<<11&4294967295|G>>>21),G=Y+(X^F^B)+J[11]+1839030562&4294967295,Y=X+(G<<16&4294967295|G>>>16),G=B+(Y^X^F)+J[14]+4259657740&4294967295,B=Y+(G<<23&4294967295|G>>>9),G=F+(B^Y^X)+J[1]+2763975236&4294967295,F=B+(G<<4&4294967295|G>>>28),G=X+(F^B^Y)+J[4]+1272893353&4294967295,X=F+(G<<11&4294967295|G>>>21),G=Y+(X^F^B)+J[7]+4139469664&4294967295,Y=X+(G<<16&4294967295|G>>>16),G=B+(Y^X^F)+J[10]+3200236656&4294967295,B=Y+(G<<23&4294967295|G>>>9),G=F+(B^Y^X)+J[13]+681279174&4294967295,F=B+(G<<4&4294967295|G>>>28),G=X+(F^B^Y)+J[0]+3936430074&4294967295,X=F+(G<<11&4294967295|G>>>21),G=Y+(X^F^B)+J[3]+3572445317&4294967295,Y=X+(G<<16&4294967295|G>>>16),G=B+(Y^X^F)+J[6]+76029189&4294967295,B=Y+(G<<23&4294967295|G>>>9),G=F+(B^Y^X)+J[9]+3654602809&4294967295,F=B+(G<<4&4294967295|G>>>28),G=X+(F^B^Y)+J[12]+3873151461&4294967295,X=F+(G<<11&4294967295|G>>>21),G=Y+(X^F^B)+J[15]+530742520&4294967295,Y=X+(G<<16&4294967295|G>>>16),G=B+(Y^X^F)+J[2]+3299628645&4294967295,B=Y+(G<<23&4294967295|G>>>9),G=F+(Y^(B|~X))+J[0]+4096336452&4294967295,F=B+(G<<6&4294967295|G>>>26),G=X+(B^(F|~Y))+J[7]+1126891415&4294967295,X=F+(G<<10&4294967295|G>>>22),G=Y+(F^(X|~B))+J[14]+2878612391&4294967295,Y=X+(G<<15&4294967295|G>>>17),G=B+(X^(Y|~F))+J[5]+4237533241&4294967295,B=Y+(G<<21&4294967295|G>>>11),G=F+(Y^(B|~X))+J[12]+1700485571&4294967295,F=B+(G<<6&4294967295|G>>>26),G=X+(B^(F|~Y))+J[3]+2399980690&4294967295,X=F+(G<<10&4294967295|G>>>22),G=Y+(F^(X|~B))+J[10]+4293915773&4294967295,Y=X+(G<<15&4294967295|G>>>17),G=B+(X^(Y|~F))+J[1]+2240044497&4294967295,B=Y+(G<<21&4294967295|G>>>11),G=F+(Y^(B|~X))+J[8]+1873313359&4294967295,F=B+(G<<6&4294967295|G>>>26),G=X+(B^(F|~Y))+J[15]+4264355552&4294967295,X=F+(G<<10&4294967295|G>>>22),G=Y+(F^(X|~B))+J[6]+2734768916&4294967295,Y=X+(G<<15&4294967295|G>>>17),G=B+(X^(Y|~F))+J[13]+1309151649&4294967295,B=Y+(G<<21&4294967295|G>>>11),G=F+(Y^(B|~X))+J[4]+4149444226&4294967295,F=B+(G<<6&4294967295|G>>>26),G=X+(B^(F|~Y))+J[11]+3174756917&4294967295,X=F+(G<<10&4294967295|G>>>22),G=Y+(F^(X|~B))+J[2]+718787259&4294967295,Y=X+(G<<15&4294967295|G>>>17),G=B+(X^(Y|~F))+J[9]+3951481745&4294967295,U.g[0]=U.g[0]+F&4294967295,U.g[1]=U.g[1]+(Y+(G<<21&4294967295|G>>>11))&4294967295,U.g[2]=U.g[2]+Y&4294967295,U.g[3]=U.g[3]+X&4294967295}s.prototype.v=function(U,F){F===void 0&&(F=U.length);const B=F-this.blockSize,J=this.C;let Y=this.h,X=0;for(;X<F;){if(Y==0)for(;X<=B;)c(this,U,X),X+=this.blockSize;if(typeof U=="string"){for(;X<F;)if(J[Y++]=U.charCodeAt(X++),Y==this.blockSize){c(this,J),Y=0;break}}else for(;X<F;)if(J[Y++]=U[X++],Y==this.blockSize){c(this,J),Y=0;break}}this.h=Y,this.o+=F},s.prototype.A=function(){var U=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);U[0]=128;for(var F=1;F<U.length-8;++F)U[F]=0;F=this.o*8;for(var B=U.length-8;B<U.length;++B)U[B]=F&255,F/=256;for(this.v(U),U=Array(16),F=0,B=0;B<4;++B)for(let J=0;J<32;J+=8)U[F++]=this.g[B]>>>J&255;return U};function h(U,F){var B=T;return Object.prototype.hasOwnProperty.call(B,U)?B[U]:B[U]=F(U)}function p(U,F){this.h=F;const B=[];let J=!0;for(let Y=U.length-1;Y>=0;Y--){const X=U[Y]|0;J&&X==F||(B[Y]=X,J=!1)}this.g=B}var T={};function w(U){return-128<=U&&U<128?h(U,function(F){return new p([F|0],F<0?-1:0)}):new p([U|0],U<0?-1:0)}function _(U){if(isNaN(U)||!isFinite(U))return b;if(U<0)return q(_(-U));const F=[];let B=1;for(let J=0;U>=B;J++)F[J]=U/B|0,B*=4294967296;return new p(F,0)}function S(U,F){if(U.length==0)throw Error("number format error: empty string");if(F=F||10,F<2||36<F)throw Error("radix out of range: "+F);if(U.charAt(0)=="-")return q(S(U.substring(1),F));if(U.indexOf("-")>=0)throw Error('number format error: interior "-" character');const B=_(Math.pow(F,8));let J=b;for(let X=0;X<U.length;X+=8){var Y=Math.min(8,U.length-X);const G=parseInt(U.substring(X,X+Y),F);Y<8?(Y=_(Math.pow(F,Y)),J=J.j(Y).add(_(G))):(J=J.j(B),J=J.add(_(G)))}return J}var b=w(0),L=w(1),j=w(16777216);n=p.prototype,n.m=function(){if(Z(this))return-q(this).m();let U=0,F=1;for(let B=0;B<this.g.length;B++){const J=this.i(B);U+=(J>=0?J:4294967296+J)*F,F*=4294967296}return U},n.toString=function(U){if(U=U||10,U<2||36<U)throw Error("radix out of range: "+U);if(W(this))return"0";if(Z(this))return"-"+q(this).toString(U);const F=_(Math.pow(U,6));var B=this;let J="";for(;;){const Y=Re(B,F).g;B=pe(B,Y.j(F));let X=((B.g.length>0?B.g[0]:B.h)>>>0).toString(U);if(B=Y,W(B))return X+J;for(;X.length<6;)X="0"+X;J=X+J}},n.i=function(U){return U<0?0:U<this.g.length?this.g[U]:this.h};function W(U){if(U.h!=0)return!1;for(let F=0;F<U.g.length;F++)if(U.g[F]!=0)return!1;return!0}function Z(U){return U.h==-1}n.l=function(U){return U=pe(this,U),Z(U)?-1:W(U)?0:1};function q(U){const F=U.g.length,B=[];for(let J=0;J<F;J++)B[J]=~U.g[J];return new p(B,~U.h).add(L)}n.abs=function(){return Z(this)?q(this):this},n.add=function(U){const F=Math.max(this.g.length,U.g.length),B=[];let J=0;for(let Y=0;Y<=F;Y++){let X=J+(this.i(Y)&65535)+(U.i(Y)&65535),G=(X>>>16)+(this.i(Y)>>>16)+(U.i(Y)>>>16);J=G>>>16,X&=65535,G&=65535,B[Y]=G<<16|X}return new p(B,B[B.length-1]&-2147483648?-1:0)};function pe(U,F){return U.add(q(F))}n.j=function(U){if(W(this)||W(U))return b;if(Z(this))return Z(U)?q(this).j(q(U)):q(q(this).j(U));if(Z(U))return q(this.j(q(U)));if(this.l(j)<0&&U.l(j)<0)return _(this.m()*U.m());const F=this.g.length+U.g.length,B=[];for(var J=0;J<2*F;J++)B[J]=0;for(J=0;J<this.g.length;J++)for(let Y=0;Y<U.g.length;Y++){const X=this.i(J)>>>16,G=this.i(J)&65535,We=U.i(Y)>>>16,he=U.i(Y)&65535;B[2*J+2*Y]+=G*he,le(B,2*J+2*Y),B[2*J+2*Y+1]+=X*he,le(B,2*J+2*Y+1),B[2*J+2*Y+1]+=G*We,le(B,2*J+2*Y+1),B[2*J+2*Y+2]+=X*We,le(B,2*J+2*Y+2)}for(U=0;U<F;U++)B[U]=B[2*U+1]<<16|B[2*U];for(U=F;U<2*F;U++)B[U]=0;return new p(B,0)};function le(U,F){for(;(U[F]&65535)!=U[F];)U[F+1]+=U[F]>>>16,U[F]&=65535,F++}function ne(U,F){this.g=U,this.h=F}function Re(U,F){if(W(F))throw Error("division by zero");if(W(U))return new ne(b,b);if(Z(U))return F=Re(q(U),F),new ne(q(F.g),q(F.h));if(Z(F))return F=Re(U,q(F)),new ne(q(F.g),F.h);if(U.g.length>30){if(Z(U)||Z(F))throw Error("slowDivide_ only works with positive integers.");for(var B=L,J=F;J.l(U)<=0;)B=He(B),J=He(J);var Y=Be(B,1),X=Be(J,1);for(J=Be(J,2),B=Be(B,2);!W(J);){var G=X.add(J);G.l(U)<=0&&(Y=Y.add(B),X=G),J=Be(J,1),B=Be(B,1)}return F=pe(U,Y.j(F)),new ne(Y,F)}for(Y=b;U.l(F)>=0;){for(B=Math.max(1,Math.floor(U.m()/F.m())),J=Math.ceil(Math.log(B)/Math.LN2),J=J<=48?1:Math.pow(2,J-48),X=_(B),G=X.j(F);Z(G)||G.l(U)>0;)B-=J,X=_(B),G=X.j(F);W(X)&&(X=L),Y=Y.add(X),U=pe(U,G)}return new ne(Y,U)}n.B=function(U){return Re(this,U).h},n.and=function(U){const F=Math.max(this.g.length,U.g.length),B=[];for(let J=0;J<F;J++)B[J]=this.i(J)&U.i(J);return new p(B,this.h&U.h)},n.or=function(U){const F=Math.max(this.g.length,U.g.length),B=[];for(let J=0;J<F;J++)B[J]=this.i(J)|U.i(J);return new p(B,this.h|U.h)},n.xor=function(U){const F=Math.max(this.g.length,U.g.length),B=[];for(let J=0;J<F;J++)B[J]=this.i(J)^U.i(J);return new p(B,this.h^U.h)};function He(U){const F=U.g.length+1,B=[];for(let J=0;J<F;J++)B[J]=U.i(J)<<1|U.i(J-1)>>>31;return new p(B,U.h)}function Be(U,F){const B=F>>5;F%=32;const J=U.g.length-B,Y=[];for(let X=0;X<J;X++)Y[X]=F>0?U.i(X+B)>>>F|U.i(X+B+1)<<32-F:U.i(X+B);return new p(Y,U.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,wx=s,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.B,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=_,p.fromString=S,To=p}).apply(typeof n_<"u"?n_:typeof self<"u"?self:typeof window<"u"?window:{});var Cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var xx,Iu,Tx,Pf,dg,Cx,vx,Sx;(function(){var n,e=Object.defineProperty;function t(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cf=="object"&&Cf];for(var I=0;I<y.length;++I){var O=y[I];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var s=t(this);function c(y,I){if(I)e:{var O=s;y=y.split(".");for(var V=0;V<y.length-1;V++){var se=y[V];if(!(se in O))break e;O=O[se]}y=y[y.length-1],V=O[y],I=I(V),I!=V&&I!=null&&e(O,y,{configurable:!0,writable:!0,value:I})}}c("Symbol.dispose",function(y){return y||Symbol("Symbol.dispose")}),c("Array.prototype.values",function(y){return y||function(){return this[Symbol.iterator]()}}),c("Object.entries",function(y){return y||function(I){var O=[],V;for(V in I)Object.prototype.hasOwnProperty.call(I,V)&&O.push([V,I[V]]);return O}});var h=h||{},p=this||self;function T(y){var I=typeof y;return I=="object"&&y!=null||I=="function"}function w(y,I,O){return y.call.apply(y.bind,arguments)}function _(y,I,O){return _=w,_.apply(null,arguments)}function S(y,I){var O=Array.prototype.slice.call(arguments,1);return function(){var V=O.slice();return V.push.apply(V,arguments),y.apply(this,V)}}function b(y,I){function O(){}O.prototype=I.prototype,y.Z=I.prototype,y.prototype=new O,y.prototype.constructor=y,y.Ob=function(V,se,Ee){for(var Me=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)Me[ot-2]=arguments[ot];return I.prototype[se].apply(V,Me)}}var L=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?y=>y&&AsyncContext.Snapshot.wrap(y):y=>y;function j(y){const I=y.length;if(I>0){const O=Array(I);for(let V=0;V<I;V++)O[V]=y[V];return O}return[]}function W(y,I){for(let V=1;V<arguments.length;V++){const se=arguments[V];var O=typeof se;if(O=O!="object"?O:se?Array.isArray(se)?"array":O:"null",O=="array"||O=="object"&&typeof se.length=="number"){O=y.length||0;const Ee=se.length||0;y.length=O+Ee;for(let Me=0;Me<Ee;Me++)y[O+Me]=se[Me]}else y.push(se)}}class Z{constructor(I,O){this.i=I,this.j=O,this.h=0,this.g=null}get(){let I;return this.h>0?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function q(y){p.setTimeout(()=>{throw y},0)}function pe(){var y=U;let I=null;return y.g&&(I=y.g,y.g=y.g.next,y.g||(y.h=null),I.next=null),I}class le{constructor(){this.h=this.g=null}add(I,O){const V=ne.get();V.set(I,O),this.h?this.h.next=V:this.g=V,this.h=V}}var ne=new Z(()=>new Re,y=>y.reset());class Re{constructor(){this.next=this.g=this.h=null}set(I,O){this.h=I,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let He,Be=!1,U=new le,F=()=>{const y=Promise.resolve(void 0);He=()=>{y.then(B)}};function B(){for(var y;y=pe();){try{y.h.call(y.g)}catch(O){q(O)}var I=ne;I.j(y),I.h<100&&(I.h++,y.next=I.g,I.g=y)}Be=!1}function J(){this.u=this.u,this.C=this.C}J.prototype.u=!1,J.prototype.dispose=function(){this.u||(this.u=!0,this.N())},J.prototype[Symbol.dispose]=function(){this.dispose()},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(y,I){this.type=y,this.g=this.target=I,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var X=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var y=!1,I=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const O=()=>{};p.addEventListener("test",O,I),p.removeEventListener("test",O,I)}catch{}return y})();function G(y){return/^[\s\xa0]*$/.test(y)}function We(y,I){Y.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y&&this.init(y,I)}b(We,Y),We.prototype.init=function(y,I){const O=this.type=y.type,V=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;this.target=y.target||y.srcElement,this.g=I,I=y.relatedTarget,I||(O=="mouseover"?I=y.fromElement:O=="mouseout"&&(I=y.toElement)),this.relatedTarget=I,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=y.pointerType,this.state=y.state,this.i=y,y.defaultPrevented&&We.Z.h.call(this)},We.prototype.h=function(){We.Z.h.call(this);const y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var he="closure_listenable_"+(Math.random()*1e6|0),me=0;function xe(y,I,O,V,se){this.listener=y,this.proxy=null,this.src=I,this.type=O,this.capture=!!V,this.ha=se,this.key=++me,this.da=this.fa=!1}function Ye(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function lt(y,I,O){for(const V in y)I.call(O,y[V],V,y)}function mt(y,I){for(const O in y)I.call(void 0,y[O],O,y)}function ee(y){const I={};for(const O in y)I[O]=y[O];return I}const Ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pe(y,I){let O,V;for(let se=1;se<arguments.length;se++){V=arguments[se];for(O in V)y[O]=V[O];for(let Ee=0;Ee<Ae.length;Ee++)O=Ae[Ee],Object.prototype.hasOwnProperty.call(V,O)&&(y[O]=V[O])}}function ke(y){this.src=y,this.g={},this.h=0}ke.prototype.add=function(y,I,O,V,se){const Ee=y.toString();y=this.g[Ee],y||(y=this.g[Ee]=[],this.h++);const Me=Le(y,I,V,se);return Me>-1?(I=y[Me],O||(I.fa=!1)):(I=new xe(I,this.src,Ee,!!V,se),I.fa=O,y.push(I)),I};function it(y,I){const O=I.type;if(O in y.g){var V=y.g[O],se=Array.prototype.indexOf.call(V,I,void 0),Ee;(Ee=se>=0)&&Array.prototype.splice.call(V,se,1),Ee&&(Ye(I),y.g[O].length==0&&(delete y.g[O],y.h--))}}function Le(y,I,O,V){for(let se=0;se<y.length;++se){const Ee=y[se];if(!Ee.da&&Ee.listener==I&&Ee.capture==!!O&&Ee.ha==V)return se}return-1}var wt="closure_lm_"+(Math.random()*1e6|0),xt={};function Jt(y,I,O,V,se){if(Array.isArray(I)){for(let Ee=0;Ee<I.length;Ee++)Jt(y,I[Ee],O,V,se);return null}return O=qt(O),y&&y[he]?y.J(I,O,T(V)?!!V.capture:!1,se):mr(y,I,O,!1,V,se)}function mr(y,I,O,V,se,Ee){if(!I)throw Error("Invalid event type");const Me=T(se)?!!se.capture:!!se;let ot=pr(y);if(ot||(y[wt]=ot=new ke(y)),O=ot.add(I,O,V,Me,Ee),O.proxy)return O;if(V=qn(),O.proxy=V,V.src=y,V.listener=O,y.addEventListener)X||(se=Me),se===void 0&&(se=!1),y.addEventListener(I.toString(),V,se);else if(y.attachEvent)y.attachEvent(pi(I.toString()),V);else if(y.addListener&&y.removeListener)y.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return O}function qn(){function y(O){return I.call(y.src,y.listener,O)}const I=Pi;return y}function as(y,I,O,V,se){if(Array.isArray(I))for(var Ee=0;Ee<I.length;Ee++)as(y,I[Ee],O,V,se);else V=T(V)?!!V.capture:!!V,O=qt(O),y&&y[he]?(y=y.i,Ee=String(I).toString(),Ee in y.g&&(I=y.g[Ee],O=Le(I,O,V,se),O>-1&&(Ye(I[O]),Array.prototype.splice.call(I,O,1),I.length==0&&(delete y.g[Ee],y.h--)))):y&&(y=pr(y))&&(I=y.g[I.toString()],y=-1,I&&(y=Le(I,O,V,se)),(O=y>-1?I[y]:null)&&Tt(O))}function Tt(y){if(typeof y!="number"&&y&&!y.da){var I=y.src;if(I&&I[he])it(I.i,y);else{var O=y.type,V=y.proxy;I.removeEventListener?I.removeEventListener(O,V,y.capture):I.detachEvent?I.detachEvent(pi(O),V):I.addListener&&I.removeListener&&I.removeListener(V),(O=pr(I))?(it(O,y),O.h==0&&(O.src=null,I[wt]=null)):Ye(y)}}}function pi(y){return y in xt?xt[y]:xt[y]="on"+y}function Pi(y,I){if(y.da)y=!0;else{I=new We(I,this);const O=y.listener,V=y.ha||y.src;y.fa&&Tt(y),y=O.call(V,I)}return y}function pr(y){return y=y[wt],y instanceof ke?y:null}var Nn="__closure_events_fn_"+(Math.random()*1e9>>>0);function qt(y){return typeof y=="function"?y:(y[Nn]||(y[Nn]=function(I){return y.handleEvent(I)}),y[Nn])}function $e(){J.call(this),this.i=new ke(this),this.M=this,this.G=null}b($e,J),$e.prototype[he]=!0,$e.prototype.removeEventListener=function(y,I,O,V){as(this,y,I,O,V)};function xn(y,I){var O,V=y.G;if(V)for(O=[];V;V=V.G)O.push(V);if(y=y.M,V=I.type||I,typeof I=="string")I=new Y(I,y);else if(I instanceof Y)I.target=I.target||y;else{var se=I;I=new Y(V,y),Pe(I,se)}se=!0;let Ee,Me;if(O)for(Me=O.length-1;Me>=0;Me--)Ee=I.g=O[Me],se=Fe(Ee,V,!0,I)&&se;if(Ee=I.g=y,se=Fe(Ee,V,!0,I)&&se,se=Fe(Ee,V,!1,I)&&se,O)for(Me=0;Me<O.length;Me++)Ee=I.g=O[Me],se=Fe(Ee,V,!1,I)&&se}$e.prototype.N=function(){if($e.Z.N.call(this),this.i){var y=this.i;for(const I in y.g){const O=y.g[I];for(let V=0;V<O.length;V++)Ye(O[V]);delete y.g[I],y.h--}}this.G=null},$e.prototype.J=function(y,I,O,V){return this.i.add(String(y),I,!1,O,V)},$e.prototype.K=function(y,I,O,V){return this.i.add(String(y),I,!0,O,V)};function Fe(y,I,O,V){if(I=y.i.g[String(I)],!I)return!0;I=I.concat();let se=!0;for(let Ee=0;Ee<I.length;++Ee){const Me=I[Ee];if(Me&&!Me.da&&Me.capture==O){const ot=Me.listener,bn=Me.ha||Me.src;Me.fa&&it(y.i,Me),se=ot.call(bn,V)!==!1&&se}}return se&&!V.defaultPrevented}function Ma(y,I){if(typeof y!="function")if(y&&typeof y.handleEvent=="function")y=_(y.handleEvent,y);else throw Error("Invalid listener argument");return Number(I)>2147483647?-1:p.setTimeout(y,I||0)}function Vo(y){y.g=Ma(()=>{y.g=null,y.i&&(y.i=!1,Vo(y))},y.l);const I=y.h;y.h=null,y.m.apply(null,I)}class yn extends J{constructor(I,O){super(),this.m=I,this.l=O,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:Vo(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function os(y){J.call(this),this.h=y,this.g={}}b(os,J);var yi=[];function La(y){lt(y.g,function(I,O){this.g.hasOwnProperty(O)&&Tt(I)},y),y.g={}}os.prototype.N=function(){os.Z.N.call(this),La(this)},os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ei=p.JSON.stringify,si=p.JSON.parse,Fo=class{stringify(y){return p.JSON.stringify(y,void 0)}parse(y){return p.JSON.parse(y,void 0)}};function qs(){}function Dl(){}var Yt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ne(){Y.call(this,"d")}b(Ne,Y);function Xt(){Y.call(this,"c")}b(Xt,Y);var rt={},hn=null;function Ur(){return hn=hn||new $e}rt.Ia="serverreachability";function Pa(y){Y.call(this,rt.Ia,y)}b(Pa,Y);function yr(y){const I=Ur();xn(I,new Pa(I))}rt.STAT_EVENT="statevent";function At(y,I){Y.call(this,rt.STAT_EVENT,y),this.stat=I}b(At,Y);function on(y){const I=Ur();xn(I,new At(I,y))}rt.Ja="timingevent";function Er(y,I){Y.call(this,rt.Ja,y),this.size=I}b(Er,Y);function _r(y,I){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){y()},I)}function On(){this.g=!0}On.prototype.ua=function(){this.g=!1};function zo(y,I,O,V,se,Ee){y.info(function(){if(y.g)if(Ee){var Me="",ot=Ee.split("&");for(let Vt=0;Vt<ot.length;Vt++){var bn=ot[Vt].split("=");if(bn.length>1){const dn=bn[0];bn=bn[1];const Zi=dn.split("_");Me=Zi.length>=2&&Zi[1]=="type"?Me+(dn+"="+bn+"&"):Me+(dn+"=redacted&")}}}else Me=null;else Me=Ee;return"XMLHTTP REQ ("+V+") [attempt "+se+"]: "+I+`
`+O+`
`+Me})}function Yn(y,I,O,V,se,Ee,Me){y.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+se+"]: "+I+`
`+O+`
`+Ee+" "+Me})}function _i(y,I,O,V){y.info(function(){return"XMLHTTP TEXT ("+I+"): "+nr(y,O)+(V?" "+V:"")})}function Vr(y,I){y.info(function(){return"TIMEOUT: "+I})}On.prototype.info=function(){};function nr(y,I){if(!y.g)return I;if(!I)return null;try{const Ee=JSON.parse(I);if(Ee){for(y=0;y<Ee.length;y++)if(Array.isArray(Ee[y])){var O=Ee[y];if(!(O.length<2)){var V=O[1];if(Array.isArray(V)&&!(V.length<1)){var se=V[0];if(se!="noop"&&se!="stop"&&se!="close")for(let Me=1;Me<V.length;Me++)V[Me]=""}}}}return Ei(Ee)}catch{return I}}var Ys={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ar={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Xs;function Un(){}b(Un,qs),Un.prototype.g=function(){return new XMLHttpRequest},Xs=new Un;function Ai(y){return encodeURIComponent(String(y))}function wi(y){var I=1;y=y.split(":");const O=[];for(;I>0&&y.length;)O.push(y.shift()),I--;return y.length&&O.push(y.join(":")),O}function Ue(y,I,O,V){this.j=y,this.i=I,this.l=O,this.S=V||1,this.V=new os(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new hi}function hi(){this.i=null,this.g="",this.h=!1}var Tn={},Ht={};function xi(y,I,O){y.M=1,y.A=Bi(vn(I)),y.u=O,y.R=!0,ls(y,null)}function ls(y,I){y.F=Date.now(),Fr(y),y.B=vn(y.A);var O=y.B,V=y.S;Array.isArray(V)||(V=[String(V)]),$t(O.i,"t",V),y.C=0,O=y.j.L,y.h=new hi,y.g=za(y.j,O?I:null,!y.u),y.P>0&&(y.O=new yn(_(y.Y,y,y.g),y.P)),I=y.V,O=y.g,V=y.ba;var se="readystatechange";Array.isArray(se)||(se&&(yi[0]=se.toString()),se=yi);for(let Ee=0;Ee<se.length;Ee++){const Me=Jt(O,se[Ee],V||I.handleEvent,!1,I.h||I);if(!Me)break;I.g[Me.key]=Me}I=y.J?ee(y.J):{},y.u?(y.v||(y.v="POST"),I["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.B,y.v,y.u,I)):(y.v="GET",y.g.ea(y.B,y.v,null,I)),yr(),zo(y.i,y.v,y.B,y.l,y.S,y.u)}Ue.prototype.ba=function(y){y=y.target;const I=this.O;I&&sr(y)==3?I.j():this.Y(y)},Ue.prototype.Y=function(y){try{if(y==this.g)e:{const ot=sr(this.g),bn=this.g.ya(),Vt=this.g.ca();if(!(ot<3)&&(ot!=3||this.g&&(this.h.h||this.g.la()||Ln(this.g)))){this.K||ot!=4||bn==7||(bn==8||Vt<=0?yr(3):yr(2)),mn(this);var I=this.g.ca();this.X=I;var O=ka(this);if(this.o=I==200,Yn(this.i,this.v,this.B,this.l,this.S,ot,I),this.o){if(this.U&&!this.L){t:{if(this.g){var V,se=this.g;if((V=se.g?se.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(V)){var Ee=V;break t}}Ee=null}if(y=Ee)_i(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ai(this,y);else{this.o=!1,this.m=3,on(12),ki(this),St(this);break e}}if(this.R){y=!0;let dn;for(;!this.K&&this.C<O.length;)if(dn=Ml(this,O),dn==Ht){ot==4&&(this.m=4,on(14),y=!1),_i(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==Tn){this.m=4,on(15),_i(this.i,this.l,O,"[Invalid Chunk]"),y=!1;break}else _i(this.i,this.l,dn,null),ai(this,dn);if(Wi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||O.length!=0||this.h.h||(this.m=1,on(16),y=!1),this.o=this.o&&y,!y)_i(this.i,this.l,O,"[Invalid Chunked Response]"),ki(this),St(this);else if(O.length>0&&!this.W){this.W=!0;var Me=this.j;Me.g==this&&Me.aa&&!Me.P&&(Me.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),de(Me),Me.P=!0,on(11))}}else _i(this.i,this.l,O,null),ai(this,O);ot==4&&ki(this),this.o&&!this.K&&(ot==4?$s(this.j,this):(this.o=!1,Fr(this)))}else Ki(this.g),I==400&&O.indexOf("Unknown SID")>0?(this.m=3,on(12)):(this.m=0,on(13)),ki(this),St(this)}}}catch{}};function ka(y){if(!Wi(y))return y.g.la();const I=Ln(y.g);if(I==="")return"";let O="";const V=I.length,se=sr(y.g)==4;if(!y.h.i){if(typeof TextDecoder>"u")return ki(y),St(y),"";y.h.i=new p.TextDecoder}for(let Ee=0;Ee<V;Ee++)y.h.h=!0,O+=y.h.i.decode(I[Ee],{stream:!(se&&Ee==V-1)});return I.length=0,y.h.g+=O,y.C=0,y.h.g}function Wi(y){return y.g?y.v=="GET"&&y.M!=2&&y.j.Aa:!1}function Ml(y,I){var O=y.C,V=I.indexOf(`
`,O);return V==-1?Ht:(O=Number(I.substring(O,V)),isNaN(O)?Tn:(V+=1,V+O>I.length?Ht:(I=I.slice(V,V+O),y.C=V+O,I)))}Ue.prototype.cancel=function(){this.K=!0,ki(this)};function Fr(y){y.T=Date.now()+y.H,Ti(y,y.H)}function Ti(y,I){if(y.D!=null)throw Error("WatchDog timer not null");y.D=_r(_(y.aa,y),I)}function mn(y){y.D&&(p.clearTimeout(y.D),y.D=null)}Ue.prototype.aa=function(){this.D=null;const y=Date.now();y-this.T>=0?(Vr(this.i,this.B),this.M!=2&&(yr(),on(17)),ki(this),this.m=2,St(this)):Ti(this,this.T-y)};function St(y){y.j.I==0||y.K||$s(y.j,y)}function ki(y){mn(y);var I=y.O;I&&typeof I.dispose=="function"&&I.dispose(),y.O=null,La(y.V),y.g&&(I=y.g,y.g=null,I.abort(),I.dispose())}function ai(y,I){try{var O=y.j;if(O.I!=0&&(O.g==y||Ci(O.h,y))){if(!y.L&&Ci(O.h,y)&&O.I==3){try{var V=O.Ba.g.parse(I)}catch{V=null}if(Array.isArray(V)&&V.length==3){var se=V;if(se[0]==0){e:if(!O.v){if(O.g)if(O.g.F+3e3<y.F)Sn(O),hs(O);else break e;Js(O),on(18)}}else O.xa=se[1],0<O.xa-O.K&&se[2]<37500&&O.F&&O.A==0&&!O.C&&(O.C=_r(_(O.Va,O),6e3));Gt(O.h)<=1&&O.ta&&(O.ta=void 0)}else Hr(O,11)}else if((y.L||O.g==y)&&Sn(O),!G(I))for(se=O.Ba.g.parse(I),I=0;I<se.length;I++){let Vt=se[I];const dn=Vt[0];if(!(dn<=O.K))if(O.K=dn,Vt=Vt[1],O.I==2)if(Vt[0]=="c"){O.M=Vt[1],O.ba=Vt[2];const Zi=Vt[3];Zi!=null&&(O.ka=Zi,O.j.info("VER="+O.ka));const Yr=Vt[4];Yr!=null&&(O.za=Yr,O.j.info("SVER="+O.za));const di=Vt[5];di!=null&&typeof di=="number"&&di>0&&(V=1.5*di,O.O=V,O.j.info("backChannelRequestTimeoutMs_="+V)),V=O;const Ji=y.g;if(Ji){const ta=Ji.g?Ji.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ta){var Ee=V.h;Ee.g||ta.indexOf("spdy")==-1&&ta.indexOf("quic")==-1&&ta.indexOf("h2")==-1||(Ee.j=Ee.l,Ee.g=new Set,Ee.h&&(Ho(Ee,Ee.h),Ee.h=null))}if(V.G){const Xr=Ji.g?Ji.g.getResponseHeader("X-HTTP-Session-Id"):null;Xr&&(V.wa=Xr,tt(V.J,V.G,Xr))}}O.I=3,O.l&&O.l.ra(),O.aa&&(O.T=Date.now()-y.F,O.j.info("Handshake RTT: "+O.T+"ms")),V=O;var Me=y;if(V.na=Pl(V,V.L?V.ba:null,V.W),Me.L){Dt(V.h,Me);var ot=Me,bn=V.O;bn&&(ot.H=bn),ot.D&&(mn(ot),Fr(ot)),V.g=Me}else Cr(V);O.i.length>0&&jr(O)}else Vt[0]!="stop"&&Vt[0]!="close"||Hr(O,7);else O.I==3&&(Vt[0]=="stop"||Vt[0]=="close"?Vt[0]=="stop"?Hr(O,7):Ua(O):Vt[0]!="noop"&&O.l&&O.l.qa(Vt),O.A=0)}}yr(4)}catch{}}var Cn=class{constructor(y,I){this.g=y,this.map=I}};function Se(y){this.l=y||10,p.PerformanceNavigationTiming?(y=p.performance.getEntriesByType("navigation"),y=y.length>0&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function jo(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function Gt(y){return y.h?1:y.g?y.g.size:0}function Ci(y,I){return y.h?y.h==I:y.g?y.g.has(I):!1}function Ho(y,I){y.g?y.g.add(I):y.h=I}function Dt(y,I){y.h&&y.h==I?y.h=null:y.g&&y.g.has(I)&&y.g.delete(I)}Se.prototype.cancel=function(){if(this.i=It(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function It(y){if(y.h!=null)return y.i.concat(y.h.G);if(y.g!=null&&y.g.size!==0){let I=y.i;for(const O of y.g.values())I=I.concat(O.G);return I}return j(y.i)}var Et=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cs(y,I){if(y){y=y.split("&");for(let O=0;O<y.length;O++){const V=y[O].indexOf("=");let se,Ee=null;V>=0?(se=y[O].substring(0,V),Ee=y[O].substring(V+1)):se=y[O],I(se,Ee?decodeURIComponent(Ee.replace(/\+/g," ")):"")}}}function vi(y){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let I;y instanceof vi?(this.l=y.l,Ct(this,y.j),this.o=y.o,this.g=y.g,Si(this,y.u),this.h=y.h,Go(this,qo(y.i)),this.m=y.m):y&&(I=String(y).match(Et))?(this.l=!1,Ct(this,I[1]||"",!0),this.o=zr(I[2]||""),this.g=zr(I[3]||"",!0),Si(this,I[4]),this.h=zr(I[5]||"",!0),Go(this,I[6]||"",!0),this.m=zr(I[7]||"")):(this.l=!1,this.i=new Xn(null,this.l))}vi.prototype.toString=function(){const y=[];var I=this.j;I&&y.push(ir(I,Dn,!0),":");var O=this.g;return(O||I=="file")&&(y.push("//"),(I=this.o)&&y.push(ir(I,Dn,!0),"@"),y.push(Ai(O).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.u,O!=null&&y.push(":",String(O))),(O=this.h)&&(this.g&&O.charAt(0)!="/"&&y.push("/"),y.push(ir(O,O.charAt(0)=="/"?z:oe,!0))),(O=this.i.toString())&&y.push("?",O),(O=this.m)&&y.push("#",ir(O,Mn)),y.join("")},vi.prototype.resolve=function(y){const I=vn(this);let O=!!y.j;O?Ct(I,y.j):O=!!y.o,O?I.o=y.o:O=!!y.g,O?I.g=y.g:O=y.u!=null;var V=y.h;if(O)Si(I,y.u);else if(O=!!y.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var se=I.h.lastIndexOf("/");se!=-1&&(V=I.h.slice(0,se+1)+V)}if(se=V,se==".."||se==".")V="";else if(se.indexOf("./")!=-1||se.indexOf("/.")!=-1){V=se.lastIndexOf("/",0)==0,se=se.split("/");const Ee=[];for(let Me=0;Me<se.length;){const ot=se[Me++];ot=="."?V&&Me==se.length&&Ee.push(""):ot==".."?((Ee.length>1||Ee.length==1&&Ee[0]!="")&&Ee.pop(),V&&Me==se.length&&Ee.push("")):(Ee.push(ot),V=!0)}V=Ee.join("/")}else V=se}return O?I.h=V:O=y.i.toString()!=="",O?Go(I,qo(y.i)):O=!!y.m,O&&(I.m=y.m),I};function vn(y){return new vi(y)}function Ct(y,I,O){y.j=O?zr(I,!0):I,y.j&&(y.j=y.j.replace(/:$/,""))}function Si(y,I){if(I){if(I=Number(I),isNaN(I)||I<0)throw Error("Bad port number "+I);y.u=I}else y.u=null}function Go(y,I,O){I instanceof Xn?(y.i=I,Ss(y.i,y.l)):(O||(I=ir(I,Ge)),y.i=new Xn(I,y.l))}function tt(y,I,O){y.i.set(I,O)}function Bi(y){return tt(y,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),y}function zr(y,I){return y?I?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function ir(y,I,O){return typeof y=="string"?(y=encodeURI(y).replace(I,pt),O&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function pt(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var Dn=/[#\/\?@]/g,oe=/[#\?:]/g,z=/[#\?]/g,Ge=/[#\?@]/g,Mn=/#/g;function Xn(y,I){this.h=this.g=null,this.i=y||null,this.j=!!I}function Ui(y){y.g||(y.g=new Map,y.h=0,y.i&&Cs(y.i,function(I,O){y.add(decodeURIComponent(I.replace(/\+/g," ")),O)}))}n=Xn.prototype,n.add=function(y,I){Ui(this),this.i=null,y=vs(this,y);let O=this.g.get(y);return O||this.g.set(y,O=[]),O.push(I),this.h+=1,this};function Ba(y,I){Ui(y),I=vs(y,I),y.g.has(I)&&(y.i=null,y.h-=y.g.get(I).length,y.g.delete(I))}function fi(y,I){return Ui(y),I=vs(y,I),y.g.has(I)}n.forEach=function(y,I){Ui(this),this.g.forEach(function(O,V){O.forEach(function(se){y.call(I,se,V,this)},this)},this)};function Qe(y,I){Ui(y);let O=[];if(typeof I=="string")fi(y,I)&&(O=O.concat(y.g.get(vs(y,I))));else for(y=Array.from(y.g.values()),I=0;I<y.length;I++)O=O.concat(y[I]);return O}n.set=function(y,I){return Ui(this),this.i=null,y=vs(this,y),fi(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[I]),this.h+=1,this},n.get=function(y,I){return y?(y=Qe(this,y),y.length>0?String(y[0]):I):I};function $t(y,I,O){Ba(y,I),O.length>0&&(y.i=null,y.g.set(vs(y,I),j(O)),y.h+=O.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],I=Array.from(this.g.keys());for(let V=0;V<I.length;V++){var O=I[V];const se=Ai(O);O=Qe(this,O);for(let Ee=0;Ee<O.length;Ee++){let Me=se;O[Ee]!==""&&(Me+="="+Ai(O[Ee])),y.push(Me)}}return this.i=y.join("&")};function qo(y){const I=new Xn;return I.i=y.i,y.g&&(I.g=new Map(y.g),I.h=y.h),I}function vs(y,I){return I=String(I),y.j&&(I=I.toLowerCase()),I}function Ss(y,I){I&&!y.j&&(Ui(y),y.i=null,y.g.forEach(function(O,V){const se=V.toLowerCase();V!=se&&(Ba(this,V),$t(this,se,O))},y)),y.j=I}function Vi(y,I){const O=new On;if(p.Image){const V=new Image;V.onload=S(rr,O,"TestLoadImage: loaded",!0,I,V),V.onerror=S(rr,O,"TestLoadImage: error",!1,I,V),V.onabort=S(rr,O,"TestLoadImage: abort",!1,I,V),V.ontimeout=S(rr,O,"TestLoadImage: timeout",!1,I,V),p.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=y}else I(!1)}function Ws(y,I){const O=new On,V=new AbortController,se=setTimeout(()=>{V.abort(),rr(O,"TestPingServer: timeout",!1,I)},1e4);fetch(y,{signal:V.signal}).then(Ee=>{clearTimeout(se),Ee.ok?rr(O,"TestPingServer: ok",!0,I):rr(O,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(se),rr(O,"TestPingServer: error",!1,I)})}function rr(y,I,O,V,se){try{se&&(se.onload=null,se.onerror=null,se.onabort=null,se.ontimeout=null),V(O)}catch{}}function fn(){this.g=new Fo}function Fi(y){this.i=y.Sb||null,this.h=y.ab||!1}b(Fi,qs),Fi.prototype.g=function(){return new zi(this.i,this.h)};function zi(y,I){$e.call(this),this.H=y,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(zi,$e),n=zi.prototype,n.open=function(y,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=y,this.D=I,this.readyState=1,et(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const I={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};y&&(I.body=y),(this.H||p).fetch(new Request(this.D,I)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Is(this)),this.readyState=0},n.Pa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,et(this)),this.g&&(this.readyState=3,et(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ke(this)}else y.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ke(y){y.j.read().then(y.Ma.bind(y)).catch(y.ga.bind(y))}n.Ma=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var I=y.value?y.value:new Uint8Array(0);(I=this.B.decode(I,{stream:!y.done}))&&(this.response=this.responseText+=I)}y.done?Is(this):et(this),this.readyState==3&&Ke(this)}},n.Oa=function(y){this.g&&(this.response=this.responseText=y,Is(this))},n.Na=function(y){this.g&&(this.response=y,Is(this))},n.ga=function(){this.g&&Is(this)};function Is(y){y.readyState=4,y.l=null,y.j=null,y.B=null,et(y)}n.setRequestHeader=function(y,I){this.A.append(y,I)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],I=this.h.entries();for(var O=I.next();!O.done;)O=O.value,y.push(O[0]+": "+O[1]),O=I.next();return y.join(`\r
`)};function et(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function en(y){let I="";return lt(y,function(O,V){I+=V,I+=":",I+=O,I+=`\r
`}),I}function Qs(y,I,O){e:{for(V in O){var V=!1;break e}V=!0}V||(O=en(O),typeof y=="string"?O!=null&&Ai(O):tt(y,I,O))}function Wt(y){$e.call(this),this.headers=new Map,this.L=y||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(Wt,$e);var wr=/^https?$/i,xr=["POST","PUT"];n=Wt.prototype,n.Fa=function(y){this.H=y},n.ea=function(y,I,O,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);I=I?I.toUpperCase():"GET",this.D=y,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Xs.g(),this.g.onreadystatechange=L(_(this.Ca,this));try{this.B=!0,this.g.open(I,String(y),!0),this.B=!1}catch(Ee){Ks(this,Ee);return}if(y=O||"",O=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var se in V)O.set(se,V[se]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const Ee of V.keys())O.set(Ee,V.get(Ee));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(O.keys()).find(Ee=>Ee.toLowerCase()=="content-type"),se=p.FormData&&y instanceof p.FormData,!(Array.prototype.indexOf.call(xr,I,void 0)>=0)||V||se||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ee,Me]of O)this.g.setRequestHeader(Ee,Me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(y),this.v=!1}catch(Ee){Ks(this,Ee)}};function Ks(y,I){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=I,y.o=5,cs(y),Qi(y)}function cs(y){y.A||(y.A=!0,xn(y,"complete"),xn(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=y||7,xn(this,"complete"),xn(this,"abort"),Qi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qi(this,!0)),Wt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Tr(this):this.Xa())},n.Xa=function(){Tr(this)};function Tr(y){if(y.h&&typeof h<"u"){if(y.v&&sr(y)==4)setTimeout(y.Ca.bind(y),0);else if(xn(y,"readystatechange"),sr(y)==4){y.h=!1;try{const Ee=y.ca();e:switch(Ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var O;if(!(O=I)){var V;if(V=Ee===0){let Me=String(y.D).match(Et)[1]||null;!Me&&p.self&&p.self.location&&(Me=p.self.location.protocol.slice(0,-1)),V=!wr.test(Me?Me.toLowerCase():"")}O=V}if(O)xn(y,"complete"),xn(y,"success");else{y.o=6;try{var se=sr(y)>2?y.g.statusText:""}catch{se=""}y.l=se+" ["+y.ca()+"]",cs(y)}}finally{Qi(y)}}}}function Qi(y,I){if(y.g){y.m&&(clearTimeout(y.m),y.m=null);const O=y.g;y.g=null,I||xn(y,"ready");try{O.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function sr(y){return y.g?y.g.readyState:0}n.ca=function(){try{return sr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(y){if(this.g){var I=this.g.responseText;return y&&I.indexOf(y)==0&&(I=I.substring(y.length)),si(I)}};function Ln(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.F){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function Ki(y){const I={};y=(y.g&&sr(y)>=2&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<y.length;V++){if(G(y[V]))continue;var O=wi(y[V]);const se=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const Ee=I[se]||[];I[se]=Ee,Ee.push(O)}mt(I,function(V){return V.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function En(y,I,O){return O&&O.internalChannelParams&&O.internalChannelParams[y]||I}function us(y){this.za=0,this.i=[],this.j=new On,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=En("failFast",!1,y),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=En("baseRetryDelayMs",5e3,y),this.Za=En("retryDelaySeedMs",1e4,y),this.Ta=En("forwardChannelMaxRetries",2,y),this.va=En("forwardChannelRequestTimeoutMs",2e4,y),this.ma=y&&y.xmlHttpFactory||void 0,this.Ua=y&&y.Rb||void 0,this.Aa=y&&y.useFetchStreams||!1,this.O=void 0,this.L=y&&y.supportsCrossDomainXhr||!1,this.M="",this.h=new Se(y&&y.concurrentRequestLimit),this.Ba=new fn,this.S=y&&y.fastHandshake||!1,this.R=y&&y.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=y&&y.Pb||!1,y&&y.ua&&this.j.ua(),y&&y.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&y&&y.detectBufferingProxy||!1,this.ia=void 0,y&&y.longPollingTimeout&&y.longPollingTimeout>0&&(this.ia=y.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=us.prototype,n.ka=8,n.I=1,n.connect=function(y,I,O,V){on(0),this.W=y,this.H=I||{},O&&V!==void 0&&(this.H.OSID=O,this.H.OAID=V),this.F=this.X,this.J=Pl(this,null,this.W),jr(this)};function Ua(y){if(Va(y),y.I==3){var I=y.V++,O=vn(y.J);if(tt(O,"SID",y.M),tt(O,"RID",I),tt(O,"TYPE","terminate"),bs(y,O),I=new Ue(y,y.j,I),I.M=2,I.A=Bi(vn(O)),O=!1,p.navigator&&p.navigator.sendBeacon)try{O=p.navigator.sendBeacon(I.A.toString(),"")}catch{}!O&&p.Image&&(new Image().src=I.A,O=!0),O||(I.g=za(I.j,null),I.g.ea(I.A)),I.F=Date.now(),Fr(I)}Ll(y)}function hs(y){y.g&&(de(y),y.g.cancel(),y.g=null)}function Va(y){hs(y),y.v&&(p.clearTimeout(y.v),y.v=null),Sn(y),y.h.cancel(),y.m&&(typeof y.m=="number"&&p.clearTimeout(y.m),y.m=null)}function jr(y){if(!jo(y.h)&&!y.m){y.m=!0;var I=y.Ea;He||F(),Be||(He(),Be=!0),U.add(I,y),y.D=0}}function Fa(y,I){return Gt(y.h)>=y.h.j-(y.m?1:0)?!1:y.m?(y.i=I.G.concat(y.i),!0):y.I==1||y.I==2||y.D>=(y.Sa?0:y.Ta)?!1:(y.m=_r(_(y.Ea,y,I),Yo(y,y.D)),y.D++,!0)}n.Ea=function(y){if(this.m)if(this.m=null,this.I==1){if(!y){this.V=Math.floor(Math.random()*1e5),y=this.V++;const se=new Ue(this,this.j,y);let Ee=this.o;if(this.U&&(Ee?(Ee=ee(Ee),Pe(Ee,this.U)):Ee=this.U),this.u!==null||this.R||(se.J=Ee,Ee=null),this.S)e:{for(var I=0,O=0;O<this.i.length;O++){t:{var V=this.i[O];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(I+=V,I>4096){I=O;break e}if(I===4096||O===this.i.length-1){I=O+1;break e}}I=1e3}else I=1e3;I=Zs(this,se,I),O=vn(this.J),tt(O,"RID",y),tt(O,"CVER",22),this.G&&tt(O,"X-HTTP-Session-Id",this.G),bs(this,O),Ee&&(this.R?I="headers="+Ai(en(Ee))+"&"+I:this.u&&Qs(O,this.u,Ee)),Ho(this.h,se),this.Ra&&tt(O,"TYPE","init"),this.S?(tt(O,"$req",I),tt(O,"SID","null"),se.U=!0,xi(se,O,null)):xi(se,O,I),this.I=2}}else this.I==3&&(y?zt(this,y):this.i.length==0||jo(this.h)||zt(this))};function zt(y,I){var O;I?O=I.l:O=y.V++;const V=vn(y.J);tt(V,"SID",y.M),tt(V,"RID",O),tt(V,"AID",y.K),bs(y,V),y.u&&y.o&&Qs(V,y.u,y.o),O=new Ue(y,y.j,O,y.D+1),y.u===null&&(O.J=y.o),I&&(y.i=I.G.concat(y.i)),I=Zs(y,O,1e3),O.H=Math.round(y.va*.5)+Math.round(y.va*.5*Math.random()),Ho(y.h,O),xi(O,V,I)}function bs(y,I){y.H&&lt(y.H,function(O,V){tt(I,V,O)}),y.l&&lt({},function(O,V){tt(I,V,O)})}function Zs(y,I,O){O=Math.min(y.i.length,O);const V=y.l?_(y.l.Ka,y.l,y):null;e:{var se=y.i;let ot=-1;for(;;){const bn=["count="+O];ot==-1?O>0?(ot=se[0].g,bn.push("ofs="+ot)):ot=0:bn.push("ofs="+ot);let Vt=!0;for(let dn=0;dn<O;dn++){var Ee=se[dn].g;const Zi=se[dn].map;if(Ee-=ot,Ee<0)ot=Math.max(0,se[dn].g-100),Vt=!1;else try{Ee="req"+Ee+"_"||"";try{var Me=Zi instanceof Map?Zi:Object.entries(Zi);for(const[Yr,di]of Me){let Ji=di;T(di)&&(Ji=Ei(di)),bn.push(Ee+Yr+"="+encodeURIComponent(Ji))}}catch(Yr){throw bn.push(Ee+"type="+encodeURIComponent("_badmap")),Yr}}catch{V&&V(Zi)}}if(Vt){Me=bn.join("&");break e}}Me=void 0}return y=y.i.splice(0,O),I.G=y,Me}function Cr(y){if(!y.g&&!y.v){y.Y=1;var I=y.Da;He||F(),Be||(He(),Be=!0),U.add(I,y),y.A=0}}function Js(y){return y.g||y.v||y.A>=3?!1:(y.Y++,y.v=_r(_(y.Da,y),Yo(y,y.A)),y.A++,!0)}n.Da=function(){if(this.v=null,ht(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var y=4*this.T;this.j.info("BP detection timer enabled: "+y),this.B=_r(_(this.Wa,this),y)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,on(10),hs(this),ht(this))};function de(y){y.B!=null&&(p.clearTimeout(y.B),y.B=null)}function ht(y){y.g=new Ue(y,y.j,"rpc",y.Y),y.u===null&&(y.g.J=y.o),y.g.P=0;var I=vn(y.na);tt(I,"RID","rpc"),tt(I,"SID",y.M),tt(I,"AID",y.K),tt(I,"CI",y.F?"0":"1"),!y.F&&y.ia&&tt(I,"TO",y.ia),tt(I,"TYPE","xmlhttp"),bs(y,I),y.u&&y.o&&Qs(I,y.u,y.o),y.O&&(y.g.H=y.O);var O=y.g;y=y.ba,O.M=1,O.A=Bi(vn(I)),O.u=null,O.R=!0,ls(O,y)}n.Va=function(){this.C!=null&&(this.C=null,hs(this),Js(this),on(19))};function Sn(y){y.C!=null&&(p.clearTimeout(y.C),y.C=null)}function $s(y,I){var O=null;if(y.g==I){Sn(y),de(y),y.g=null;var V=2}else if(Ci(y.h,I))O=I.G,Dt(y.h,I),V=1;else return;if(y.I!=0){if(I.o)if(V==1){O=I.u?I.u.length:0,I=Date.now()-I.F;var se=y.D;V=Ur(),xn(V,new Er(V,O)),jr(y)}else Cr(y);else if(se=I.m,se==3||se==0&&I.X>0||!(V==1&&Fa(y,I)||V==2&&Js(y)))switch(O&&O.length>0&&(I=y.h,I.i=I.i.concat(O)),se){case 1:Hr(y,5);break;case 4:Hr(y,10);break;case 3:Hr(y,6);break;default:Hr(y,2)}}}function Yo(y,I){let O=y.Qa+Math.floor(Math.random()*y.Za);return y.isActive()||(O*=2),O*I}function Hr(y,I){if(y.j.info("Error code "+I),I==2){var O=_(y.bb,y),V=y.Ua;const se=!V;V=new vi(V||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Ct(V,"https"),Bi(V),se?Vi(V.toString(),O):Ws(V.toString(),O)}else on(2);y.I=0,y.l&&y.l.pa(I),Ll(y),Va(y)}n.bb=function(y){y?(this.j.info("Successfully pinged google.com"),on(2)):(this.j.info("Failed to ping google.com"),on(1))};function Ll(y){if(y.I=0,y.ja=[],y.l){const I=It(y.h);(I.length!=0||y.i.length!=0)&&(W(y.ja,I),W(y.ja,y.i),y.h.i.length=0,j(y.i),y.i.length=0),y.l.oa()}}function Pl(y,I,O){var V=O instanceof vi?vn(O):new vi(O);if(V.g!="")I&&(V.g=I+"."+V.g),Si(V,V.u);else{var se=p.location;V=se.protocol,I=I?I+"."+se.hostname:se.hostname,se=+se.port;const Ee=new vi(null);V&&Ct(Ee,V),I&&(Ee.g=I),se&&Si(Ee,se),O&&(Ee.h=O),V=Ee}return O=y.G,I=y.wa,O&&I&&tt(V,O,I),tt(V,"VER",y.ka),bs(y,V),V}function za(y,I,O){if(I&&!y.L)throw Error("Can't create secondary domain capable XhrIo object.");return I=y.Aa&&!y.ma?new Wt(new Fi({ab:O})):new Wt(y.ma),I.Fa(y.L),I}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function In(){}n=In.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Gr(){}Gr.prototype.g=function(y,I){return new vt(y,I)};function vt(y,I){$e.call(this),this.g=new us(I),this.l=y,this.h=I&&I.messageUrlParams||null,y=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(y?y["X-WebChannel-Content-Type"]=I.messageContentType:y={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.sa&&(y?y["X-WebChannel-Client-Profile"]=I.sa:y={"X-WebChannel-Client-Profile":I.sa}),this.g.U=y,(y=I&&I.Qb)&&!G(y)&&(this.g.u=y),this.A=I&&I.supportsCrossDomainXhr||!1,this.v=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!G(I)&&(this.g.G=I,y=this.h,y!==null&&I in y&&(y=this.h,I in y&&delete y[I])),this.j=new bt(this)}b(vt,$e),vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vt.prototype.close=function(){Ua(this.g)},vt.prototype.o=function(y){var I=this.g;if(typeof y=="string"){var O={};O.__data__=y,y=O}else this.v&&(O={},O.__data__=Ei(y),y=O);I.i.push(new Cn(I.Ya++,y)),I.I==3&&jr(I)},vt.prototype.N=function(){this.g.l=null,delete this.j,Ua(this.g),delete this.g,vt.Z.N.call(this)};function ea(y){Ne.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var I=y.__sm__;if(I){e:{for(const O in I){y=O;break e}y=void 0}(this.i=y)&&(y=this.i,I=I!==null&&y in I?I[y]:void 0),this.data=I}else this.data=y}b(ea,Ne);function qr(){Xt.call(this),this.status=1}b(qr,Xt);function bt(y){this.g=y}b(bt,In),bt.prototype.ra=function(){xn(this.g,"a")},bt.prototype.qa=function(y){xn(this.g,new ea(y))},bt.prototype.pa=function(y){xn(this.g,new qr)},bt.prototype.oa=function(){xn(this.g,"b")},Gr.prototype.createWebChannel=Gr.prototype.g,vt.prototype.send=vt.prototype.o,vt.prototype.open=vt.prototype.m,vt.prototype.close=vt.prototype.close,Sx=function(){return new Gr},vx=function(){return Ur()},Cx=rt,dg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ys.NO_ERROR=0,Ys.TIMEOUT=8,Ys.HTTP_ERROR=6,Pf=Ys,Ar.COMPLETE="complete",Tx=Ar,Dl.EventType=Yt,Yt.OPEN="a",Yt.CLOSE="b",Yt.ERROR="c",Yt.MESSAGE="d",$e.prototype.listen=$e.prototype.J,Iu=Dl,Wt.prototype.listenOnce=Wt.prototype.K,Wt.prototype.getLastError=Wt.prototype.Ha,Wt.prototype.getLastErrorCode=Wt.prototype.ya,Wt.prototype.getStatus=Wt.prototype.ca,Wt.prototype.getResponseJson=Wt.prototype.La,Wt.prototype.getResponseText=Wt.prototype.la,Wt.prototype.send=Wt.prototype.ea,Wt.prototype.setWithCredentials=Wt.prototype.Fa,xx=Wt}).apply(typeof Cf<"u"?Cf:typeof self<"u"?self:typeof window<"u"?window:{});class Gi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gi.UNAUTHENTICATED=new Gi(null),Gi.GOOGLE_CREDENTIALS=new Gi("google-credentials-uid"),Gi.FIRST_PARTY=new Gi("first-party-uid"),Gi.MOCK_USER=new Gi("mock-user");let kc="12.8.0";function d8(n){kc=n}const Al=new Ad("@firebase/firestore");function hc(){return Al.logLevel}function ze(n,...e){if(Al.logLevel<=kt.DEBUG){const t=e.map(sm);Al.debug(`Firestore (${kc}): ${n}`,...t)}}function Ra(n,...e){if(Al.logLevel<=kt.ERROR){const t=e.map(sm);Al.error(`Firestore (${kc}): ${n}`,...t)}}function Cc(n,...e){if(Al.logLevel<=kt.WARN){const t=e.map(sm);Al.warn(`Firestore (${kc}): ${n}`,...t)}}function sm(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function at(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Ix(n,s,t)}function Ix(n,e,t){let s=`FIRESTORE (${kc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Ra(s),new Error(s)}function nn(n,e,t,s){let c="Unexpected state";typeof t=="string"?c=t:s=t,n||Ix(e,c,s)}function dt(n,e){return n}const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends Ts{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Co{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class bx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class g8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Gi.UNAUTHENTICATED)))}shutdown(){}}class m8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class p8{constructor(e){this.t=e,this.currentUser=Gi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){nn(this.o===void 0,42304);let s=this.i;const c=w=>this.i!==s?(s=this.i,t(w)):Promise.resolve();let h=new Co;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Co,e.enqueueRetryable((()=>c(this.currentUser)))};const p=()=>{const w=h;e.enqueueRetryable((async()=>{await w.promise,await c(this.currentUser)}))},T=w=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit((w=>T(w))),setTimeout((()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?T(w):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Co)}}),0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(nn(typeof s.accessToken=="string",31837,{l:s}),new bx(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nn(e===null||typeof e=="string",2055,{h:e}),new Gi(e)}}class y8{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Gi.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class E8{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new y8(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Gi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class i_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _8{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ns(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){nn(this.o===void 0,3512);const s=h=>{h.error!=null&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const p=h.token!==this.m;return this.m=h.token,ze("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable((()=>s(h)))};const c=h=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((h=>c(h))),setTimeout((()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?c(h):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new i_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(nn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new i_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function A8(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}class am{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const c=A8(40);for(let h=0;h<c.length;++h)s.length<20&&c[h]<t&&(s+=e.charAt(c[h]%62))}return s}}function Bt(n,e){return n<e?-1:n>e?1:0}function gg(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const c=n.charAt(s),h=e.charAt(s);if(c!==h)return K1(c)===K1(h)?Bt(c,h):K1(c)?1:-1}return Bt(n.length,e.length)}const w8=55296,x8=57343;function K1(n){const e=n.charCodeAt(0);return e>=w8&&e<=x8}function vc(n,e,t){return n.length===e.length&&n.every(((s,c)=>t(s,e[c])))}const r_="__name__";class Ps{constructor(e,t,s){t===void 0?t=0:t>e.length&&at(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&at(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Ps.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ps?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let c=0;c<s;c++){const h=Ps.compareSegments(e.get(c),t.get(c));if(h!==0)return h}return Bt(e.length,t.length)}static compareSegments(e,t){const s=Ps.isNumericId(e),c=Ps.isNumericId(t);return s&&!c?-1:!s&&c?1:s&&c?Ps.extractNumericId(e).compare(Ps.extractNumericId(t)):gg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return To.fromString(e.substring(4,e.length-2))}}class pn extends Ps{construct(e,t,s){return new pn(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ve(ve.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((c=>c.length>0)))}return new pn(t)}static emptyPath(){return new pn([])}}const T8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mi extends Ps{construct(e,t,s){return new Mi(e,t,s)}static isValidIdentifier(e){return T8.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===r_}static keyField(){return new Mi([r_])}static fromServerFormat(e){const t=[];let s="",c=0;const h=()=>{if(s.length===0)throw new Ve(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let p=!1;for(;c<e.length;){const T=e[c];if(T==="\\"){if(c+1===e.length)throw new Ve(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[c+1];if(w!=="\\"&&w!=="."&&w!=="`")throw new Ve(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=w,c+=2}else T==="`"?(p=!p,c++):T!=="."||p?(s+=T,c++):(h(),c++)}if(h(),p)throw new Ve(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mi(t)}static emptyPath(){return new Mi([])}}class Je{constructor(e){this.path=e}static fromPath(e){return new Je(pn.fromString(e))}static fromName(e){return new Je(pn.fromString(e).popFirst(5))}static empty(){return new Je(pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new pn(e.slice()))}}function Rx(n,e,t){if(!t)throw new Ve(ve.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function C8(n,e,t,s){if(e===!0&&s===!0)throw new Ve(ve.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function s_(n){if(!Je.isDocumentKey(n))throw new Ve(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function a_(n){if(Je.isDocumentKey(n))throw new Ve(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Nx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Sd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":at(12329,{type:typeof n})}function Us(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ve(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sd(n);throw new Ve(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ii(n,e){const t={typeString:n};return e&&(t.value=e),t}function ch(n,e){if(!Nx(n))throw new Ve(ve.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const c=e[s].typeString,h="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const p=n[s];if(c&&typeof p!==c){t=`JSON field '${s}' must be a ${c}.`;break}if(h!==void 0&&p!==h.value){t=`Expected '${s}' field to equal '${h.value}'`;break}}if(t)throw new Ve(ve.INVALID_ARGUMENT,t);return!0}const o_=-62135596800,l_=1e6;class wn{static now(){return wn.fromMillis(Date.now())}static fromDate(e){return wn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*l_);return new wn(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ve(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ve(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<o_)throw new Ve(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/l_}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ch(e,wn._jsonSchema))return new wn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-o_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wn._jsonSchemaVersion="firestore/timestamp/1.0",wn._jsonSchema={type:ii("string",wn._jsonSchemaVersion),seconds:ii("number"),nanoseconds:ii("number")};class ut{static fromTimestamp(e){return new ut(e)}static min(){return new ut(new wn(0,0))}static max(){return new ut(new wn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const qu=-1;function v8(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,c=ut.fromTimestamp(s===1e9?new wn(t+1,0):new wn(t,s));return new bo(c,Je.empty(),e)}function S8(n){return new bo(n.readTime,n.key,qu)}class bo{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new bo(ut.min(),Je.empty(),qu)}static max(){return new bo(ut.max(),Je.empty(),qu)}}function I8(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Je.comparator(n.documentKey,e.documentKey),t!==0?t:Bt(n.largestBatchId,e.largestBatchId))}const b8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class R8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Bc(n){if(n.code!==ve.FAILED_PRECONDITION||n.message!==b8)throw n;ze("LocalStore","Unexpectedly lost primary lease")}class Ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&at(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ie(((s,c)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(s,c)},this.catchCallback=h=>{this.wrapFailure(t,h).next(s,c)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ie?t:Ie.resolve(t)}catch(t){return Ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ie.reject(t)}static resolve(e){return new Ie(((t,s)=>{t(e)}))}static reject(e){return new Ie(((t,s)=>{s(e)}))}static waitFor(e){return new Ie(((t,s)=>{let c=0,h=0,p=!1;e.forEach((T=>{++c,T.next((()=>{++h,p&&h===c&&t()}),(w=>s(w)))})),p=!0,h===c&&t()}))}static or(e){let t=Ie.resolve(!1);for(const s of e)t=t.next((c=>c?Ie.resolve(c):s()));return t}static forEach(e,t){const s=[];return e.forEach(((c,h)=>{s.push(t.call(this,c,h))})),this.waitFor(s)}static mapArray(e,t){return new Ie(((s,c)=>{const h=e.length,p=new Array(h);let T=0;for(let w=0;w<h;w++){const _=w;t(e[_]).next((S=>{p[_]=S,++T,T===h&&s(p)}),(S=>c(S)))}}))}static doWhile(e,t){return new Ie(((s,c)=>{const h=()=>{e()===!0?t().next((()=>{h()}),c):s()};h()}))}}function N8(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Uc(n){return n.name==="IndexedDbTransactionError"}class Id{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Id.ce=-1;const om=-1;function bd(n){return n==null}function ed(n){return n===0&&1/n==-1/0}function O8(n){return typeof n=="number"&&Number.isInteger(n)&&!ed(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Ox="";function D8(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=c_(e)),e=M8(n.get(t),e);return c_(e)}function M8(n,e){let t=e;const s=n.length;for(let c=0;c<s;c++){const h=n.charAt(c);switch(h){case"\0":t+="";break;case Ox:t+="";break;default:t+=h}}return t}function c_(n){return n+Ox+""}function u_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Dx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Bn{constructor(e,t){this.comparator=e,this.root=t||Di.EMPTY}insert(e,t){return new Bn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Di.BLACK,null,null))}remove(e){return new Bn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Di.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const c=this.comparator(e,s.key);if(c===0)return t+s.left.size;c<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vf(this.root,e,this.comparator,!1)}getReverseIterator(){return new vf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vf(this.root,e,this.comparator,!0)}}class vf{constructor(e,t,s,c){this.isReverse=c,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=t?s(e.key,t):1,t&&c&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(h===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Di{constructor(e,t,s,c,h){this.key=e,this.value=t,this.color=s??Di.RED,this.left=c??Di.EMPTY,this.right=h??Di.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,c,h){return new Di(e??this.key,t??this.value,s??this.color,c??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let c=this;const h=s(e,c.key);return c=h<0?c.copy(null,null,null,c.left.insert(e,t,s),null):h===0?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,s)),c.fixUp()}removeMin(){if(this.left.isEmpty())return Di.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),t(e,c.key)===0){if(c.right.isEmpty())return Di.EMPTY;s=c.right.min(),c=c.copy(s.key,s.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Di.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Di.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw at(43730,{key:this.key,value:this.value});if(this.right.isRed())throw at(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw at(27949);return e+(this.isRed()?0:1)}}Di.EMPTY=null,Di.RED=!0,Di.BLACK=!1;Di.EMPTY=new class{constructor(){this.size=0}get key(){throw at(57766)}get value(){throw at(16141)}get color(){throw at(16727)}get left(){throw at(29726)}get right(){throw at(36894)}copy(e,t,s,c,h){return this}insert(e,t,s){return new Di(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ui{constructor(e){this.comparator=e,this.data=new Bn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const c=s.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new h_(this.data.getIterator())}getIteratorFrom(e){return new h_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof ui)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,h=s.getNext().key;if(this.comparator(c,h)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ui(this.comparator);return t.data=e,t}}class h_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class kr{constructor(e){this.fields=e,e.sort(Mi.comparator)}static empty(){return new kr([])}unionWith(e){let t=new ui(Mi.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new kr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vc(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class Mx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Li{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(c){try{return atob(c)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new Mx("Invalid base64 string: "+h):h}})(e);return new Li(t)}static fromUint8Array(e){const t=(function(c){let h="";for(let p=0;p<c.length;++p)h+=String.fromCharCode(c[p]);return h})(e);return new Li(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let c=0;c<t.length;c++)s[c]=t.charCodeAt(c);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Li.EMPTY_BYTE_STRING=new Li("");const L8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ro(n){if(nn(!!n,39018),typeof n=="string"){let e=0;const t=L8.exec(n);if(nn(!!t,46558,{timestamp:n}),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Kn(n.seconds),nanos:Kn(n.nanos)}}function Kn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function No(n){return typeof n=="string"?Li.fromBase64String(n):Li.fromUint8Array(n)}const Lx="server_timestamp",Px="__type__",kx="__previous_value__",Bx="__local_write_time__";function lm(n){return(n?.mapValue?.fields||{})[Px]?.stringValue===Lx}function Rd(n){const e=n.mapValue.fields[kx];return lm(e)?Rd(e):e}function Yu(n){const e=Ro(n.mapValue.fields[Bx].timestampValue);return new wn(e.seconds,e.nanos)}class P8{constructor(e,t,s,c,h,p,T,w,_,S,b){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=c,this.ssl=h,this.forceLongPolling=p,this.autoDetectLongPolling=T,this.longPollingOptions=w,this.useFetchStreams=_,this.isUsingEmulator=S,this.apiKey=b}}const td="(default)";class Xu{constructor(e,t){this.projectId=e,this.database=t||td}static empty(){return new Xu("","")}get isDefaultDatabase(){return this.database===td}isEqual(e){return e instanceof Xu&&e.projectId===this.projectId&&e.database===this.database}}function k8(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Ve(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xu(n.options.projectId,e)}const Ux="__type__",B8="__max__",Sf={mapValue:{}},Vx="__vector__",nd="value";function Oo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lm(n)?4:V8(n)?9007199254740991:U8(n)?10:11:at(28295,{value:n})}function Gs(n,e){if(n===e)return!0;const t=Oo(n);if(t!==Oo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Yu(n).isEqual(Yu(e));case 3:return(function(c,h){if(typeof c.timestampValue=="string"&&typeof h.timestampValue=="string"&&c.timestampValue.length===h.timestampValue.length)return c.timestampValue===h.timestampValue;const p=Ro(c.timestampValue),T=Ro(h.timestampValue);return p.seconds===T.seconds&&p.nanos===T.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(c,h){return No(c.bytesValue).isEqual(No(h.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(c,h){return Kn(c.geoPointValue.latitude)===Kn(h.geoPointValue.latitude)&&Kn(c.geoPointValue.longitude)===Kn(h.geoPointValue.longitude)})(n,e);case 2:return(function(c,h){if("integerValue"in c&&"integerValue"in h)return Kn(c.integerValue)===Kn(h.integerValue);if("doubleValue"in c&&"doubleValue"in h){const p=Kn(c.doubleValue),T=Kn(h.doubleValue);return p===T?ed(p)===ed(T):isNaN(p)&&isNaN(T)}return!1})(n,e);case 9:return vc(n.arrayValue.values||[],e.arrayValue.values||[],Gs);case 10:case 11:return(function(c,h){const p=c.mapValue.fields||{},T=h.mapValue.fields||{};if(u_(p)!==u_(T))return!1;for(const w in p)if(p.hasOwnProperty(w)&&(T[w]===void 0||!Gs(p[w],T[w])))return!1;return!0})(n,e);default:return at(52216,{left:n})}}function Wu(n,e){return(n.values||[]).find((t=>Gs(t,e)))!==void 0}function Sc(n,e){if(n===e)return 0;const t=Oo(n),s=Oo(e);if(t!==s)return Bt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,e.booleanValue);case 2:return(function(h,p){const T=Kn(h.integerValue||h.doubleValue),w=Kn(p.integerValue||p.doubleValue);return T<w?-1:T>w?1:T===w?0:isNaN(T)?isNaN(w)?0:-1:1})(n,e);case 3:return f_(n.timestampValue,e.timestampValue);case 4:return f_(Yu(n),Yu(e));case 5:return gg(n.stringValue,e.stringValue);case 6:return(function(h,p){const T=No(h),w=No(p);return T.compareTo(w)})(n.bytesValue,e.bytesValue);case 7:return(function(h,p){const T=h.split("/"),w=p.split("/");for(let _=0;_<T.length&&_<w.length;_++){const S=Bt(T[_],w[_]);if(S!==0)return S}return Bt(T.length,w.length)})(n.referenceValue,e.referenceValue);case 8:return(function(h,p){const T=Bt(Kn(h.latitude),Kn(p.latitude));return T!==0?T:Bt(Kn(h.longitude),Kn(p.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return d_(n.arrayValue,e.arrayValue);case 10:return(function(h,p){const T=h.fields||{},w=p.fields||{},_=T[nd]?.arrayValue,S=w[nd]?.arrayValue,b=Bt(_?.values?.length||0,S?.values?.length||0);return b!==0?b:d_(_,S)})(n.mapValue,e.mapValue);case 11:return(function(h,p){if(h===Sf.mapValue&&p===Sf.mapValue)return 0;if(h===Sf.mapValue)return 1;if(p===Sf.mapValue)return-1;const T=h.fields||{},w=Object.keys(T),_=p.fields||{},S=Object.keys(_);w.sort(),S.sort();for(let b=0;b<w.length&&b<S.length;++b){const L=gg(w[b],S[b]);if(L!==0)return L;const j=Sc(T[w[b]],_[S[b]]);if(j!==0)return j}return Bt(w.length,S.length)})(n.mapValue,e.mapValue);default:throw at(23264,{he:t})}}function f_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Bt(n,e);const t=Ro(n),s=Ro(e),c=Bt(t.seconds,s.seconds);return c!==0?c:Bt(t.nanos,s.nanos)}function d_(n,e){const t=n.values||[],s=e.values||[];for(let c=0;c<t.length&&c<s.length;++c){const h=Sc(t[c],s[c]);if(h)return h}return Bt(t.length,s.length)}function Ic(n){return mg(n)}function mg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Ro(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return No(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Je.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",c=!0;for(const h of t.values||[])c?c=!1:s+=",",s+=mg(h);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let c="{",h=!0;for(const p of s)h?h=!1:c+=",",c+=`${p}:${mg(t.fields[p])}`;return c+"}"})(n.mapValue):at(61005,{value:n})}function kf(n){switch(Oo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rd(n);return e?16+kf(e):16;case 5:return 2*n.stringValue.length;case 6:return No(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((c,h)=>c+kf(h)),0)})(n.arrayValue);case 10:case 11:return(function(s){let c=0;return Bo(s.fields,((h,p)=>{c+=h.length+kf(p)})),c})(n.mapValue);default:throw at(13486,{value:n})}}function g_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function pg(n){return!!n&&"integerValue"in n}function cm(n){return!!n&&"arrayValue"in n}function m_(n){return!!n&&"nullValue"in n}function p_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bf(n){return!!n&&"mapValue"in n}function U8(n){return(n?.mapValue?.fields||{})[Ux]?.stringValue===Vx}function Lu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Bo(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Lu(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Lu(n.arrayValue.values[t]);return e}return{...n}}function V8(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===B8}class gr{constructor(e){this.value=e}static empty(){return new gr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Bf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lu(t)}setAll(e){let t=Mi.emptyPath(),s={},c=[];e.forEach(((p,T)=>{if(!t.isImmediateParentOf(T)){const w=this.getFieldsMap(t);this.applyChanges(w,s,c),s={},c=[],t=T.popLast()}p?s[T.lastSegment()]=Lu(p):c.push(T.lastSegment())}));const h=this.getFieldsMap(t);this.applyChanges(h,s,c)}delete(e){const t=this.field(e.popLast());Bf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let c=t.mapValue.fields[e.get(s)];Bf(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,s){Bo(t,((c,h)=>e[c]=h));for(const c of s)delete e[c]}clone(){return new gr(Lu(this.value))}}function Fx(n){const e=[];return Bo(n.fields,((t,s)=>{const c=new Mi([t]);if(Bf(s)){const h=Fx(s.mapValue).fields;if(h.length===0)e.push(c);else for(const p of h)e.push(c.child(p))}else e.push(c)})),new kr(e)}class qi{constructor(e,t,s,c,h,p,T){this.key=e,this.documentType=t,this.version=s,this.readTime=c,this.createTime=h,this.data=p,this.documentState=T}static newInvalidDocument(e){return new qi(e,0,ut.min(),ut.min(),ut.min(),gr.empty(),0)}static newFoundDocument(e,t,s,c){return new qi(e,1,t,ut.min(),s,c,0)}static newNoDocument(e,t){return new qi(e,2,t,ut.min(),ut.min(),gr.empty(),0)}static newUnknownDocument(e,t){return new qi(e,3,t,ut.min(),ut.min(),gr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ut.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class id{constructor(e,t){this.position=e,this.inclusive=t}}function y_(n,e,t){let s=0;for(let c=0;c<n.position.length;c++){const h=e[c],p=n.position[c];if(h.field.isKeyField()?s=Je.comparator(Je.fromName(p.referenceValue),t.key):s=Sc(p,t.data.field(h.field)),h.dir==="desc"&&(s*=-1),s!==0)break}return s}function E_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gs(n.position[t],e.position[t]))return!1;return!0}class Qu{constructor(e,t="asc"){this.field=e,this.dir=t}}function F8(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class zx{}class ni extends zx{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new j8(e,t,s):t==="array-contains"?new q8(e,s):t==="in"?new Y8(e,s):t==="not-in"?new X8(e,s):t==="array-contains-any"?new W8(e,s):new ni(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new H8(e,s):new G8(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Sc(t,this.value)):t!==null&&Oo(this.value)===Oo(t)&&this.matchesComparison(Sc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return at(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xs extends zx{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new xs(e,t)}matches(e){return jx(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function jx(n){return n.op==="and"}function Hx(n){return z8(n)&&jx(n)}function z8(n){for(const e of n.filters)if(e instanceof xs)return!1;return!0}function yg(n){if(n instanceof ni)return n.field.canonicalString()+n.op.toString()+Ic(n.value);if(Hx(n))return n.filters.map((e=>yg(e))).join(",");{const e=n.filters.map((t=>yg(t))).join(",");return`${n.op}(${e})`}}function Gx(n,e){return n instanceof ni?(function(s,c){return c instanceof ni&&s.op===c.op&&s.field.isEqual(c.field)&&Gs(s.value,c.value)})(n,e):n instanceof xs?(function(s,c){return c instanceof xs&&s.op===c.op&&s.filters.length===c.filters.length?s.filters.reduce(((h,p,T)=>h&&Gx(p,c.filters[T])),!0):!1})(n,e):void at(19439)}function qx(n){return n instanceof ni?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ic(t.value)}`})(n):n instanceof xs?(function(t){return t.op.toString()+" {"+t.getFilters().map(qx).join(" ,")+"}"})(n):"Filter"}class j8 extends ni{constructor(e,t,s){super(e,t,s),this.key=Je.fromName(s.referenceValue)}matches(e){const t=Je.comparator(e.key,this.key);return this.matchesComparison(t)}}class H8 extends ni{constructor(e,t){super(e,"in",t),this.keys=Yx("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class G8 extends ni{constructor(e,t){super(e,"not-in",t),this.keys=Yx("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Yx(n,e){return(e.arrayValue?.values||[]).map((t=>Je.fromName(t.referenceValue)))}class q8 extends ni{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cm(t)&&Wu(t.arrayValue,this.value)}}class Y8 extends ni{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Wu(this.value.arrayValue,t)}}class X8 extends ni{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Wu(this.value.arrayValue,t)}}class W8 extends ni{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Wu(this.value.arrayValue,s)))}}class Q8{constructor(e,t=null,s=[],c=[],h=null,p=null,T=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=c,this.limit=h,this.startAt=p,this.endAt=T,this.Te=null}}function __(n,e=null,t=[],s=[],c=null,h=null,p=null){return new Q8(n,e,t,s,c,h,p)}function um(n){const e=dt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>yg(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(h){return h.field.canonicalString()+h.dir})(s))).join(","),bd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Ic(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Ic(s))).join(",")),e.Te=t}return e.Te}function hm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!F8(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Gx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!E_(n.startAt,e.startAt)&&E_(n.endAt,e.endAt)}function Eg(n){return Je.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Vc{constructor(e,t=null,s=[],c=[],h=null,p="F",T=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=c,this.limit=h,this.limitType=p,this.startAt=T,this.endAt=w,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function K8(n,e,t,s,c,h,p,T){return new Vc(n,e,t,s,c,h,p,T)}function fm(n){return new Vc(n)}function A_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Z8(n){return Je.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Xx(n){return n.collectionGroup!==null}function Pu(n){const e=dt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const h of e.explicitOrderBy)e.Ie.push(h),t.add(h.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(p){let T=new ui(Mi.comparator);return p.filters.forEach((w=>{w.getFlattenedFilters().forEach((_=>{_.isInequality()&&(T=T.add(_.field))}))})),T})(e).forEach((h=>{t.has(h.canonicalString())||h.isKeyField()||e.Ie.push(new Qu(h,s))})),t.has(Mi.keyField().canonicalString())||e.Ie.push(new Qu(Mi.keyField(),s))}return e.Ie}function Vs(n){const e=dt(n);return e.Ee||(e.Ee=J8(e,Pu(n))),e.Ee}function J8(n,e){if(n.limitType==="F")return __(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((c=>{const h=c.dir==="desc"?"asc":"desc";return new Qu(c.field,h)}));const t=n.endAt?new id(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new id(n.startAt.position,n.startAt.inclusive):null;return __(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function _g(n,e){const t=n.filters.concat([e]);return new Vc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function $8(n,e){const t=n.explicitOrderBy.concat([e]);return new Vc(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function rd(n,e,t){return new Vc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nd(n,e){return hm(Vs(n),Vs(e))&&n.limitType===e.limitType}function Wx(n){return`${um(Vs(n))}|lt:${n.limitType}`}function fc(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((c=>qx(c))).join(", ")}]`),bd(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((c=>(function(p){return`${p.field.canonicalString()} (${p.dir})`})(c))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((c=>Ic(c))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((c=>Ic(c))).join(",")),`Target(${s})`})(Vs(n))}; limitType=${n.limitType})`}function Od(n,e){return e.isFoundDocument()&&(function(s,c){const h=c.key.path;return s.collectionGroup!==null?c.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(h):Je.isDocumentKey(s.path)?s.path.isEqual(h):s.path.isImmediateParentOf(h)})(n,e)&&(function(s,c){for(const h of Pu(s))if(!h.field.isKeyField()&&c.data.field(h.field)===null)return!1;return!0})(n,e)&&(function(s,c){for(const h of s.filters)if(!h.matches(c))return!1;return!0})(n,e)&&(function(s,c){return!(s.startAt&&!(function(p,T,w){const _=y_(p,T,w);return p.inclusive?_<=0:_<0})(s.startAt,Pu(s),c)||s.endAt&&!(function(p,T,w){const _=y_(p,T,w);return p.inclusive?_>=0:_>0})(s.endAt,Pu(s),c))})(n,e)}function e6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Qx(n){return(e,t)=>{let s=!1;for(const c of Pu(n)){const h=t6(c,e,t);if(h!==0)return h;s=s||c.field.isKeyField()}return 0}}function t6(n,e,t){const s=n.field.isKeyField()?Je.comparator(e.key,t.key):(function(h,p,T){const w=p.data.field(h),_=T.data.field(h);return w!==null&&_!==null?Sc(w,_):at(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return at(19790,{direction:n.dir})}}class Nl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[c,h]of s)if(this.equalsFn(c,e))return h}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),c=this.inner[s];if(c===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let h=0;h<c.length;h++)if(this.equalsFn(c[h][0],e))return void(c[h]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return s.length===1?delete this.inner[t]:s.splice(c,1),this.innerSize--,!0;return!1}forEach(e){Bo(this.inner,((t,s)=>{for(const[c,h]of s)e(c,h)}))}isEmpty(){return Dx(this.inner)}size(){return this.innerSize}}const n6=new Bn(Je.comparator);function Na(){return n6}const Kx=new Bn(Je.comparator);function bu(...n){let e=Kx;for(const t of n)e=e.insert(t.key,t);return e}function Zx(n){let e=Kx;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function fl(){return ku()}function Jx(){return ku()}function ku(){return new Nl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const i6=new Bn(Je.comparator),r6=new ui(Je.comparator);function Ut(...n){let e=r6;for(const t of n)e=e.add(t);return e}const s6=new ui(Bt);function a6(){return s6}function dm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ed(e)?"-0":e}}function $x(n){return{integerValue:""+n}}function o6(n,e){return O8(e)?$x(e):dm(n,e)}class Dd{constructor(){this._=void 0}}function l6(n,e,t){return n instanceof Ku?(function(c,h){const p={fields:{[Px]:{stringValue:Lx},[Bx]:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return h&&lm(h)&&(h=Rd(h)),h&&(p.fields[kx]=h),{mapValue:p}})(t,e):n instanceof Zu?tT(n,e):n instanceof Ju?nT(n,e):(function(c,h){const p=eT(c,h),T=w_(p)+w_(c.Ae);return pg(p)&&pg(c.Ae)?$x(T):dm(c.serializer,T)})(n,e)}function c6(n,e,t){return n instanceof Zu?tT(n,e):n instanceof Ju?nT(n,e):t}function eT(n,e){return n instanceof sd?(function(s){return pg(s)||(function(h){return!!h&&"doubleValue"in h})(s)})(e)?e:{integerValue:0}:null}class Ku extends Dd{}class Zu extends Dd{constructor(e){super(),this.elements=e}}function tT(n,e){const t=iT(e);for(const s of n.elements)t.some((c=>Gs(c,s)))||t.push(s);return{arrayValue:{values:t}}}class Ju extends Dd{constructor(e){super(),this.elements=e}}function nT(n,e){let t=iT(e);for(const s of n.elements)t=t.filter((c=>!Gs(c,s)));return{arrayValue:{values:t}}}class sd extends Dd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function w_(n){return Kn(n.integerValue||n.doubleValue)}function iT(n){return cm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class u6{constructor(e,t){this.field=e,this.transform=t}}function h6(n,e){return n.field.isEqual(e.field)&&(function(s,c){return s instanceof Zu&&c instanceof Zu||s instanceof Ju&&c instanceof Ju?vc(s.elements,c.elements,Gs):s instanceof sd&&c instanceof sd?Gs(s.Ae,c.Ae):s instanceof Ku&&c instanceof Ku})(n.transform,e.transform)}class f6{constructor(e,t){this.version=e,this.transformResults=t}}class Es{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Es}static exists(e){return new Es(void 0,e)}static updateTime(e){return new Es(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Md{}function rT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new gm(n.key,Es.none()):new uh(n.key,n.data,Es.none());{const t=n.data,s=gr.empty();let c=new ui(Mi.comparator);for(let h of e.fields)if(!c.has(h)){let p=t.field(h);p===null&&h.length>1&&(h=h.popLast(),p=t.field(h)),p===null?s.delete(h):s.set(h,p),c=c.add(h)}return new Uo(n.key,s,new kr(c.toArray()),Es.none())}}function d6(n,e,t){n instanceof uh?(function(c,h,p){const T=c.value.clone(),w=T_(c.fieldTransforms,h,p.transformResults);T.setAll(w),h.convertToFoundDocument(p.version,T).setHasCommittedMutations()})(n,e,t):n instanceof Uo?(function(c,h,p){if(!Uf(c.precondition,h))return void h.convertToUnknownDocument(p.version);const T=T_(c.fieldTransforms,h,p.transformResults),w=h.data;w.setAll(sT(c)),w.setAll(T),h.convertToFoundDocument(p.version,w).setHasCommittedMutations()})(n,e,t):(function(c,h,p){h.convertToNoDocument(p.version).setHasCommittedMutations()})(0,e,t)}function Bu(n,e,t,s){return n instanceof uh?(function(h,p,T,w){if(!Uf(h.precondition,p))return T;const _=h.value.clone(),S=C_(h.fieldTransforms,w,p);return _.setAll(S),p.convertToFoundDocument(p.version,_).setHasLocalMutations(),null})(n,e,t,s):n instanceof Uo?(function(h,p,T,w){if(!Uf(h.precondition,p))return T;const _=C_(h.fieldTransforms,w,p),S=p.data;return S.setAll(sT(h)),S.setAll(_),p.convertToFoundDocument(p.version,S).setHasLocalMutations(),T===null?null:T.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map((b=>b.field)))})(n,e,t,s):(function(h,p,T){return Uf(h.precondition,p)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):T})(n,e,t)}function g6(n,e){let t=null;for(const s of n.fieldTransforms){const c=e.data.field(s.field),h=eT(s.transform,c||null);h!=null&&(t===null&&(t=gr.empty()),t.set(s.field,h))}return t||null}function x_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,c){return s===void 0&&c===void 0||!(!s||!c)&&vc(s,c,((h,p)=>h6(h,p)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class uh extends Md{constructor(e,t,s,c=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class Uo extends Md{constructor(e,t,s,c,h=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=c,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function sT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function T_(n,e,t){const s=new Map;nn(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let c=0;c<t.length;c++){const h=n[c],p=h.transform,T=e.data.field(h.field);s.set(h.field,c6(p,T,t[c]))}return s}function C_(n,e,t){const s=new Map;for(const c of n){const h=c.transform,p=t.data.field(c.field);s.set(c.field,l6(h,p,e))}return s}class gm extends Md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class m6 extends Md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class p6{constructor(e,t,s,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=c}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const h=this.mutations[c];h.key.isEqual(e.key)&&d6(h,e,s[c])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Bu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Bu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Jx();return this.mutations.forEach((c=>{const h=e.get(c.key),p=h.overlayedDocument;let T=this.applyToLocalView(p,h.mutatedFields);T=t.has(c.key)?null:T;const w=rT(p,T);w!==null&&s.set(c.key,w),p.isValidDocument()||p.convertToNoDocument(ut.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ut())}isEqual(e){return this.batchId===e.batchId&&vc(this.mutations,e.mutations,((t,s)=>x_(t,s)))&&vc(this.baseMutations,e.baseMutations,((t,s)=>x_(t,s)))}}class mm{constructor(e,t,s,c){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=c}static from(e,t,s){nn(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let c=(function(){return i6})();const h=e.mutations;for(let p=0;p<h.length;p++)c=c.insert(h[p].key,s[p].version);return new mm(e,t,s,c)}}class y6{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class E6{constructor(e,t){this.count=e,this.unchangedNames=t}}var ti,jt;function _6(n){switch(n){case ve.OK:return at(64938);case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return at(15467,{code:n})}}function aT(n){if(n===void 0)return Ra("GRPC error has no .code"),ve.UNKNOWN;switch(n){case ti.OK:return ve.OK;case ti.CANCELLED:return ve.CANCELLED;case ti.UNKNOWN:return ve.UNKNOWN;case ti.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case ti.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case ti.INTERNAL:return ve.INTERNAL;case ti.UNAVAILABLE:return ve.UNAVAILABLE;case ti.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case ti.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case ti.NOT_FOUND:return ve.NOT_FOUND;case ti.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case ti.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case ti.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case ti.ABORTED:return ve.ABORTED;case ti.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case ti.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case ti.DATA_LOSS:return ve.DATA_LOSS;default:return at(39323,{code:n})}}(jt=ti||(ti={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";function A6(){return new TextEncoder}const w6=new To([4294967295,4294967295],0);function v_(n){const e=A6().encode(n),t=new wx;return t.update(e),new Uint8Array(t.digest())}function S_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),c=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new To([t,s],0),new To([c,h],0)]}class pm{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ru(`Invalid padding: ${t}`);if(s<0)throw new Ru(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ru(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ru(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=To.fromNumber(this.ge)}ye(e,t,s){let c=e.add(t.multiply(To.fromNumber(s)));return c.compare(w6)===1&&(c=new To([c.getBits(0),c.getBits(1)],0)),c.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=v_(e),[s,c]=S_(t);for(let h=0;h<this.hashCount;h++){const p=this.ye(s,c,h);if(!this.we(p))return!1}return!0}static create(e,t,s){const c=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),p=new pm(h,c,t);return s.forEach((T=>p.insert(T))),p}insert(e){if(this.ge===0)return;const t=v_(e),[s,c]=S_(t);for(let h=0;h<this.hashCount;h++){const p=this.ye(s,c,h);this.be(p)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ru extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ld{constructor(e,t,s,c,h){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=c,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const c=new Map;return c.set(e,hh.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Ld(ut.min(),c,new Bn(Bt),Na(),Ut())}}class hh{constructor(e,t,s,c,h){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=c,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new hh(s,t,Ut(),Ut(),Ut())}}class Vf{constructor(e,t,s,c){this.Se=e,this.removedTargetIds=t,this.key=s,this.De=c}}class oT{constructor(e,t){this.targetId=e,this.Ce=t}}class lT{constructor(e,t,s=Li.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=c}}class I_{constructor(){this.ve=0,this.Fe=b_(),this.Me=Li.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ut(),t=Ut(),s=Ut();return this.Fe.forEach(((c,h)=>{switch(h){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:s=s.add(c);break;default:at(38017,{changeType:h})}})),new hh(this.Me,this.xe,e,t,s)}Ke(){this.Oe=!1,this.Fe=b_()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,nn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class x6{constructor(e){this.Ge=e,this.ze=new Map,this.je=Na(),this.He=If(),this.Je=If(),this.Ze=new Bn(Bt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:at(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,c)=>{this.rt(c)&&t(c)}))}st(e){const t=e.targetId,s=e.Ce.count,c=this.ot(t);if(c){const h=c.target;if(Eg(h))if(s===0){const p=new Je(h.path);this.et(t,p,qi.newNoDocument(p,ut.min()))}else nn(s===1,20013,{expectedCount:s});else{const p=this._t(t);if(p!==s){const T=this.ut(e),w=T?this.ct(T,e,p):1;if(w!==0){this.it(t);const _=w===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,_)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:c=0},hashCount:h=0}=t;let p,T;try{p=No(s).toUint8Array()}catch(w){if(w instanceof Mx)return Cc("Decoding the base64 bloom filter in existence filter failed ("+w.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw w}try{T=new pm(p,c,h)}catch(w){return Cc(w instanceof Ru?"BloomFilter error: ":"Applying bloom filter failed: ",w),null}return T.ge===0?null:T}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let c=0;return s.forEach((h=>{const p=this.Ge.ht(),T=`projects/${p.projectId}/databases/${p.database}/documents/${h.path.canonicalString()}`;e.mightContain(T)||(this.et(t,h,null),c++)})),c}Tt(e){const t=new Map;this.ze.forEach(((h,p)=>{const T=this.ot(p);if(T){if(h.current&&Eg(T.target)){const w=new Je(T.target.path);this.It(w).has(p)||this.Et(p,w)||this.et(p,w,qi.newNoDocument(w,e))}h.Be&&(t.set(p,h.ke()),h.Ke())}}));let s=Ut();this.Je.forEach(((h,p)=>{let T=!0;p.forEachWhile((w=>{const _=this.ot(w);return!_||_.purpose==="TargetPurposeLimboResolution"||(T=!1,!1)})),T&&(s=s.add(h))})),this.je.forEach(((h,p)=>p.setReadTime(e)));const c=new Ld(e,t,this.Ze,this.je,s);return this.je=Na(),this.He=If(),this.Je=If(),this.Ze=new Bn(Bt),c}Ye(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,s),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const c=this.nt(e);this.Et(e,t)?c.qe(t,1):c.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new I_,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new ui(Bt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new ui(Bt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ze("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new I_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function If(){return new Bn(Je.comparator)}function b_(){return new Bn(Je.comparator)}const T6={asc:"ASCENDING",desc:"DESCENDING"},C6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v6={and:"AND",or:"OR"};class S6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ag(n,e){return n.useProto3Json||bd(e)?e:{value:e}}function ad(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function I6(n,e){return ad(n,e.toTimestamp())}function Fs(n){return nn(!!n,49232),ut.fromTimestamp((function(t){const s=Ro(t);return new wn(s.seconds,s.nanos)})(n))}function ym(n,e){return wg(n,e).canonicalString()}function wg(n,e){const t=(function(c){return new pn(["projects",c.projectId,"databases",c.database])})(n).child("documents");return e===void 0?t:t.child(e)}function uT(n){const e=pn.fromString(n);return nn(mT(e),10190,{key:e.toString()}),e}function xg(n,e){return ym(n.databaseId,e.path)}function Z1(n,e){const t=uT(e);if(t.get(1)!==n.databaseId.projectId)throw new Ve(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ve(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Je(fT(t))}function hT(n,e){return ym(n.databaseId,e)}function b6(n){const e=uT(n);return e.length===4?pn.emptyPath():fT(e)}function Tg(n){return new pn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function fT(n){return nn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function R_(n,e,t){return{name:xg(n,e),fields:t.value.mapValue.fields}}function R6(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:at(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),c=e.targetChange.targetIds||[],h=(function(_,S){return _.useProto3Json?(nn(S===void 0||typeof S=="string",58123),Li.fromBase64String(S||"")):(nn(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),Li.fromUint8Array(S||new Uint8Array))})(n,e.targetChange.resumeToken),p=e.targetChange.cause,T=p&&(function(_){const S=_.code===void 0?ve.UNKNOWN:aT(_.code);return new Ve(S,_.message||"")})(p);t=new lT(s,c,h,T||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const c=Z1(n,s.document.name),h=Fs(s.document.updateTime),p=s.document.createTime?Fs(s.document.createTime):ut.min(),T=new gr({mapValue:{fields:s.document.fields}}),w=qi.newFoundDocument(c,h,p,T),_=s.targetIds||[],S=s.removedTargetIds||[];t=new Vf(_,S,w.key,w)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const c=Z1(n,s.document),h=s.readTime?Fs(s.readTime):ut.min(),p=qi.newNoDocument(c,h),T=s.removedTargetIds||[];t=new Vf([],T,p.key,p)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const c=Z1(n,s.document),h=s.removedTargetIds||[];t=new Vf([],h,c,null)}else{if(!("filter"in e))return at(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:c=0,unchangedNames:h}=s,p=new E6(c,h),T=s.targetId;t=new oT(T,p)}}return t}function N6(n,e){let t;if(e instanceof uh)t={update:R_(n,e.key,e.value)};else if(e instanceof gm)t={delete:xg(n,e.key)};else if(e instanceof Uo)t={update:R_(n,e.key,e.data),updateMask:V6(e.fieldMask)};else{if(!(e instanceof m6))return at(16599,{dt:e.type});t={verify:xg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(h,p){const T=p.transform;if(T instanceof Ku)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(T instanceof Zu)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:T.elements}};if(T instanceof Ju)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:T.elements}};if(T instanceof sd)return{fieldPath:p.field.canonicalString(),increment:T.Ae};throw at(20930,{transform:p.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(c,h){return h.updateTime!==void 0?{updateTime:I6(c,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:at(27497)})(n,e.precondition)),t}function O6(n,e){return n&&n.length>0?(nn(e!==void 0,14353),n.map((t=>(function(c,h){let p=c.updateTime?Fs(c.updateTime):Fs(h);return p.isEqual(ut.min())&&(p=Fs(h)),new f6(p,c.transformResults||[])})(t,e)))):[]}function D6(n,e){return{documents:[hT(n,e.path)]}}function M6(n,e){const t={structuredQuery:{}},s=e.path;let c;e.collectionGroup!==null?(c=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(c=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=hT(n,c);const h=(function(_){if(_.length!==0)return gT(xs.create(_,"and"))})(e.filters);h&&(t.structuredQuery.where=h);const p=(function(_){if(_.length!==0)return _.map((S=>(function(L){return{field:dc(L.field),direction:k6(L.dir)}})(S)))})(e.orderBy);p&&(t.structuredQuery.orderBy=p);const T=Ag(n,e.limit);return T!==null&&(t.structuredQuery.limit=T),e.startAt&&(t.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:t,parent:c}}function L6(n){let e=b6(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let c=null;if(s>0){nn(s===1,65062);const S=t.from[0];S.allDescendants?c=S.collectionId:e=e.child(S.collectionId)}let h=[];t.where&&(h=(function(b){const L=dT(b);return L instanceof xs&&Hx(L)?L.getFilters():[L]})(t.where));let p=[];t.orderBy&&(p=(function(b){return b.map((L=>(function(W){return new Qu(gc(W.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(L)))})(t.orderBy));let T=null;t.limit&&(T=(function(b){let L;return L=typeof b=="object"?b.value:b,bd(L)?null:L})(t.limit));let w=null;t.startAt&&(w=(function(b){const L=!!b.before,j=b.values||[];return new id(j,L)})(t.startAt));let _=null;return t.endAt&&(_=(function(b){const L=!b.before,j=b.values||[];return new id(j,L)})(t.endAt)),K8(e,c,p,h,T,"F",w,_)}function P6(n,e){const t=(function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return at(28987,{purpose:c})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function dT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=gc(t.unaryFilter.field);return ni.create(s,"==",{doubleValue:NaN});case"IS_NULL":const c=gc(t.unaryFilter.field);return ni.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=gc(t.unaryFilter.field);return ni.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=gc(t.unaryFilter.field);return ni.create(p,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return at(61313);default:return at(60726)}})(n):n.fieldFilter!==void 0?(function(t){return ni.create(gc(t.fieldFilter.field),(function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return at(58110);default:return at(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return xs.create(t.compositeFilter.filters.map((s=>dT(s))),(function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return at(1026)}})(t.compositeFilter.op))})(n):at(30097,{filter:n})}function k6(n){return T6[n]}function B6(n){return C6[n]}function U6(n){return v6[n]}function dc(n){return{fieldPath:n.canonicalString()}}function gc(n){return Mi.fromServerFormat(n.fieldPath)}function gT(n){return n instanceof ni?(function(t){if(t.op==="=="){if(p_(t.value))return{unaryFilter:{field:dc(t.field),op:"IS_NAN"}};if(m_(t.value))return{unaryFilter:{field:dc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(p_(t.value))return{unaryFilter:{field:dc(t.field),op:"IS_NOT_NAN"}};if(m_(t.value))return{unaryFilter:{field:dc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dc(t.field),op:B6(t.op),value:t.value}}})(n):n instanceof xs?(function(t){const s=t.getFilters().map((c=>gT(c)));return s.length===1?s[0]:{compositeFilter:{op:U6(t.op),filters:s}}})(n):at(54877,{filter:n})}function V6(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function mT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function pT(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}class Ao{constructor(e,t,s,c,h=ut.min(),p=ut.min(),T=Li.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=c,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=T,this.expectedCount=w}withSequenceNumber(e){return new Ao(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ao(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class F6{constructor(e){this.yt=e}}function z6(n){const e=L6({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?rd(e,e.limit,"L"):e}class j6{constructor(){this.Sn=new H6}addToCollectionParentIndex(e,t){return this.Sn.add(t),Ie.resolve()}getCollectionParents(e,t){return Ie.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Ie.resolve()}deleteFieldIndex(e,t){return Ie.resolve()}deleteAllFieldIndexes(e){return Ie.resolve()}createTargetIndexes(e,t){return Ie.resolve()}getDocumentsMatchingTarget(e,t){return Ie.resolve(null)}getIndexType(e,t){return Ie.resolve(0)}getFieldIndexes(e,t){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}getMinOffset(e,t){return Ie.resolve(bo.min())}getMinOffsetFromCollectionGroup(e,t){return Ie.resolve(bo.min())}updateCollectionGroup(e,t,s){return Ie.resolve()}updateIndexEntries(e,t){return Ie.resolve()}}class H6{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t]||new ui(pn.comparator),h=!c.has(s);return this.index[t]=c.add(s),h}has(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t];return c&&c.has(s)}getEntries(e){return(this.index[e]||new ui(pn.comparator)).toArray()}}const N_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yT=41943040;class dr{static withCacheSize(e){return new dr(e,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}dr.DEFAULT_COLLECTION_PERCENTILE=10,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dr.DEFAULT=new dr(yT,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dr.DISABLED=new dr(-1,0,0);class bc{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new bc(0)}static ar(){return new bc(-1)}}const O_="LruGarbageCollector",G6=1048576;function D_([n,e],[t,s]){const c=Bt(n,t);return c===0?Bt(e,s):c}class q6{constructor(e){this.Pr=e,this.buffer=new ui(D_),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();D_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Y6{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ze(O_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Uc(t)?ze(O_,"Ignoring IndexedDB error during garbage collection: ",t):await Bc(t)}await this.Ar(3e5)}))}}class X6{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return Ie.resolve(Id.ce);const s=new q6(t);return this.Vr.forEachTarget(e,(c=>s.Er(c.sequenceNumber))).next((()=>this.Vr.mr(e,(c=>s.Er(c))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(N_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),N_):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let s,c,h,p,T,w,_;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),c=this.params.maximumSequenceNumbersToCollect):c=b,p=Date.now(),this.nthSequenceNumber(e,c)))).next((b=>(s=b,T=Date.now(),this.removeTargets(e,s,t)))).next((b=>(h=b,w=Date.now(),this.removeOrphanedDocuments(e,s)))).next((b=>(_=Date.now(),hc()<=kt.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${p-S}ms
	Determined least recently used ${c} in `+(T-p)+`ms
	Removed ${h} targets in `+(w-T)+`ms
	Removed ${b} documents in `+(_-w)+`ms
Total Duration: ${_-S}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:h,documentsRemoved:b}))))}}function W6(n,e){return new X6(n,e)}class Q6{constructor(){this.changes=new Nl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Ie.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class K6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Z6{constructor(e,t,s,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=c}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((c=>(s=c,this.remoteDocumentCache.getEntry(e,t)))).next((c=>(s!==null&&Bu(s.mutation,c,kr.empty(),wn.now()),c)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Ut()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Ut()){const c=fl();return this.populateOverlays(e,c,t).next((()=>this.computeViews(e,t,c,s).next((h=>{let p=bu();return h.forEach(((T,w)=>{p=p.insert(T,w.overlayedDocument)})),p}))))}getOverlayedDocuments(e,t){const s=fl();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Ut())))}populateOverlays(e,t,s){const c=[];return s.forEach((h=>{t.has(h)||c.push(h)})),this.documentOverlayCache.getOverlays(e,c).next((h=>{h.forEach(((p,T)=>{t.set(p,T)}))}))}computeViews(e,t,s,c){let h=Na();const p=ku(),T=(function(){return ku()})();return t.forEach(((w,_)=>{const S=s.get(_.key);c.has(_.key)&&(S===void 0||S.mutation instanceof Uo)?h=h.insert(_.key,_):S!==void 0?(p.set(_.key,S.mutation.getFieldMask()),Bu(S.mutation,_,S.mutation.getFieldMask(),wn.now())):p.set(_.key,kr.empty())})),this.recalculateAndSaveOverlays(e,h).next((w=>(w.forEach(((_,S)=>p.set(_,S))),t.forEach(((_,S)=>T.set(_,new K6(S,p.get(_)??null)))),T)))}recalculateAndSaveOverlays(e,t){const s=ku();let c=new Bn(((p,T)=>p-T)),h=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((p=>{for(const T of p)T.keys().forEach((w=>{const _=t.get(w);if(_===null)return;let S=s.get(w)||kr.empty();S=T.applyToLocalView(_,S),s.set(w,S);const b=(c.get(T.batchId)||Ut()).add(w);c=c.insert(T.batchId,b)}))})).next((()=>{const p=[],T=c.getReverseIterator();for(;T.hasNext();){const w=T.getNext(),_=w.key,S=w.value,b=Jx();S.forEach((L=>{if(!h.has(L)){const j=rT(t.get(L),s.get(L));j!==null&&b.set(L,j),h=h.add(L)}})),p.push(this.documentOverlayCache.saveOverlays(e,_,b))}return Ie.waitFor(p)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,c){return Z8(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Xx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,c):this.getDocumentsMatchingCollectionQuery(e,t,s,c)}getNextDocuments(e,t,s,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,c).next((h=>{const p=c-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,c-h.size):Ie.resolve(fl());let T=qu,w=h;return p.next((_=>Ie.forEach(_,((S,b)=>(T<b.largestBatchId&&(T=b.largestBatchId),h.get(S)?Ie.resolve():this.remoteDocumentCache.getEntry(e,S).next((L=>{w=w.insert(S,L)}))))).next((()=>this.populateOverlays(e,_,h))).next((()=>this.computeViews(e,w,_,Ut()))).next((S=>({batchId:T,changes:Zx(S)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Je(t)).next((s=>{let c=bu();return s.isFoundDocument()&&(c=c.insert(s.key,s)),c}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,c){const h=t.collectionGroup;let p=bu();return this.indexManager.getCollectionParents(e,h).next((T=>Ie.forEach(T,(w=>{const _=(function(b,L){return new Vc(L,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,w.child(h));return this.getDocumentsMatchingCollectionQuery(e,_,s,c).next((S=>{S.forEach(((b,L)=>{p=p.insert(b,L)}))}))})).next((()=>p))))}getDocumentsMatchingCollectionQuery(e,t,s,c){let h;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((p=>(h=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,h,c)))).next((p=>{h.forEach(((w,_)=>{const S=_.getKey();p.get(S)===null&&(p=p.insert(S,qi.newInvalidDocument(S)))}));let T=bu();return p.forEach(((w,_)=>{const S=h.get(w);S!==void 0&&Bu(S.mutation,_,kr.empty(),wn.now()),Od(t,_)&&(T=T.insert(w,_))})),T}))}}class J6{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Ie.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(c){return{id:c.id,version:c.version,createTime:Fs(c.createTime)}})(t)),Ie.resolve()}getNamedQuery(e,t){return Ie.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(c){return{name:c.name,query:z6(c.bundledQuery),readTime:Fs(c.readTime)}})(t)),Ie.resolve()}}class $6{constructor(){this.overlays=new Bn(Je.comparator),this.Lr=new Map}getOverlay(e,t){return Ie.resolve(this.overlays.get(t))}getOverlays(e,t){const s=fl();return Ie.forEach(t,(c=>this.getOverlay(e,c).next((h=>{h!==null&&s.set(c,h)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((c,h)=>{this.bt(e,t,h)})),Ie.resolve()}removeOverlaysForBatchId(e,t,s){const c=this.Lr.get(s);return c!==void 0&&(c.forEach((h=>this.overlays=this.overlays.remove(h))),this.Lr.delete(s)),Ie.resolve()}getOverlaysForCollection(e,t,s){const c=fl(),h=t.length+1,p=new Je(t.child("")),T=this.overlays.getIteratorFrom(p);for(;T.hasNext();){const w=T.getNext().value,_=w.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===h&&w.largestBatchId>s&&c.set(w.getKey(),w)}return Ie.resolve(c)}getOverlaysForCollectionGroup(e,t,s,c){let h=new Bn(((_,S)=>_-S));const p=this.overlays.getIterator();for(;p.hasNext();){const _=p.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>s){let S=h.get(_.largestBatchId);S===null&&(S=fl(),h=h.insert(_.largestBatchId,S)),S.set(_.getKey(),_)}}const T=fl(),w=h.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach(((_,S)=>T.set(_,S))),!(T.size()>=c)););return Ie.resolve(T)}bt(e,t,s){const c=this.overlays.get(s.key);if(c!==null){const p=this.Lr.get(c.largestBatchId).delete(s.key);this.Lr.set(c.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new y6(t,s));let h=this.Lr.get(t);h===void 0&&(h=Ut(),this.Lr.set(t,h)),this.Lr.set(t,h.add(s.key))}}class eO{constructor(){this.sessionToken=Li.EMPTY_BYTE_STRING}getSessionToken(e){return Ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ie.resolve()}}class Em{constructor(){this.kr=new ui(mi.Kr),this.qr=new ui(mi.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const s=new mi(e,t);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new mi(e,t))}Qr(e,t){e.forEach((s=>this.removeReference(s,t)))}Gr(e){const t=new Je(new pn([])),s=new mi(t,e),c=new mi(t,e+1),h=[];return this.qr.forEachInRange([s,c],(p=>{this.Wr(p),h.push(p.key)})),h}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Je(new pn([])),s=new mi(t,e),c=new mi(t,e+1);let h=Ut();return this.qr.forEachInRange([s,c],(p=>{h=h.add(p.key)})),h}containsKey(e){const t=new mi(e,0),s=this.kr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class mi{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Je.comparator(e.key,t.key)||Bt(e.Hr,t.Hr)}static Ur(e,t){return Bt(e.Hr,t.Hr)||Je.comparator(e.key,t.key)}}class tO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new ui(mi.Kr)}checkEmpty(e){return Ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,c){const h=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const p=new p6(h,t,s,c);this.mutationQueue.push(p);for(const T of c)this.Jr=this.Jr.add(new mi(T.key,h)),this.indexManager.addToCollectionParentIndex(e,T.key.path.popLast());return Ie.resolve(p)}lookupMutationBatch(e,t){return Ie.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,c=this.Xr(s),h=c<0?0:c;return Ie.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(this.mutationQueue.length===0?om:this.Yn-1)}getAllMutationBatches(e){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new mi(t,0),c=new mi(t,Number.POSITIVE_INFINITY),h=[];return this.Jr.forEachInRange([s,c],(p=>{const T=this.Zr(p.Hr);h.push(T)})),Ie.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ui(Bt);return t.forEach((c=>{const h=new mi(c,0),p=new mi(c,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([h,p],(T=>{s=s.add(T.Hr)}))})),Ie.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1;let h=s;Je.isDocumentKey(h)||(h=h.child(""));const p=new mi(new Je(h),0);let T=new ui(Bt);return this.Jr.forEachWhile((w=>{const _=w.key.path;return!!s.isPrefixOf(_)&&(_.length===c&&(T=T.add(w.Hr)),!0)}),p),Ie.resolve(this.Yr(T))}Yr(e){const t=[];return e.forEach((s=>{const c=this.Zr(s);c!==null&&t.push(c)})),t}removeMutationBatch(e,t){nn(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return Ie.forEach(t.mutations,(c=>{const h=new mi(c.key,t.batchId);return s=s.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,t){const s=new mi(t,0),c=this.Jr.firstAfterOrEqual(s);return Ie.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ie.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class nO{constructor(e){this.ti=e,this.docs=(function(){return new Bn(Je.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,c=this.docs.get(s),h=c?c.size:0,p=this.ti(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:p}),this.size+=p-h,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Ie.resolve(s?s.document.mutableCopy():qi.newInvalidDocument(t))}getEntries(e,t){let s=Na();return t.forEach((c=>{const h=this.docs.get(c);s=s.insert(c,h?h.document.mutableCopy():qi.newInvalidDocument(c))})),Ie.resolve(s)}getDocumentsMatchingQuery(e,t,s,c){let h=Na();const p=t.path,T=new Je(p.child("__id-9223372036854775808__")),w=this.docs.getIteratorFrom(T);for(;w.hasNext();){const{key:_,value:{document:S}}=w.getNext();if(!p.isPrefixOf(_.path))break;_.path.length>p.length+1||I8(S8(S),s)<=0||(c.has(S.key)||Od(t,S))&&(h=h.insert(S.key,S.mutableCopy()))}return Ie.resolve(h)}getAllFromCollectionGroup(e,t,s,c){at(9500)}ni(e,t){return Ie.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new iO(this)}getSize(e){return Ie.resolve(this.size)}}class iO extends Q6{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,c)=>{c.isValidDocument()?t.push(this.Mr.addEntry(e,c)):this.Mr.removeEntry(s)})),Ie.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class rO{constructor(e){this.persistence=e,this.ri=new Nl((t=>um(t)),hm),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.ii=0,this.si=new Em,this.targetCount=0,this.oi=bc._r()}forEachTarget(e,t){return this.ri.forEach(((s,c)=>t(c))),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ii&&(this.ii=t),Ie.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new bc(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Ie.resolve()}updateTargetData(e,t){return this.lr(t),Ie.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,t,s){let c=0;const h=[];return this.ri.forEach(((p,T)=>{T.sequenceNumber<=t&&s.get(T.targetId)===null&&(this.ri.delete(p),h.push(this.removeMatchingKeysForTargetId(e,T.targetId)),c++)})),Ie.waitFor(h).next((()=>c))}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,t){const s=this.ri.get(t)||null;return Ie.resolve(s)}addMatchingKeys(e,t,s){return this.si.$r(t,s),Ie.resolve()}removeMatchingKeys(e,t,s){this.si.Qr(t,s);const c=this.persistence.referenceDelegate,h=[];return c&&t.forEach((p=>{h.push(c.markPotentiallyOrphaned(e,p))})),Ie.waitFor(h)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Ie.resolve()}getMatchingKeysForTargetId(e,t){const s=this.si.jr(t);return Ie.resolve(s)}containsKey(e,t){return Ie.resolve(this.si.containsKey(t))}}class ET{constructor(e,t){this._i={},this.overlays={},this.ai=new Id(0),this.ui=!1,this.ui=!0,this.ci=new eO,this.referenceDelegate=e(this),this.li=new rO(this),this.indexManager=new j6,this.remoteDocumentCache=(function(c){return new nO(c)})((s=>this.referenceDelegate.hi(s))),this.serializer=new F6(t),this.Pi=new J6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this._i[e.toKey()];return s||(s=new tO(t,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,s){ze("MemoryPersistence","Starting transaction:",e);const c=new sO(this.ai.next());return this.referenceDelegate.Ti(),s(c).next((h=>this.referenceDelegate.Ii(c).next((()=>h)))).toPromise().then((h=>(c.raiseOnCommittedEvent(),h)))}Ei(e,t){return Ie.or(Object.values(this._i).map((s=>()=>s.containsKey(e,t))))}}class sO extends R8{constructor(e){super(),this.currentSequenceNumber=e}}class _m{constructor(e){this.persistence=e,this.Ri=new Em,this.Ai=null}static Vi(e){return new _m(e)}get di(){if(this.Ai)return this.Ai;throw at(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.di.delete(s.toString()),Ie.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.di.add(s.toString()),Ie.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Ie.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((c=>this.di.add(c.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((c=>{c.forEach((h=>this.di.add(h.toString())))})).next((()=>s.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.di,(s=>{const c=Je.fromPath(s);return this.mi(e,c).next((h=>{h||t.removeEntry(c,ut.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Ie.or([()=>Ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class od{constructor(e,t){this.persistence=e,this.fi=new Nl((s=>D8(s.path)),((s,c)=>s.isEqual(c))),this.garbageCollector=W6(this,t)}static Vi(e,t){return new od(e,t)}Ti(){}Ii(e){return Ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((c=>s+c))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}mr(e,t){return Ie.forEach(this.fi,((s,c)=>this.wr(e,s,c).next((h=>h?Ie.resolve():t(c)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const c=this.persistence.getRemoteDocumentCache(),h=c.newChangeBuffer();return c.ni(e,(p=>this.wr(e,p,t).next((T=>{T||(s++,h.removeEntry(p,ut.min()))})))).next((()=>h.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Ie.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),Ie.resolve()}removeReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),Ie.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Ie.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=kf(e.data.value)),t}wr(e,t,s){return Ie.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const c=this.fi.get(t);return Ie.resolve(c!==void 0&&c>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Am{constructor(e,t,s,c){this.targetId=e,this.fromCache=t,this.Ts=s,this.Is=c}static Es(e,t){let s=Ut(),c=Ut();for(const h of t.docChanges)switch(h.type){case 0:s=s.add(h.doc.key);break;case 1:c=c.add(h.doc.key)}return new Am(e,t.fromCache,s,c)}}class aO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class oO{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return cb()?8:N8(Xi())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,c){const h={result:null};return this.gs(e,t).next((p=>{h.result=p})).next((()=>{if(!h.result)return this.ps(e,t,c,s).next((p=>{h.result=p}))})).next((()=>{if(h.result)return;const p=new aO;return this.ys(e,t,p).next((T=>{if(h.result=T,this.As)return this.ws(e,t,p,T.size)}))})).next((()=>h.result))}ws(e,t,s,c){return s.documentReadCount<this.Vs?(hc()<=kt.DEBUG&&ze("QueryEngine","SDK will not create cache indexes for query:",fc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ie.resolve()):(hc()<=kt.DEBUG&&ze("QueryEngine","Query:",fc(t),"scans",s.documentReadCount,"local documents and returns",c,"documents as results."),s.documentReadCount>this.ds*c?(hc()<=kt.DEBUG&&ze("QueryEngine","The SDK decides to create cache indexes for query:",fc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vs(t))):Ie.resolve())}gs(e,t){if(A_(t))return Ie.resolve(null);let s=Vs(t);return this.indexManager.getIndexType(e,s).next((c=>c===0?null:(t.limit!==null&&c===1&&(t=rd(t,null,"F"),s=Vs(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((h=>{const p=Ut(...h);return this.fs.getDocuments(e,p).next((T=>this.indexManager.getMinOffset(e,s).next((w=>{const _=this.bs(t,T);return this.Ss(t,_,p,w.readTime)?this.gs(e,rd(t,null,"F")):this.Ds(e,_,t,w)}))))})))))}ps(e,t,s,c){return A_(t)||c.isEqual(ut.min())?Ie.resolve(null):this.fs.getDocuments(e,s).next((h=>{const p=this.bs(t,h);return this.Ss(t,p,s,c)?Ie.resolve(null):(hc()<=kt.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),fc(t)),this.Ds(e,p,t,v8(c,qu)).next((T=>T)))}))}bs(e,t){let s=new ui(Qx(e));return t.forEach(((c,h)=>{Od(e,h)&&(s=s.add(h))})),s}Ss(e,t,s,c){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const h=e.limitType==="F"?t.last():t.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(c)>0)}ys(e,t,s){return hc()<=kt.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",fc(t)),this.fs.getDocumentsMatchingQuery(e,t,bo.min(),s)}Ds(e,t,s,c){return this.fs.getDocumentsMatchingQuery(e,s,c).next((h=>(t.forEach((p=>{h=h.insert(p.key,p)})),h)))}}const wm="LocalStore",lO=3e8;class cO{constructor(e,t,s,c){this.persistence=e,this.Cs=t,this.serializer=c,this.vs=new Bn(Bt),this.Fs=new Nl((h=>um(h)),hm),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Z6(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function uO(n,e,t,s){return new cO(n,e,t,s)}async function _T(n,e){const t=dt(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let c;return t.mutationQueue.getAllMutationBatches(s).next((h=>(c=h,t.Os(e),t.mutationQueue.getAllMutationBatches(s)))).next((h=>{const p=[],T=[];let w=Ut();for(const _ of c){p.push(_.batchId);for(const S of _.mutations)w=w.add(S.key)}for(const _ of h){T.push(_.batchId);for(const S of _.mutations)w=w.add(S.key)}return t.localDocuments.getDocuments(s,w).next((_=>({Ns:_,removedBatchIds:p,addedBatchIds:T})))}))}))}function hO(n,e){const t=dt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const c=e.batch.keys(),h=t.xs.newChangeBuffer({trackRemovals:!0});return(function(T,w,_,S){const b=_.batch,L=b.keys();let j=Ie.resolve();return L.forEach((W=>{j=j.next((()=>S.getEntry(w,W))).next((Z=>{const q=_.docVersions.get(W);nn(q!==null,48541),Z.version.compareTo(q)<0&&(b.applyToRemoteDocument(Z,_),Z.isValidDocument()&&(Z.setReadTime(_.commitVersion),S.addEntry(Z)))}))})),j.next((()=>T.mutationQueue.removeMutationBatch(w,b)))})(t,s,e,h).next((()=>h.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,c,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(T){let w=Ut();for(let _=0;_<T.mutationResults.length;++_)T.mutationResults[_].transformResults.length>0&&(w=w.add(T.batch.mutations[_].key));return w})(e)))).next((()=>t.localDocuments.getDocuments(s,c)))}))}function AT(n){const e=dt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function fO(n,e){const t=dt(n),s=e.snapshotVersion;let c=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(h=>{const p=t.xs.newChangeBuffer({trackRemovals:!0});c=t.vs;const T=[];e.targetChanges.forEach(((S,b)=>{const L=c.get(b);if(!L)return;T.push(t.li.removeMatchingKeys(h,S.removedDocuments,b).next((()=>t.li.addMatchingKeys(h,S.addedDocuments,b))));let j=L.withSequenceNumber(h.currentSequenceNumber);e.targetMismatches.get(b)!==null?j=j.withResumeToken(Li.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):S.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(S.resumeToken,s)),c=c.insert(b,j),(function(Z,q,pe){return Z.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=lO?!0:pe.addedDocuments.size+pe.modifiedDocuments.size+pe.removedDocuments.size>0})(L,j,S)&&T.push(t.li.updateTargetData(h,j))}));let w=Na(),_=Ut();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&T.push(t.persistence.referenceDelegate.updateLimboDocument(h,S))})),T.push(dO(h,p,e.documentUpdates).next((S=>{w=S.Bs,_=S.Ls}))),!s.isEqual(ut.min())){const S=t.li.getLastRemoteSnapshotVersion(h).next((b=>t.li.setTargetsMetadata(h,h.currentSequenceNumber,s)));T.push(S)}return Ie.waitFor(T).next((()=>p.apply(h))).next((()=>t.localDocuments.getLocalViewOfDocuments(h,w,_))).next((()=>w))})).then((h=>(t.vs=c,h)))}function dO(n,e,t){let s=Ut(),c=Ut();return t.forEach((h=>s=s.add(h))),e.getEntries(n,s).next((h=>{let p=Na();return t.forEach(((T,w)=>{const _=h.get(T);w.isFoundDocument()!==_.isFoundDocument()&&(c=c.add(T)),w.isNoDocument()&&w.version.isEqual(ut.min())?(e.removeEntry(T,w.readTime),p=p.insert(T,w)):!_.isValidDocument()||w.version.compareTo(_.version)>0||w.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(w),p=p.insert(T,w)):ze(wm,"Ignoring outdated watch update for ",T,". Current version:",_.version," Watch version:",w.version)})),{Bs:p,Ls:c}}))}function gO(n,e){const t=dt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=om),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function mO(n,e){const t=dt(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let c;return t.li.getTargetData(s,e).next((h=>h?(c=h,Ie.resolve(c)):t.li.allocateTargetId(s).next((p=>(c=new Ao(e,p,"TargetPurposeListen",s.currentSequenceNumber),t.li.addTargetData(s,c).next((()=>c)))))))})).then((s=>{const c=t.vs.get(s.targetId);return(c===null||s.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.vs=t.vs.insert(s.targetId,s),t.Fs.set(e,s.targetId)),s}))}async function Cg(n,e,t){const s=dt(n),c=s.vs.get(e),h=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",h,(p=>s.persistence.referenceDelegate.removeTarget(p,c)))}catch(p){if(!Uc(p))throw p;ze(wm,`Failed to update sequence numbers for target ${e}: ${p}`)}s.vs=s.vs.remove(e),s.Fs.delete(c.target)}function M_(n,e,t){const s=dt(n);let c=ut.min(),h=Ut();return s.persistence.runTransaction("Execute query","readwrite",(p=>(function(w,_,S){const b=dt(w),L=b.Fs.get(S);return L!==void 0?Ie.resolve(b.vs.get(L)):b.li.getTargetData(_,S)})(s,p,Vs(e)).next((T=>{if(T)return c=T.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(p,T.targetId).next((w=>{h=w}))})).next((()=>s.Cs.getDocumentsMatchingQuery(p,e,t?c:ut.min(),t?h:Ut()))).next((T=>(pO(s,e6(e),T),{documents:T,ks:h})))))}function pO(n,e,t){let s=n.Ms.get(e)||ut.min();t.forEach(((c,h)=>{h.readTime.compareTo(s)>0&&(s=h.readTime)})),n.Ms.set(e,s)}class L_{constructor(){this.activeTargetIds=a6()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yO{constructor(){this.vo=new L_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,s){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new L_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class EO{Mo(e){}shutdown(){}}const P_="ConnectivityMonitor";class k_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ze(P_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ze(P_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let bf=null;function vg(){return bf===null?bf=(function(){return 268435456+Math.round(2147483648*Math.random())})():bf++,"0x"+bf.toString(16)}const J1="RestConnection",_O={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class AO{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${s}/databases/${c}`,this.$o=this.databaseId.database===td?`project_id=${s}`:`project_id=${s}&database_id=${c}`}Wo(e,t,s,c,h){const p=vg(),T=this.Qo(e,t.toUriEncodedString());ze(J1,`Sending RPC '${e}' ${p}:`,T,s);const w={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(w,c,h);const{host:_}=new URL(T),S=Mc(_);return this.zo(e,T,w,s,S).then((b=>(ze(J1,`Received RPC '${e}' ${p}: `,b),b)),(b=>{throw Cc(J1,`RPC '${e}' ${p} failed with error: `,b,"url: ",T,"request:",s),b}))}jo(e,t,s,c,h,p){return this.Wo(e,t,s,c,h)}Go(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((c,h)=>e[h]=c)),s&&s.headers.forEach(((c,h)=>e[h]=c))}Qo(e,t){const s=_O[e];let c=`${this.qo}/v1/${t}:${s}`;return this.databaseInfo.apiKey&&(c=`${c}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),c}terminate(){}}class wO{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Hi="WebChannelConnection",Cu=(n,e,t)=>{n.listen(e,(s=>{try{t(s)}catch(c){setTimeout((()=>{throw c}),0)}}))};class xc extends AO{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!xc.c_){const e=vx();Cu(e,Cx.STAT_EVENT,(t=>{t.stat===dg.PROXY?ze(Hi,"STAT_EVENT: detected buffering proxy"):t.stat===dg.NOPROXY&&ze(Hi,"STAT_EVENT: detected no buffering proxy")})),xc.c_=!0}}zo(e,t,s,c,h){const p=vg();return new Promise(((T,w)=>{const _=new xx;_.setWithCredentials(!0),_.listenOnce(Tx.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Pf.NO_ERROR:const b=_.getResponseJson();ze(Hi,`XHR for RPC '${e}' ${p} received:`,JSON.stringify(b)),T(b);break;case Pf.TIMEOUT:ze(Hi,`RPC '${e}' ${p} timed out`),w(new Ve(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Pf.HTTP_ERROR:const L=_.getStatus();if(ze(Hi,`RPC '${e}' ${p} failed with status:`,L,"response text:",_.getResponseText()),L>0){let j=_.getResponseJson();Array.isArray(j)&&(j=j[0]);const W=j?.error;if(W&&W.status&&W.message){const Z=(function(pe){const le=pe.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(le)>=0?le:ve.UNKNOWN})(W.status);w(new Ve(Z,W.message))}else w(new Ve(ve.UNKNOWN,"Server responded with status "+_.getStatus()))}else w(new Ve(ve.UNAVAILABLE,"Connection failed."));break;default:at(9055,{l_:e,streamId:p,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{ze(Hi,`RPC '${e}' ${p} completed.`)}}));const S=JSON.stringify(c);ze(Hi,`RPC '${e}' ${p} sending request:`,c),_.send(t,"POST",S,s,15)}))}T_(e,t,s){const c=vg(),h=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=this.createWebChannelTransport(),T={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;w!==void 0&&(T.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(T.useFetchStreams=!0),this.Go(T.initMessageHeaders,t,s),T.encodeInitMessageHeaders=!0;const _=h.join("");ze(Hi,`Creating RPC '${e}' stream ${c}: ${_}`,T);const S=p.createWebChannel(_,T);this.I_(S);let b=!1,L=!1;const j=new wO({Ho:W=>{L?ze(Hi,`Not sending because RPC '${e}' stream ${c} is closed:`,W):(b||(ze(Hi,`Opening RPC '${e}' stream ${c} transport.`),S.open(),b=!0),ze(Hi,`RPC '${e}' stream ${c} sending:`,W),S.send(W))},Jo:()=>S.close()});return Cu(S,Iu.EventType.OPEN,(()=>{L||(ze(Hi,`RPC '${e}' stream ${c} transport opened.`),j.i_())})),Cu(S,Iu.EventType.CLOSE,(()=>{L||(L=!0,ze(Hi,`RPC '${e}' stream ${c} transport closed`),j.o_(),this.E_(S))})),Cu(S,Iu.EventType.ERROR,(W=>{L||(L=!0,Cc(Hi,`RPC '${e}' stream ${c} transport errored. Name:`,W.name,"Message:",W.message),j.o_(new Ve(ve.UNAVAILABLE,"The operation could not be completed")))})),Cu(S,Iu.EventType.MESSAGE,(W=>{if(!L){const Z=W.data[0];nn(!!Z,16349);const q=Z,pe=q?.error||q[0]?.error;if(pe){ze(Hi,`RPC '${e}' stream ${c} received error:`,pe);const le=pe.status;let ne=(function(Be){const U=ti[Be];if(U!==void 0)return aT(U)})(le),Re=pe.message;ne===void 0&&(ne=ve.INTERNAL,Re="Unknown error status: "+le+" with message "+pe.message),L=!0,j.o_(new Ve(ne,Re)),S.close()}else ze(Hi,`RPC '${e}' stream ${c} received:`,Z),j.__(Z)}})),xc.u_(),setTimeout((()=>{j.s_()}),0),j}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,s){super.Go(e,t,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Sx()}}function xO(n){return new xc(n)}function $1(){return typeof document<"u"?document:null}function Pd(n){return new S6(n,!0)}xc.c_=!1;class wT{constructor(e,t,s=1e3,c=1.5,h=6e4){this.Ci=e,this.timerId=t,this.R_=s,this.A_=c,this.V_=h,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),c=Math.max(0,t-s);c>0&&ze("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,c,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const B_="PersistentStream";class xT{constructor(e,t,s,c,h,p,T,w){this.Ci=e,this.b_=s,this.S_=c,this.connection=h,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=T,this.listener=w,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ve.RESOURCE_EXHAUSTED?(Ra(t.toString()),Ra("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,c])=>{this.D_===t&&this.G_(s,c)}),(s=>{e((()=>{const c=new Ve(ve.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(c)}))}))}G_(e,t){const s=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((c=>{s((()=>this.z_(c)))})),this.stream.onMessage((c=>{s((()=>++this.F_==1?this.H_(c):this.onNext(c)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ze(B_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ze(B_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class TO extends xT{constructor(e,t,s,c,h,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,c,p),this.serializer=h}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=R6(this.serializer,e),s=(function(h){if(!("targetChange"in h))return ut.min();const p=h.targetChange;return p.targetIds&&p.targetIds.length?ut.min():p.readTime?Fs(p.readTime):ut.min()})(e);return this.listener.J_(t,s)}Z_(e){const t={};t.database=Tg(this.serializer),t.addTarget=(function(h,p){let T;const w=p.target;if(T=Eg(w)?{documents:D6(h,w)}:{query:M6(h,w).ft},T.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){T.resumeToken=cT(h,p.resumeToken);const _=Ag(h,p.expectedCount);_!==null&&(T.expectedCount=_)}else if(p.snapshotVersion.compareTo(ut.min())>0){T.readTime=ad(h,p.snapshotVersion.toTimestamp());const _=Ag(h,p.expectedCount);_!==null&&(T.expectedCount=_)}return T})(this.serializer,e);const s=P6(this.serializer,e);s&&(t.labels=s),this.K_(t)}X_(e){const t={};t.database=Tg(this.serializer),t.removeTarget=e,this.K_(t)}}class CO extends xT{constructor(e,t,s,c,h,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,c,p),this.serializer=h}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return nn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){nn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=O6(e.writeResults,e.commitTime),s=Fs(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Tg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>N6(this.serializer,s)))};this.K_(t)}}class vO{}class SO extends vO{constructor(e,t,s,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=c,this.ia=!1}sa(){if(this.ia)throw new Ve(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Wo(e,wg(t,s),c,h,p))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Ve(ve.UNKNOWN,h.toString())}))}jo(e,t,s,c,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([p,T])=>this.connection.jo(e,wg(t,s),c,p,T,h))).catch((p=>{throw p.name==="FirebaseError"?(p.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new Ve(ve.UNKNOWN,p.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function IO(n,e,t,s){return new SO(n,e,t,s)}class bO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ra(t),this.aa=!1):ze("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const wl="RemoteStore";class RO{constructor(e,t,s,c,h){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=h,this.Aa.Mo((p=>{s.enqueueAndForget((async()=>{Ol(this)&&(ze(wl,"Restarting streams for network reachability change."),await(async function(w){const _=dt(w);_.Ea.add(4),await fh(_),_.Va.set("Unknown"),_.Ea.delete(4),await kd(_)})(this))}))})),this.Va=new bO(s,c)}}async function kd(n){if(Ol(n))for(const e of n.Ra)await e(!0)}async function fh(n){for(const e of n.Ra)await e(!1)}function TT(n,e){const t=dt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),vm(t)?Cm(t):Fc(t).O_()&&Tm(t,e))}function xm(n,e){const t=dt(n),s=Fc(t);t.Ia.delete(e),s.O_()&&CT(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ol(t)&&t.Va.set("Unknown"))}function Tm(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ut.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fc(n).Z_(e)}function CT(n,e){n.da.$e(e),Fc(n).X_(e)}function Cm(n){n.da=new x6({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Fc(n).start(),n.Va.ua()}function vm(n){return Ol(n)&&!Fc(n).x_()&&n.Ia.size>0}function Ol(n){return dt(n).Ea.size===0}function vT(n){n.da=void 0}async function NO(n){n.Va.set("Online")}async function OO(n){n.Ia.forEach(((e,t)=>{Tm(n,e)}))}async function DO(n,e){vT(n),vm(n)?(n.Va.ha(e),Cm(n)):n.Va.set("Unknown")}async function MO(n,e,t){if(n.Va.set("Online"),e instanceof lT&&e.state===2&&e.cause)try{await(async function(c,h){const p=h.cause;for(const T of h.targetIds)c.Ia.has(T)&&(await c.remoteSyncer.rejectListen(T,p),c.Ia.delete(T),c.da.removeTarget(T))})(n,e)}catch(s){ze(wl,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await ld(n,s)}else if(e instanceof Vf?n.da.Xe(e):e instanceof oT?n.da.st(e):n.da.tt(e),!t.isEqual(ut.min()))try{const s=await AT(n.localStore);t.compareTo(s)>=0&&await(function(h,p){const T=h.da.Tt(p);return T.targetChanges.forEach(((w,_)=>{if(w.resumeToken.approximateByteSize()>0){const S=h.Ia.get(_);S&&h.Ia.set(_,S.withResumeToken(w.resumeToken,p))}})),T.targetMismatches.forEach(((w,_)=>{const S=h.Ia.get(w);if(!S)return;h.Ia.set(w,S.withResumeToken(Li.EMPTY_BYTE_STRING,S.snapshotVersion)),CT(h,w);const b=new Ao(S.target,w,_,S.sequenceNumber);Tm(h,b)})),h.remoteSyncer.applyRemoteEvent(T)})(n,t)}catch(s){ze(wl,"Failed to raise snapshot:",s),await ld(n,s)}}async function ld(n,e,t){if(!Uc(e))throw e;n.Ea.add(1),await fh(n),n.Va.set("Offline"),t||(t=()=>AT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ze(wl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await kd(n)}))}function ST(n,e){return e().catch((t=>ld(n,t,e)))}async function Bd(n){const e=dt(n),t=Do(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:om;for(;LO(e);)try{const c=await gO(e.localStore,s);if(c===null){e.Ta.length===0&&t.L_();break}s=c.batchId,PO(e,c)}catch(c){await ld(e,c)}IT(e)&&bT(e)}function LO(n){return Ol(n)&&n.Ta.length<10}function PO(n,e){n.Ta.push(e);const t=Do(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function IT(n){return Ol(n)&&!Do(n).x_()&&n.Ta.length>0}function bT(n){Do(n).start()}async function kO(n){Do(n).ra()}async function BO(n){const e=Do(n);for(const t of n.Ta)e.ea(t.mutations)}async function UO(n,e,t){const s=n.Ta.shift(),c=mm.from(s,e,t);await ST(n,(()=>n.remoteSyncer.applySuccessfulWrite(c))),await Bd(n)}async function VO(n,e){e&&Do(n).Y_&&await(async function(s,c){if((function(p){return _6(p)&&p!==ve.ABORTED})(c.code)){const h=s.Ta.shift();Do(s).B_(),await ST(s,(()=>s.remoteSyncer.rejectFailedWrite(h.batchId,c))),await Bd(s)}})(n,e),IT(n)&&bT(n)}async function U_(n,e){const t=dt(n);t.asyncQueue.verifyOperationInProgress(),ze(wl,"RemoteStore received new credentials");const s=Ol(t);t.Ea.add(3),await fh(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await kd(t)}async function FO(n,e){const t=dt(n);e?(t.Ea.delete(2),await kd(t)):e||(t.Ea.add(2),await fh(t),t.Va.set("Unknown"))}function Fc(n){return n.ma||(n.ma=(function(t,s,c){const h=dt(t);return h.sa(),new TO(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)})(n.datastore,n.asyncQueue,{Zo:NO.bind(null,n),Yo:OO.bind(null,n),t_:DO.bind(null,n),J_:MO.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),vm(n)?Cm(n):n.Va.set("Unknown")):(await n.ma.stop(),vT(n))}))),n.ma}function Do(n){return n.fa||(n.fa=(function(t,s,c){const h=dt(t);return h.sa(),new CO(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:kO.bind(null,n),t_:VO.bind(null,n),ta:BO.bind(null,n),na:UO.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Bd(n)):(await n.fa.stop(),n.Ta.length>0&&(ze(wl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class Sm{constructor(e,t,s,c,h){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=c,this.removalCallback=h,this.deferred=new Co,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((p=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,c,h){const p=Date.now()+s,T=new Sm(e,t,p,c,h);return T.start(s),T}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Im(n,e){if(Ra("AsyncQueue",`${e}: ${n}`),Uc(n))return new Ve(ve.UNAVAILABLE,`${e}: ${n}`);throw n}class Tc{static emptySet(e){return new Tc(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Je.comparator(t.key,s.key):(t,s)=>Je.comparator(t.key,s.key),this.keyedMap=bu(),this.sortedSet=new Bn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Tc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,h=s.getNext().key;if(!c.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Tc;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class V_{constructor(){this.ga=new Bn(Je.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):at(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Rc{constructor(e,t,s,c,h,p,T,w,_){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=c,this.mutatedKeys=h,this.fromCache=p,this.syncStateChanged=T,this.excludesMetadataChanges=w,this.hasCachedResults=_}static fromInitialDocuments(e,t,s,c,h){const p=[];return t.forEach((T=>{p.push({type:0,doc:T})})),new Rc(e,t,Tc.emptySet(t),p,s,c,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==s[c].type||!t[c].doc.isEqual(s[c].doc))return!1;return!0}}class zO{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class jO{constructor(){this.queries=F_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const c=dt(t),h=c.queries;c.queries=F_(),h.forEach(((p,T)=>{for(const w of T.ba)w.onError(s)}))})(this,new Ve(ve.ABORTED,"Firestore shutting down"))}}function F_(){return new Nl((n=>Wx(n)),Nd)}async function RT(n,e){const t=dt(n);let s=3;const c=e.query;let h=t.queries.get(c);h?!h.Sa()&&e.Da()&&(s=2):(h=new zO,s=e.Da()?0:1);try{switch(s){case 0:h.wa=await t.onListen(c,!0);break;case 1:h.wa=await t.onListen(c,!1);break;case 2:await t.onFirstRemoteStoreListen(c)}}catch(p){const T=Im(p,`Initialization of query '${fc(e.query)}' failed`);return void e.onError(T)}t.queries.set(c,h),h.ba.push(e),e.va(t.onlineState),h.wa&&e.Fa(h.wa)&&bm(t)}async function NT(n,e){const t=dt(n),s=e.query;let c=3;const h=t.queries.get(s);if(h){const p=h.ba.indexOf(e);p>=0&&(h.ba.splice(p,1),h.ba.length===0?c=e.Da()?0:1:!h.Sa()&&e.Da()&&(c=2))}switch(c){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function HO(n,e){const t=dt(n);let s=!1;for(const c of e){const h=c.query,p=t.queries.get(h);if(p){for(const T of p.ba)T.Fa(c)&&(s=!0);p.wa=c}}s&&bm(t)}function GO(n,e,t){const s=dt(n),c=s.queries.get(e);if(c)for(const h of c.ba)h.onError(t);s.queries.delete(e)}function bm(n){n.Ca.forEach((e=>{e.next()}))}var Sg,z_;(z_=Sg||(Sg={})).Ma="default",z_.Cache="cache";class OT{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const c of e.docChanges)c.type!==3&&s.push(c);e=new Rc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Rc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Sg.Cache}}class DT{constructor(e){this.key=e}}class MT{constructor(e){this.key=e}}class qO{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ut(),this.mutatedKeys=Ut(),this.eu=Qx(e),this.tu=new Tc(this.eu)}get nu(){return this.Za}ru(e,t){const s=t?t.iu:new V_,c=t?t.tu:this.tu;let h=t?t.mutatedKeys:this.mutatedKeys,p=c,T=!1;const w=this.query.limitType==="F"&&c.size===this.query.limit?c.last():null,_=this.query.limitType==="L"&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal(((S,b)=>{const L=c.get(S),j=Od(this.query,b)?b:null,W=!!L&&this.mutatedKeys.has(L.key),Z=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let q=!1;L&&j?L.data.isEqual(j.data)?W!==Z&&(s.track({type:3,doc:j}),q=!0):this.su(L,j)||(s.track({type:2,doc:j}),q=!0,(w&&this.eu(j,w)>0||_&&this.eu(j,_)<0)&&(T=!0)):!L&&j?(s.track({type:0,doc:j}),q=!0):L&&!j&&(s.track({type:1,doc:L}),q=!0,(w||_)&&(T=!0)),q&&(j?(p=p.add(j),h=Z?h.add(S):h.delete(S)):(p=p.delete(S),h=h.delete(S)))})),this.query.limit!==null)for(;p.size>this.query.limit;){const S=this.query.limitType==="F"?p.last():p.first();p=p.delete(S.key),h=h.delete(S.key),s.track({type:1,doc:S})}return{tu:p,iu:s,Ss:T,mutatedKeys:h}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,c){const h=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const p=e.iu.ya();p.sort(((S,b)=>(function(j,W){const Z=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at(20277,{Vt:q})}};return Z(j)-Z(W)})(S.type,b.type)||this.eu(S.doc,b.doc))),this.ou(s),c=c??!1;const T=t&&!c?this._u():[],w=this.Ya.size===0&&this.current&&!c?1:0,_=w!==this.Xa;return this.Xa=w,p.length!==0||_?{snapshot:new Rc(this.query,e.tu,h,p,e.mutatedKeys,w===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:T}:{au:T}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new V_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ut(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const t=[];return e.forEach((s=>{this.Ya.has(s)||t.push(new MT(s))})),this.Ya.forEach((s=>{e.has(s)||t.push(new DT(s))})),t}cu(e){this.Za=e.ks,this.Ya=Ut();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Rc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Rm="SyncEngine";class YO{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class XO{constructor(e){this.key=e,this.hu=!1}}class WO{constructor(e,t,s,c,h,p){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=c,this.currentUser=h,this.maxConcurrentLimboResolutions=p,this.Pu={},this.Tu=new Nl((T=>Wx(T)),Nd),this.Iu=new Map,this.Eu=new Set,this.Ru=new Bn(Je.comparator),this.Au=new Map,this.Vu=new Em,this.du={},this.mu=new Map,this.fu=bc.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function QO(n,e,t=!0){const s=VT(n);let c;const h=s.Tu.get(e);return h?(s.sharedClientState.addLocalQueryTarget(h.targetId),c=h.view.lu()):c=await LT(s,e,t,!0),c}async function KO(n,e){const t=VT(n);await LT(t,e,!0,!1)}async function LT(n,e,t,s){const c=await mO(n.localStore,Vs(e)),h=c.targetId,p=n.sharedClientState.addLocalQueryTarget(h,t);let T;return s&&(T=await ZO(n,e,h,p==="current",c.resumeToken)),n.isPrimaryClient&&t&&TT(n.remoteStore,c),T}async function ZO(n,e,t,s,c){n.pu=(b,L,j)=>(async function(Z,q,pe,le){let ne=q.view.ru(pe);ne.Ss&&(ne=await M_(Z.localStore,q.query,!1).then((({documents:U})=>q.view.ru(U,ne))));const Re=le&&le.targetChanges.get(q.targetId),He=le&&le.targetMismatches.get(q.targetId)!=null,Be=q.view.applyChanges(ne,Z.isPrimaryClient,Re,He);return H_(Z,q.targetId,Be.au),Be.snapshot})(n,b,L,j);const h=await M_(n.localStore,e,!0),p=new qO(e,h.ks),T=p.ru(h.documents),w=hh.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",c),_=p.applyChanges(T,n.isPrimaryClient,w);H_(n,t,_.au);const S=new YO(e,t,p);return n.Tu.set(e,S),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),_.snapshot}async function JO(n,e,t){const s=dt(n),c=s.Tu.get(e),h=s.Iu.get(c.targetId);if(h.length>1)return s.Iu.set(c.targetId,h.filter((p=>!Nd(p,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(c.targetId),s.sharedClientState.isActiveQueryTarget(c.targetId)||await Cg(s.localStore,c.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(c.targetId),t&&xm(s.remoteStore,c.targetId),Ig(s,c.targetId)})).catch(Bc)):(Ig(s,c.targetId),await Cg(s.localStore,c.targetId,!0))}async function $O(n,e){const t=dt(n),s=t.Tu.get(e),c=t.Iu.get(s.targetId);t.isPrimaryClient&&c.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),xm(t.remoteStore,s.targetId))}async function eD(n,e,t){const s=oD(n);try{const c=await(function(p,T){const w=dt(p),_=wn.now(),S=T.reduce(((j,W)=>j.add(W.key)),Ut());let b,L;return w.persistence.runTransaction("Locally write mutations","readwrite",(j=>{let W=Na(),Z=Ut();return w.xs.getEntries(j,S).next((q=>{W=q,W.forEach(((pe,le)=>{le.isValidDocument()||(Z=Z.add(pe))}))})).next((()=>w.localDocuments.getOverlayedDocuments(j,W))).next((q=>{b=q;const pe=[];for(const le of T){const ne=g6(le,b.get(le.key).overlayedDocument);ne!=null&&pe.push(new Uo(le.key,ne,Fx(ne.value.mapValue),Es.exists(!0)))}return w.mutationQueue.addMutationBatch(j,_,pe,T)})).next((q=>{L=q;const pe=q.applyToLocalDocumentSet(b,Z);return w.documentOverlayCache.saveOverlays(j,q.batchId,pe)}))})).then((()=>({batchId:L.batchId,changes:Zx(b)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(c.batchId),(function(p,T,w){let _=p.du[p.currentUser.toKey()];_||(_=new Bn(Bt)),_=_.insert(T,w),p.du[p.currentUser.toKey()]=_})(s,c.batchId,t),await dh(s,c.changes),await Bd(s.remoteStore)}catch(c){const h=Im(c,"Failed to persist write");t.reject(h)}}async function PT(n,e){const t=dt(n);try{const s=await fO(t.localStore,e);e.targetChanges.forEach(((c,h)=>{const p=t.Au.get(h);p&&(nn(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1,22616),c.addedDocuments.size>0?p.hu=!0:c.modifiedDocuments.size>0?nn(p.hu,14607):c.removedDocuments.size>0&&(nn(p.hu,42227),p.hu=!1))})),await dh(t,s,e)}catch(s){await Bc(s)}}function j_(n,e,t){const s=dt(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const c=[];s.Tu.forEach(((h,p)=>{const T=p.view.va(e);T.snapshot&&c.push(T.snapshot)})),(function(p,T){const w=dt(p);w.onlineState=T;let _=!1;w.queries.forEach(((S,b)=>{for(const L of b.ba)L.va(T)&&(_=!0)})),_&&bm(w)})(s.eventManager,e),c.length&&s.Pu.J_(c),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function tD(n,e,t){const s=dt(n);s.sharedClientState.updateQueryState(e,"rejected",t);const c=s.Au.get(e),h=c&&c.key;if(h){let p=new Bn(Je.comparator);p=p.insert(h,qi.newNoDocument(h,ut.min()));const T=Ut().add(h),w=new Ld(ut.min(),new Map,new Bn(Bt),p,T);await PT(s,w),s.Ru=s.Ru.remove(h),s.Au.delete(e),Nm(s)}else await Cg(s.localStore,e,!1).then((()=>Ig(s,e,t))).catch(Bc)}async function nD(n,e){const t=dt(n),s=e.batch.batchId;try{const c=await hO(t.localStore,e);BT(t,s,null),kT(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await dh(t,c)}catch(c){await Bc(c)}}async function iD(n,e,t){const s=dt(n);try{const c=await(function(p,T){const w=dt(p);return w.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let S;return w.mutationQueue.lookupMutationBatch(_,T).next((b=>(nn(b!==null,37113),S=b.keys(),w.mutationQueue.removeMutationBatch(_,b)))).next((()=>w.mutationQueue.performConsistencyCheck(_))).next((()=>w.documentOverlayCache.removeOverlaysForBatchId(_,S,T))).next((()=>w.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,S))).next((()=>w.localDocuments.getDocuments(_,S)))}))})(s.localStore,e);BT(s,e,t),kT(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await dh(s,c)}catch(c){await Bc(c)}}function kT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function BT(n,e,t){const s=dt(n);let c=s.du[s.currentUser.toKey()];if(c){const h=c.get(e);h&&(t?h.reject(t):h.resolve(),c=c.remove(e)),s.du[s.currentUser.toKey()]=c}}function Ig(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((s=>{n.Vu.containsKey(s)||UT(n,s)}))}function UT(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(xm(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Nm(n))}function H_(n,e,t){for(const s of t)s instanceof DT?(n.Vu.addReference(s.key,e),rD(n,s)):s instanceof MT?(ze(Rm,"Document no longer in limbo: "+s.key),n.Vu.removeReference(s.key,e),n.Vu.containsKey(s.key)||UT(n,s.key)):at(19791,{wu:s})}function rD(n,e){const t=e.key,s=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(s)||(ze(Rm,"New document in limbo: "+t),n.Eu.add(s),Nm(n))}function Nm(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Je(pn.fromString(e)),s=n.fu.next();n.Au.set(s,new XO(t)),n.Ru=n.Ru.insert(t,s),TT(n.remoteStore,new Ao(Vs(fm(t.path)),s,"TargetPurposeLimboResolution",Id.ce))}}async function dh(n,e,t){const s=dt(n),c=[],h=[],p=[];s.Tu.isEmpty()||(s.Tu.forEach(((T,w)=>{p.push(s.pu(w,e,t).then((_=>{if((_||t)&&s.isPrimaryClient){const S=_?!_.fromCache:t?.targetChanges.get(w.targetId)?.current;s.sharedClientState.updateQueryState(w.targetId,S?"current":"not-current")}if(_){c.push(_);const S=Am.Es(w.targetId,_);h.push(S)}})))})),await Promise.all(p),s.Pu.J_(c),await(async function(w,_){const S=dt(w);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>Ie.forEach(_,(L=>Ie.forEach(L.Ts,(j=>S.persistence.referenceDelegate.addReference(b,L.targetId,j))).next((()=>Ie.forEach(L.Is,(j=>S.persistence.referenceDelegate.removeReference(b,L.targetId,j)))))))))}catch(b){if(!Uc(b))throw b;ze(wm,"Failed to update sequence numbers: "+b)}for(const b of _){const L=b.targetId;if(!b.fromCache){const j=S.vs.get(L),W=j.snapshotVersion,Z=j.withLastLimboFreeSnapshotVersion(W);S.vs=S.vs.insert(L,Z)}}})(s.localStore,h))}async function sD(n,e){const t=dt(n);if(!t.currentUser.isEqual(e)){ze(Rm,"User change. New user:",e.toKey());const s=await _T(t.localStore,e);t.currentUser=e,(function(h,p){h.mu.forEach((T=>{T.forEach((w=>{w.reject(new Ve(ve.CANCELLED,p))}))})),h.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await dh(t,s.Ns)}}function aD(n,e){const t=dt(n),s=t.Au.get(e);if(s&&s.hu)return Ut().add(s.key);{let c=Ut();const h=t.Iu.get(e);if(!h)return c;for(const p of h){const T=t.Tu.get(p);c=c.unionWith(T.view.nu)}return c}}function VT(n){const e=dt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=PT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tD.bind(null,e),e.Pu.J_=HO.bind(null,e.eventManager),e.Pu.yu=GO.bind(null,e.eventManager),e}function oD(n){const e=dt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iD.bind(null,e),e}class cd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return uO(this.persistence,new oO,e.initialUser,this.serializer)}Cu(e){return new ET(_m.Vi,this.serializer)}Du(e){return new yO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cd.provider={build:()=>new cd};class lD extends cd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){nn(this.persistence.referenceDelegate instanceof od,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Y6(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?dr.withCacheSize(this.cacheSizeBytes):dr.DEFAULT;return new ET((s=>od.Vi(s,t)),this.serializer)}}class bg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>j_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=sD.bind(null,this.syncEngine),await FO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new jO})()}createDatastore(e){const t=Pd(e.databaseInfo.databaseId),s=xO(e.databaseInfo);return IO(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,c,h,p,T){return new RO(s,c,h,p,T)})(this.localStore,this.datastore,e.asyncQueue,(t=>j_(this.syncEngine,t,0)),(function(){return k_.v()?new k_:new EO})())}createSyncEngine(e,t){return(function(c,h,p,T,w,_,S){const b=new WO(c,h,p,T,w,_);return S&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=dt(t);ze(wl,"RemoteStore shutting down."),s.Ea.add(5),await fh(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}bg.provider={build:()=>new bg};class FT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ra("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Mo="FirestoreClient";class cD{constructor(e,t,s,c,h){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this._databaseInfo=c,this.user=Gi.UNAUTHENTICATED,this.clientId=am.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(s,(async p=>{ze(Mo,"Received user=",p.uid),await this.authCredentialListener(p),this.user=p})),this.appCheckCredentials.start(s,(p=>(ze(Mo,"Received new app check token=",p),this.appCheckCredentialListener(p,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Co;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Im(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function eg(n,e){n.asyncQueue.verifyOperationInProgress(),ze(Mo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async c=>{s.isEqual(c)||(await _T(e.localStore,c),s=c)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function G_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await uD(n);ze(Mo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>U_(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,c)=>U_(e.remoteStore,c))),n._onlineComponents=e}async function uD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ze(Mo,"Using user provided OfflineComponentProvider");try{await eg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(c){return c.name==="FirebaseError"?c.code===ve.FAILED_PRECONDITION||c.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11})(t))throw t;Cc("Error using user provided cache. Falling back to memory cache: "+t),await eg(n,new cd)}}else ze(Mo,"Using default OfflineComponentProvider"),await eg(n,new lD(void 0));return n._offlineComponents}async function zT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ze(Mo,"Using user provided OnlineComponentProvider"),await G_(n,n._uninitializedComponentsProvider._online)):(ze(Mo,"Using default OnlineComponentProvider"),await G_(n,new bg))),n._onlineComponents}function hD(n){return zT(n).then((e=>e.syncEngine))}async function Rg(n){const e=await zT(n),t=e.eventManager;return t.onListen=QO.bind(null,e.syncEngine),t.onUnlisten=JO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=KO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$O.bind(null,e.syncEngine),t}function fD(n,e,t,s){const c=new FT(s),h=new OT(e,c,t);return n.asyncQueue.enqueueAndForget((async()=>RT(await Rg(n),h))),()=>{c.Nu(),n.asyncQueue.enqueueAndForget((async()=>NT(await Rg(n),h)))}}function dD(n,e,t={}){const s=new Co;return n.asyncQueue.enqueueAndForget((async()=>(function(h,p,T,w,_){const S=new FT({next:L=>{S.Nu(),p.enqueueAndForget((()=>NT(h,b))),L.fromCache&&w.source==="server"?_.reject(new Ve(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(L)},error:L=>_.reject(L)}),b=new OT(T,S,{includeMetadataChanges:!0,Ka:!0});return RT(h,b)})(await Rg(n),n.asyncQueue,e,t,s))),s.promise}function gD(n,e){const t=new Co;return n.asyncQueue.enqueueAndForget((async()=>eD(await hD(n),e,t))),t.promise}function jT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const mD="ComponentProvider",q_=new Map;function pD(n,e,t,s,c){return new P8(n,e,t,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,jT(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator,s)}const HT="firestore.googleapis.com",Y_=!0;class X_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ve(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=HT,this.ssl=Y_}else this.host=e.host,this.ssl=e.ssl??Y_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<G6)throw new Ve(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}C8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ve(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ve(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ve(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,c){return s.timeoutSeconds===c.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ud{constructor(e,t,s,c){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new X_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ve(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ve(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new X_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new g8;switch(s.type){case"firstParty":return new E8(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ve(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=q_.get(t);s&&(ze(mD,"Removing Datastore"),q_.delete(t),s.terminate())})(this),Promise.resolve()}}function yD(n,e,t,s={}){n=Us(n,Ud);const c=Mc(e),h=n._getSettings(),p={...h,emulatorOptions:n._getEmulatorOptions()},T=`${e}:${t}`;c&&(cw(`https://${T}`),uw("Firestore",!0)),h.host!==HT&&h.host!==T&&Cc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const w={...h,host:T,ssl:c,emulatorOptions:s};if(!Io(w,p)&&(n._setSettings(w),s.mockUserToken)){let _,S;if(typeof s.mockUserToken=="string")_=s.mockUserToken,S=Gi.MOCK_USER;else{_=tb(s.mockUserToken,n._app?.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new Ve(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Gi(b)}n._authCredentials=new m8(new bx(_,S))}}class Da{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Da(this.firestore,e,this._query)}}class ri{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ri(this.firestore,e,this._key)}toJSON(){return{type:ri._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(ch(t,ri._jsonSchema))return new ri(e,s||null,new Je(pn.fromString(t.referencePath)))}}ri._jsonSchemaVersion="firestore/documentReference/1.0",ri._jsonSchema={type:ii("string",ri._jsonSchemaVersion),referencePath:ii("string")};class vo extends Da{constructor(e,t,s){super(e,t,fm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ri(this.firestore,null,new Je(e))}withConverter(e){return new vo(this.firestore,e,this._path)}}function dl(n,e,...t){if(n=Gn(n),Rx("collection","path",e),n instanceof Ud){const s=pn.fromString(e,...t);return a_(s),new vo(n,null,s)}{if(!(n instanceof ri||n instanceof vo))throw new Ve(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(pn.fromString(e,...t));return a_(s),new vo(n.firestore,null,s)}}function Uu(n,e,...t){if(n=Gn(n),arguments.length===1&&(e=am.newId()),Rx("doc","path",e),n instanceof Ud){const s=pn.fromString(e,...t);return s_(s),new ri(n,null,new Je(s))}{if(!(n instanceof ri||n instanceof vo))throw new Ve(ve.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(pn.fromString(e,...t));return s_(s),new ri(n.firestore,n instanceof vo?n.converter:null,new Je(s))}}const W_="AsyncQueue";class Q_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wT(this,"async_queue_retry"),this._c=()=>{const s=$1();s&&ze(W_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=$1();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=$1();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Co;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Uc(e))throw e;ze(W_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Ra("INTERNAL UNHANDLED ERROR: ",K_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const c=Sm.createAndSchedule(this,e,t,s,(h=>this.hc(h)));return this.tc.push(c),c}uc(){this.nc&&at(47125,{Pc:K_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function K_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class xl extends Ud{constructor(e,t,s,c){super(e,t,s,c),this.type="firestore",this._queue=new Q_,this._persistenceKey=c?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Q_(e),this._firestoreClient=void 0,await e}}}function ED(n,e){const t=typeof n=="object"?n:Gg(),s=typeof n=="string"?n:td,c=bl(t,"firestore").getImmediate({identifier:s});if(!c._initialized){const h=$I("firestore");h&&yD(c,...h)}return c}function Om(n){if(n._terminated)throw new Ve(ve.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_D(n),n._firestoreClient}function _D(n){const e=n._freezeSettings(),t=pD(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new cD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(c){const h=c?._online.build();return{_offline:c?._offline.build(h),_online:h}})(n._componentsProvider))}class is{constructor(e){this._byteString=e}static fromBase64String(e){try{return new is(Li.fromBase64String(e))}catch(t){throw new Ve(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new is(Li.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:is._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ch(e,is._jsonSchema))return is.fromBase64String(e.bytes)}}is._jsonSchemaVersion="firestore/bytes/1.0",is._jsonSchema={type:ii("string",is._jsonSchemaVersion),bytes:ii("string")};class Dm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ve(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vd{constructor(e){this._methodName=e}}class zs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ve(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ve(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zs._jsonSchemaVersion}}static fromJSON(e){if(ch(e,zs._jsonSchema))return new zs(e.latitude,e.longitude)}}zs._jsonSchemaVersion="firestore/geoPoint/1.0",zs._jsonSchema={type:ii("string",zs._jsonSchemaVersion),latitude:ii("number"),longitude:ii("number")};class _s{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,c){if(s.length!==c.length)return!1;for(let h=0;h<s.length;++h)if(s[h]!==c[h])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_s._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ch(e,_s._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new _s(e.vectorValues);throw new Ve(ve.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_s._jsonSchemaVersion="firestore/vectorValue/1.0",_s._jsonSchema={type:ii("string",_s._jsonSchemaVersion),vectorValues:ii("object")};const AD=/^__.*__$/;class wD{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Uo(e,this.data,this.fieldMask,t,this.fieldTransforms):new uh(e,this.data,t,this.fieldTransforms)}}class GT{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Uo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at(40011,{dataSource:n})}}class Mm{constructor(e,t,s,c,h,p){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=c,h===void 0&&this.validatePath(),this.fieldTransforms=h||[],this.fieldMask=p||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Mm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){const t=this.path?.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return ud(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(qT(this.dataSource)&&AD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class xD{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Pd(e)}createContext(e,t,s,c=!1){return new Mm({dataSource:e,methodName:t,targetDoc:s,path:Mi.emptyPath(),arrayElement:!1,hasConverter:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lm(n){const e=n._freezeSettings(),t=Pd(n._databaseId);return new xD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function TD(n,e,t,s,c,h={}){const p=n.createContext(h.merge||h.mergeFields?2:0,e,t,c);km("Data must be an object, but it was:",p,s);const T=YT(s,p);let w,_;if(h.merge)w=new kr(p.fieldMask),_=p.fieldTransforms;else if(h.mergeFields){const S=[];for(const b of h.mergeFields){const L=Tl(e,b,t);if(!p.contains(L))throw new Ve(ve.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);QT(S,L)||S.push(L)}w=new kr(S),_=p.fieldTransforms.filter((b=>w.covers(b.field)))}else w=null,_=p.fieldTransforms;return new wD(new gr(T),w,_)}class Fd extends Vd{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fd}}class Pm extends Vd{_toFieldTransform(e){return new u6(e.path,new Ku)}isEqual(e){return e instanceof Pm}}function CD(n,e,t,s){const c=n.createContext(1,e,t);km("Data must be an object, but it was:",c,s);const h=[],p=gr.empty();Bo(s,((w,_)=>{const S=WT(e,w,t);_=Gn(_);const b=c.childContextForFieldPath(S);if(_ instanceof Fd)h.push(S);else{const L=gh(_,b);L!=null&&(h.push(S),p.set(S,L))}}));const T=new kr(h);return new GT(p,T,c.fieldTransforms)}function vD(n,e,t,s,c,h){const p=n.createContext(1,e,t),T=[Tl(e,s,t)],w=[c];if(h.length%2!=0)throw new Ve(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<h.length;L+=2)T.push(Tl(e,h[L])),w.push(h[L+1]);const _=[],S=gr.empty();for(let L=T.length-1;L>=0;--L)if(!QT(_,T[L])){const j=T[L];let W=w[L];W=Gn(W);const Z=p.childContextForFieldPath(j);if(W instanceof Fd)_.push(j);else{const q=gh(W,Z);q!=null&&(_.push(j),S.set(j,q))}}const b=new kr(_);return new GT(S,b,p.fieldTransforms)}function SD(n,e,t,s=!1){return gh(t,n.createContext(s?4:3,e))}function gh(n,e){if(XT(n=Gn(n)))return km("Unsupported field value:",e,n),YT(n,e);if(n instanceof Vd)return(function(s,c){if(!qT(c.dataSource))throw c.createError(`${s._methodName}() can only be used with update() and set()`);if(!c.path)throw c.createError(`${s._methodName}() is not currently supported inside arrays`);const h=s._toFieldTransform(c);h&&c.fieldTransforms.push(h)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,c){const h=[];let p=0;for(const T of s){let w=gh(T,c.childContextForArray(p));w==null&&(w={nullValue:"NULL_VALUE"}),h.push(w),p++}return{arrayValue:{values:h}}})(n,e)}return(function(s,c){if((s=Gn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return o6(c.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const h=wn.fromDate(s);return{timestampValue:ad(c.serializer,h)}}if(s instanceof wn){const h=new wn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ad(c.serializer,h)}}if(s instanceof zs)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof is)return{bytesValue:cT(c.serializer,s._byteString)};if(s instanceof ri){const h=c.databaseId,p=s.firestore._databaseId;if(!p.isEqual(h))throw c.createError(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:ym(s.firestore._databaseId||c.databaseId,s._key.path)}}if(s instanceof _s)return(function(p,T){const w=p instanceof _s?p.toArray():p;return{mapValue:{fields:{[Ux]:{stringValue:Vx},[nd]:{arrayValue:{values:w.map((S=>{if(typeof S!="number")throw T.createError("VectorValues must only contain numeric values.");return dm(T.serializer,S)}))}}}}}})(s,c);if(pT(s))return s._toProto(c.serializer);throw c.createError(`Unsupported field value: ${Sd(s)}`)})(n,e)}function YT(n,e){const t={};return Dx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bo(n,((s,c)=>{const h=gh(c,e.childContextForField(s));h!=null&&(t[s]=h)})),{mapValue:{fields:t}}}function XT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof wn||n instanceof zs||n instanceof is||n instanceof ri||n instanceof Vd||n instanceof _s||pT(n))}function km(n,e,t){if(!XT(t)||!Nx(t)){const s=Sd(t);throw s==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+s)}}function Tl(n,e,t){if((e=Gn(e))instanceof Dm)return e._internalPath;if(typeof e=="string")return WT(n,e);throw ud("Field path arguments must be of type string or ",n,!1,void 0,t)}const ID=new RegExp("[~\\*/\\[\\]]");function WT(n,e,t){if(e.search(ID)>=0)throw ud(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Dm(...e.split("."))._internalPath}catch{throw ud(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ud(n,e,t,s,c){const h=s&&!s.isEmpty(),p=c!==void 0;let T=`Function ${e}() called with invalid data`;t&&(T+=" (via `toFirestore()`)"),T+=". ";let w="";return(h||p)&&(w+=" (found",h&&(w+=` in field ${s}`),p&&(w+=` in document ${c}`),w+=")"),new Ve(ve.INVALID_ARGUMENT,T+n+w)}function QT(n,e){return n.some((t=>t.isEqual(e)))}class bD{convertValue(e,t="none"){switch(Oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(No(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw at(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Bo(e,((c,h)=>{s[c]=this.convertValue(h,t)})),s}convertVectorValue(e){const t=e.fields?.[nd].arrayValue?.values?.map((s=>Kn(s.doubleValue)));return new _s(t)}convertGeoPoint(e){return new zs(Kn(e.latitude),Kn(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Rd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Yu(e));default:return null}}convertTimestamp(e){const t=Ro(e);return new wn(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=pn.fromString(e);nn(mT(s),9688,{name:e});const c=new Xu(s.get(1),s.get(3)),h=new Je(s.popFirst(5));return c.isEqual(t)||Ra(`Document ${h} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),h}}class Bm extends bD{constructor(e){super(),this.firestore=e}convertBytes(e){return new is(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ri(this.firestore,null,t)}}function Ff(){return new Pm("serverTimestamp")}const Z_="@firebase/firestore",J_="4.10.0";function $_(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const c=t;for(const h of s)if(h in c&&typeof c[h]=="function")return!0;return!1})(n,["next","error","complete"])}class KT{constructor(e,t,s,c,h){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=c,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new ri(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Tl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class RD extends KT{data(){return super.data()}}function ZT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ve(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Um{}class Vm extends Um{}function Ng(n,e,...t){let s=[];e instanceof Um&&s.push(e),s=s.concat(t),(function(h){const p=h.filter((w=>w instanceof Fm)).length,T=h.filter((w=>w instanceof zd)).length;if(p>1||p>0&&T>0)throw new Ve(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const c of s)n=c._apply(n);return n}class zd extends Vm{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new zd(e,t,s)}_apply(e){const t=this._parse(e);return JT(e._query,t),new Da(e.firestore,e.converter,_g(e._query,t))}_parse(e){const t=Lm(e.firestore);return(function(h,p,T,w,_,S,b){let L;if(_.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new Ve(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){tA(b,S);const W=[];for(const Z of b)W.push(eA(w,h,Z));L={arrayValue:{values:W}}}else L=eA(w,h,b)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||tA(b,S),L=SD(T,p,b,S==="in"||S==="not-in");return ni.create(_,S,L)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ND(n,e,t){const s=e,c=Tl("where",n);return zd._create(c,s,t)}class Fm extends Um{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Fm(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:xs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(c,h){let p=c;const T=h.getFlattenedFilters();for(const w of T)JT(p,w),p=_g(p,w)})(e._query,t),new Da(e.firestore,e.converter,_g(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zm extends Vm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new zm(e,t)}_apply(e){const t=(function(c,h,p){if(c.startAt!==null)throw new Ve(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(c.endAt!==null)throw new Ve(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qu(h,p)})(e._query,this._field,this._direction);return new Da(e.firestore,e.converter,$8(e._query,t))}}function Og(n,e="asc"){const t=e,s=Tl("orderBy",n);return zm._create(s,t)}class jm extends Vm{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new jm(e,t,s)}_apply(e){return new Da(e.firestore,e.converter,rd(e._query,this._limit,this._limitType))}}function OD(n){return jm._create("limit",n,"F")}function eA(n,e,t){if(typeof(t=Gn(t))=="string"){if(t==="")throw new Ve(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xx(e)&&t.indexOf("/")!==-1)throw new Ve(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(pn.fromString(t));if(!Je.isDocumentKey(s))throw new Ve(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return g_(n,new Je(s))}if(t instanceof ri)return g_(n,t._key);throw new Ve(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sd(t)}.`)}function tA(n,e){if(!Array.isArray(n)||n.length===0)throw new Ve(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JT(n,e){const t=(function(c,h){for(const p of c)for(const T of p.getFlattenedFilters())if(h.indexOf(T.op)>=0)return T.op;return null})(n.filters,(function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ve(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ve(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function DD(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class Nu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gl extends KT{constructor(e,t,s,c,h,p){super(e,t,s,c,p),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Tl("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(ve.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=gl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}gl._jsonSchemaVersion="firestore/documentSnapshot/1.0",gl._jsonSchema={type:ii("string",gl._jsonSchemaVersion),bundleSource:ii("string","DocumentSnapshot"),bundleName:ii("string"),bundle:ii("string")};class zf extends gl{data(e={}){return super.data(e)}}class ml{constructor(e,t,s,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new Nu(c.hasPendingWrites,c.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new zf(this._firestore,this._userDataWriter,s.key,s,new Nu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ve(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(c,h){if(c._snapshot.oldDocs.isEmpty()){let p=0;return c._snapshot.docChanges.map((T=>{const w=new zf(c._firestore,c._userDataWriter,T.doc.key,T.doc,new Nu(c._snapshot.mutatedKeys.has(T.doc.key),c._snapshot.fromCache),c.query.converter);return T.doc,{type:"added",doc:w,oldIndex:-1,newIndex:p++}}))}{let p=c._snapshot.oldDocs;return c._snapshot.docChanges.filter((T=>h||T.type!==3)).map((T=>{const w=new zf(c._firestore,c._userDataWriter,T.doc.key,T.doc,new Nu(c._snapshot.mutatedKeys.has(T.doc.key),c._snapshot.fromCache),c.query.converter);let _=-1,S=-1;return T.type!==0&&(_=p.indexOf(T.doc.key),p=p.delete(T.doc.key)),T.type!==1&&(p=p.add(T.doc),S=p.indexOf(T.doc.key)),{type:MD(T.type),doc:w,oldIndex:_,newIndex:S}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(ve.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ml._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=am.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],c=[];return this.docs.forEach((h=>{h._document!==null&&(t.push(h._document),s.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),c.push(h.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function MD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at(61501,{type:n})}}ml._jsonSchemaVersion="firestore/querySnapshot/1.0",ml._jsonSchema={type:ii("string",ml._jsonSchemaVersion),bundleSource:ii("string","QuerySnapshot"),bundleName:ii("string"),bundle:ii("string")};function LD(n){n=Us(n,Da);const e=Us(n.firestore,xl),t=Om(e),s=new Bm(e);return ZT(n._query),dD(t,n._query).then((c=>new ml(e,s,n,c)))}function PD(n,e,t,...s){n=Us(n,ri);const c=Us(n.firestore,xl),h=Lm(c);let p;return p=typeof(e=Gn(e))=="string"||e instanceof Dm?vD(h,"updateDoc",n._key,e,t,s):CD(h,"updateDoc",n._key,e),Hm(c,[p.toMutation(n._key,Es.exists(!0))])}function Dg(n){return Hm(Us(n.firestore,xl),[new gm(n._key,Es.none())])}function Mg(n,e){const t=Us(n.firestore,xl),s=Uu(n),c=DD(n.converter,e),h=Lm(n.firestore);return Hm(t,[TD(h,"addDoc",s._key,c,n.converter!==null,{}).toMutation(s._key,Es.exists(!1))]).then((()=>s))}function hd(n,...e){n=Gn(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||$_(e[s])||(t=e[s++]);const c={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if($_(e[s])){const _=e[s];e[s]=_.next?.bind(_),e[s+1]=_.error?.bind(_),e[s+2]=_.complete?.bind(_)}let h,p,T;if(n instanceof ri)p=Us(n.firestore,xl),T=fm(n._key.path),h={next:_=>{e[s]&&e[s](kD(p,n,_))},error:e[s+1],complete:e[s+2]};else{const _=Us(n,Da);p=Us(_.firestore,xl),T=_._query;const S=new Bm(p);h={next:b=>{e[s]&&e[s](new ml(p,S,_,b))},error:e[s+1],complete:e[s+2]},ZT(n._query)}const w=Om(p);return fD(w,T,c,h)}function Hm(n,e){const t=Om(n);return gD(t,e)}function kD(n,e,t){const s=t.docs.get(e._key),c=new Bm(n);return new gl(n,c,e._key,s,new Nu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){d8(Lc),Hs(new As("firestore",((s,{instanceIdentifier:c,options:h})=>{const p=s.getProvider("app").getImmediate(),T=new xl(new p8(s.getProvider("auth-internal")),new _8(p,s.getProvider("app-check-internal")),k8(p,c),p);return h={useFetchStreams:t,...h},T._setSettings(h),T}),"PUBLIC").setMultipleInstances(!0)),rs(Z_,J_,e),rs(Z_,J_,"esm2020")})();const BD={apiKey:"AIzaSyCni-ZBJnMXz3mVZWmQOdappShFY-BkPTw",authDomain:"queuesmart-7d5b6.firebaseapp.com",projectId:"queuesmart-7d5b6",storageBucket:"queuesmart-7d5b6.firebasestorage.app",messagingSenderId:"506314943334",appId:"1:506314943334:web:3ef8600ee4d78169dbb6a7",measurementId:"G-9CNBB8KKSD"},Gm=yw(BD);X4(Gm);const Aa=h8(Gm),ms=ED(Gm),UD=()=>{const n=pd.c(37),[e,t]=ge.useState(""),[s,c]=ge.useState(""),[h,p]=ge.useState(!1),[T,w]=ge.useState(""),_=Ug();let S;n[0]!==e||n[1]!==h||n[2]!==_||n[3]!==s?(S=async We=>{We.preventDefault(),w("");try{h?await QR(Aa,e,s):await KR(Aa,e,s),_("/admin-dashboard")}catch(he){w(he.message)}},n[0]=e,n[1]=h,n[2]=_,n[3]=s,n[4]=S):S=n[4];const b=S,L=h?"Admin Register":"Admin Login";let j;n[5]!==L?(j=re.jsx("h2",{className:"text-3xl font-bold text-center mb-6",children:L}),n[5]=L,n[6]=j):j=n[6];let W;n[7]!==T?(W=T&&re.jsx("p",{className:"bg-red-100 text-red-600 p-3 rounded mb-4 text-sm",children:T}),n[7]=T,n[8]=W):W=n[8];let Z;n[9]===Symbol.for("react.memo_cache_sentinel")?(Z=re.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email Address"}),n[9]=Z):Z=n[9];let q;n[10]===Symbol.for("react.memo_cache_sentinel")?(q=We=>t(We.target.value),n[10]=q):q=n[10];let pe;n[11]!==e?(pe=re.jsxs("div",{children:[Z,re.jsx("input",{type:"email",className:"w-full p-3 mt-1 border rounded-xl focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"admin@example.com",value:e,onChange:q,required:!0})]}),n[11]=e,n[12]=pe):pe=n[12];let le;n[13]===Symbol.for("react.memo_cache_sentinel")?(le=re.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),n[13]=le):le=n[13];let ne;n[14]===Symbol.for("react.memo_cache_sentinel")?(ne=We=>c(We.target.value),n[14]=ne):ne=n[14];let Re;n[15]!==s?(Re=re.jsxs("div",{children:[le,re.jsx("input",{type:"password",className:"w-full p-3 mt-1 border rounded-xl focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"",value:s,onChange:ne,required:!0})]}),n[15]=s,n[16]=Re):Re=n[16];const He=h?"Create Admin Account":"Login to Dashboard";let Be;n[17]!==He?(Be=re.jsx("button",{className:"w-full bg-blue-600 text-white p-3 rounded-xl font-bold hover:bg-blue-700 transition",children:He}),n[17]=He,n[18]=Be):Be=n[18];let U;n[19]!==b||n[20]!==Be||n[21]!==pe||n[22]!==Re?(U=re.jsxs("form",{onSubmit:b,className:"space-y-4",children:[pe,Re,Be]}),n[19]=b,n[20]=Be,n[21]=pe,n[22]=Re,n[23]=U):U=n[23];const F=h?"Already have an account?":"Don't have an admin account?";let B;n[24]!==h?(B=()=>p(!h),n[24]=h,n[25]=B):B=n[25];const J=h?"Login":"Register";let Y;n[26]!==B||n[27]!==J?(Y=re.jsx("button",{onClick:B,className:"ml-1 text-blue-600 font-bold hover:underline",children:J}),n[26]=B,n[27]=J,n[28]=Y):Y=n[28];let X;n[29]!==F||n[30]!==Y?(X=re.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600",children:[F,Y]}),n[29]=F,n[30]=Y,n[31]=X):X=n[31];let G;return n[32]!==U||n[33]!==X||n[34]!==j||n[35]!==W?(G=re.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 p-4",children:re.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl w-full max-w-md",children:[j,W,U,X]})}),n[32]=U,n[33]=X,n[34]=j,n[35]=W,n[36]=G):G=n[36],G};var VD=Object.defineProperty,fd=Object.getOwnPropertySymbols,$T=Object.prototype.hasOwnProperty,eC=Object.prototype.propertyIsEnumerable,nA=(n,e,t)=>e in n?VD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Lg=(n,e)=>{for(var t in e||(e={}))$T.call(e,t)&&nA(n,t,e[t]);if(fd)for(var t of fd(e))eC.call(e,t)&&nA(n,t,e[t]);return n},Pg=(n,e)=>{var t={};for(var s in n)$T.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&fd)for(var s of fd(n))e.indexOf(s)<0&&eC.call(n,s)&&(t[s]=n[s]);return t};var Cl;(n=>{const e=class Ot{constructor(w,_,S,b){if(this.version=w,this.errorCorrectionLevel=_,this.modules=[],this.isFunction=[],w<Ot.MIN_VERSION||w>Ot.MAX_VERSION)throw new RangeError("Version value out of range");if(b<-1||b>7)throw new RangeError("Mask value out of range");this.size=w*4+17;let L=[];for(let W=0;W<this.size;W++)L.push(!1);for(let W=0;W<this.size;W++)this.modules.push(L.slice()),this.isFunction.push(L.slice());this.drawFunctionPatterns();const j=this.addEccAndInterleave(S);if(this.drawCodewords(j),b==-1){let W=1e9;for(let Z=0;Z<8;Z++){this.applyMask(Z),this.drawFormatBits(Z);const q=this.getPenaltyScore();q<W&&(b=Z,W=q),this.applyMask(Z)}}c(0<=b&&b<=7),this.mask=b,this.applyMask(b),this.drawFormatBits(b),this.isFunction=[]}static encodeText(w,_){const S=n.QrSegment.makeSegments(w);return Ot.encodeSegments(S,_)}static encodeBinary(w,_){const S=n.QrSegment.makeBytes(w);return Ot.encodeSegments([S],_)}static encodeSegments(w,_,S=1,b=40,L=-1,j=!0){if(!(Ot.MIN_VERSION<=S&&S<=b&&b<=Ot.MAX_VERSION)||L<-1||L>7)throw new RangeError("Invalid value");let W,Z;for(W=S;;W++){const ne=Ot.getNumDataCodewords(W,_)*8,Re=p.getTotalBits(w,W);if(Re<=ne){Z=Re;break}if(W>=b)throw new RangeError("Data too long")}for(const ne of[Ot.Ecc.MEDIUM,Ot.Ecc.QUARTILE,Ot.Ecc.HIGH])j&&Z<=Ot.getNumDataCodewords(W,ne)*8&&(_=ne);let q=[];for(const ne of w){t(ne.mode.modeBits,4,q),t(ne.numChars,ne.mode.numCharCountBits(W),q);for(const Re of ne.getData())q.push(Re)}c(q.length==Z);const pe=Ot.getNumDataCodewords(W,_)*8;c(q.length<=pe),t(0,Math.min(4,pe-q.length),q),t(0,(8-q.length%8)%8,q),c(q.length%8==0);for(let ne=236;q.length<pe;ne^=253)t(ne,8,q);let le=[];for(;le.length*8<q.length;)le.push(0);return q.forEach((ne,Re)=>le[Re>>>3]|=ne<<7-(Re&7)),new Ot(W,_,le,L)}getModule(w,_){return 0<=w&&w<this.size&&0<=_&&_<this.size&&this.modules[_][w]}getModules(){return this.modules}drawFunctionPatterns(){for(let S=0;S<this.size;S++)this.setFunctionModule(6,S,S%2==0),this.setFunctionModule(S,6,S%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const w=this.getAlignmentPatternPositions(),_=w.length;for(let S=0;S<_;S++)for(let b=0;b<_;b++)S==0&&b==0||S==0&&b==_-1||S==_-1&&b==0||this.drawAlignmentPattern(w[S],w[b]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(w){const _=this.errorCorrectionLevel.formatBits<<3|w;let S=_;for(let L=0;L<10;L++)S=S<<1^(S>>>9)*1335;const b=(_<<10|S)^21522;c(b>>>15==0);for(let L=0;L<=5;L++)this.setFunctionModule(8,L,s(b,L));this.setFunctionModule(8,7,s(b,6)),this.setFunctionModule(8,8,s(b,7)),this.setFunctionModule(7,8,s(b,8));for(let L=9;L<15;L++)this.setFunctionModule(14-L,8,s(b,L));for(let L=0;L<8;L++)this.setFunctionModule(this.size-1-L,8,s(b,L));for(let L=8;L<15;L++)this.setFunctionModule(8,this.size-15+L,s(b,L));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let w=this.version;for(let S=0;S<12;S++)w=w<<1^(w>>>11)*7973;const _=this.version<<12|w;c(_>>>18==0);for(let S=0;S<18;S++){const b=s(_,S),L=this.size-11+S%3,j=Math.floor(S/3);this.setFunctionModule(L,j,b),this.setFunctionModule(j,L,b)}}drawFinderPattern(w,_){for(let S=-4;S<=4;S++)for(let b=-4;b<=4;b++){const L=Math.max(Math.abs(b),Math.abs(S)),j=w+b,W=_+S;0<=j&&j<this.size&&0<=W&&W<this.size&&this.setFunctionModule(j,W,L!=2&&L!=4)}}drawAlignmentPattern(w,_){for(let S=-2;S<=2;S++)for(let b=-2;b<=2;b++)this.setFunctionModule(w+b,_+S,Math.max(Math.abs(b),Math.abs(S))!=1)}setFunctionModule(w,_,S){this.modules[_][w]=S,this.isFunction[_][w]=!0}addEccAndInterleave(w){const _=this.version,S=this.errorCorrectionLevel;if(w.length!=Ot.getNumDataCodewords(_,S))throw new RangeError("Invalid argument");const b=Ot.NUM_ERROR_CORRECTION_BLOCKS[S.ordinal][_],L=Ot.ECC_CODEWORDS_PER_BLOCK[S.ordinal][_],j=Math.floor(Ot.getNumRawDataModules(_)/8),W=b-j%b,Z=Math.floor(j/b);let q=[];const pe=Ot.reedSolomonComputeDivisor(L);for(let ne=0,Re=0;ne<b;ne++){let He=w.slice(Re,Re+Z-L+(ne<W?0:1));Re+=He.length;const Be=Ot.reedSolomonComputeRemainder(He,pe);ne<W&&He.push(0),q.push(He.concat(Be))}let le=[];for(let ne=0;ne<q[0].length;ne++)q.forEach((Re,He)=>{(ne!=Z-L||He>=W)&&le.push(Re[ne])});return c(le.length==j),le}drawCodewords(w){if(w.length!=Math.floor(Ot.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let _=0;for(let S=this.size-1;S>=1;S-=2){S==6&&(S=5);for(let b=0;b<this.size;b++)for(let L=0;L<2;L++){const j=S-L,Z=(S+1&2)==0?this.size-1-b:b;!this.isFunction[Z][j]&&_<w.length*8&&(this.modules[Z][j]=s(w[_>>>3],7-(_&7)),_++)}}c(_==w.length*8)}applyMask(w){if(w<0||w>7)throw new RangeError("Mask value out of range");for(let _=0;_<this.size;_++)for(let S=0;S<this.size;S++){let b;switch(w){case 0:b=(S+_)%2==0;break;case 1:b=_%2==0;break;case 2:b=S%3==0;break;case 3:b=(S+_)%3==0;break;case 4:b=(Math.floor(S/3)+Math.floor(_/2))%2==0;break;case 5:b=S*_%2+S*_%3==0;break;case 6:b=(S*_%2+S*_%3)%2==0;break;case 7:b=((S+_)%2+S*_%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[_][S]&&b&&(this.modules[_][S]=!this.modules[_][S])}}getPenaltyScore(){let w=0;for(let L=0;L<this.size;L++){let j=!1,W=0,Z=[0,0,0,0,0,0,0];for(let q=0;q<this.size;q++)this.modules[L][q]==j?(W++,W==5?w+=Ot.PENALTY_N1:W>5&&w++):(this.finderPenaltyAddHistory(W,Z),j||(w+=this.finderPenaltyCountPatterns(Z)*Ot.PENALTY_N3),j=this.modules[L][q],W=1);w+=this.finderPenaltyTerminateAndCount(j,W,Z)*Ot.PENALTY_N3}for(let L=0;L<this.size;L++){let j=!1,W=0,Z=[0,0,0,0,0,0,0];for(let q=0;q<this.size;q++)this.modules[q][L]==j?(W++,W==5?w+=Ot.PENALTY_N1:W>5&&w++):(this.finderPenaltyAddHistory(W,Z),j||(w+=this.finderPenaltyCountPatterns(Z)*Ot.PENALTY_N3),j=this.modules[q][L],W=1);w+=this.finderPenaltyTerminateAndCount(j,W,Z)*Ot.PENALTY_N3}for(let L=0;L<this.size-1;L++)for(let j=0;j<this.size-1;j++){const W=this.modules[L][j];W==this.modules[L][j+1]&&W==this.modules[L+1][j]&&W==this.modules[L+1][j+1]&&(w+=Ot.PENALTY_N2)}let _=0;for(const L of this.modules)_=L.reduce((j,W)=>j+(W?1:0),_);const S=this.size*this.size,b=Math.ceil(Math.abs(_*20-S*10)/S)-1;return c(0<=b&&b<=9),w+=b*Ot.PENALTY_N4,c(0<=w&&w<=2568888),w}getAlignmentPatternPositions(){if(this.version==1)return[];{const w=Math.floor(this.version/7)+2,_=this.version==32?26:Math.ceil((this.version*4+4)/(w*2-2))*2;let S=[6];for(let b=this.size-7;S.length<w;b-=_)S.splice(1,0,b);return S}}static getNumRawDataModules(w){if(w<Ot.MIN_VERSION||w>Ot.MAX_VERSION)throw new RangeError("Version number out of range");let _=(16*w+128)*w+64;if(w>=2){const S=Math.floor(w/7)+2;_-=(25*S-10)*S-55,w>=7&&(_-=36)}return c(208<=_&&_<=29648),_}static getNumDataCodewords(w,_){return Math.floor(Ot.getNumRawDataModules(w)/8)-Ot.ECC_CODEWORDS_PER_BLOCK[_.ordinal][w]*Ot.NUM_ERROR_CORRECTION_BLOCKS[_.ordinal][w]}static reedSolomonComputeDivisor(w){if(w<1||w>255)throw new RangeError("Degree out of range");let _=[];for(let b=0;b<w-1;b++)_.push(0);_.push(1);let S=1;for(let b=0;b<w;b++){for(let L=0;L<_.length;L++)_[L]=Ot.reedSolomonMultiply(_[L],S),L+1<_.length&&(_[L]^=_[L+1]);S=Ot.reedSolomonMultiply(S,2)}return _}static reedSolomonComputeRemainder(w,_){let S=_.map(b=>0);for(const b of w){const L=b^S.shift();S.push(0),_.forEach((j,W)=>S[W]^=Ot.reedSolomonMultiply(j,L))}return S}static reedSolomonMultiply(w,_){if(w>>>8||_>>>8)throw new RangeError("Byte out of range");let S=0;for(let b=7;b>=0;b--)S=S<<1^(S>>>7)*285,S^=(_>>>b&1)*w;return c(S>>>8==0),S}finderPenaltyCountPatterns(w){const _=w[1];c(_<=this.size*3);const S=_>0&&w[2]==_&&w[3]==_*3&&w[4]==_&&w[5]==_;return(S&&w[0]>=_*4&&w[6]>=_?1:0)+(S&&w[6]>=_*4&&w[0]>=_?1:0)}finderPenaltyTerminateAndCount(w,_,S){return w&&(this.finderPenaltyAddHistory(_,S),_=0),_+=this.size,this.finderPenaltyAddHistory(_,S),this.finderPenaltyCountPatterns(S)}finderPenaltyAddHistory(w,_){_[0]==0&&(w+=this.size),_.pop(),_.unshift(w)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function t(T,w,_){if(w<0||w>31||T>>>w)throw new RangeError("Value out of range");for(let S=w-1;S>=0;S--)_.push(T>>>S&1)}function s(T,w){return(T>>>w&1)!=0}function c(T){if(!T)throw new Error("Assertion error")}const h=class jn{constructor(w,_,S){if(this.mode=w,this.numChars=_,this.bitData=S,_<0)throw new RangeError("Invalid argument");this.bitData=S.slice()}static makeBytes(w){let _=[];for(const S of w)t(S,8,_);return new jn(jn.Mode.BYTE,w.length,_)}static makeNumeric(w){if(!jn.isNumeric(w))throw new RangeError("String contains non-numeric characters");let _=[];for(let S=0;S<w.length;){const b=Math.min(w.length-S,3);t(parseInt(w.substring(S,S+b),10),b*3+1,_),S+=b}return new jn(jn.Mode.NUMERIC,w.length,_)}static makeAlphanumeric(w){if(!jn.isAlphanumeric(w))throw new RangeError("String contains unencodable characters in alphanumeric mode");let _=[],S;for(S=0;S+2<=w.length;S+=2){let b=jn.ALPHANUMERIC_CHARSET.indexOf(w.charAt(S))*45;b+=jn.ALPHANUMERIC_CHARSET.indexOf(w.charAt(S+1)),t(b,11,_)}return S<w.length&&t(jn.ALPHANUMERIC_CHARSET.indexOf(w.charAt(S)),6,_),new jn(jn.Mode.ALPHANUMERIC,w.length,_)}static makeSegments(w){return w==""?[]:jn.isNumeric(w)?[jn.makeNumeric(w)]:jn.isAlphanumeric(w)?[jn.makeAlphanumeric(w)]:[jn.makeBytes(jn.toUtf8ByteArray(w))]}static makeEci(w){let _=[];if(w<0)throw new RangeError("ECI assignment value out of range");if(w<128)t(w,8,_);else if(w<16384)t(2,2,_),t(w,14,_);else if(w<1e6)t(6,3,_),t(w,21,_);else throw new RangeError("ECI assignment value out of range");return new jn(jn.Mode.ECI,0,_)}static isNumeric(w){return jn.NUMERIC_REGEX.test(w)}static isAlphanumeric(w){return jn.ALPHANUMERIC_REGEX.test(w)}getData(){return this.bitData.slice()}static getTotalBits(w,_){let S=0;for(const b of w){const L=b.mode.numCharCountBits(_);if(b.numChars>=1<<L)return 1/0;S+=4+L+b.bitData.length}return S}static toUtf8ByteArray(w){w=encodeURI(w);let _=[];for(let S=0;S<w.length;S++)w.charAt(S)!="%"?_.push(w.charCodeAt(S)):(_.push(parseInt(w.substring(S+1,S+3),16)),S+=2);return _}};h.NUMERIC_REGEX=/^[0-9]*$/,h.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,h.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let p=h;n.QrSegment=h})(Cl||(Cl={}));(n=>{(e=>{const t=class{constructor(c,h){this.ordinal=c,this.formatBits=h}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(n.QrCode||(n.QrCode={}))})(Cl||(Cl={}));(n=>{(e=>{const t=class{constructor(c,h){this.modeBits=c,this.numBitsCharCount=h}numCharCountBits(c){return this.numBitsCharCount[Math.floor((c+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(n.QrSegment||(n.QrSegment={}))})(Cl||(Cl={}));var pc=Cl;var FD={L:pc.QrCode.Ecc.LOW,M:pc.QrCode.Ecc.MEDIUM,Q:pc.QrCode.Ecc.QUARTILE,H:pc.QrCode.Ecc.HIGH},tC=128,nC="L",iC="#FFFFFF",rC="#000000",sC=!1,aC=1,zD=4,jD=0,HD=.1;function oC(n,e=0){const t=[];return n.forEach(function(s,c){let h=null;s.forEach(function(p,T){if(!p&&h!==null){t.push(`M${h+e} ${c+e}h${T-h}v1H${h+e}z`),h=null;return}if(T===s.length-1){if(!p)return;h===null?t.push(`M${T+e},${c+e} h1v1H${T+e}z`):t.push(`M${h+e},${c+e} h${T+1-h}v1H${h+e}z`);return}p&&h===null&&(h=T)})}),t.join("")}function lC(n,e){return n.slice().map((t,s)=>s<e.y||s>=e.y+e.h?t:t.map((c,h)=>h<e.x||h>=e.x+e.w?c:!1))}function GD(n,e,t,s){if(s==null)return null;const c=n.length+t*2,h=Math.floor(e*HD),p=c/e,T=(s.width||h)*p,w=(s.height||h)*p,_=s.x==null?n.length/2-T/2:s.x*p,S=s.y==null?n.length/2-w/2:s.y*p,b=s.opacity==null?1:s.opacity;let L=null;if(s.excavate){let W=Math.floor(_),Z=Math.floor(S),q=Math.ceil(T+_-W),pe=Math.ceil(w+S-Z);L={x:W,y:Z,w:q,h:pe}}const j=s.crossOrigin;return{x:_,y:S,h:w,w:T,excavation:L,opacity:b,crossOrigin:j}}function qD(n,e){return e!=null?Math.max(Math.floor(e),0):n?zD:jD}function cC({value:n,level:e,minVersion:t,includeMargin:s,marginSize:c,imageSettings:h,size:p,boostLevel:T}){let w=ci.useMemo(()=>{const W=(Array.isArray(n)?n:[n]).reduce((Z,q)=>(Z.push(...pc.QrSegment.makeSegments(q)),Z),[]);return pc.QrCode.encodeSegments(W,FD[e],t,void 0,void 0,T)},[n,e,t,T]);const{cells:_,margin:S,numCells:b,calculatedImageSettings:L}=ci.useMemo(()=>{let j=w.getModules();const W=qD(s,c),Z=j.length+W*2,q=GD(j,p,W,h);return{cells:j,margin:W,numCells:Z,calculatedImageSettings:q}},[w,p,h,s,c]);return{qrcode:w,margin:S,cells:_,numCells:b,calculatedImageSettings:L}}var YD=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),uC=ci.forwardRef(function(e,t){const s=e,{value:c,size:h=tC,level:p=nC,bgColor:T=iC,fgColor:w=rC,includeMargin:_=sC,minVersion:S=aC,boostLevel:b,marginSize:L,imageSettings:j}=s,Z=Pg(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:q}=Z,pe=Pg(Z,["style"]),le=j?.src,ne=ci.useRef(null),Re=ci.useRef(null),He=ci.useCallback(We=>{ne.current=We,typeof t=="function"?t(We):t&&(t.current=We)},[t]),[Be,U]=ci.useState(!1),{margin:F,cells:B,numCells:J,calculatedImageSettings:Y}=cC({value:c,level:p,minVersion:S,boostLevel:b,includeMargin:_,marginSize:L,imageSettings:j,size:h});ci.useEffect(()=>{if(ne.current!=null){const We=ne.current,he=We.getContext("2d");if(!he)return;let me=B;const xe=Re.current,Ye=Y!=null&&xe!==null&&xe.complete&&xe.naturalHeight!==0&&xe.naturalWidth!==0;Ye&&Y.excavation!=null&&(me=lC(B,Y.excavation));const lt=window.devicePixelRatio||1;We.height=We.width=h*lt;const mt=h/J*lt;he.scale(mt,mt),he.fillStyle=T,he.fillRect(0,0,J,J),he.fillStyle=w,YD?he.fill(new Path2D(oC(me,F))):B.forEach(function(ee,Ae){ee.forEach(function(Pe,ke){Pe&&he.fillRect(ke+F,Ae+F,1,1)})}),Y&&(he.globalAlpha=Y.opacity),Ye&&he.drawImage(xe,Y.x+F,Y.y+F,Y.w,Y.h)}}),ci.useEffect(()=>{U(!1)},[le]);const X=Lg({height:h,width:h},q);let G=null;return le!=null&&(G=ci.createElement("img",{src:le,key:le,style:{display:"none"},onLoad:()=>{U(!0)},ref:Re,crossOrigin:Y?.crossOrigin})),ci.createElement(ci.Fragment,null,ci.createElement("canvas",Lg({style:X,height:h,width:h,ref:He,role:"img"},pe)),G)});uC.displayName="QRCodeCanvas";var XD=ci.forwardRef(function(e,t){const s=e,{value:c,size:h=tC,level:p=nC,bgColor:T=iC,fgColor:w=rC,includeMargin:_=sC,minVersion:S=aC,boostLevel:b,title:L,marginSize:j,imageSettings:W}=s,Z=Pg(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:q,cells:pe,numCells:le,calculatedImageSettings:ne}=cC({value:c,level:p,minVersion:S,boostLevel:b,includeMargin:_,marginSize:j,imageSettings:W,size:h});let Re=pe,He=null;W!=null&&ne!=null&&(ne.excavation!=null&&(Re=lC(pe,ne.excavation)),He=ci.createElement("image",{href:W.src,height:ne.h,width:ne.w,x:ne.x+q,y:ne.y+q,preserveAspectRatio:"none",opacity:ne.opacity,crossOrigin:ne.crossOrigin}));const Be=oC(Re,q);return ci.createElement("svg",Lg({height:h,width:h,viewBox:`0 0 ${le} ${le}`,ref:t,role:"img"},Z),!!L&&ci.createElement("title",null,L),ci.createElement("path",{fill:T,d:`M0,0 h${le}v${le}H0z`,shapeRendering:"crispEdges"}),ci.createElement("path",{fill:w,d:Be,shapeRendering:"crispEdges"}),He)});XD.displayName="QRCodeSVG";const WD=()=>{const n=Ug(),[e,t]=ge.useState([]),[s,c]=ge.useState(null),[h,p]=ge.useState([]),[T,w]=ge.useState({name:"",category:""}),[_,S]=ge.useState(!0);ge.useEffect(()=>{const q=$R(Aa,pe=>{S(!1),pe||n("/")});return()=>q()},[n]),ge.useEffect(()=>{if(_||!Aa.currentUser)return;const q=Ng(dl(ms,"queues"),ND("adminId","==",Aa.currentUser.uid),Og("createdAt","desc")),pe=hd(q,le=>{t(le.docs.map(ne=>({id:ne.id,...ne.data()})))},le=>console.error("Lobby Error:",le));return()=>pe()},[_]),ge.useEffect(()=>{if(!s){p([]);return}const q=Ng(dl(ms,"queues",s.id,"waitlist"),Og("joinedAt","asc")),pe=hd(q,le=>{p(le.docs.map(ne=>({id:ne.id,...ne.data()})))},le=>console.error("Waitlist Error:",le));return()=>pe()},[s]);const b=async q=>{if(window.confirm(`Complete service for ${q.name}?`))try{if(q.calledAt){const le=new Date,ne=q.calledAt.toDate(),Re=(le-ne)/6e4;await Mg(dl(ms,"queues",s.id,"history"),{completedAt:Ff(),duration:parseFloat(Re.toFixed(2)),hourOfDay:new Date().getHours(),dayOfWeek:new Date().getDay()})}const pe=Uu(ms,"queues",s.id,"waitlist",q.id);await Dg(pe)}catch(pe){console.error("Error completing service:",pe)}},L=async()=>{try{localStorage.removeItem("activeQueueId"),await eN(Aa),n("/")}catch(q){console.error("Logout failed:",q)}},j=async q=>{if(q.preventDefault(),!(!T.name||!Aa.currentUser))try{await Mg(dl(ms,"queues"),{adminId:Aa.currentUser.uid,name:T.name,category:T.category||"General",createdAt:Ff(),status:"active"}),w({name:"",category:""})}catch(pe){console.error("Creation failed:",pe)}},W=async q=>{const pe=Uu(ms,"queues",s.id,"waitlist",q);await PD(pe,{status:"called",calledAt:Ff()})},Z=async(q,pe)=>{if(q.stopPropagation(),window.confirm("Delete this session and all its data?"))try{await Dg(Uu(ms,"queues",pe)),s?.id===pe&&c(null)}catch(le){console.error("Delete failed:",le)}};return _?re.jsx("div",{className:"h-screen flex items-center justify-center font-bold text-blue-600 animate-pulse",children:"AUTHENTICATING..."}):re.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col font-sans text-slate-900",children:[re.jsxs("header",{className:"bg-white/80 backdrop-blur-md border-b border-slate-200 px-8 py-4 flex justify-between items-center sticky top-0 z-50",children:[re.jsxs(zu,{to:"/",className:"flex items-center gap-3 group transition-transform active:scale-95",children:[re.jsx("div",{className:"bg-blue-600 p-2 rounded-xl shadow-lg shadow-blue-200 group-hover:bg-blue-700 transition-colors",children:re.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[re.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),re.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]})}),re.jsxs("span",{className:"font-display text-2xl font-black tracking-tight text-slate-800",children:["Queue",re.jsx("span",{className:"text-blue-600",children:"Flow"})]})]}),re.jsxs("div",{className:"flex items-center gap-6",children:[re.jsxs("div",{className:"hidden md:flex flex-col items-end",children:[re.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Administrator"}),re.jsx("span",{className:"text-sm font-bold text-slate-700",children:Aa.currentUser?.email})]}),re.jsx("button",{onClick:L,className:"bg-slate-900 text-white px-5 py-2.5 rounded-xl font-bold text-sm hover:bg-rose-600 transition-all shadow-md active:scale-95",children:"Logout"})]})]}),re.jsxs("div",{className:"flex-1 grid lg:grid-cols-12 overflow-hidden",children:[re.jsxs("aside",{className:"lg:col-span-3 bg-white border-r border-slate-200 p-6 flex flex-col gap-6 overflow-y-auto",children:[re.jsxs("div",{children:[re.jsx("h2",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4",children:"Create New Queue"}),re.jsxs("form",{onSubmit:j,className:"space-y-2",children:[re.jsx("input",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:border-blue-500 transition",placeholder:"Queue Name (e.g. Counter 1)",value:T.name,onChange:q=>w({...T,name:q.target.value}),required:!0}),re.jsx("input",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:border-blue-500 transition",placeholder:"Category (e.g. Service)",value:T.category,onChange:q=>w({...T,category:q.target.value})}),re.jsx("button",{className:"w-full bg-blue-600 text-white py-3 rounded-xl font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-100 transition-all",children:"Add Session"})]})]}),re.jsx("hr",{className:"border-slate-100"}),re.jsxs("div",{className:"flex-1",children:[re.jsx("h2",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4",children:"Active Sessions"}),re.jsx("div",{className:"space-y-2",children:e.map(q=>re.jsxs("div",{className:"group relative",children:[re.jsxs("button",{onClick:()=>c(q),className:`w-full text-left p-4 rounded-2xl border-2 transition-all ${s?.id===q.id?"border-blue-500 bg-blue-50":"border-transparent bg-slate-50 hover:bg-slate-100"}`,children:[re.jsx("p",{className:"font-bold text-sm truncate pr-6",children:q.name}),re.jsx("p",{className:"text-[10px] text-blue-500 font-bold uppercase",children:q.category})]}),re.jsx("button",{onClick:pe=>Z(pe,q.id),className:"absolute top-4 right-3 opacity-0 group-hover:opacity-100 p-1 text-slate-400 hover:text-rose-500 transition-all",children:re.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[re.jsx("path",{d:"M3 6h18"}),re.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),re.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]})})]},q.id))})]})]}),re.jsx("main",{className:"lg:col-span-9 p-8 overflow-y-auto",children:s?re.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[re.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-200 flex flex-col md:flex-row items-center gap-8",children:[re.jsx("div",{className:"bg-white p-3 rounded-2xl border border-slate-100 shadow-md",children:re.jsx(uC,{value:`${window.location.origin}/user?id=${s.id}`,size:160})}),re.jsxs("div",{className:"text-center md:text-left",children:[re.jsx("h2",{className:"text-3xl font-black mb-1",children:s.name}),re.jsxs("p",{className:"text-slate-500 text-sm mb-4",children:["Manage the live waitlist for ",s.category,"."]}),re.jsx("div",{className:"inline-block bg-blue-50 text-blue-600 px-4 py-1 rounded-full text-[10px] font-black uppercase tracking-widest",children:"Live Now"})]})]}),re.jsxs("div",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-200 overflow-hidden",children:[re.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[re.jsx("h3",{className:"font-bold",children:"Waitlist Customers"}),re.jsxs("span",{className:"text-xs font-bold text-slate-400",children:[h.filter(q=>q.status==="waiting").length," waiting"]})]}),re.jsxs("div",{className:"p-6 space-y-3",children:[h.length===0&&re.jsx("p",{className:"text-center py-10 text-slate-400 text-sm italic",children:"No one in line yet..."}),h.map(q=>re.jsxs("div",{className:`flex justify-between items-center p-4 rounded-2xl border-2 transition-all ${q.status==="called"?"bg-emerald-50 border-emerald-500":"bg-white border-slate-100"}`,children:[re.jsxs("div",{className:"flex items-center gap-4",children:[re.jsx("div",{className:`w-12 h-12 flex items-center justify-center rounded-xl font-black ${q.status==="called"?"bg-emerald-500 text-white":"bg-slate-200 text-slate-600"}`,children:q.tokenNumber}),re.jsxs("div",{children:[re.jsx("h4",{className:"font-bold text-slate-800",children:q.name}),re.jsx("p",{className:"text-[10px] uppercase font-black text-slate-400",children:q.status})]})]}),re.jsxs("div",{className:"flex gap-2",children:[q.status==="waiting"&&re.jsx("button",{onClick:()=>W(q.id),className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-bold text-xs",children:"CALL"}),re.jsx("button",{onClick:()=>b(q),className:"bg-slate-100 text-slate-400 hover:bg-rose-100 hover:text-rose-600 p-2 rounded-lg transition-all",title:"Complete/Remove",children:re.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[re.jsx("polyline",{points:"3 6 5 6 21 6"}),re.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]},q.id))]})]})]}):re.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-300",children:[re.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"mb-4 text-slate-200",children:[re.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),re.jsx("line",{x1:"9",y1:"3",x2:"9",y2:"21"})]}),re.jsx("p",{className:"font-black text-sm uppercase tracking-widest",children:"Select a session from the lobby"})]})})]})]})};var je;(function(n){n[n.QR_CODE=0]="QR_CODE",n[n.AZTEC=1]="AZTEC",n[n.CODABAR=2]="CODABAR",n[n.CODE_39=3]="CODE_39",n[n.CODE_93=4]="CODE_93",n[n.CODE_128=5]="CODE_128",n[n.DATA_MATRIX=6]="DATA_MATRIX",n[n.MAXICODE=7]="MAXICODE",n[n.ITF=8]="ITF",n[n.EAN_13=9]="EAN_13",n[n.EAN_8=10]="EAN_8",n[n.PDF_417=11]="PDF_417",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(je||(je={}));var iA=new Map([[je.QR_CODE,"QR_CODE"],[je.AZTEC,"AZTEC"],[je.CODABAR,"CODABAR"],[je.CODE_39,"CODE_39"],[je.CODE_93,"CODE_93"],[je.CODE_128,"CODE_128"],[je.DATA_MATRIX,"DATA_MATRIX"],[je.MAXICODE,"MAXICODE"],[je.ITF,"ITF"],[je.EAN_13,"EAN_13"],[je.EAN_8,"EAN_8"],[je.PDF_417,"PDF_417"],[je.RSS_14,"RSS_14"],[je.RSS_EXPANDED,"RSS_EXPANDED"],[je.UPC_A,"UPC_A"],[je.UPC_E,"UPC_E"],[je.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),rA;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.URL=1]="URL"})(rA||(rA={}));function QD(n){return Object.values(je).includes(n)}var Lo;(function(n){n[n.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",n[n.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Lo||(Lo={}));var ps=(function(){function n(){}return n.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",n.SCAN_DEFAULT_FPS=2,n.DEFAULT_DISABLE_FLIP=!1,n.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,n.DEFAULT_SUPPORTED_SCAN_TYPE=[Lo.SCAN_TYPE_CAMERA,Lo.SCAN_TYPE_FILE],n})(),hC=(function(){function n(e,t){this.format=e,this.formatName=t}return n.prototype.toString=function(){return this.formatName},n.create=function(e){if(!iA.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new n(e,iA.get(e))},n})(),sA=(function(){function n(){}return n.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},n.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},n})(),kg;(function(n){n[n.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",n[n.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",n[n.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(kg||(kg={}));var fC=(function(){function n(){}return n.createFrom=function(e){return{errorMessage:e,type:kg.UNKWOWN_ERROR}},n})(),dC=(function(){function n(e){this.verbose=e}return n.prototype.log=function(e){this.verbose&&console.log(e)},n.prototype.warn=function(e){this.verbose&&console.warn(e)},n.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},n.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},n})();function Ls(n){return typeof n>"u"||n===null}function KD(n,e,t){return n>t?t:n<e?e:n}var yc=(function(){function n(){}return n.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},n.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},n.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},n.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},n.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},n.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},n.scannerPaused=function(){return"Scanner paused"},n})(),an=(function(){function n(){}return n.scanningStatus=function(){return"Scanning"},n.idleStatus=function(){return"Idle"},n.errorStatus=function(){return"Error"},n.permissionStatus=function(){return"Permission"},n.noCameraFoundErrorStatus=function(){return"No Cameras"},n.lastMatch=function(e){return"Last Match: ".concat(e)},n.codeScannerTitle=function(){return"Code Scanner"},n.cameraPermissionTitle=function(){return"Request Camera Permissions"},n.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},n.noCameraFound=function(){return"No camera found"},n.scanButtonStopScanningText=function(){return"Stop Scanning"},n.scanButtonStartScanningText=function(){return"Start Scanning"},n.torchOnButton=function(){return"Switch On Torch"},n.torchOffButton=function(){return"Switch Off Torch"},n.torchOnFailedMessage=function(){return"Failed to turn on torch"},n.torchOffFailedMessage=function(){return"Failed to turn off torch"},n.scanButtonScanningStarting=function(){return"Launching Camera..."},n.textIfCameraScanSelected=function(){return"Scan an Image File"},n.textIfFileScanSelected=function(){return"Scan using camera directly"},n.selectCamera=function(){return"Select Camera"},n.fileSelectionChooseImage=function(){return"Choose Image"},n.fileSelectionChooseAnother=function(){return"Choose Another"},n.fileSelectionNoImageSelected=function(){return"No image choosen"},n.anonymousCameraPrefix=function(){return"Anonymous Camera"},n.dragAndDropMessage=function(){return"Or drop an image to scan"},n.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},n.zoom=function(){return"zoom"},n.loadingImage=function(){return"Loading image..."},n.cameraScanAltText=function(){return"Camera based scan"},n.fileScanAltText=function(){return"Fule based scan"},n})(),aA=(function(){function n(){}return n.poweredBy=function(){return"Powered by "},n.reportIssues=function(){return"Report issues"},n})(),gC=(function(){function n(){}return n.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var s=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(s,"."),!0),!1}for(var c=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],h=new Set(c),p=Object.keys(e),T=0,w=p;T<w.length;T++){var _=w[T];if(h.has(_))return t.logError("".concat(_," is not supported videoConstaints."),!0),!1}return!0},n})(),Ou={exports:{}},ZD=Ou.exports,oA;function JD(){return oA||(oA=1,(function(n,e){(function(t,s){s(e)})(ZD,(function(t){function s(D){return D==null}var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,r){D.__proto__=r}||function(D,r){for(var o in r)r.hasOwnProperty(o)&&(D[o]=r[o])};function h(D,r){c(D,r);function o(){this.constructor=D}D.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}function p(D,r){var o=Object.setPrototypeOf;o?o(D,r):D.__proto__=r}function T(D,r){r===void 0&&(r=D.constructor);var o=Error.captureStackTrace;o&&o(D,r)}var w=(function(D){h(r,D);function r(o){var l=this.constructor,f=D.call(this,o)||this;return Object.defineProperty(f,"name",{value:l.name,enumerable:!1}),p(f,l.prototype),T(f),f}return r})(Error);class _ extends w{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}_.kind="Exception";class S extends _{}S.kind="ArgumentException";class b extends _{}b.kind="IllegalArgumentException";class L{constructor(r){if(this.binarizer=r,r===null)throw new b("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,o){return this.binarizer.getBlackRow(r,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,o,l,f){const d=this.binarizer.getLuminanceSource().crop(r,o,l,f);return new L(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new L(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new L(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class j extends _{static getChecksumInstance(){return new j}}j.kind="ChecksumException";class W{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class Z{static arraycopy(r,o,l,f,d){for(;d--;)l[f++]=r[o++]}static currentTimeMillis(){return Date.now()}}class q extends _{}q.kind="IndexOutOfBoundsException";class pe extends q{constructor(r=void 0,o=void 0){super(o),this.index=r,this.message=o}}pe.kind="ArrayIndexOutOfBoundsException";class le{static fill(r,o){for(let l=0,f=r.length;l<f;l++)r[l]=o}static fillWithin(r,o,l,f){le.rangeCheck(r.length,o,l);for(let d=o;d<l;d++)r[d]=f}static rangeCheck(r,o,l){if(o>l)throw new b("fromIndex("+o+") > toIndex("+l+")");if(o<0)throw new pe(o);if(l>r)throw new pe(l)}static asList(...r){return r}static create(r,o,l){return Array.from({length:r}).map(d=>Array.from({length:o}).fill(l))}static createInt32Array(r,o,l){return Array.from({length:r}).map(d=>Int32Array.from({length:o}).fill(l))}static equals(r,o){if(!r||!o||!r.length||!o.length||r.length!==o.length)return!1;for(let l=0,f=r.length;l<f;l++)if(r[l]!==o[l])return!1;return!0}static hashCode(r){if(r===null)return 0;let o=1;for(const l of r)o=31*o+l;return o}static fillUint8Array(r,o){for(let l=0;l!==r.length;l++)r[l]=o}static copyOf(r,o){return r.slice(0,o)}static copyOfUint8Array(r,o){if(r.length<=o){const l=new Uint8Array(o);return l.set(r),l}return r.slice(0,o)}static copyOfRange(r,o,l){const f=l-o,d=new Int32Array(f);return Z.arraycopy(r,o,d,0,f),d}static binarySearch(r,o,l){l===void 0&&(l=le.numberComparator);let f=0,d=r.length-1;for(;f<=d;){const m=d+f>>1,E=l(o,r[m]);if(E>0)f=m+1;else if(E<0)d=m-1;else return m}return-f-1}static numberComparator(r,o){return r-o}}class ne{static numberOfTrailingZeros(r){let o;if(r===0)return 32;let l=31;return o=r<<16,o!==0&&(l-=16,r=o),o=r<<8,o!==0&&(l-=8,r=o),o=r<<4,o!==0&&(l-=4,r=o),o=r<<2,o!==0&&(l-=2,r=o),l-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let o=1;return r>>>16||(o+=16,r<<=16),r>>>24||(o+=8,r<<=8),r>>>28||(o+=4,r<<=4),r>>>30||(o+=2,r<<=2),o-=r>>>31,o}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,o){return Math.trunc(r/o)}static parseInt(r,o=void 0){return parseInt(r,o)}}ne.MIN_VALUE_32_BITS=-2147483648,ne.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Re{constructor(r,o){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,o==null?this.bits=Re.makeArray(r):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const o=Re.makeArray(r);Z.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const o=this.size;if(r>=o)return o;const l=this.bits;let f=Math.floor(r/32),d=l[f];d&=~((1<<(r&31))-1);const m=l.length;for(;d===0;){if(++f===m)return o;d=l[f]}const E=f*32+ne.numberOfTrailingZeros(d);return E>o?o:E}getNextUnset(r){const o=this.size;if(r>=o)return o;const l=this.bits;let f=Math.floor(r/32),d=~l[f];d&=~((1<<(r&31))-1);const m=l.length;for(;d===0;){if(++f===m)return o;d=~l[f]}const E=f*32+ne.numberOfTrailingZeros(d);return E>o?o:E}setBulk(r,o){this.bits[Math.floor(r/32)]=o}setRange(r,o){if(o<r||r<0||o>this.size)throw new b;if(o===r)return;o--;const l=Math.floor(r/32),f=Math.floor(o/32),d=this.bits;for(let m=l;m<=f;m++){const E=m>l?0:r&31,v=(2<<(m<f?31:o&31))-(1<<E);d[m]|=v}}clear(){const r=this.bits.length,o=this.bits;for(let l=0;l<r;l++)o[l]=0}isRange(r,o,l){if(o<r||r<0||o>this.size)throw new b;if(o===r)return!0;o--;const f=Math.floor(r/32),d=Math.floor(o/32),m=this.bits;for(let E=f;E<=d;E++){const x=E>f?0:r&31,R=(2<<(E<d?31:o&31))-(1<<x)&4294967295;if((m[E]&R)!==(l?R:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,o){if(o<0||o>32)throw new b("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let l=o;l>0;l--)this.appendBit((r>>l-1&1)===1)}appendBitArray(r){const o=r.size;this.ensureCapacity(this.size+o);for(let l=0;l<o;l++)this.appendBit(r.get(l))}xor(r){if(this.size!==r.size)throw new b("Sizes don't match");const o=this.bits;for(let l=0,f=o.length;l<f;l++)o[l]^=r.bits[l]}toBytes(r,o,l,f){for(let d=0;d<f;d++){let m=0;for(let E=0;E<8;E++)this.get(r)&&(m|=1<<7-E),r++;o[l+d]=m}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),l=o+1,f=this.bits;for(let d=0;d<l;d++){let m=f[d];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,r[o-d]=m}if(this.size!==l*32){const d=l*32-this.size;let m=r[0]>>>d;for(let E=1;E<l;E++){const x=r[E];m|=x<<32-d,r[E-1]=m,m=x>>>d}r[l-1]=m}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof Re))return!1;const o=r;return this.size===o.size&&le.equals(this.bits,o.bits)}hashCode(){return 31*this.size+le.hashCode(this.bits)}toString(){let r="";for(let o=0,l=this.size;o<l;o++)(o&7)===0&&(r+=" "),r+=this.get(o)?"X":".";return r}clone(){return new Re(this.size,this.bits.slice())}}var He;(function(D){D[D.OTHER=0]="OTHER",D[D.PURE_BARCODE=1]="PURE_BARCODE",D[D.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",D[D.TRY_HARDER=3]="TRY_HARDER",D[D.CHARACTER_SET=4]="CHARACTER_SET",D[D.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",D[D.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",D[D.ASSUME_GS1=7]="ASSUME_GS1",D[D.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",D[D.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",D[D.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(He||(He={}));var Be=He;class U extends _{static getFormatInstance(){return new U}}U.kind="FormatException";var F;(function(D){D[D.Cp437=0]="Cp437",D[D.ISO8859_1=1]="ISO8859_1",D[D.ISO8859_2=2]="ISO8859_2",D[D.ISO8859_3=3]="ISO8859_3",D[D.ISO8859_4=4]="ISO8859_4",D[D.ISO8859_5=5]="ISO8859_5",D[D.ISO8859_6=6]="ISO8859_6",D[D.ISO8859_7=7]="ISO8859_7",D[D.ISO8859_8=8]="ISO8859_8",D[D.ISO8859_9=9]="ISO8859_9",D[D.ISO8859_10=10]="ISO8859_10",D[D.ISO8859_11=11]="ISO8859_11",D[D.ISO8859_13=12]="ISO8859_13",D[D.ISO8859_14=13]="ISO8859_14",D[D.ISO8859_15=14]="ISO8859_15",D[D.ISO8859_16=15]="ISO8859_16",D[D.SJIS=16]="SJIS",D[D.Cp1250=17]="Cp1250",D[D.Cp1251=18]="Cp1251",D[D.Cp1252=19]="Cp1252",D[D.Cp1256=20]="Cp1256",D[D.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",D[D.UTF8=22]="UTF8",D[D.ASCII=23]="ASCII",D[D.Big5=24]="Big5",D[D.GB18030=25]="GB18030",D[D.EUC_KR=26]="EUC_KR"})(F||(F={}));class B{constructor(r,o,l,...f){this.valueIdentifier=r,this.name=l,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=f,B.VALUE_IDENTIFIER_TO_ECI.set(r,this),B.NAME_TO_ECI.set(l,this);const d=this.values;for(let m=0,E=d.length;m!==E;m++){const x=d[m];B.VALUES_TO_ECI.set(x,this)}for(const m of f)B.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new U("incorect value");const o=B.VALUES_TO_ECI.get(r);if(o===void 0)throw new U("incorect value");return o}static getCharacterSetECIByName(r){const o=B.NAME_TO_ECI.get(r);if(o===void 0)throw new U("incorect value");return o}equals(r){if(!(r instanceof B))return!1;const o=r;return this.getName()===o.getName()}}B.VALUE_IDENTIFIER_TO_ECI=new Map,B.VALUES_TO_ECI=new Map,B.NAME_TO_ECI=new Map,B.Cp437=new B(F.Cp437,Int32Array.from([0,2]),"Cp437"),B.ISO8859_1=new B(F.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),B.ISO8859_2=new B(F.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),B.ISO8859_3=new B(F.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),B.ISO8859_4=new B(F.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),B.ISO8859_5=new B(F.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),B.ISO8859_6=new B(F.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),B.ISO8859_7=new B(F.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),B.ISO8859_8=new B(F.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),B.ISO8859_9=new B(F.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),B.ISO8859_10=new B(F.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),B.ISO8859_11=new B(F.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),B.ISO8859_13=new B(F.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),B.ISO8859_14=new B(F.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),B.ISO8859_15=new B(F.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),B.ISO8859_16=new B(F.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),B.SJIS=new B(F.SJIS,20,"SJIS","Shift_JIS"),B.Cp1250=new B(F.Cp1250,21,"Cp1250","windows-1250"),B.Cp1251=new B(F.Cp1251,22,"Cp1251","windows-1251"),B.Cp1252=new B(F.Cp1252,23,"Cp1252","windows-1252"),B.Cp1256=new B(F.Cp1256,24,"Cp1256","windows-1256"),B.UnicodeBigUnmarked=new B(F.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),B.UTF8=new B(F.UTF8,26,"UTF8","UTF-8"),B.ASCII=new B(F.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),B.Big5=new B(F.Big5,28,"Big5"),B.GB18030=new B(F.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),B.EUC_KR=new B(F.EUC_KR,30,"EUC_KR","EUC-KR");class J extends _{}J.kind="UnsupportedOperationException";class Y{static decode(r,o){const l=this.encodingName(o);return this.customDecoder?this.customDecoder(r,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(r,l):new TextDecoder(l).decode(r)}static shouldDecodeOnFallback(r){return!Y.isBrowser()&&r==="ISO-8859-1"}static encode(r,o){const l=this.encodingName(o);return this.customEncoder?this.customEncoder(r,l):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof B?r:B.getCharacterSetECIByName(r)}static decodeFallback(r,o){const l=this.encodingCharacterSet(o);if(Y.isDecodeFallbackSupported(l)){let f="";for(let d=0,m=r.length;d<m;d++){let E=r[d].toString(16);E.length<2&&(E="0"+E),f+="%"+E}return decodeURIComponent(f)}if(l.equals(B.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new J(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(B.UTF8)||r.equals(B.ISO8859_1)||r.equals(B.ASCII)}static encodeFallback(r){const l=btoa(unescape(encodeURIComponent(r))).split(""),f=[];for(let d=0;d<l.length;d++)f.push(l[d].charCodeAt(0));return new Uint8Array(f)}}class X{static castAsNonUtf8Char(r,o=null){const l=o?o.getName():this.ISO88591;return Y.decode(new Uint8Array([r]),l)}static guessEncoding(r,o){if(o!=null&&o.get(Be.CHARACTER_SET)!==void 0)return o.get(Be.CHARACTER_SET).toString();const l=r.length;let f=!0,d=!0,m=!0,E=0,x=0,v=0,R=0,M=0,P=0,H=0,K=0,$=0,ae=0,ye=0;const De=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let Oe=0;Oe<l&&(f||d||m);Oe++){const be=r[Oe]&255;m&&(E>0?(be&128)===0?m=!1:E--:(be&128)!==0&&((be&64)===0?m=!1:(E++,(be&32)===0?x++:(E++,(be&16)===0?v++:(E++,(be&8)===0?R++:m=!1))))),f&&(be>127&&be<160?f=!1:be>159&&(be<192||be===215||be===247)&&ye++),d&&(M>0?be<64||be===127||be>252?d=!1:M--:be===128||be===160||be>239?d=!1:be>160&&be<224?(P++,K=0,H++,H>$&&($=H)):be>127?(M++,H=0,K++,K>ae&&(ae=K)):(H=0,K=0))}return m&&E>0&&(m=!1),d&&M>0&&(d=!1),m&&(De||x+v+R>0)?X.UTF8:d&&(X.ASSUME_SHIFT_JIS||$>=3||ae>=3)?X.SHIFT_JIS:f&&d?$===2&&P===2||ye*10>=l?X.SHIFT_JIS:X.ISO88591:f?X.ISO88591:d?X.SHIFT_JIS:m?X.UTF8:X.PLATFORM_DEFAULT_ENCODING}static format(r,...o){let l=-1;function f(m,E,x,v,R,M){if(m==="%%")return"%";if(o[++l]===void 0)return;m=v?parseInt(v.substr(1)):void 0;let P=R?parseInt(R.substr(1)):void 0,H;switch(M){case"s":H=o[l];break;case"c":H=o[l][0];break;case"f":H=parseFloat(o[l]).toFixed(m);break;case"p":H=parseFloat(o[l]).toPrecision(m);break;case"e":H=parseFloat(o[l]).toExponential(m);break;case"x":H=parseInt(o[l]).toString(P||16);break;case"d":H=parseFloat(parseInt(o[l],P||10).toPrecision(m)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(P);let K=parseInt(x),$=x&&x[0]+""=="0"?"0":" ";for(;H.length<K;)H=E!==void 0?H+$:$+H;return H}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,f)}static getBytes(r,o){return Y.encode(r,o)}static getCharCode(r,o=0){return r.charCodeAt(o)}static getCharAt(r){return String.fromCharCode(r)}}X.SHIFT_JIS=B.SJIS.getName(),X.GB2312="GB2312",X.ISO88591=B.ISO8859_1.getName(),X.EUC_JP="EUC_JP",X.UTF8=B.UTF8.getName(),X.PLATFORM_DEFAULT_ENCODING=X.UTF8,X.ASSUME_SHIFT_JIS=!1;class G{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=X.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,o,l){for(let f=o;o<o+l;f++)this.append(r[f]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,o){this.value=this.value.substr(0,r)+o+this.value.substr(r+1)}substring(r,o){return this.value.substring(r,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,o){this.value=this.value.substr(0,r)+o+this.value.substr(r+o.length)}}class We{constructor(r,o,l,f){if(this.width=r,this.height=o,this.rowSize=l,this.bits=f,o==null&&(o=r),this.height=o,r<1||o<1)throw new b("Both dimensions must be greater than 0");l==null&&(l=Math.floor((r+31)/32)),this.rowSize=l,f==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const o=r.length,l=r[0].length,f=new We(l,o);for(let d=0;d<o;d++){const m=r[d];for(let E=0;E<l;E++)m[E]&&f.set(E,d)}return f}static parseFromString(r,o,l){if(r===null)throw new b("stringRepresentation cannot be null");const f=new Array(r.length);let d=0,m=0,E=-1,x=0,v=0;for(;v<r.length;)if(r.charAt(v)===`
`||r.charAt(v)==="\r"){if(d>m){if(E===-1)E=d-m;else if(d-m!==E)throw new b("row lengths do not match");m=d,x++}v++}else if(r.substring(v,v+o.length)===o)v+=o.length,f[d]=!0,d++;else if(r.substring(v,v+l.length)===l)v+=l.length,f[d]=!1,d++;else throw new b("illegal character encountered: "+r.substring(v));if(d>m){if(E===-1)E=d-m;else if(d-m!==E)throw new b("row lengths do not match");x++}const R=new We(E,x);for(let M=0;M<d;M++)f[M]&&R.set(Math.floor(M%E),Math.floor(M/E));return R}get(r,o){const l=o*this.rowSize+Math.floor(r/32);return(this.bits[l]>>>(r&31)&1)!==0}set(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]|=1<<(r&31)&4294967295}unset(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]&=~(1<<(r&31)&4294967295)}flip(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new b("input matrix dimensions do not match");const o=new Re(Math.floor(this.width/32)+1),l=this.rowSize,f=this.bits;for(let d=0,m=this.height;d<m;d++){const E=d*l,x=r.getRow(d,o).getBitArray();for(let v=0;v<l;v++)f[E+v]^=x[v]}}clear(){const r=this.bits,o=r.length;for(let l=0;l<o;l++)r[l]=0}setRegion(r,o,l,f){if(o<0||r<0)throw new b("Left and top must be nonnegative");if(f<1||l<1)throw new b("Height and width must be at least 1");const d=r+l,m=o+f;if(m>this.height||d>this.width)throw new b("The region must fit inside the matrix");const E=this.rowSize,x=this.bits;for(let v=o;v<m;v++){const R=v*E;for(let M=r;M<d;M++)x[R+Math.floor(M/32)]|=1<<(M&31)&4294967295}}getRow(r,o){o==null||o.getSize()<this.width?o=new Re(this.width):o.clear();const l=this.rowSize,f=this.bits,d=r*l;for(let m=0;m<l;m++)o.setBulk(m*32,f[d+m]);return o}setRow(r,o){Z.arraycopy(o.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),o=this.getHeight();let l=new Re(r),f=new Re(r);for(let d=0,m=Math.floor((o+1)/2);d<m;d++)l=this.getRow(d,l),f=this.getRow(o-1-d,f),l.reverse(),f.reverse(),this.setRow(d,f),this.setRow(o-1-d,l)}getEnclosingRectangle(){const r=this.width,o=this.height,l=this.rowSize,f=this.bits;let d=r,m=o,E=-1,x=-1;for(let v=0;v<o;v++)for(let R=0;R<l;R++){const M=f[v*l+R];if(M!==0){if(v<m&&(m=v),v>x&&(x=v),R*32<d){let P=0;for(;(M<<31-P&4294967295)===0;)P++;R*32+P<d&&(d=R*32+P)}if(R*32+31>E){let P=31;for(;!(M>>>P);)P--;R*32+P>E&&(E=R*32+P)}}}return E<d||x<m?null:Int32Array.from([d,m,E-d+1,x-m+1])}getTopLeftOnBit(){const r=this.rowSize,o=this.bits;let l=0;for(;l<o.length&&o[l]===0;)l++;if(l===o.length)return null;const f=l/r;let d=l%r*32;const m=o[l];let E=0;for(;(m<<31-E&4294967295)===0;)E++;return d+=E,Int32Array.from([d,f])}getBottomRightOnBit(){const r=this.rowSize,o=this.bits;let l=o.length-1;for(;l>=0&&o[l]===0;)l--;if(l<0)return null;const f=Math.floor(l/r);let d=Math.floor(l%r)*32;const m=o[l];let E=31;for(;!(m>>>E);)E--;return d+=E,Int32Array.from([d,f])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof We))return!1;const o=r;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&le.equals(this.bits,o.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+le.hashCode(this.bits),r}toString(r="X ",o="  ",l=`
`){return this.buildToString(r,o,l)}buildToString(r,o,l){let f=new G;for(let d=0,m=this.height;d<m;d++){for(let E=0,x=this.width;E<x;E++)f.append(this.get(E,d)?r:o);f.append(l)}return f.toString()}clone(){return new We(this.width,this.height,this.rowSize,this.bits.slice())}}class he extends _{static getNotFoundInstance(){return new he}}he.kind="NotFoundException";class me extends W{constructor(r){super(r),this.luminances=me.EMPTY,this.buckets=new Int32Array(me.LUMINANCE_BUCKETS)}getBlackRow(r,o){const l=this.getLuminanceSource(),f=l.getWidth();o==null||o.getSize()<f?o=new Re(f):o.clear(),this.initArrays(f);const d=l.getRow(r,this.luminances),m=this.buckets;for(let x=0;x<f;x++)m[(d[x]&255)>>me.LUMINANCE_SHIFT]++;const E=me.estimateBlackPoint(m);if(f<3)for(let x=0;x<f;x++)(d[x]&255)<E&&o.set(x);else{let x=d[0]&255,v=d[1]&255;for(let R=1;R<f-1;R++){const M=d[R+1]&255;(v*4-x-M)/2<E&&o.set(R),x=v,v=M}}return o}getBlackMatrix(){const r=this.getLuminanceSource(),o=r.getWidth(),l=r.getHeight(),f=new We(o,l);this.initArrays(o);const d=this.buckets;for(let x=1;x<5;x++){const v=Math.floor(l*x/5),R=r.getRow(v,this.luminances),M=Math.floor(o*4/5);for(let P=Math.floor(o/5);P<M;P++){const H=R[P]&255;d[H>>me.LUMINANCE_SHIFT]++}}const m=me.estimateBlackPoint(d),E=r.getMatrix();for(let x=0;x<l;x++){const v=x*o;for(let R=0;R<o;R++)(E[v+R]&255)<m&&f.set(R,x)}return f}createBinarizer(r){return new me(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const o=this.buckets;for(let l=0;l<me.LUMINANCE_BUCKETS;l++)o[l]=0}static estimateBlackPoint(r){const o=r.length;let l=0,f=0,d=0;for(let R=0;R<o;R++)r[R]>d&&(f=R,d=r[R]),r[R]>l&&(l=r[R]);let m=0,E=0;for(let R=0;R<o;R++){const M=R-f,P=r[R]*M*M;P>E&&(m=R,E=P)}if(f>m){const R=f;f=m,m=R}if(m-f<=o/16)throw new he;let x=m-1,v=-1;for(let R=m-1;R>f;R--){const M=R-f,P=M*M*(m-R)*(l-r[R]);P>v&&(x=R,v=P)}return x<<me.LUMINANCE_SHIFT}}me.LUMINANCE_BITS=5,me.LUMINANCE_SHIFT=8-me.LUMINANCE_BITS,me.LUMINANCE_BUCKETS=1<<me.LUMINANCE_BITS,me.EMPTY=Uint8ClampedArray.from([0]);class xe extends me{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),o=r.getWidth(),l=r.getHeight();if(o>=xe.MINIMUM_DIMENSION&&l>=xe.MINIMUM_DIMENSION){const f=r.getMatrix();let d=o>>xe.BLOCK_SIZE_POWER;(o&xe.BLOCK_SIZE_MASK)!==0&&d++;let m=l>>xe.BLOCK_SIZE_POWER;(l&xe.BLOCK_SIZE_MASK)!==0&&m++;const E=xe.calculateBlackPoints(f,d,m,o,l),x=new We(o,l);xe.calculateThresholdForBlock(f,d,m,o,l,E,x),this.matrix=x}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new xe(r)}static calculateThresholdForBlock(r,o,l,f,d,m,E){const x=d-xe.BLOCK_SIZE,v=f-xe.BLOCK_SIZE;for(let R=0;R<l;R++){let M=R<<xe.BLOCK_SIZE_POWER;M>x&&(M=x);const P=xe.cap(R,2,l-3);for(let H=0;H<o;H++){let K=H<<xe.BLOCK_SIZE_POWER;K>v&&(K=v);const $=xe.cap(H,2,o-3);let ae=0;for(let De=-2;De<=2;De++){const Oe=m[P+De];ae+=Oe[$-2]+Oe[$-1]+Oe[$]+Oe[$+1]+Oe[$+2]}const ye=ae/25;xe.thresholdBlock(r,K,M,ye,f,E)}}}static cap(r,o,l){return r<o?o:r>l?l:r}static thresholdBlock(r,o,l,f,d,m){for(let E=0,x=l*d+o;E<xe.BLOCK_SIZE;E++,x+=d)for(let v=0;v<xe.BLOCK_SIZE;v++)(r[x+v]&255)<=f&&m.set(o+v,l+E)}static calculateBlackPoints(r,o,l,f,d){const m=d-xe.BLOCK_SIZE,E=f-xe.BLOCK_SIZE,x=new Array(l);for(let v=0;v<l;v++){x[v]=new Int32Array(o);let R=v<<xe.BLOCK_SIZE_POWER;R>m&&(R=m);for(let M=0;M<o;M++){let P=M<<xe.BLOCK_SIZE_POWER;P>E&&(P=E);let H=0,K=255,$=0;for(let ye=0,De=R*f+P;ye<xe.BLOCK_SIZE;ye++,De+=f){for(let Oe=0;Oe<xe.BLOCK_SIZE;Oe++){const be=r[De+Oe]&255;H+=be,be<K&&(K=be),be>$&&($=be)}if($-K>xe.MIN_DYNAMIC_RANGE)for(ye++,De+=f;ye<xe.BLOCK_SIZE;ye++,De+=f)for(let Oe=0;Oe<xe.BLOCK_SIZE;Oe++)H+=r[De+Oe]&255}let ae=H>>xe.BLOCK_SIZE_POWER*2;if($-K<=xe.MIN_DYNAMIC_RANGE&&(ae=K/2,v>0&&M>0)){const ye=(x[v-1][M]+2*x[v][M-1]+x[v-1][M-1])/4;K<ye&&(ae=ye)}x[v][M]=ae}}return x}}xe.BLOCK_SIZE_POWER=3,xe.BLOCK_SIZE=1<<xe.BLOCK_SIZE_POWER,xe.BLOCK_SIZE_MASK=xe.BLOCK_SIZE-1,xe.MINIMUM_DIMENSION=xe.BLOCK_SIZE*5,xe.MIN_DYNAMIC_RANGE=24;class Ye{constructor(r,o){this.width=r,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,o,l,f){throw new J("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new J("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new J("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let o=new G;for(let l=0;l<this.height;l++){const f=this.getRow(l,r);for(let d=0;d<this.width;d++){const m=f[d]&255;let E;m<64?E="#":m<128?E="+":m<192?E=".":E=" ",o.append(E)}o.append(`
`)}return o.toString()}}class lt extends Ye{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,o){const l=this.delegate.getRow(r,o),f=this.getWidth();for(let d=0;d<f;d++)l[d]=255-(l[d]&255);return l}getMatrix(){const r=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(o);for(let f=0;f<o;f++)l[f]=255-(r[f]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(r,o,l,f){return new lt(this.delegate.crop(r,o,l,f))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new lt(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new lt(this.delegate.rotateCounterClockwise45())}}class mt extends Ye{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=mt.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const o=r.getContext("2d").getImageData(0,0,r.width,r.height);return mt.toGrayscaleBuffer(o.data,r.width,r.height)}static toGrayscaleBuffer(r,o,l){const f=new Uint8ClampedArray(o*l);for(let d=0,m=0,E=r.length;d<E;d+=4,m++){let x;if(r[d+3]===0)x=255;else{const R=r[d],M=r[d+1],P=r[d+2];x=306*R+601*M+117*P+512>>10}f[m]=x}return f}getRow(r,o){if(r<0||r>=this.getHeight())throw new b("Requested row is outside the image: "+r);const l=this.getWidth(),f=r*l;return o===null?o=this.buffer.slice(f,f+l):(o.length<l&&(o=new Uint8ClampedArray(l)),o.set(this.buffer.slice(f,f+l))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,o,l,f){return super.crop(r,o,l,f),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const o=this.getTempCanvasElement(),l=o.getContext("2d"),f=r*mt.DEGREE_TO_RADIANS,d=this.canvas.width,m=this.canvas.height,E=Math.ceil(Math.abs(Math.cos(f))*d+Math.abs(Math.sin(f))*m),x=Math.ceil(Math.abs(Math.sin(f))*d+Math.abs(Math.cos(f))*m);return o.width=E,o.height=x,l.translate(E/2,x/2),l.rotate(f),l.drawImage(this.canvas,d/-2,m/-2),this.buffer=mt.makeBufferFromCanvasImageData(o),this}invert(){return new lt(this)}}mt.DEGREE_TO_RADIANS=Math.PI/180;class ee{constructor(r,o,l){this.deviceId=r,this.label=o,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ae=(globalThis||wf||self||window||void 0)&&(globalThis||wf||self||window||void 0).__awaiter||function(D,r,o,l){function f(d){return d instanceof o?d:new o(function(m){m(d)})}return new(o||(o=Promise))(function(d,m){function E(R){try{v(l.next(R))}catch(M){m(M)}}function x(R){try{v(l.throw(R))}catch(M){m(M)}}function v(R){R.done?d(R.value):f(R.value).then(E,x)}v((l=l.apply(D,r||[])).next())})};class Pe{constructor(r,o=500,l){this.reader=r,this.timeBetweenScansMillis=o,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Ae(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const l of r){const f=l.kind==="video"?"videoinput":l.kind;if(f!=="videoinput")continue;const d=l.deviceId||l.id,m=l.label||`Video device ${o.length+1}`,E=l.groupId,x={deviceId:d,label:m,kind:f,groupId:E};o.push(x)}return o})}getVideoInputDevices(){return Ae(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new ee(o.deviceId,o.label))})}findDeviceById(r){return Ae(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(l=>l.deviceId===r):null})}decodeFromInputVideoDevice(r,o){return Ae(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,o)})}decodeOnceFromVideoDevice(r,o){return Ae(this,void 0,void 0,function*(){this.reset();let l;r?l={deviceId:{exact:r}}:l={facingMode:"environment"};const f={video:l};return yield this.decodeOnceFromConstraints(f,o)})}decodeOnceFromConstraints(r,o){return Ae(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(l,o)})}decodeOnceFromStream(r,o){return Ae(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(r,o);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(r,o,l){return Ae(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,o,l)})}decodeFromVideoDevice(r,o,l){return Ae(this,void 0,void 0,function*(){let f;r?f={deviceId:{exact:r}}:f={facingMode:"environment"};const d={video:f};return yield this.decodeFromConstraints(d,o,l)})}decodeFromConstraints(r,o,l){return Ae(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(f,o,l)})}decodeFromStream(r,o,l){return Ae(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(r,o);return yield this.decodeContinuously(f,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,o){return Ae(this,void 0,void 0,function*(){const l=this.prepareVideoElement(o);return this.addVideoSource(l,r),this.videoElement=l,this.stream=r,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(r){return new Promise((o,l)=>this.playVideoOnLoad(r,()=>o()))}playVideoOnLoad(r,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",o),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Ae(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,o){const l=document.getElementById(r);if(!l)throw new S(`element with id '${r}' not found`);if(l.nodeName.toLowerCase()!==o.toLowerCase())throw new S(`element with id '${r}' must be an ${o} element`);return l}decodeFromImage(r,o){if(!r&&!o)throw new S("either imageElement with a src set or an url must be provided");return o&&!r?this.decodeFromImageUrl(o):this.decodeFromImageElement(r)}decodeFromVideo(r,o){if(!r&&!o)throw new S("Either an element with a src set or an URL must be provided");return o&&!r?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,o,l){if(r===void 0&&o===void 0)throw new S("Either an element with a src set or an URL must be provided");return o&&!r?this.decodeFromVideoUrlContinuously(o,l):this.decodeFromVideoElementContinuously(r,l)}decodeFromImageElement(r){if(!r)throw new S("An image element must be provided.");this.reset();const o=this.prepareImageElement(r);this.imageElement=o;let l;return this.isImageLoaded(o)?l=this.decodeOnce(o,!1,!0):l=this._decodeOnLoadImage(o),l}decodeFromVideoElement(r){const o=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(r,o){const l=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(l,o)}_decodeFromVideoElementSetup(r){if(!r)throw new S("A video element must be provided.");this.reset();const o=this.prepareVideoElement(r);return this.videoElement=o,o}decodeFromImageUrl(r){if(!r)throw new S("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const l=this._decodeOnLoadImage(o);return o.src=r,l}decodeFromVideoUrl(r){if(!r)throw new S("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElement(o);return o.src=r,l}decodeFromVideoUrlContinuously(r,o){if(!r)throw new S("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),f=this.decodeFromVideoElementContinuously(l,o);return l.src=r,f}_decodeOnLoadImage(r){return new Promise((o,l)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(o,l),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Ae(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,o){return Ae(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,o)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let o;return typeof r>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof r=="string"&&(o=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(o=r),o}prepareVideoElement(r){let o;return!r&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof r=="string"&&(o=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(o=r),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(r,o=!0,l=!0){this._stopAsyncDecode=!1;const f=(d,m)=>{if(this._stopAsyncDecode){m(new he("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const E=this.decode(r);d(E)}catch(E){const x=o&&E instanceof he,R=(E instanceof j||E instanceof U)&&l;if(x||R)return setTimeout(f,this._timeBetweenDecodingAttempts,d,m);m(E)}};return new Promise((d,m)=>f(d,m))}decodeContinuously(r,o){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const f=this.decode(r);o(f,null),setTimeout(l,this.timeBetweenScansMillis)}catch(f){o(null,f);const d=f instanceof j||f instanceof U,m=f instanceof he;(d||m)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(r){const o=this.createBinaryBitmap(r);return this.decodeBitmap(o)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,o,l){o||(o={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(r,o,l=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const o=this.getCaptureCanvas(r),l=new mt(o),f=new xe(l);return new L(f)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const o=this.createCaptureCanvas(r);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let l,f;return typeof r<"u"&&(r instanceof HTMLVideoElement?(l=r.videoWidth,f=r.videoHeight):r instanceof HTMLImageElement&&(l=r.naturalWidth||r.width,f=r.naturalHeight||r.height)),o.style.width=l+"px",o.style.height=f+"px",o.width=l,o.height=f,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,o){try{r.srcObject=o}catch{r.src=URL.createObjectURL(o)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class ke{constructor(r,o,l=o==null?0:8*o.length,f,d,m=Z.currentTimeMillis()){this.text=r,this.rawBytes=o,this.numBits=l,this.resultPoints=f,this.format=d,this.timestamp=m,this.text=r,this.rawBytes=o,l==null?this.numBits=o==null?0:8*o.length:this.numBits=l,this.resultPoints=f,this.format=d,this.resultMetadata=null,m==null?this.timestamp=Z.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,o)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const o=this.resultPoints;if(o===null)this.resultPoints=r;else if(r!==null&&r.length>0){const l=new Array(o.length+r.length);Z.arraycopy(o,0,l,0,o.length),Z.arraycopy(r,0,l,o.length,r.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var it;(function(D){D[D.AZTEC=0]="AZTEC",D[D.CODABAR=1]="CODABAR",D[D.CODE_39=2]="CODE_39",D[D.CODE_93=3]="CODE_93",D[D.CODE_128=4]="CODE_128",D[D.DATA_MATRIX=5]="DATA_MATRIX",D[D.EAN_8=6]="EAN_8",D[D.EAN_13=7]="EAN_13",D[D.ITF=8]="ITF",D[D.MAXICODE=9]="MAXICODE",D[D.PDF_417=10]="PDF_417",D[D.QR_CODE=11]="QR_CODE",D[D.RSS_14=12]="RSS_14",D[D.RSS_EXPANDED=13]="RSS_EXPANDED",D[D.UPC_A=14]="UPC_A",D[D.UPC_E=15]="UPC_E",D[D.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(it||(it={}));var Le=it,wt;(function(D){D[D.OTHER=0]="OTHER",D[D.ORIENTATION=1]="ORIENTATION",D[D.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",D[D.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",D[D.ISSUE_NUMBER=4]="ISSUE_NUMBER",D[D.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",D[D.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",D[D.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",D[D.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",D[D.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",D[D.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(wt||(wt={}));var xt=wt;class Jt{constructor(r,o,l,f,d=-1,m=-1){this.rawBytes=r,this.text=o,this.byteSegments=l,this.ecLevel=f,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=m,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class mr{exp(r){return this.expTable[r]}log(r){if(r===0)throw new b;return this.logTable[r]}static addOrSubtract(r,o){return r^o}}class qn{constructor(r,o){if(o.length===0)throw new b;this.field=r;const l=o.length;if(l>1&&o[0]===0){let f=1;for(;f<l&&o[f]===0;)f++;f===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-f),Z.arraycopy(o,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const o=this.coefficients;let l;if(r===1){l=0;for(let m=0,E=o.length;m!==E;m++){const x=o[m];l=mr.addOrSubtract(l,x)}return l}l=o[0];const f=o.length,d=this.field;for(let m=1;m<f;m++)l=mr.addOrSubtract(d.multiply(r,l),o[m]);return l}addOrSubtract(r){if(!this.field.equals(r.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let o=this.coefficients,l=r.coefficients;if(o.length>l.length){const m=o;o=l,l=m}let f=new Int32Array(l.length);const d=l.length-o.length;Z.arraycopy(l,0,f,0,d);for(let m=d;m<l.length;m++)f[m]=mr.addOrSubtract(o[m-d],l[m]);return new qn(this.field,f)}multiply(r){if(!this.field.equals(r.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const o=this.coefficients,l=o.length,f=r.coefficients,d=f.length,m=new Int32Array(l+d-1),E=this.field;for(let x=0;x<l;x++){const v=o[x];for(let R=0;R<d;R++)m[x+R]=mr.addOrSubtract(m[x+R],E.multiply(v,f[R]))}return new qn(E,m)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const o=this.coefficients.length,l=this.field,f=new Int32Array(o),d=this.coefficients;for(let m=0;m<o;m++)f[m]=l.multiply(d[m],r);return new qn(l,f)}multiplyByMonomial(r,o){if(r<0)throw new b;if(o===0)return this.field.getZero();const l=this.coefficients,f=l.length,d=new Int32Array(f+r),m=this.field;for(let E=0;E<f;E++)d[E]=m.multiply(l[E],o);return new qn(m,d)}divide(r){if(!this.field.equals(r.field))throw new b("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new b("Divide by 0");const o=this.field;let l=o.getZero(),f=this;const d=r.getCoefficient(r.getDegree()),m=o.inverse(d);for(;f.getDegree()>=r.getDegree()&&!f.isZero();){const E=f.getDegree()-r.getDegree(),x=o.multiply(f.getCoefficient(f.getDegree()),m),v=r.multiplyByMonomial(E,x),R=o.buildMonomial(E,x);l=l.addOrSubtract(R),f=f.addOrSubtract(v)}return[l,f]}toString(){let r="";for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);if(l!==0){if(l<0?(r+=" - ",l=-l):r.length>0&&(r+=" + "),o===0||l!==1){const f=this.field.log(l);f===0?r+="1":f===1?r+="a":(r+="a^",r+=f)}o!==0&&(o===1?r+="x":(r+="x^",r+=o))}}return r}}class as extends _{}as.kind="ArithmeticException";class Tt extends mr{constructor(r,o,l){super(),this.primitive=r,this.size=o,this.generatorBase=l;const f=new Int32Array(o);let d=1;for(let E=0;E<o;E++)f[E]=d,d*=2,d>=o&&(d^=r,d&=o-1);this.expTable=f;const m=new Int32Array(o);for(let E=0;E<o-1;E++)m[f[E]]=E;this.logTable=m,this.zero=new qn(this,Int32Array.from([0])),this.one=new qn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,o){if(r<0)throw new b;if(o===0)return this.zero;const l=new Int32Array(r+1);return l[0]=o,new qn(this,l)}inverse(r){if(r===0)throw new as;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,o){return r===0||o===0?0:this.expTable[(this.logTable[r]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+ne.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}Tt.AZTEC_DATA_12=new Tt(4201,4096,1),Tt.AZTEC_DATA_10=new Tt(1033,1024,1),Tt.AZTEC_DATA_6=new Tt(67,64,1),Tt.AZTEC_PARAM=new Tt(19,16,1),Tt.QR_CODE_FIELD_256=new Tt(285,256,0),Tt.DATA_MATRIX_FIELD_256=new Tt(301,256,1),Tt.AZTEC_DATA_8=Tt.DATA_MATRIX_FIELD_256,Tt.MAXICODE_FIELD_64=Tt.AZTEC_DATA_6;class pi extends _{}pi.kind="ReedSolomonException";class Pi extends _{}Pi.kind="IllegalStateException";class pr{constructor(r){this.field=r}decode(r,o){const l=this.field,f=new qn(l,r),d=new Int32Array(o);let m=!0;for(let H=0;H<o;H++){const K=f.evaluateAt(l.exp(H+l.getGeneratorBase()));d[d.length-1-H]=K,K!==0&&(m=!1)}if(m)return;const E=new qn(l,d),x=this.runEuclideanAlgorithm(l.buildMonomial(o,1),E,o),v=x[0],R=x[1],M=this.findErrorLocations(v),P=this.findErrorMagnitudes(R,M);for(let H=0;H<M.length;H++){const K=r.length-1-l.log(M[H]);if(K<0)throw new pi("Bad error location");r[K]=Tt.addOrSubtract(r[K],P[H])}}runEuclideanAlgorithm(r,o,l){if(r.getDegree()<o.getDegree()){const H=r;r=o,o=H}const f=this.field;let d=r,m=o,E=f.getZero(),x=f.getOne();for(;m.getDegree()>=(l/2|0);){let H=d,K=E;if(d=m,E=x,d.isZero())throw new pi("r_{i-1} was zero");m=H;let $=f.getZero();const ae=d.getCoefficient(d.getDegree()),ye=f.inverse(ae);for(;m.getDegree()>=d.getDegree()&&!m.isZero();){const De=m.getDegree()-d.getDegree(),Oe=f.multiply(m.getCoefficient(m.getDegree()),ye);$=$.addOrSubtract(f.buildMonomial(De,Oe)),m=m.addOrSubtract(d.multiplyByMonomial(De,Oe))}if(x=$.multiply(E).addOrSubtract(K),m.getDegree()>=d.getDegree())throw new Pi("Division algorithm failed to reduce polynomial?")}const v=x.getCoefficient(0);if(v===0)throw new pi("sigmaTilde(0) was zero");const R=f.inverse(v),M=x.multiplyScalar(R),P=m.multiplyScalar(R);return[M,P]}findErrorLocations(r){const o=r.getDegree();if(o===1)return Int32Array.from([r.getCoefficient(1)]);const l=new Int32Array(o);let f=0;const d=this.field;for(let m=1;m<d.getSize()&&f<o;m++)r.evaluateAt(m)===0&&(l[f]=d.inverse(m),f++);if(f!==o)throw new pi("Error locator degree does not match number of roots");return l}findErrorMagnitudes(r,o){const l=o.length,f=new Int32Array(l),d=this.field;for(let m=0;m<l;m++){const E=d.inverse(o[m]);let x=1;for(let v=0;v<l;v++)if(m!==v){const R=d.multiply(o[v],E),M=(R&1)===0?R|1:R&-2;x=d.multiply(x,M)}f[m]=d.multiply(r.evaluateAt(E),d.inverse(x)),d.getGeneratorBase()!==0&&(f[m]=d.multiply(f[m],E))}return f}}var Nn;(function(D){D[D.UPPER=0]="UPPER",D[D.LOWER=1]="LOWER",D[D.MIXED=2]="MIXED",D[D.DIGIT=3]="DIGIT",D[D.PUNCT=4]="PUNCT",D[D.BINARY=5]="BINARY"})(Nn||(Nn={}));class qt{decode(r){this.ddata=r;let o=r.getBits(),l=this.extractBits(o),f=this.correctBits(l),d=qt.convertBoolArrayToByteArray(f),m=qt.getEncodedData(f),E=new Jt(d,m,null,null);return E.setNumBits(f.length),E}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let o=r.length,l=Nn.UPPER,f=Nn.UPPER,d="",m=0;for(;m<o;)if(f===Nn.BINARY){if(o-m<5)break;let E=qt.readCode(r,m,5);if(m+=5,E===0){if(o-m<11)break;E=qt.readCode(r,m,11)+31,m+=11}for(let x=0;x<E;x++){if(o-m<8){m=o;break}const v=qt.readCode(r,m,8);d+=X.castAsNonUtf8Char(v),m+=8}f=l}else{let E=f===Nn.DIGIT?4:5;if(o-m<E)break;let x=qt.readCode(r,m,E);m+=E;let v=qt.getCharacter(f,x);v.startsWith("CTRL_")?(l=f,f=qt.getTable(v.charAt(5)),v.charAt(6)==="L"&&(l=f)):(d+=v,f=l)}return d}static getTable(r){switch(r){case"L":return Nn.LOWER;case"P":return Nn.PUNCT;case"M":return Nn.MIXED;case"D":return Nn.DIGIT;case"B":return Nn.BINARY;default:return Nn.UPPER}}static getCharacter(r,o){switch(r){case Nn.UPPER:return qt.UPPER_TABLE[o];case Nn.LOWER:return qt.LOWER_TABLE[o];case Nn.MIXED:return qt.MIXED_TABLE[o];case Nn.PUNCT:return qt.PUNCT_TABLE[o];case Nn.DIGIT:return qt.DIGIT_TABLE[o];default:throw new Pi("Bad table")}}correctBits(r){let o,l;this.ddata.getNbLayers()<=2?(l=6,o=Tt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,o=Tt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,o=Tt.AZTEC_DATA_10):(l=12,o=Tt.AZTEC_DATA_12);let f=this.ddata.getNbDatablocks(),d=r.length/l;if(d<f)throw new U;let m=r.length%l,E=new Int32Array(d);for(let P=0;P<d;P++,m+=l)E[P]=qt.readCode(r,m,l);try{new pr(o).decode(E,d-f)}catch(P){throw new U(P)}let x=(1<<l)-1,v=0;for(let P=0;P<f;P++){let H=E[P];if(H===0||H===x)throw new U;(H===1||H===x-1)&&v++}let R=new Array(f*l-v),M=0;for(let P=0;P<f;P++){let H=E[P];if(H===1||H===x-1)R.fill(H>1,M,M+l-1),M+=l-1;else for(let K=l-1;K>=0;--K)R[M++]=(H&1<<K)!==0}return R}extractBits(r){let o=this.ddata.isCompact(),l=this.ddata.getNbLayers(),f=(o?11:14)+l*4,d=new Int32Array(f),m=new Array(this.totalBitsInLayer(l,o));if(o)for(let E=0;E<d.length;E++)d[E]=E;else{let E=f+1+2*ne.truncDivision(ne.truncDivision(f,2)-1,15),x=f/2,v=ne.truncDivision(E,2);for(let R=0;R<x;R++){let M=R+ne.truncDivision(R,15);d[x-R-1]=v-M-1,d[x+R]=v+M+1}}for(let E=0,x=0;E<l;E++){let v=(l-E)*4+(o?9:12),R=E*2,M=f-1-R;for(let P=0;P<v;P++){let H=P*2;for(let K=0;K<2;K++)m[x+H+K]=r.get(d[R+K],d[R+P]),m[x+2*v+H+K]=r.get(d[R+P],d[M-K]),m[x+4*v+H+K]=r.get(d[M-K],d[M-P]),m[x+6*v+H+K]=r.get(d[M-P],d[R+K])}x+=v*8}return m}static readCode(r,o,l){let f=0;for(let d=o;d<o+l;d++)f<<=1,r[d]&&(f|=1);return f}static readByte(r,o){let l=r.length-o;return l>=8?qt.readCode(r,o,8):qt.readCode(r,o,l)<<8-l}static convertBoolArrayToByteArray(r){let o=new Uint8Array((r.length+7)/8);for(let l=0;l<o.length;l++)o[l]=qt.readByte(r,8*l);return o}totalBitsInLayer(r,o){return((o?88:112)+16*r)*r}}qt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],qt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],qt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],qt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],qt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class $e{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,o,l,f){const d=r-l,m=o-f;return Math.sqrt(d*d+m*m)}static sum(r){let o=0;for(let l=0,f=r.length;l!==f;l++){const d=r[l];o+=d}return o}}class xn{static floatToIntBits(r){return r}}xn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Fe{constructor(r,o){this.x=r,this.y=o}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof Fe){const o=r;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*xn.floatToIntBits(this.x)+xn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const o=this.distance(r[0],r[1]),l=this.distance(r[1],r[2]),f=this.distance(r[0],r[2]);let d,m,E;if(l>=o&&l>=f?(m=r[0],d=r[1],E=r[2]):f>=l&&f>=o?(m=r[1],d=r[0],E=r[2]):(m=r[2],d=r[0],E=r[1]),this.crossProductZ(d,m,E)<0){const x=d;d=E,E=x}r[0]=d,r[1]=m,r[2]=E}static distance(r,o){return $e.distance(r.x,r.y,o.x,o.y)}static crossProductZ(r,o,l){const f=o.x,d=o.y;return(l.x-f)*(r.y-d)-(l.y-d)*(r.x-f)}}class Ma{constructor(r,o){this.bits=r,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class Vo extends Ma{constructor(r,o,l,f,d){super(r,o),this.compact=l,this.nbDatablocks=f,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class yn{constructor(r,o,l,f){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),o==null&&(o=yn.INIT_SIZE),l==null&&(l=r.getWidth()/2|0),f==null&&(f=r.getHeight()/2|0);const d=o/2|0;if(this.leftInit=l-d,this.rightInit=l+d,this.upInit=f-d,this.downInit=f+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new he}detect(){let r=this.leftInit,o=this.rightInit,l=this.upInit,f=this.downInit,d=!1,m=!0,E=!1,x=!1,v=!1,R=!1,M=!1;const P=this.width,H=this.height;for(;m;){m=!1;let K=!0;for(;(K||!x)&&o<P;)K=this.containsBlackPoint(l,f,o,!1),K?(o++,m=!0,x=!0):x||o++;if(o>=P){d=!0;break}let $=!0;for(;($||!v)&&f<H;)$=this.containsBlackPoint(r,o,f,!0),$?(f++,m=!0,v=!0):v||f++;if(f>=H){d=!0;break}let ae=!0;for(;(ae||!R)&&r>=0;)ae=this.containsBlackPoint(l,f,r,!1),ae?(r--,m=!0,R=!0):R||r--;if(r<0){d=!0;break}let ye=!0;for(;(ye||!M)&&l>=0;)ye=this.containsBlackPoint(r,o,l,!0),ye?(l--,m=!0,M=!0):M||l--;if(l<0){d=!0;break}m&&(E=!0)}if(!d&&E){const K=o-r;let $=null;for(let Oe=1;$===null&&Oe<K;Oe++)$=this.getBlackPointOnSegment(r,f-Oe,r+Oe,f);if($==null)throw new he;let ae=null;for(let Oe=1;ae===null&&Oe<K;Oe++)ae=this.getBlackPointOnSegment(r,l+Oe,r+Oe,l);if(ae==null)throw new he;let ye=null;for(let Oe=1;ye===null&&Oe<K;Oe++)ye=this.getBlackPointOnSegment(o,l+Oe,o-Oe,l);if(ye==null)throw new he;let De=null;for(let Oe=1;De===null&&Oe<K;Oe++)De=this.getBlackPointOnSegment(o,f-Oe,o-Oe,f);if(De==null)throw new he;return this.centerEdges(De,$,ye,ae)}else throw new he}getBlackPointOnSegment(r,o,l,f){const d=$e.round($e.distance(r,o,l,f)),m=(l-r)/d,E=(f-o)/d,x=this.image;for(let v=0;v<d;v++){const R=$e.round(r+v*m),M=$e.round(o+v*E);if(x.get(R,M))return new Fe(R,M)}return null}centerEdges(r,o,l,f){const d=r.getX(),m=r.getY(),E=o.getX(),x=o.getY(),v=l.getX(),R=l.getY(),M=f.getX(),P=f.getY(),H=yn.CORR;return d<this.width/2?[new Fe(M-H,P+H),new Fe(E+H,x+H),new Fe(v-H,R-H),new Fe(d+H,m-H)]:[new Fe(M+H,P+H),new Fe(E+H,x-H),new Fe(v-H,R+H),new Fe(d-H,m-H)]}containsBlackPoint(r,o,l,f){const d=this.image;if(f){for(let m=r;m<=o;m++)if(d.get(m,l))return!0}else for(let m=r;m<=o;m++)if(d.get(l,m))return!0;return!1}}yn.INIT_SIZE=10,yn.CORR=1;class os{static checkAndNudgePoints(r,o){const l=r.getWidth(),f=r.getHeight();let d=!0;for(let m=0;m<o.length&&d;m+=2){const E=Math.floor(o[m]),x=Math.floor(o[m+1]);if(E<-1||E>l||x<-1||x>f)throw new he;d=!1,E===-1?(o[m]=0,d=!0):E===l&&(o[m]=l-1,d=!0),x===-1?(o[m+1]=0,d=!0):x===f&&(o[m+1]=f-1,d=!0)}d=!0;for(let m=o.length-2;m>=0&&d;m-=2){const E=Math.floor(o[m]),x=Math.floor(o[m+1]);if(E<-1||E>l||x<-1||x>f)throw new he;d=!1,E===-1?(o[m]=0,d=!0):E===l&&(o[m]=l-1,d=!0),x===-1?(o[m+1]=0,d=!0):x===f&&(o[m+1]=f-1,d=!0)}}}class yi{constructor(r,o,l,f,d,m,E,x,v){this.a11=r,this.a21=o,this.a31=l,this.a12=f,this.a22=d,this.a32=m,this.a13=E,this.a23=x,this.a33=v}static quadrilateralToQuadrilateral(r,o,l,f,d,m,E,x,v,R,M,P,H,K,$,ae){const ye=yi.quadrilateralToSquare(r,o,l,f,d,m,E,x);return yi.squareToQuadrilateral(v,R,M,P,H,K,$,ae).times(ye)}transformPoints(r){const o=r.length,l=this.a11,f=this.a12,d=this.a13,m=this.a21,E=this.a22,x=this.a23,v=this.a31,R=this.a32,M=this.a33;for(let P=0;P<o;P+=2){const H=r[P],K=r[P+1],$=d*H+x*K+M;r[P]=(l*H+m*K+v)/$,r[P+1]=(f*H+E*K+R)/$}}transformPointsWithValues(r,o){const l=this.a11,f=this.a12,d=this.a13,m=this.a21,E=this.a22,x=this.a23,v=this.a31,R=this.a32,M=this.a33,P=r.length;for(let H=0;H<P;H++){const K=r[H],$=o[H],ae=d*K+x*$+M;r[H]=(l*K+m*$+v)/ae,o[H]=(f*K+E*$+R)/ae}}static squareToQuadrilateral(r,o,l,f,d,m,E,x){const v=r-l+d-E,R=o-f+m-x;if(v===0&&R===0)return new yi(l-r,d-l,r,f-o,m-f,o,0,0,1);{const M=l-d,P=E-d,H=f-m,K=x-m,$=M*K-P*H,ae=(v*K-P*R)/$,ye=(M*R-v*H)/$;return new yi(l-r+ae*l,E-r+ye*E,r,f-o+ae*f,x-o+ye*x,o,ae,ye,1)}}static quadrilateralToSquare(r,o,l,f,d,m,E,x){return yi.squareToQuadrilateral(r,o,l,f,d,m,E,x).buildAdjoint()}buildAdjoint(){return new yi(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new yi(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class La extends os{sampleGrid(r,o,l,f,d,m,E,x,v,R,M,P,H,K,$,ae,ye,De,Oe){const be=yi.quadrilateralToQuadrilateral(f,d,m,E,x,v,R,M,P,H,K,$,ae,ye,De,Oe);return this.sampleGridWithTransform(r,o,l,be)}sampleGridWithTransform(r,o,l,f){if(o<=0||l<=0)throw new he;const d=new We(o,l),m=new Float32Array(2*o);for(let E=0;E<l;E++){const x=m.length,v=E+.5;for(let R=0;R<x;R+=2)m[R]=R/2+.5,m[R+1]=v;f.transformPoints(m),os.checkAndNudgePoints(r,m);try{for(let R=0;R<x;R+=2)r.get(Math.floor(m[R]),Math.floor(m[R+1]))&&d.set(R/2,E)}catch{throw new he}}return d}}class Ei{static setGridSampler(r){Ei.gridSampler=r}static getInstance(){return Ei.gridSampler}}Ei.gridSampler=new La;class si{constructor(r,o){this.x=r,this.y=o}toResultPoint(){return new Fe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Fo{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let o=this.getMatrixCenter(),l=this.getBullsEyeCorners(o);if(r){let m=l[0];l[0]=l[2],l[2]=m}this.extractParameters(l);let f=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new Vo(f,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new he;let o=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(r[0],r[1],o),this.sampleLine(r[1],r[2],o),this.sampleLine(r[2],r[3],o),this.sampleLine(r[3],r[0],o)]);this.shift=this.getRotation(l,o);let f=0;for(let m=0;m<4;m++){let E=l[(this.shift+m)%4];this.compact?(f<<=7,f+=E>>1&127):(f<<=10,f+=(E>>2&992)+(E>>1&31))}let d=this.getCorrectedParameterData(f,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(r,o){let l=0;r.forEach((f,d,m)=>{let E=(f>>o-2<<1)+(f&1);l=(l<<3)+E}),l=((l&1)<<11)+(l>>1);for(let f=0;f<4;f++)if(ne.bitCount(l^this.EXPECTED_CORNER_BITS[f])<=2)return f;throw new he}getCorrectedParameterData(r,o){let l,f;o?(l=7,f=2):(l=10,f=4);let d=l-f,m=new Int32Array(l);for(let x=l-1;x>=0;--x)m[x]=r&15,r>>=4;try{new pr(Tt.AZTEC_PARAM).decode(m,d)}catch{throw new he}let E=0;for(let x=0;x<f;x++)E=(E<<4)+m[x];return E}getBullsEyeCorners(r){let o=r,l=r,f=r,d=r,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let M=this.getFirstDifferent(o,m,1,-1),P=this.getFirstDifferent(l,m,1,1),H=this.getFirstDifferent(f,m,-1,1),K=this.getFirstDifferent(d,m,-1,-1);if(this.nbCenterLayers>2){let $=this.distancePoint(K,M)*this.nbCenterLayers/(this.distancePoint(d,o)*(this.nbCenterLayers+2));if($<.75||$>1.25||!this.isWhiteOrBlackRectangle(M,P,H,K))break}o=M,l=P,f=H,d=K,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new he;this.compact=this.nbCenterLayers===5;let E=new Fe(o.getX()+.5,o.getY()-.5),x=new Fe(l.getX()+.5,l.getY()+.5),v=new Fe(f.getX()-.5,f.getY()+.5),R=new Fe(d.getX()-.5,d.getY()-.5);return this.expandSquare([E,x,v,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,o,l,f;try{let E=new yn(this.image).detect();r=E[0],o=E[1],l=E[2],f=E[3]}catch{let x=this.image.getWidth()/2,v=this.image.getHeight()/2;r=this.getFirstDifferent(new si(x+7,v-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new si(x+7,v+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new si(x-7,v+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new si(x-7,v-7),!1,-1,-1).toResultPoint()}let d=$e.round((r.getX()+f.getX()+o.getX()+l.getX())/4),m=$e.round((r.getY()+f.getY()+o.getY()+l.getY())/4);try{let E=new yn(this.image,15,d,m).detect();r=E[0],o=E[1],l=E[2],f=E[3]}catch{r=this.getFirstDifferent(new si(d+7,m-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new si(d+7,m+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new si(d-7,m+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new si(d-7,m-7),!1,-1,-1).toResultPoint()}return d=$e.round((r.getX()+f.getX()+o.getX()+l.getX())/4),m=$e.round((r.getY()+f.getY()+o.getY()+l.getY())/4),new si(d,m)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,o,l,f,d){let m=Ei.getInstance(),E=this.getDimension(),x=E/2-this.nbCenterLayers,v=E/2+this.nbCenterLayers;return m.sampleGrid(r,E,E,x,x,v,x,v,v,x,v,o.getX(),o.getY(),l.getX(),l.getY(),f.getX(),f.getY(),d.getX(),d.getY())}sampleLine(r,o,l){let f=0,d=this.distanceResultPoint(r,o),m=d/l,E=r.getX(),x=r.getY(),v=m*(o.getX()-r.getX())/d,R=m*(o.getY()-r.getY())/d;for(let M=0;M<l;M++)this.image.get($e.round(E+M*v),$e.round(x+M*R))&&(f|=1<<l-M-1);return f}isWhiteOrBlackRectangle(r,o,l,f){let d=3;r=new si(r.getX()-d,r.getY()+d),o=new si(o.getX()-d,o.getY()-d),l=new si(l.getX()+d,l.getY()-d),f=new si(f.getX()+d,f.getY()+d);let m=this.getColor(f,r);if(m===0)return!1;let E=this.getColor(r,o);return E!==m||(E=this.getColor(o,l),E!==m)?!1:(E=this.getColor(l,f),E===m)}getColor(r,o){let l=this.distancePoint(r,o),f=(o.getX()-r.getX())/l,d=(o.getY()-r.getY())/l,m=0,E=r.getX(),x=r.getY(),v=this.image.get(r.getX(),r.getY()),R=Math.ceil(l);for(let P=0;P<R;P++)E+=f,x+=d,this.image.get($e.round(E),$e.round(x))!==v&&m++;let M=m/l;return M>.1&&M<.9?0:M<=.1===v?1:-1}getFirstDifferent(r,o,l,f){let d=r.getX()+l,m=r.getY()+f;for(;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l,m+=f;for(d-=l,m-=f;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l;for(d-=l;this.isValid(d,m)&&this.image.get(d,m)===o;)m+=f;return m-=f,new si(d,m)}expandSquare(r,o,l){let f=l/(2*o),d=r[0].getX()-r[2].getX(),m=r[0].getY()-r[2].getY(),E=(r[0].getX()+r[2].getX())/2,x=(r[0].getY()+r[2].getY())/2,v=new Fe(E+f*d,x+f*m),R=new Fe(E-f*d,x-f*m);d=r[1].getX()-r[3].getX(),m=r[1].getY()-r[3].getY(),E=(r[1].getX()+r[3].getX())/2,x=(r[1].getY()+r[3].getY())/2;let M=new Fe(E+f*d,x+f*m),P=new Fe(E-f*d,x-f*m);return[v,M,R,P]}isValid(r,o){return r>=0&&r<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(r){let o=$e.round(r.getX()),l=$e.round(r.getY());return this.isValid(o,l)}distancePoint(r,o){return $e.distance(r.getX(),r.getY(),o.getX(),o.getY())}distanceResultPoint(r,o){return $e.distance(r.getX(),r.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ne.truncDivision(this.nbLayers-4,8)+1)+15}}class qs{decode(r,o=null){let l=null,f=new Fo(r.getBlackMatrix()),d=null,m=null;try{let R=f.detectMirror(!1);d=R.getPoints(),this.reportFoundResultPoints(o,d),m=new qt().decode(R)}catch(R){l=R}if(m==null)try{let R=f.detectMirror(!0);d=R.getPoints(),this.reportFoundResultPoints(o,d),m=new qt().decode(R)}catch(R){throw l??R}let E=new ke(m.getText(),m.getRawBytes(),m.getNumBits(),d,Le.AZTEC,Z.currentTimeMillis()),x=m.getByteSegments();x!=null&&E.putMetadata(xt.BYTE_SEGMENTS,x);let v=m.getECLevel();return v!=null&&E.putMetadata(xt.ERROR_CORRECTION_LEVEL,v),E}reportFoundResultPoints(r,o){if(r!=null){let l=r.get(Be.NEED_RESULT_POINT_CALLBACK);l!=null&&o.forEach((f,d,m)=>{l.foundPossibleResultPoint(f)})}}reset(){}}class Dl extends Pe{constructor(r=500){super(new qs,r)}}class Yt{decode(r,o){try{return this.doDecode(r,o)}catch{if(o&&o.get(Be.TRY_HARDER)===!0&&r.isRotateSupported()){const d=r.rotateCounterClockwise(),m=this.doDecode(d,o),E=m.getResultMetadata();let x=270;E!==null&&E.get(xt.ORIENTATION)===!0&&(x=x+E.get(xt.ORIENTATION)%360),m.putMetadata(xt.ORIENTATION,x);const v=m.getResultPoints();if(v!==null){const R=d.getHeight();for(let M=0;M<v.length;M++)v[M]=new Fe(R-v[M].getY()-1,v[M].getX())}return m}else throw new he}}reset(){}doDecode(r,o){const l=r.getWidth(),f=r.getHeight();let d=new Re(l);const m=o&&o.get(Be.TRY_HARDER)===!0,E=Math.max(1,f>>(m?8:5));let x;m?x=f:x=15;const v=Math.trunc(f/2);for(let R=0;R<x;R++){const M=Math.trunc((R+1)/2),P=(R&1)===0,H=v+E*(P?M:-M);if(H<0||H>=f)break;try{d=r.getBlackRow(H,d)}catch{continue}for(let K=0;K<2;K++){if(K===1&&(d.reverse(),o&&o.get(Be.NEED_RESULT_POINT_CALLBACK)===!0)){const $=new Map;o.forEach((ae,ye)=>$.set(ye,ae)),$.delete(Be.NEED_RESULT_POINT_CALLBACK),o=$}try{const $=this.decodeRow(H,d,o);if(K===1){$.putMetadata(xt.ORIENTATION,180);const ae=$.getResultPoints();ae!==null&&(ae[0]=new Fe(l-ae[0].getX()-1,ae[0].getY()),ae[1]=new Fe(l-ae[1].getX()-1,ae[1].getY()))}return $}catch{}}}throw new he}static recordPattern(r,o,l){const f=l.length;for(let v=0;v<f;v++)l[v]=0;const d=r.getSize();if(o>=d)throw new he;let m=!r.get(o),E=0,x=o;for(;x<d;){if(r.get(x)!==m)l[E]++;else{if(++E===f)break;l[E]=1,m=!m}x++}if(!(E===f||E===f-1&&x===d))throw new he}static recordPatternInReverse(r,o,l){let f=l.length,d=r.get(o);for(;o>0&&f>=0;)r.get(--o)!==d&&(f--,d=!d);if(f>=0)throw new he;Yt.recordPattern(r,o+1,l)}static patternMatchVariance(r,o,l){const f=r.length;let d=0,m=0;for(let v=0;v<f;v++)d+=r[v],m+=o[v];if(d<m)return Number.POSITIVE_INFINITY;const E=d/m;l*=E;let x=0;for(let v=0;v<f;v++){const R=r[v],M=o[v]*E,P=R>M?R-M:M-R;if(P>l)return Number.POSITIVE_INFINITY;x+=P}return x/d}}class Ne extends Yt{static findStartPattern(r){const o=r.getSize(),l=r.getNextSet(0);let f=0,d=Int32Array.from([0,0,0,0,0,0]),m=l,E=!1;const x=6;for(let v=l;v<o;v++)if(r.get(v)!==E)d[f]++;else{if(f===x-1){let R=Ne.MAX_AVG_VARIANCE,M=-1;for(let P=Ne.CODE_START_A;P<=Ne.CODE_START_C;P++){const H=Yt.patternMatchVariance(d,Ne.CODE_PATTERNS[P],Ne.MAX_INDIVIDUAL_VARIANCE);H<R&&(R=H,M=P)}if(M>=0&&r.isRange(Math.max(0,m-(v-m)/2),m,!1))return Int32Array.from([m,v,M]);m+=d[0]+d[1],d=d.slice(2,d.length-1),d[f-1]=0,d[f]=0,f--}else f++;d[f]=1,E=!E}throw new he}static decodeCode(r,o,l){Yt.recordPattern(r,l,o);let f=Ne.MAX_AVG_VARIANCE,d=-1;for(let m=0;m<Ne.CODE_PATTERNS.length;m++){const E=Ne.CODE_PATTERNS[m],x=this.patternMatchVariance(o,E,Ne.MAX_INDIVIDUAL_VARIANCE);x<f&&(f=x,d=m)}if(d>=0)return d;throw new he}decodeRow(r,o,l){const f=l&&l.get(Be.ASSUME_GS1)===!0,d=Ne.findStartPattern(o),m=d[2];let E=0;const x=new Uint8Array(20);x[E++]=m;let v;switch(m){case Ne.CODE_START_A:v=Ne.CODE_CODE_A;break;case Ne.CODE_START_B:v=Ne.CODE_CODE_B;break;case Ne.CODE_START_C:v=Ne.CODE_CODE_C;break;default:throw new U}let R=!1,M=!1,P="",H=d[0],K=d[1];const $=Int32Array.from([0,0,0,0,0,0]);let ae=0,ye=0,De=m,Oe=0,be=!0,_t=!1,ct=!1;for(;!R;){const ra=M;switch(M=!1,ae=ye,ye=Ne.decodeCode(o,$,K),x[E++]=ye,ye!==Ne.CODE_STOP&&(be=!0),ye!==Ne.CODE_STOP&&(Oe++,De+=Oe*ye),H=K,K+=$.reduce((yh,jc)=>yh+jc,0),ye){case Ne.CODE_START_A:case Ne.CODE_START_B:case Ne.CODE_START_C:throw new U}switch(v){case Ne.CODE_CODE_A:if(ye<64)ct===_t?P+=String.fromCharCode(32+ye):P+=String.fromCharCode(32+ye+128),ct=!1;else if(ye<96)ct===_t?P+=String.fromCharCode(ye-64):P+=String.fromCharCode(ye+64),ct=!1;else switch(ye!==Ne.CODE_STOP&&(be=!1),ye){case Ne.CODE_FNC_1:f&&(P.length===0?P+="]C1":P+="");break;case Ne.CODE_FNC_2:case Ne.CODE_FNC_3:break;case Ne.CODE_FNC_4_A:!_t&&ct?(_t=!0,ct=!1):_t&&ct?(_t=!1,ct=!1):ct=!0;break;case Ne.CODE_SHIFT:M=!0,v=Ne.CODE_CODE_B;break;case Ne.CODE_CODE_B:v=Ne.CODE_CODE_B;break;case Ne.CODE_CODE_C:v=Ne.CODE_CODE_C;break;case Ne.CODE_STOP:R=!0;break}break;case Ne.CODE_CODE_B:if(ye<96)ct===_t?P+=String.fromCharCode(32+ye):P+=String.fromCharCode(32+ye+128),ct=!1;else switch(ye!==Ne.CODE_STOP&&(be=!1),ye){case Ne.CODE_FNC_1:f&&(P.length===0?P+="]C1":P+="");break;case Ne.CODE_FNC_2:case Ne.CODE_FNC_3:break;case Ne.CODE_FNC_4_B:!_t&&ct?(_t=!0,ct=!1):_t&&ct?(_t=!1,ct=!1):ct=!0;break;case Ne.CODE_SHIFT:M=!0,v=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_A:v=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_C:v=Ne.CODE_CODE_C;break;case Ne.CODE_STOP:R=!0;break}break;case Ne.CODE_CODE_C:if(ye<100)ye<10&&(P+="0"),P+=ye;else switch(ye!==Ne.CODE_STOP&&(be=!1),ye){case Ne.CODE_FNC_1:f&&(P.length===0?P+="]C1":P+="");break;case Ne.CODE_CODE_A:v=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_B:v=Ne.CODE_CODE_B;break;case Ne.CODE_STOP:R=!0;break}break}ra&&(v=v===Ne.CODE_CODE_A?Ne.CODE_CODE_B:Ne.CODE_CODE_A)}const Vn=K-H;if(K=o.getNextUnset(K),!o.isRange(K,Math.min(o.getSize(),K+(K-H)/2),!1))throw new he;if(De-=Oe*ae,De%103!==ae)throw new j;const or=P.length;if(or===0)throw new he;or>0&&be&&(v===Ne.CODE_CODE_C?P=P.substring(0,or-2):P=P.substring(0,or-1));const Ii=(d[1]+d[0])/2,tn=H+Vn/2,oi=x.length,$i=new Uint8Array(oi);for(let ra=0;ra<oi;ra++)$i[ra]=x[ra];const Ha=[new Fe(Ii,r),new Fe(tn,r)];return new ke(P,$i,0,Ha,Le.CODE_128,new Date().getTime())}}Ne.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ne.MAX_AVG_VARIANCE=.25,Ne.MAX_INDIVIDUAL_VARIANCE=.7,Ne.CODE_SHIFT=98,Ne.CODE_CODE_C=99,Ne.CODE_CODE_B=100,Ne.CODE_CODE_A=101,Ne.CODE_FNC_1=102,Ne.CODE_FNC_2=97,Ne.CODE_FNC_3=96,Ne.CODE_FNC_4_A=101,Ne.CODE_FNC_4_B=100,Ne.CODE_START_A=103,Ne.CODE_START_B=104,Ne.CODE_START_C=105,Ne.CODE_STOP=106;class Xt extends Yt{constructor(r=!1,o=!1){super(),this.usingCheckDigit=r,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,o,l){let f=this.counters;f.fill(0),this.decodeRowResult="";let d=Xt.findAsteriskPattern(o,f),m=o.getNextSet(d[1]),E=o.getSize(),x,v;do{Xt.recordPattern(o,m,f);let $=Xt.toNarrowWidePattern(f);if($<0)throw new he;x=Xt.patternToChar($),this.decodeRowResult+=x,v=m;for(let ae of f)m+=ae;m=o.getNextSet(m)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let $ of f)R+=$;let M=m-v-R;if(m!==E&&M*2<R)throw new he;if(this.usingCheckDigit){let $=this.decodeRowResult.length-1,ae=0;for(let ye=0;ye<$;ye++)ae+=Xt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ye));if(this.decodeRowResult.charAt($)!==Xt.ALPHABET_STRING.charAt(ae%43))throw new j;this.decodeRowResult=this.decodeRowResult.substring(0,$)}if(this.decodeRowResult.length===0)throw new he;let P;this.extendedMode?P=Xt.decodeExtended(this.decodeRowResult):P=this.decodeRowResult;let H=(d[1]+d[0])/2,K=v+R/2;return new ke(P,null,0,[new Fe(H,r),new Fe(K,r)],Le.CODE_39,new Date().getTime())}static findAsteriskPattern(r,o){let l=r.getSize(),f=r.getNextSet(0),d=0,m=f,E=!1,x=o.length;for(let v=f;v<l;v++)if(r.get(v)!==E)o[d]++;else{if(d===x-1){if(this.toNarrowWidePattern(o)===Xt.ASTERISK_ENCODING&&r.isRange(Math.max(0,m-Math.floor((v-m)/2)),m,!1))return[m,v];m+=o[0]+o[1],o.copyWithin(0,2,2+d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,E=!E}throw new he}static toNarrowWidePattern(r){let o=r.length,l=0,f;do{let d=2147483647;for(let x of r)x<d&&x>l&&(d=x);l=d,f=0;let m=0,E=0;for(let x=0;x<o;x++){let v=r[x];v>l&&(E|=1<<o-1-x,f++,m+=v)}if(f===3){for(let x=0;x<o&&f>0;x++){let v=r[x];if(v>l&&(f--,v*2>=m))return-1}return E}}while(f>3);return-1}static patternToChar(r){for(let o=0;o<Xt.CHARACTER_ENCODINGS.length;o++)if(Xt.CHARACTER_ENCODINGS[o]===r)return Xt.ALPHABET_STRING.charAt(o);if(r===Xt.ASTERISK_ENCODING)return"*";throw new he}static decodeExtended(r){let o=r.length,l="";for(let f=0;f<o;f++){let d=r.charAt(f);if(d==="+"||d==="$"||d==="%"||d==="/"){let m=r.charAt(f+1),E="\0";switch(d){case"+":if(m>="A"&&m<="Z")E=String.fromCharCode(m.charCodeAt(0)+32);else throw new U;break;case"$":if(m>="A"&&m<="Z")E=String.fromCharCode(m.charCodeAt(0)-64);else throw new U;break;case"%":if(m>="A"&&m<="E")E=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")E=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")E=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")E=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")E="\0";else if(m==="V")E="@";else if(m==="W")E="`";else if(m==="X"||m==="Y"||m==="Z")E="";else throw new U;break;case"/":if(m>="A"&&m<="O")E=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")E=":";else throw new U;break}l+=E,f++}else l+=d}return l}}Xt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Xt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Xt.ASTERISK_ENCODING=148;class rt extends Yt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,o,l){let f=this.decodeStart(o),d=this.decodeEnd(o),m=new G;rt.decodeMiddle(o,f[1],d[0],m);let E=m.toString(),x=null;l!=null&&(x=l.get(Be.ALLOWED_LENGTHS)),x==null&&(x=rt.DEFAULT_ALLOWED_LENGTHS);let v=E.length,R=!1,M=0;for(let K of x){if(v===K){R=!0;break}K>M&&(M=K)}if(!R&&v>M&&(R=!0),!R)throw new U;const P=[new Fe(f[1],r),new Fe(d[0],r)];return new ke(E,null,0,P,Le.ITF,new Date().getTime())}static decodeMiddle(r,o,l,f){let d=new Int32Array(10),m=new Int32Array(5),E=new Int32Array(5);for(d.fill(0),m.fill(0),E.fill(0);o<l;){Yt.recordPattern(r,o,d);for(let v=0;v<5;v++){let R=2*v;m[v]=d[R],E[v]=d[R+1]}let x=rt.decodeDigit(m);f.append(x.toString()),x=this.decodeDigit(E),f.append(x.toString()),d.forEach(function(v){o+=v})}}decodeStart(r){let o=rt.skipWhiteSpace(r),l=rt.findGuardPattern(r,o,rt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(r,l[0]),l}validateQuietZone(r,o){let l=this.narrowLineWidth*10;l=l<o?l:o;for(let f=o-1;l>0&&f>=0&&!r.get(f);f--)l--;if(l!==0)throw new he}static skipWhiteSpace(r){const o=r.getSize(),l=r.getNextSet(0);if(l===o)throw new he;return l}decodeEnd(r){r.reverse();try{let o=rt.skipWhiteSpace(r),l;try{l=rt.findGuardPattern(r,o,rt.END_PATTERN_REVERSED[0])}catch(d){d instanceof he&&(l=rt.findGuardPattern(r,o,rt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,l[0]);let f=l[0];return l[0]=r.getSize()-l[1],l[1]=r.getSize()-f,l}finally{r.reverse()}}static findGuardPattern(r,o,l){let f=l.length,d=new Int32Array(f),m=r.getSize(),E=!1,x=0,v=o;d.fill(0);for(let R=o;R<m;R++)if(r.get(R)!==E)d[x]++;else{if(x===f-1){if(Yt.patternMatchVariance(d,l,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE)return[v,R];v+=d[0]+d[1],Z.arraycopy(d,2,d,0,x-1),d[x-1]=0,d[x]=0,x--}else x++;d[x]=1,E=!E}throw new he}static decodeDigit(r){let o=rt.MAX_AVG_VARIANCE,l=-1,f=rt.PATTERNS.length;for(let d=0;d<f;d++){let m=rt.PATTERNS[d],E=Yt.patternMatchVariance(r,m,rt.MAX_INDIVIDUAL_VARIANCE);E<o?(o=E,l=d):E===o&&(l=-1)}if(l>=0)return l%10;throw new he}}rt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],rt.MAX_AVG_VARIANCE=.38,rt.MAX_INDIVIDUAL_VARIANCE=.5,rt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],rt.START_PATTERN=Int32Array.from([1,1,1,1]),rt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class hn extends Yt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let o=!1,l,f=0,d=Int32Array.from([0,0,0]);for(;!o;){d=Int32Array.from([0,0,0]),l=hn.findGuardPattern(r,f,!1,this.START_END_PATTERN,d);let m=l[0];f=l[1];let E=m-(f-m);E>=0&&(o=r.isRange(E,m,!1))}return l}static checkChecksum(r){return hn.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let o=r.length;if(o===0)return!1;let l=parseInt(r.charAt(o-1),10);return hn.getStandardUPCEANChecksum(r.substring(0,o-1))===l}static getStandardUPCEANChecksum(r){let o=r.length,l=0;for(let f=o-1;f>=0;f-=2){let d=r.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new U;l+=d}l*=3;for(let f=o-2;f>=0;f-=2){let d=r.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new U;l+=d}return(1e3-l)%10}static decodeEnd(r,o){return hn.findGuardPattern(r,o,!1,hn.START_END_PATTERN,new Int32Array(hn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,o,l,f){return this.findGuardPattern(r,o,l,f,new Int32Array(f.length))}static findGuardPattern(r,o,l,f,d){let m=r.getSize();o=l?r.getNextUnset(o):r.getNextSet(o);let E=0,x=o,v=f.length,R=l;for(let M=o;M<m;M++)if(r.get(M)!==R)d[E]++;else{if(E===v-1){if(Yt.patternMatchVariance(d,f,hn.MAX_INDIVIDUAL_VARIANCE)<hn.MAX_AVG_VARIANCE)return Int32Array.from([x,M]);x+=d[0]+d[1];let P=d.slice(2,d.length-1);for(let H=0;H<E-1;H++)d[H]=P[H];d[E-1]=0,d[E]=0,E--}else E++;d[E]=1,R=!R}throw new he}static decodeDigit(r,o,l,f){this.recordPattern(r,l,o);let d=this.MAX_AVG_VARIANCE,m=-1,E=f.length;for(let x=0;x<E;x++){let v=f[x],R=Yt.patternMatchVariance(o,v,hn.MAX_INDIVIDUAL_VARIANCE);R<d&&(d=R,m=x)}if(m>=0)return m;throw new he}}hn.MAX_AVG_VARIANCE=.48,hn.MAX_INDIVIDUAL_VARIANCE=.7,hn.START_END_PATTERN=Int32Array.from([1,1,1]),hn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),hn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),hn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ur{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,o,l){let f=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,f),m=f.toString(),E=Ur.parseExtensionString(m),x=[new Fe((l[0]+l[1])/2,r),new Fe(d,r)],v=new ke(m,null,0,x,Le.UPC_EAN_EXTENSION,new Date().getTime());return E!=null&&v.putAllMetadata(E),v}decodeMiddle(r,o,l){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=r.getSize(),m=o[1],E=0;for(let v=0;v<5&&m<d;v++){let R=hn.decodeDigit(r,f,m,hn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let M of f)m+=M;R>=10&&(E|=1<<4-v),v!==4&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(l.length!==5)throw new he;let x=this.determineCheckDigit(E);if(Ur.extensionChecksum(l.toString())!==x)throw new he;return m}static extensionChecksum(r){let o=r.length,l=0;for(let f=o-2;f>=0;f-=2)l+=r.charAt(f).charCodeAt(0)-48;l*=3;for(let f=o-1;f>=0;f-=2)l+=r.charAt(f).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(r){for(let o=0;o<10;o++)if(r===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new he}static parseExtensionString(r){if(r.length!==5)return null;let o=Ur.parseExtension5String(r);return o==null?null:new Map([[xt.SUGGESTED_PRICE,o]])}static parseExtension5String(r){let o;switch(r.charAt(0)){case"0":o="";break;case"5":o="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let l=parseInt(r.substring(1)),f=(l/100).toString(),d=l%100,m=d<10?"0"+d:d.toString();return o+f+"."+m}}class Pa{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,o,l){let f=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,f),m=f.toString(),E=Pa.parseExtensionString(m),x=[new Fe((l[0]+l[1])/2,r),new Fe(d,r)],v=new ke(m,null,0,x,Le.UPC_EAN_EXTENSION,new Date().getTime());return E!=null&&v.putAllMetadata(E),v}decodeMiddle(r,o,l){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=r.getSize(),m=o[1],E=0;for(let x=0;x<2&&m<d;x++){let v=hn.decodeDigit(r,f,m,hn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+v%10);for(let R of f)m+=R;v>=10&&(E|=1<<1-x),x!==1&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(l.length!==2)throw new he;if(parseInt(l.toString())%4!==E)throw new he;return m}static parseExtensionString(r){return r.length!==2?null:new Map([[xt.ISSUE_NUMBER,parseInt(r)]])}}class yr{static decodeRow(r,o,l){let f=hn.findGuardPattern(o,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ur().decodeRow(r,o,f)}catch{return new Pa().decodeRow(r,o,f)}}}yr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class At extends hn{constructor(){super(),this.decodeRowStringBuffer="",At.L_AND_G_PATTERNS=At.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let o=At.L_PATTERNS[r-10],l=new Int32Array(o.length);for(let f=0;f<o.length;f++)l[f]=o[o.length-f-1];At.L_AND_G_PATTERNS[r]=l}}decodeRow(r,o,l){let f=At.findStartGuardPattern(o),d=l==null?null:l.get(Be.NEED_RESULT_POINT_CALLBACK);if(d!=null){const be=new Fe((f[0]+f[1])/2,r);d.foundPossibleResultPoint(be)}let m=this.decodeMiddle(o,f,this.decodeRowStringBuffer),E=m.rowOffset,x=m.resultString;if(d!=null){const be=new Fe(E,r);d.foundPossibleResultPoint(be)}let v=this.decodeEnd(o,E);if(d!=null){const be=new Fe((v[0]+v[1])/2,r);d.foundPossibleResultPoint(be)}let R=v[1],M=R+(R-v[0]);if(M>=o.getSize()||!o.isRange(R,M,!1))throw new he;let P=x.toString();if(P.length<8)throw new U;if(!At.checkChecksum(P))throw new j;let H=(f[1]+f[0])/2,K=(v[1]+v[0])/2,$=this.getBarcodeFormat(),ae=[new Fe(H,r),new Fe(K,r)],ye=new ke(P,null,0,ae,$,new Date().getTime()),De=0;try{let be=yr.decodeRow(r,o,v[1]);ye.putMetadata(xt.UPC_EAN_EXTENSION,be.getText()),ye.putAllMetadata(be.getResultMetadata()),ye.addResultPoints(be.getResultPoints()),De=be.getText().length}catch{}let Oe=l==null?null:l.get(Be.ALLOWED_EAN_EXTENSIONS);if(Oe!=null){let be=!1;for(let _t in Oe)if(De.toString()===_t){be=!0;break}if(!be)throw new he}return ye}decodeEnd(r,o){return At.findGuardPattern(r,o,!1,At.START_END_PATTERN,new Int32Array(At.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return At.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let o=r.length;if(o===0)return!1;let l=parseInt(r.charAt(o-1),10);return At.getStandardUPCEANChecksum(r.substring(0,o-1))===l}static getStandardUPCEANChecksum(r){let o=r.length,l=0;for(let f=o-1;f>=0;f-=2){let d=r.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new U;l+=d}l*=3;for(let f=o-2;f>=0;f-=2){let d=r.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new U;l+=d}return(1e3-l)%10}}class on extends At{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,o,l){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=r.getSize(),m=o[1],E=0;for(let v=0;v<6&&m<d;v++){let R=At.decodeDigit(r,f,m,At.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let M of f)m+=M;R>=10&&(E|=1<<5-v)}l=on.determineFirstDigit(l,E),m=At.findGuardPattern(r,m,!0,At.MIDDLE_PATTERN,new Int32Array(At.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<6&&m<d;v++){let R=At.decodeDigit(r,f,m,At.L_PATTERNS);l+=String.fromCharCode(48+R);for(let M of f)m+=M}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Le.EAN_13}static determineFirstDigit(r,o){for(let l=0;l<10;l++)if(o===this.FIRST_DIGIT_ENCODINGS[l])return r=String.fromCharCode(48+l)+r,r;throw new he}}on.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Er extends At{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,o,l){const f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=r.getSize(),m=o[1];for(let x=0;x<4&&m<d;x++){let v=At.decodeDigit(r,f,m,At.L_PATTERNS);l+=String.fromCharCode(48+v);for(let R of f)m+=R}m=At.findGuardPattern(r,m,!0,At.MIDDLE_PATTERN,new Int32Array(At.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<4&&m<d;x++){let v=At.decodeDigit(r,f,m,At.L_PATTERNS);l+=String.fromCharCode(48+v);for(let R of f)m+=R}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Le.EAN_8}}class _r extends At{constructor(){super(...arguments),this.ean13Reader=new on}getBarcodeFormat(){return Le.UPC_A}decode(r,o){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,o,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,o,l))}decodeMiddle(r,o,l){return this.ean13Reader.decodeMiddle(r,o,l)}maybeReturnResult(r){let o=r.getText();if(o.charAt(0)==="0"){let l=new ke(o.substring(1),null,null,r.getResultPoints(),Le.UPC_A);return r.getResultMetadata()!=null&&l.putAllMetadata(r.getResultMetadata()),l}else throw new he}reset(){this.ean13Reader.reset()}}class On extends At{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,o,l){const f=this.decodeMiddleCounters.map(v=>v);f[0]=0,f[1]=0,f[2]=0,f[3]=0;const d=r.getSize();let m=o[1],E=0;for(let v=0;v<6&&m<d;v++){const R=On.decodeDigit(r,f,m,On.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let M of f)m+=M;R>=10&&(E|=1<<5-v)}let x=On.determineNumSysAndCheckDigit(l,E);return{rowOffset:m,resultString:x}}decodeEnd(r,o){return On.findGuardPatternWithoutCounters(r,o,!0,On.MIDDLE_END_PATTERN)}checkChecksum(r){return At.checkChecksum(On.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,o){for(let l=0;l<=1;l++)for(let f=0;f<10;f++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][f]){let d=String.fromCharCode(48+l),m=String.fromCharCode(48+f);return d+r+m}throw he.getNotFoundInstance()}getBarcodeFormat(){return Le.UPC_E}static convertUPCEtoUPCA(r){const o=r.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new G;l.append(r.charAt(0));let f=o[5];switch(f){case 0:case 1:case 2:l.appendChars(o,0,2),l.append(f),l.append("0000"),l.appendChars(o,2,3);break;case 3:l.appendChars(o,0,3),l.append("00000"),l.appendChars(o,3,2);break;case 4:l.appendChars(o,0,4),l.append("00000"),l.append(o[4]);break;default:l.appendChars(o,0,5),l.append("0000"),l.append(f);break}return r.length>=8&&l.append(r.charAt(7)),l.toString()}}On.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),On.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class zo extends Yt{constructor(r){super();let o=r==null?null:r.get(Be.POSSIBLE_FORMATS),l=[];s(o)?(l.push(new on),l.push(new _r),l.push(new Er),l.push(new On)):(o.indexOf(Le.EAN_13)>-1&&l.push(new on),o.indexOf(Le.UPC_A)>-1&&l.push(new _r),o.indexOf(Le.EAN_8)>-1&&l.push(new Er),o.indexOf(Le.UPC_E)>-1&&l.push(new On)),this.readers=l}decodeRow(r,o,l){for(let f of this.readers)try{const d=f.decodeRow(r,o,l),m=d.getBarcodeFormat()===Le.EAN_13&&d.getText().charAt(0)==="0",E=l==null?null:l.get(Be.POSSIBLE_FORMATS),x=E==null||E.includes(Le.UPC_A);if(m&&x){const v=d.getRawBytes(),R=new ke(d.getText().substring(1),v,v?v.length:null,d.getResultPoints(),Le.UPC_A);return R.putAllMetadata(d.getResultMetadata()),R}return d}catch{}throw new he}reset(){for(let r of this.readers)r.reset()}}class Yn extends Yt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,o){for(let l=0;l<o.length;l++)if(Yt.patternMatchVariance(r,o[l],Yn.MAX_INDIVIDUAL_VARIANCE)<Yn.MAX_AVG_VARIANCE)return l;throw new he}static count(r){return $e.sum(new Int32Array(r))}static increment(r,o){let l=0,f=o[0];for(let d=1;d<r.length;d++)o[d]>f&&(f=o[d],l=d);r[l]++}static decrement(r,o){let l=0,f=o[0];for(let d=1;d<r.length;d++)o[d]<f&&(f=o[d],l=d);r[l]--}static isFinderPattern(r){let o=r[0]+r[1],l=o+r[2]+r[3],f=o/l;if(f>=Yn.MIN_FINDER_PATTERN_RATIO&&f<=Yn.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let E of r)E>m&&(m=E),E<d&&(d=E);return m<10*d}return!1}}Yn.MAX_AVG_VARIANCE=.2,Yn.MAX_INDIVIDUAL_VARIANCE=.45,Yn.MIN_FINDER_PATTERN_RATIO=9.5/12,Yn.MAX_FINDER_PATTERN_RATIO=12.5/14;class _i{constructor(r,o){this.value=r,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof _i))return!1;const o=r;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Vr{constructor(r,o,l,f,d){this.value=r,this.startEnd=o,this.value=r,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new Fe(l,d)),this.resultPoints.push(new Fe(f,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof Vr))return!1;const o=r;return this.value===o.value}hashCode(){return this.value}}class nr{constructor(){}static getRSSvalue(r,o,l){let f=0;for(let x of r)f+=x;let d=0,m=0,E=r.length;for(let x=0;x<E-1;x++){let v;for(v=1,m|=1<<x;v<r[x];v++,m&=~(1<<x)){let R=nr.combins(f-v-1,E-x-2);if(l&&m===0&&f-v-(E-x-1)>=E-x-1&&(R-=nr.combins(f-v-(E-x),E-x-2)),E-x-1>1){let M=0;for(let P=f-v-(E-x-2);P>o;P--)M+=nr.combins(f-v-P-1,E-x-3);R-=M*(E-1-x)}else f-v>o&&R--;d+=R}f-=v}return d}static combins(r,o){let l,f;r-o>o?(f=o,l=r-o):(f=r-o,l=o);let d=1,m=1;for(let E=r;E>l;E--)d*=E,m<=f&&(d/=m,m++);for(;m<=f;)d/=m,m++;return d}}class Ys{static buildBitArray(r){let o=r.length*2-1;r[r.length-1].getRightChar()==null&&(o-=1);let l=12*o,f=new Re(l),d=0,E=r[0].getRightChar().getValue();for(let x=11;x>=0;--x)(E&1<<x)!=0&&f.set(d),d++;for(let x=1;x<r.length;++x){let v=r[x],R=v.getLeftChar().getValue();for(let M=11;M>=0;--M)(R&1<<M)!=0&&f.set(d),d++;if(v.getRightChar()!=null){let M=v.getRightChar().getValue();for(let P=11;P>=0;--P)(M&1<<P)!=0&&f.set(d),d++}}return f}}class Ar{constructor(r,o){o?this.decodedInformation=null:(this.finished=r,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Xs{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class Un extends Xs{constructor(r,o){super(r),this.value=o}getValue(){return this.value}isFNC1(){return this.value===Un.FNC1}}Un.FNC1="$";class Ai extends Xs{constructor(r,o,l){super(r),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class wi extends Xs{constructor(r,o,l){if(super(r),o<0||o>10||l<0||l>10)throw new U;this.firstDigit=o,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===wi.FNC1}isSecondDigitFNC1(){return this.secondDigit===wi.FNC1}isAnyFNC1(){return this.firstDigit===wi.FNC1||this.secondDigit===wi.FNC1}}wi.FNC1=10;class Ue{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new he;let o=r.substring(0,2);for(let d of Ue.TWO_DIGIT_DATA_LENGTH)if(d[0]===o)return d[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(2,d[2],r):Ue.processFixedAI(2,d[1],r);if(r.length<3)throw new he;let l=r.substring(0,3);for(let d of Ue.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(3,d[2],r):Ue.processFixedAI(3,d[1],r);for(let d of Ue.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(4,d[2],r):Ue.processFixedAI(4,d[1],r);if(r.length<4)throw new he;let f=r.substring(0,4);for(let d of Ue.FOUR_DIGIT_DATA_LENGTH)if(d[0]===f)return d[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(4,d[2],r):Ue.processFixedAI(4,d[1],r);throw new he}static processFixedAI(r,o,l){if(l.length<r)throw new he;let f=l.substring(0,r);if(l.length<r+o)throw new he;let d=l.substring(r,r+o),m=l.substring(r+o),E="("+f+")"+d,x=Ue.parseFieldsInGeneralPurpose(m);return x==null?E:E+x}static processVariableAI(r,o,l){let f=l.substring(0,r),d;l.length<r+o?d=l.length:d=r+o;let m=l.substring(r,d),E=l.substring(d),x="("+f+")"+m,v=Ue.parseFieldsInGeneralPurpose(E);return v==null?x:x+v}}Ue.VARIABLE_LENGTH=[],Ue.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ue.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ue.VARIABLE_LENGTH,20],["22",Ue.VARIABLE_LENGTH,29],["30",Ue.VARIABLE_LENGTH,8],["37",Ue.VARIABLE_LENGTH,8],["90",Ue.VARIABLE_LENGTH,30],["91",Ue.VARIABLE_LENGTH,30],["92",Ue.VARIABLE_LENGTH,30],["93",Ue.VARIABLE_LENGTH,30],["94",Ue.VARIABLE_LENGTH,30],["95",Ue.VARIABLE_LENGTH,30],["96",Ue.VARIABLE_LENGTH,30],["97",Ue.VARIABLE_LENGTH,3],["98",Ue.VARIABLE_LENGTH,30],["99",Ue.VARIABLE_LENGTH,30]],Ue.THREE_DIGIT_DATA_LENGTH=[["240",Ue.VARIABLE_LENGTH,30],["241",Ue.VARIABLE_LENGTH,30],["242",Ue.VARIABLE_LENGTH,6],["250",Ue.VARIABLE_LENGTH,30],["251",Ue.VARIABLE_LENGTH,30],["253",Ue.VARIABLE_LENGTH,17],["254",Ue.VARIABLE_LENGTH,20],["400",Ue.VARIABLE_LENGTH,30],["401",Ue.VARIABLE_LENGTH,30],["402",17],["403",Ue.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ue.VARIABLE_LENGTH,20],["421",Ue.VARIABLE_LENGTH,15],["422",3],["423",Ue.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ue.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ue.VARIABLE_LENGTH,15],["391",Ue.VARIABLE_LENGTH,18],["392",Ue.VARIABLE_LENGTH,15],["393",Ue.VARIABLE_LENGTH,18],["703",Ue.VARIABLE_LENGTH,30]],Ue.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ue.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ue.VARIABLE_LENGTH,20],["8003",Ue.VARIABLE_LENGTH,30],["8004",Ue.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ue.VARIABLE_LENGTH,30],["8008",Ue.VARIABLE_LENGTH,12],["8018",18],["8020",Ue.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ue.VARIABLE_LENGTH,70],["8200",Ue.VARIABLE_LENGTH,70]];class hi{constructor(r){this.buffer=new G,this.information=r}decodeAllCodes(r,o){let l=o,f=null;do{let d=this.decodeGeneralPurposeField(l,f),m=Ue.parseFieldsInGeneralPurpose(d.getNewString());if(m!=null&&r.append(m),d.isRemaining()?f=""+d.getRemainingValue():f=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let o=r;o<r+3;++o)if(this.information.get(o))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(r,4);return d===0?new wi(this.information.getSize(),wi.FNC1,wi.FNC1):new wi(this.information.getSize(),d-1,wi.FNC1)}let o=this.extractNumericValueFromBitArray(r,7),l=(o-8)/11,f=(o-8)%11;return new wi(r+7,l,f)}extractNumericValueFromBitArray(r,o){return hi.extractNumericValueFromBitArray(this.information,r,o)}static extractNumericValueFromBitArray(r,o,l){let f=0;for(let d=0;d<l;++d)r.get(o+d)&&(f|=1<<l-d-1);return f}decodeGeneralPurposeField(r,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(r);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Ai(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Ai(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,o;do{let l=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),r=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),r=o.isFinished()):(o=this.parseNumericBlock(),r=o.isFinished()),!(l!==this.current.getPosition())&&!r)break}while(!r);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let o;return r.isSecondDigitFNC1()?o=new Ai(this.current.getPosition(),this.buffer.toString()):o=new Ai(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new Ar(!0,o)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let o=new Ai(this.current.getPosition(),this.buffer.toString());return new Ar(!0,o)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ar(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let o=new Ai(this.current.getPosition(),this.buffer.toString());return new Ar(!0,o)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ar(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let o=new Ai(this.current.getPosition(),this.buffer.toString());return new Ar(!0,o)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ar(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,5);if(o>=5&&o<16)return!0;if(r+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<116)return!0;if(r+8>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(r,8);return f>=232&&f<253}decodeIsoIec646(r){let o=this.extractNumericValueFromBitArray(r,5);if(o===15)return new Un(r+5,Un.FNC1);if(o>=5&&o<15)return new Un(r+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<90)return new Un(r+7,""+(l+1));if(l>=90&&l<116)return new Un(r+7,""+(l+7));let f=this.extractNumericValueFromBitArray(r,8),d;switch(f){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new U}return new Un(r+8,d)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,5);if(o>=5&&o<16)return!0;if(r+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,6);return l>=16&&l<63}decodeAlphanumeric(r){let o=this.extractNumericValueFromBitArray(r,5);if(o===15)return new Un(r+5,Un.FNC1);if(o>=5&&o<15)return new Un(r+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(r,6);if(l>=32&&l<58)return new Un(r+6,""+(l+33));let f;switch(l){case 58:f="*";break;case 59:f=",";break;case 60:f="-";break;case 61:f=".";break;case 62:f="/";break;default:throw new Pi("Decoding invalid alphanumeric value: "+l)}return new Un(r+6,f)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let o=0;o<5&&o+r<this.information.getSize();++o)if(o===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+o))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let o=r;o<r+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let o=0;o<4&&o+r<this.information.getSize();++o)if(this.information.get(r+o))return!1;return!0}}class Tn{constructor(r){this.information=r,this.generalDecoder=new hi(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ht extends Tn{constructor(r){super(r)}encodeCompressedGtin(r,o){r.append("(01)");let l=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,o,l)}encodeCompressedGtinWithoutAI(r,o,l){for(let f=0;f<4;++f){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*f,10);d/100===0&&r.append("0"),d/10===0&&r.append("0"),r.append(d)}Ht.appendCheckDigit(r,l)}static appendCheckDigit(r,o){let l=0;for(let f=0;f<13;f++){let d=r.charAt(f+o).charCodeAt(0)-48;l+=(f&1)===0?3*d:d}l=10-l%10,l===10&&(l=0),r.append(l)}}Ht.GTIN_SIZE=40;class xi extends Ht{constructor(r){super(r)}parseInformation(){let r=new G;r.append("(01)");let o=r.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(xi.HEADER_SIZE,4);return r.append(l),this.encodeCompressedGtinWithoutAI(r,xi.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(r,xi.HEADER_SIZE+44)}}xi.HEADER_SIZE=4;class ls extends Tn{constructor(r){super(r)}parseInformation(){let r=new G;return this.getGeneralDecoder().decodeAllCodes(r,ls.HEADER_SIZE)}}ls.HEADER_SIZE=5;class ka extends Ht{constructor(r){super(r)}encodeCompressedWeight(r,o,l){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(o,l);this.addWeightCode(r,f);let d=this.checkWeight(f),m=1e5;for(let E=0;E<5;++E)d/m===0&&r.append("0"),m/=10;r.append(d)}}class Wi extends ka{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=Wi.HEADER_SIZE+ka.GTIN_SIZE+Wi.WEIGHT_SIZE)throw new he;let r=new G;return this.encodeCompressedGtin(r,Wi.HEADER_SIZE),this.encodeCompressedWeight(r,Wi.HEADER_SIZE+ka.GTIN_SIZE,Wi.WEIGHT_SIZE),r.toString()}}Wi.HEADER_SIZE=5,Wi.WEIGHT_SIZE=15;class Ml extends Wi{constructor(r){super(r)}addWeightCode(r,o){r.append("(3103)")}checkWeight(r){return r}}class Fr extends Wi{constructor(r){super(r)}addWeightCode(r,o){o<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class Ti extends Ht{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Ti.HEADER_SIZE+Ht.GTIN_SIZE)throw new he;let r=new G;this.encodeCompressedGtin(r,Ti.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Ti.HEADER_SIZE+Ht.GTIN_SIZE,Ti.LAST_DIGIT_SIZE);r.append("(392"),r.append(o),r.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Ti.HEADER_SIZE+Ht.GTIN_SIZE+Ti.LAST_DIGIT_SIZE,null);return r.append(l.getNewString()),r.toString()}}Ti.HEADER_SIZE=8,Ti.LAST_DIGIT_SIZE=2;class mn extends Ht{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<mn.HEADER_SIZE+Ht.GTIN_SIZE)throw new he;let r=new G;this.encodeCompressedGtin(r,mn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(mn.HEADER_SIZE+Ht.GTIN_SIZE,mn.LAST_DIGIT_SIZE);r.append("(393"),r.append(o),r.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(mn.HEADER_SIZE+Ht.GTIN_SIZE+mn.LAST_DIGIT_SIZE,mn.FIRST_THREE_DIGITS_SIZE);l/100==0&&r.append("0"),l/10==0&&r.append("0"),r.append(l);let f=this.getGeneralDecoder().decodeGeneralPurposeField(mn.HEADER_SIZE+Ht.GTIN_SIZE+mn.LAST_DIGIT_SIZE+mn.FIRST_THREE_DIGITS_SIZE,null);return r.append(f.getNewString()),r.toString()}}mn.HEADER_SIZE=8,mn.LAST_DIGIT_SIZE=2,mn.FIRST_THREE_DIGITS_SIZE=10;class St extends ka{constructor(r,o,l){super(r),this.dateCode=l,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=St.HEADER_SIZE+St.GTIN_SIZE+St.WEIGHT_SIZE+St.DATE_SIZE)throw new he;let r=new G;return this.encodeCompressedGtin(r,St.HEADER_SIZE),this.encodeCompressedWeight(r,St.HEADER_SIZE+St.GTIN_SIZE,St.WEIGHT_SIZE),this.encodeCompressedDate(r,St.HEADER_SIZE+St.GTIN_SIZE+St.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(o,St.DATE_SIZE);if(l==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let f=l%32;l/=32;let d=l%12+1;l/=12;let m=l;m/10==0&&r.append("0"),r.append(m),d/10==0&&r.append("0"),r.append(d),f/10==0&&r.append("0"),r.append(f)}addWeightCode(r,o){r.append("("),r.append(this.firstAIdigits),r.append(o/1e5),r.append(")")}checkWeight(r){return r%1e5}}St.HEADER_SIZE=8,St.WEIGHT_SIZE=20,St.DATE_SIZE=16;function ki(D){try{if(D.get(1))return new xi(D);if(!D.get(2))return new ls(D);switch(hi.extractNumericValueFromBitArray(D,1,4)){case 4:return new Ml(D);case 5:return new Fr(D)}switch(hi.extractNumericValueFromBitArray(D,1,5)){case 12:return new Ti(D);case 13:return new mn(D)}switch(hi.extractNumericValueFromBitArray(D,1,7)){case 56:return new St(D,"310","11");case 57:return new St(D,"320","11");case 58:return new St(D,"310","13");case 59:return new St(D,"320","13");case 60:return new St(D,"310","15");case 61:return new St(D,"320","15");case 62:return new St(D,"310","17");case 63:return new St(D,"320","17")}}catch(r){throw console.log(r),new Pi("unknown decoder: "+D)}}class ai{constructor(r,o,l,f){this.leftchar=r,this.rightchar=o,this.finderpattern=l,this.maybeLast=f}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,o){return r instanceof ai?ai.equalsOrNull(r.leftchar,o.leftchar)&&ai.equalsOrNull(r.rightchar,o.rightchar)&&ai.equalsOrNull(r.finderpattern,o.finderpattern):!1}static equalsOrNull(r,o){return r===null?o===null:ai.equals(r,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Cn{constructor(r,o,l){this.pairs=r,this.rowNumber=o,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,o){return r instanceof Cn?this.checkEqualitity(r,o)&&r.wasReversed===o.wasReversed:!1}checkEqualitity(r,o){if(!r||!o)return;let l;return r.forEach((f,d)=>{o.forEach(m=>{f.getLeftChar().getValue()===m.getLeftChar().getValue()&&f.getRightChar().getValue()===m.getRightChar().getValue()&&f.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(l=!0)})}),l}}class Se extends Yn{constructor(r){super(...arguments),this.pairs=new Array(Se.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,o,l){this.pairs.length=0,this.startFromEven=!1;try{return Se.constructResult(this.decodeRow2pairs(r,o))}catch(f){this.verbose&&console.log(f)}return this.pairs.length=0,this.startFromEven=!0,Se.constructResult(this.decodeRow2pairs(r,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,o){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,r))}catch(d){if(d instanceof he){if(!this.pairs.length)throw new he;l=!0}}if(this.checkChecksum())return this.pairs;let f;if(this.rows.length?f=!0:f=!1,this.storeRow(r,!1),f){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new he}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return r&&(this.rows=this.rows.reverse()),o}checkRows(r,o){for(let l=o;l<this.rows.length;l++){let f=this.rows[l];this.pairs.length=0;for(let m of r)this.pairs.push(m.getPairs());if(this.pairs.push(f.getPairs()),!Se.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(r);d.push(f);try{return this.checkRows(d,l+1)}catch(m){this.verbose&&console.log(m)}}throw new he}static isValidSequence(r){for(let o of Se.FINDER_PATTERN_SEQUENCES){if(r.length>o.length)continue;let l=!0;for(let f=0;f<r.length;f++)if(r[f].getFinderPattern().getValue()!=o[f]){l=!1;break}if(l)return!0}return!1}storeRow(r,o){let l=0,f=!1,d=!1;for(;l<this.rows.length;){let m=this.rows[l];if(m.getRowNumber()>r){d=m.isEquivalent(this.pairs);break}f=m.isEquivalent(this.pairs),l++}d||f||Se.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Cn(this.pairs,r,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,o){for(let l of o)if(l.getPairs().length!==r.length){for(let f of l.getPairs())for(let d of r)if(ai.equals(f,d))break}}static isPartialRow(r,o){for(let l of o){let f=!0;for(let d of r){let m=!1;for(let E of l.getPairs())if(d.equals(E)){m=!0;break}if(!m){f=!1;break}}if(f)return!0}return!1}getRows(){return this.rows}static constructResult(r){let o=Ys.buildBitArray(r),f=ki(o).parseInformation(),d=r[0].getFinderPattern().getResultPoints(),m=r[r.length-1].getFinderPattern().getResultPoints(),E=[d[0],d[1],m[0],m[1]];return new ke(f,null,null,E,Le.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),o=r.getLeftChar(),l=r.getRightChar();if(l==null)return!1;let f=l.getChecksumPortion(),d=2;for(let E=1;E<this.pairs.size();++E){let x=this.pairs.get(E);f+=x.getLeftChar().getChecksumPortion(),d++;let v=x.getRightChar();v!=null&&(f+=v.getChecksumPortion(),d++)}return f%=211,211*(d-4)+f==o.getValue()}static getNextSecondBar(r,o){let l;return r.get(o)?(l=r.getNextUnset(o),l=r.getNextSet(l)):(l=r.getNextSet(o),l=r.getNextUnset(l)),l}retrieveNextPair(r,o,l){let f=o.length%2==0;this.startFromEven&&(f=!f);let d,m=!0,E=-1;do this.findNextPair(r,o,E),d=this.parseFoundFinderPattern(r,l,f),d==null?E=Se.getNextSecondBar(r,this.startEnd[0]):m=!1;while(m);let x=this.decodeDataCharacter(r,d,f,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new he;let v;try{v=this.decodeDataCharacter(r,d,f,!1)}catch(R){v=null,this.verbose&&console.log(R)}return new ai(x,v,d,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,o,l){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=r.getSize(),m;l>=0?m=l:this.isEmptyPair(o)?m=0:m=o[o.length-1].getFinderPattern().getStartEnd()[1];let E=o.length%2!=0;this.startFromEven&&(E=!E);let x=!1;for(;m<d&&(x=!r.get(m),!!x);)m++;let v=0,R=m;for(let M=m;M<d;M++)if(r.get(M)!=x)f[v]++;else{if(v==3){if(E&&Se.reverseCounters(f),Se.isFinderPattern(f)){this.startEnd[0]=R,this.startEnd[1]=M;return}E&&Se.reverseCounters(f),R+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,v--}else v++;f[v]=1,x=!x}throw new he}static reverseCounters(r){let o=r.length;for(let l=0;l<o/2;++l){let f=r[l];r[l]=r[o-l-1],r[o-l-1]=f}}parseFoundFinderPattern(r,o,l){let f,d,m;if(l){let v=this.startEnd[0]-1;for(;v>=0&&!r.get(v);)v--;v++,f=this.startEnd[0]-v,d=v,m=this.startEnd[1]}else d=this.startEnd[0],m=r.getNextUnset(this.startEnd[1]+1),f=m-this.startEnd[1];let E=this.getDecodeFinderCounters();Z.arraycopy(E,0,E,1,E.length-1),E[0]=f;let x;try{x=this.parseFinderValue(E,Se.FINDER_PATTERNS)}catch{return null}return new Vr(x,[d,m],d,m,o)}decodeDataCharacter(r,o,l,f){let d=this.getDataCharacterCounters();for(let tn=0;tn<d.length;tn++)d[tn]=0;if(f)Se.recordPatternInReverse(r,o.getStartEnd()[0],d);else{Se.recordPattern(r,o.getStartEnd()[1],d);for(let tn=0,oi=d.length-1;tn<oi;tn++,oi--){let $i=d[tn];d[tn]=d[oi],d[oi]=$i}}let m=17,E=$e.sum(new Int32Array(d))/m,x=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(E-x)/x>.3)throw new he;let v=this.getOddCounts(),R=this.getEvenCounts(),M=this.getOddRoundingErrors(),P=this.getEvenRoundingErrors();for(let tn=0;tn<d.length;tn++){let oi=1*d[tn]/E,$i=oi+.5;if($i<1){if(oi<.3)throw new he;$i=1}else if($i>8){if(oi>8.7)throw new he;$i=8}let Ha=tn/2;(tn&1)==0?(v[Ha]=$i,M[Ha]=oi-$i):(R[Ha]=$i,P[Ha]=oi-$i)}this.adjustOddEvenCounts(m);let H=4*o.getValue()+(l?0:2)+(f?0:1)-1,K=0,$=0;for(let tn=v.length-1;tn>=0;tn--){if(Se.isNotA1left(o,l,f)){let oi=Se.WEIGHTS[H][2*tn];$+=v[tn]*oi}K+=v[tn]}let ae=0;for(let tn=R.length-1;tn>=0;tn--)if(Se.isNotA1left(o,l,f)){let oi=Se.WEIGHTS[H][2*tn+1];ae+=R[tn]*oi}let ye=$+ae;if((K&1)!=0||K>13||K<4)throw new he;let De=(13-K)/2,Oe=Se.SYMBOL_WIDEST[De],be=9-Oe,_t=nr.getRSSvalue(v,Oe,!0),ct=nr.getRSSvalue(R,be,!1),Vn=Se.EVEN_TOTAL_SUBSET[De],or=Se.GSUM[De],Ii=_t*Vn+ct+or;return new _i(Ii,ye)}static isNotA1left(r,o,l){return!(r.getValue()==0&&o&&l)}adjustOddEvenCounts(r){let o=$e.sum(new Int32Array(this.getOddCounts())),l=$e.sum(new Int32Array(this.getEvenCounts())),f=!1,d=!1;o>13?d=!0:o<4&&(f=!0);let m=!1,E=!1;l>13?E=!0:l<4&&(m=!0);let x=o+l-r,v=(o&1)==1,R=(l&1)==0;if(x==1)if(v){if(R)throw new he;d=!0}else{if(!R)throw new he;E=!0}else if(x==-1)if(v){if(R)throw new he;f=!0}else{if(!R)throw new he;m=!0}else if(x==0){if(v){if(!R)throw new he;o<l?(f=!0,E=!0):(d=!0,m=!0)}else if(R)throw new he}else throw new he;if(f){if(d)throw new he;Se.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Se.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(E)throw new he;Se.increment(this.getEvenCounts(),this.getOddRoundingErrors())}E&&Se.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Se.SYMBOL_WIDEST=[7,5,4,3,1],Se.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Se.GSUM=[0,348,1388,2948,3988],Se.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Se.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Se.FINDER_PAT_A=0,Se.FINDER_PAT_B=1,Se.FINDER_PAT_C=2,Se.FINDER_PAT_D=3,Se.FINDER_PAT_E=4,Se.FINDER_PAT_F=5,Se.FINDER_PATTERN_SEQUENCES=[[Se.FINDER_PAT_A,Se.FINDER_PAT_A],[Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B],[Se.FINDER_PAT_A,Se.FINDER_PAT_C,Se.FINDER_PAT_B,Se.FINDER_PAT_D],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_C],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_D,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_D],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_E],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F]],Se.MAX_PAIRS=11;class jo extends _i{constructor(r,o,l){super(r,o),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Gt extends Yn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,o,l){const f=this.decodePair(o,!1,r,l);Gt.addOrTally(this.possibleLeftPairs,f),o.reverse();let d=this.decodePair(o,!0,r,l);Gt.addOrTally(this.possibleRightPairs,d),o.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let E of this.possibleRightPairs)if(E.getCount()>1&&Gt.checkChecksum(m,E))return Gt.constructResult(m,E)}throw new he}static addOrTally(r,o){if(o==null)return;let l=!1;for(let f of r)if(f.getValue()===o.getValue()){f.incrementCount(),l=!0;break}l||r.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,o){let l=4537077*r.getValue()+o.getValue(),f=new String(l).toString(),d=new G;for(let v=13-f.length;v>0;v--)d.append("0");d.append(f);let m=0;for(let v=0;v<13;v++){let R=d.charAt(v).charCodeAt(0)-48;m+=(v&1)===0?3*R:R}m=10-m%10,m===10&&(m=0),d.append(m.toString());let E=r.getFinderPattern().getResultPoints(),x=o.getFinderPattern().getResultPoints();return new ke(d.toString(),null,0,[E[0],E[1],x[0],x[1]],Le.RSS_14,new Date().getTime())}static checkChecksum(r,o){let l=(r.getChecksumPortion()+16*o.getChecksumPortion())%79,f=9*r.getFinderPattern().getValue()+o.getFinderPattern().getValue();return f>72&&f--,f>8&&f--,l===f}decodePair(r,o,l,f){try{let d=this.findFinderPattern(r,o),m=this.parseFoundFinderPattern(r,l,o,d),E=f==null?null:f.get(Be.NEED_RESULT_POINT_CALLBACK);if(E!=null){let R=(d[0]+d[1])/2;o&&(R=r.getSize()-1-R),E.foundPossibleResultPoint(new Fe(R,l))}let x=this.decodeDataCharacter(r,m,!0),v=this.decodeDataCharacter(r,m,!1);return new jo(1597*x.getValue()+v.getValue(),x.getChecksumPortion()+4*v.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(r,o,l){let f=this.getDataCharacterCounters();for(let ae=0;ae<f.length;ae++)f[ae]=0;if(l)Yt.recordPatternInReverse(r,o.getStartEnd()[0],f);else{Yt.recordPattern(r,o.getStartEnd()[1]+1,f);for(let ae=0,ye=f.length-1;ae<ye;ae++,ye--){let De=f[ae];f[ae]=f[ye],f[ye]=De}}let d=l?16:15,m=$e.sum(new Int32Array(f))/d,E=this.getOddCounts(),x=this.getEvenCounts(),v=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let ae=0;ae<f.length;ae++){let ye=f[ae]/m,De=Math.floor(ye+.5);De<1?De=1:De>8&&(De=8);let Oe=Math.floor(ae/2);(ae&1)===0?(E[Oe]=De,v[Oe]=ye-De):(x[Oe]=De,R[Oe]=ye-De)}this.adjustOddEvenCounts(l,d);let M=0,P=0;for(let ae=E.length-1;ae>=0;ae--)P*=9,P+=E[ae],M+=E[ae];let H=0,K=0;for(let ae=x.length-1;ae>=0;ae--)H*=9,H+=x[ae],K+=x[ae];let $=P+3*H;if(l){if((M&1)!==0||M>12||M<4)throw new he;let ae=(12-M)/2,ye=Gt.OUTSIDE_ODD_WIDEST[ae],De=9-ye,Oe=nr.getRSSvalue(E,ye,!1),be=nr.getRSSvalue(x,De,!0),_t=Gt.OUTSIDE_EVEN_TOTAL_SUBSET[ae],ct=Gt.OUTSIDE_GSUM[ae];return new _i(Oe*_t+be+ct,$)}else{if((K&1)!==0||K>10||K<4)throw new he;let ae=(10-K)/2,ye=Gt.INSIDE_ODD_WIDEST[ae],De=9-ye,Oe=nr.getRSSvalue(E,ye,!0),be=nr.getRSSvalue(x,De,!1),_t=Gt.INSIDE_ODD_TOTAL_SUBSET[ae],ct=Gt.INSIDE_GSUM[ae];return new _i(be*_t+Oe+ct,$)}}findFinderPattern(r,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let f=r.getSize(),d=!1,m=0;for(;m<f&&(d=!r.get(m),o!==d);)m++;let E=0,x=m;for(let v=m;v<f;v++)if(r.get(v)!==d)l[E]++;else{if(E===3){if(Yn.isFinderPattern(l))return[x,v];x+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,E--}else E++;l[E]=1,d=!d}throw new he}parseFoundFinderPattern(r,o,l,f){let d=r.get(f[0]),m=f[0]-1;for(;m>=0&&d!==r.get(m);)m--;m++;const E=f[0]-m,x=this.getDecodeFinderCounters(),v=new Int32Array(x.length);Z.arraycopy(x,0,v,1,x.length-1),v[0]=E;const R=this.parseFinderValue(v,Gt.FINDER_PATTERNS);let M=m,P=f[1];return l&&(M=r.getSize()-1-M,P=r.getSize()-1-P),new Vr(R,[m,f[1]],M,P,o)}adjustOddEvenCounts(r,o){let l=$e.sum(new Int32Array(this.getOddCounts())),f=$e.sum(new Int32Array(this.getEvenCounts())),d=!1,m=!1,E=!1,x=!1;r?(l>12?m=!0:l<4&&(d=!0),f>12?x=!0:f<4&&(E=!0)):(l>11?m=!0:l<5&&(d=!0),f>10?x=!0:f<4&&(E=!0));let v=l+f-o,R=(l&1)===(r?1:0),M=(f&1)===1;if(v===1)if(R){if(M)throw new he;m=!0}else{if(!M)throw new he;x=!0}else if(v===-1)if(R){if(M)throw new he;d=!0}else{if(!M)throw new he;E=!0}else if(v===0){if(R){if(!M)throw new he;l<f?(d=!0,x=!0):(m=!0,E=!0)}else if(M)throw new he}else throw new he;if(d){if(m)throw new he;Yn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&Yn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),E){if(x)throw new he;Yn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&Yn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Gt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Gt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Gt.OUTSIDE_GSUM=[0,161,961,2015,2715],Gt.INSIDE_GSUM=[0,336,1036,1516],Gt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Gt.INSIDE_ODD_WIDEST=[2,4,6,8],Gt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ci extends Yt{constructor(r,o){super(),this.readers=[],this.verbose=o===!0;const l=r?r.get(Be.POSSIBLE_FORMATS):null,f=r&&r.get(Be.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Le.EAN_13)||l.includes(Le.UPC_A)||l.includes(Le.EAN_8)||l.includes(Le.UPC_E))&&this.readers.push(new zo(r)),l.includes(Le.CODE_39)&&this.readers.push(new Xt(f)),l.includes(Le.CODE_128)&&this.readers.push(new Ne),l.includes(Le.ITF)&&this.readers.push(new rt),l.includes(Le.RSS_14)&&this.readers.push(new Gt),l.includes(Le.RSS_EXPANDED)&&this.readers.push(new Se(this.verbose))):(this.readers.push(new zo(r)),this.readers.push(new Xt),this.readers.push(new zo(r)),this.readers.push(new Ne),this.readers.push(new rt),this.readers.push(new Gt),this.readers.push(new Se(this.verbose)))}decodeRow(r,o,l){for(let f=0;f<this.readers.length;f++)try{return this.readers[f].decodeRow(r,o,l)}catch{}throw new he}reset(){this.readers.forEach(r=>r.reset())}}class Ho extends Pe{constructor(r=500,o){super(new Ci(o),r,o)}}class Dt{constructor(r,o,l){this.ecCodewords=r,this.ecBlocks=[o],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class It{constructor(r,o){this.count=r,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Et{constructor(r,o,l,f,d,m){this.versionNumber=r,this.symbolSizeRows=o,this.symbolSizeColumns=l,this.dataRegionSizeRows=f,this.dataRegionSizeColumns=d,this.ecBlocks=m;let E=0;const x=m.getECCodewords(),v=m.getECBlocks();for(let R of v)E+=R.getCount()*(R.getDataCodewords()+x);this.totalCodewords=E}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,o){if((r&1)!==0||(o&1)!==0)throw new U;for(let l of Et.VERSIONS)if(l.symbolSizeRows===r&&l.symbolSizeColumns===o)return l;throw new U}toString(){return""+this.versionNumber}static buildVersions(){return[new Et(1,10,10,8,8,new Dt(5,new It(1,3))),new Et(2,12,12,10,10,new Dt(7,new It(1,5))),new Et(3,14,14,12,12,new Dt(10,new It(1,8))),new Et(4,16,16,14,14,new Dt(12,new It(1,12))),new Et(5,18,18,16,16,new Dt(14,new It(1,18))),new Et(6,20,20,18,18,new Dt(18,new It(1,22))),new Et(7,22,22,20,20,new Dt(20,new It(1,30))),new Et(8,24,24,22,22,new Dt(24,new It(1,36))),new Et(9,26,26,24,24,new Dt(28,new It(1,44))),new Et(10,32,32,14,14,new Dt(36,new It(1,62))),new Et(11,36,36,16,16,new Dt(42,new It(1,86))),new Et(12,40,40,18,18,new Dt(48,new It(1,114))),new Et(13,44,44,20,20,new Dt(56,new It(1,144))),new Et(14,48,48,22,22,new Dt(68,new It(1,174))),new Et(15,52,52,24,24,new Dt(42,new It(2,102))),new Et(16,64,64,14,14,new Dt(56,new It(2,140))),new Et(17,72,72,16,16,new Dt(36,new It(4,92))),new Et(18,80,80,18,18,new Dt(48,new It(4,114))),new Et(19,88,88,20,20,new Dt(56,new It(4,144))),new Et(20,96,96,22,22,new Dt(68,new It(4,174))),new Et(21,104,104,24,24,new Dt(56,new It(6,136))),new Et(22,120,120,18,18,new Dt(68,new It(6,175))),new Et(23,132,132,20,20,new Dt(62,new It(8,163))),new Et(24,144,144,22,22,new Dt(62,new It(8,156),new It(2,155))),new Et(25,8,18,6,16,new Dt(7,new It(1,5))),new Et(26,8,32,6,14,new Dt(11,new It(1,10))),new Et(27,12,26,10,24,new Dt(14,new It(1,16))),new Et(28,12,36,10,16,new Dt(18,new It(1,22))),new Et(29,16,36,14,16,new Dt(24,new It(1,32))),new Et(30,16,48,14,22,new Dt(28,new It(1,49)))]}}Et.VERSIONS=Et.buildVersions();class Cs{constructor(r){const o=r.getHeight();if(o<8||o>144||(o&1)!==0)throw new U;this.version=Cs.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new We(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const o=r.getHeight(),l=r.getWidth();return Et.getVersionForDimensions(o,l)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let o=0,l=4,f=0;const d=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let E=!1,x=!1,v=!1,R=!1;do if(l===d&&f===0&&!E)r[o++]=this.readCorner1(d,m)&255,l-=2,f+=2,E=!0;else if(l===d-2&&f===0&&(m&3)!==0&&!x)r[o++]=this.readCorner2(d,m)&255,l-=2,f+=2,x=!0;else if(l===d+4&&f===2&&(m&7)===0&&!v)r[o++]=this.readCorner3(d,m)&255,l-=2,f+=2,v=!0;else if(l===d-2&&f===0&&(m&7)===4&&!R)r[o++]=this.readCorner4(d,m)&255,l-=2,f+=2,R=!0;else{do l<d&&f>=0&&!this.readMappingMatrix.get(f,l)&&(r[o++]=this.readUtah(l,f,d,m)&255),l-=2,f+=2;while(l>=0&&f<m);l+=1,f+=3;do l>=0&&f<m&&!this.readMappingMatrix.get(f,l)&&(r[o++]=this.readUtah(l,f,d,m)&255),l+=2,f-=2;while(l<d&&f>=0);l+=3,f+=1}while(l<d||f<m);if(o!==this.version.getTotalCodewords())throw new U;return r}readModule(r,o,l,f){return r<0&&(r+=l,o+=4-(l+4&7)),o<0&&(o+=f,r+=4-(f+4&7)),this.readMappingMatrix.set(o,r),this.mappingBitMatrix.get(o,r)}readUtah(r,o,l,f){let d=0;return this.readModule(r-2,o-2,l,f)&&(d|=1),d<<=1,this.readModule(r-2,o-1,l,f)&&(d|=1),d<<=1,this.readModule(r-1,o-2,l,f)&&(d|=1),d<<=1,this.readModule(r-1,o-1,l,f)&&(d|=1),d<<=1,this.readModule(r-1,o,l,f)&&(d|=1),d<<=1,this.readModule(r,o-2,l,f)&&(d|=1),d<<=1,this.readModule(r,o-1,l,f)&&(d|=1),d<<=1,this.readModule(r,o,l,f)&&(d|=1),d}readCorner1(r,o){let l=0;return this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,1,r,o)&&(l|=1),l<<=1,this.readModule(r-1,2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(2,o-1,r,o)&&(l|=1),l<<=1,this.readModule(3,o-1,r,o)&&(l|=1),l}readCorner2(r,o){let l=0;return this.readModule(r-3,0,r,o)&&(l|=1),l<<=1,this.readModule(r-2,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(0,o-4,r,o)&&(l|=1),l<<=1,this.readModule(0,o-3,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l}readCorner3(r,o){let l=0;return this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(0,o-3,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-3,r,o)&&(l|=1),l<<=1,this.readModule(1,o-2,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l}readCorner4(r,o){let l=0;return this.readModule(r-3,0,r,o)&&(l|=1),l<<=1,this.readModule(r-2,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(2,o-1,r,o)&&(l|=1),l<<=1,this.readModule(3,o-1,r,o)&&(l|=1),l}extractDataRegion(r){const o=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(r.getHeight()!==o)throw new b("Dimension of bitMatrix must match the version size");const f=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),m=o/f|0,E=l/d|0,x=m*f,v=E*d,R=new We(v,x);for(let M=0;M<m;++M){const P=M*f;for(let H=0;H<E;++H){const K=H*d;for(let $=0;$<f;++$){const ae=M*(f+2)+1+$,ye=P+$;for(let De=0;De<d;++De){const Oe=H*(d+2)+1+De;if(r.get(Oe,ae)){const be=K+De;R.set(be,ye)}}}}}return R}}class vi{constructor(r,o){this.numDataCodewords=r,this.codewords=o}static getDataBlocks(r,o){const l=o.getECBlocks();let f=0;const d=l.getECBlocks();for(let $ of d)f+=$.getCount();const m=new Array(f);let E=0;for(let $ of d)for(let ae=0;ae<$.getCount();ae++){const ye=$.getDataCodewords(),De=l.getECCodewords()+ye;m[E++]=new vi(ye,new Uint8Array(De))}const v=m[0].codewords.length-l.getECCodewords(),R=v-1;let M=0;for(let $=0;$<R;$++)for(let ae=0;ae<E;ae++)m[ae].codewords[$]=r[M++];const P=o.getVersionNumber()===24,H=P?8:E;for(let $=0;$<H;$++)m[$].codewords[v-1]=r[M++];const K=m[0].codewords.length;for(let $=v;$<K;$++)for(let ae=0;ae<E;ae++){const ye=P?(ae+8)%E:ae,De=P&&ye>7?$-1:$;m[ye].codewords[De]=r[M++]}if(M!==r.length)throw new b;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class vn{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new b(""+r);let o=0,l=this.bitOffset,f=this.byteOffset;const d=this.bytes;if(l>0){const m=8-l,E=r<m?r:m,x=m-E,v=255>>8-E<<x;o=(d[f]&v)>>x,r-=E,l+=E,l===8&&(l=0,f++)}if(r>0){for(;r>=8;)o=o<<8|d[f]&255,f++,r-=8;if(r>0){const m=8-r,E=255>>m<<m;o=o<<r|(d[f]&E)>>m,l+=r}}return this.bitOffset=l,this.byteOffset=f,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Ct;(function(D){D[D.PAD_ENCODE=0]="PAD_ENCODE",D[D.ASCII_ENCODE=1]="ASCII_ENCODE",D[D.C40_ENCODE=2]="C40_ENCODE",D[D.TEXT_ENCODE=3]="TEXT_ENCODE",D[D.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",D[D.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",D[D.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ct||(Ct={}));class Si{static decode(r){const o=new vn(r),l=new G,f=new G,d=new Array;let m=Ct.ASCII_ENCODE;do if(m===Ct.ASCII_ENCODE)m=this.decodeAsciiSegment(o,l,f);else{switch(m){case Ct.C40_ENCODE:this.decodeC40Segment(o,l);break;case Ct.TEXT_ENCODE:this.decodeTextSegment(o,l);break;case Ct.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,l);break;case Ct.EDIFACT_ENCODE:this.decodeEdifactSegment(o,l);break;case Ct.BASE256_ENCODE:this.decodeBase256Segment(o,l,d);break;default:throw new U}m=Ct.ASCII_ENCODE}while(m!==Ct.PAD_ENCODE&&o.available()>0);return f.length()>0&&l.append(f.toString()),new Jt(r,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(r,o,l){let f=!1;do{let d=r.readBits(8);if(d===0)throw new U;if(d<=128)return f&&(d+=128),o.append(String.fromCharCode(d-1)),Ct.ASCII_ENCODE;if(d===129)return Ct.PAD_ENCODE;if(d<=229){const m=d-130;m<10&&o.append("0"),o.append(""+m)}else switch(d){case 230:return Ct.C40_ENCODE;case 231:return Ct.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:f=!0;break;case 236:o.append("[)>05"),l.insert(0,"");break;case 237:o.append("[)>06"),l.insert(0,"");break;case 238:return Ct.ANSIX12_ENCODE;case 239:return Ct.TEXT_ENCODE;case 240:return Ct.EDIFACT_ENCODE;case 241:break;default:if(d!==254||r.available()!==0)throw new U;break}}while(r.available()>0);return Ct.ASCII_ENCODE}static decodeC40Segment(r,o){let l=!1;const f=[];let d=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),f);for(let E=0;E<3;E++){const x=f[E];switch(d){case 0:if(x<3)d=x+1;else if(x<this.C40_BASIC_SET_CHARS.length){const v=this.C40_BASIC_SET_CHARS[x];l?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):o.append(v)}else throw new U;break;case 1:l?(o.append(String.fromCharCode(x+128)),l=!1):o.append(String.fromCharCode(x)),d=0;break;case 2:if(x<this.C40_SHIFT2_SET_CHARS.length){const v=this.C40_SHIFT2_SET_CHARS[x];l?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):o.append(v)}else switch(x){case 27:o.append("");break;case 30:l=!0;break;default:throw new U}d=0;break;case 3:l?(o.append(String.fromCharCode(x+224)),l=!1):o.append(String.fromCharCode(x+96)),d=0;break;default:throw new U}}}while(r.available()>0)}static decodeTextSegment(r,o){let l=!1,f=[],d=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),f);for(let E=0;E<3;E++){const x=f[E];switch(d){case 0:if(x<3)d=x+1;else if(x<this.TEXT_BASIC_SET_CHARS.length){const v=this.TEXT_BASIC_SET_CHARS[x];l?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):o.append(v)}else throw new U;break;case 1:l?(o.append(String.fromCharCode(x+128)),l=!1):o.append(String.fromCharCode(x)),d=0;break;case 2:if(x<this.TEXT_SHIFT2_SET_CHARS.length){const v=this.TEXT_SHIFT2_SET_CHARS[x];l?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):o.append(v)}else switch(x){case 27:o.append("");break;case 30:l=!0;break;default:throw new U}d=0;break;case 3:if(x<this.TEXT_SHIFT3_SET_CHARS.length){const v=this.TEXT_SHIFT3_SET_CHARS[x];l?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):o.append(v),d=0}else throw new U;break;default:throw new U}}}while(r.available()>0)}static decodeAnsiX12Segment(r,o){const l=[];do{if(r.available()===8)return;const f=r.readBits(8);if(f===254)return;this.parseTwoBytes(f,r.readBits(8),l);for(let d=0;d<3;d++){const m=l[d];switch(m){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(m<14)o.append(String.fromCharCode(m+44));else if(m<40)o.append(String.fromCharCode(m+51));else throw new U;break}}}while(r.available()>0)}static parseTwoBytes(r,o,l){let f=(r<<8)+o-1,d=Math.floor(f/1600);l[0]=d,f-=d*1600,d=Math.floor(f/40),l[1]=d,l[2]=f-d*40}static decodeEdifactSegment(r,o){do{if(r.available()<=16)return;for(let l=0;l<4;l++){let f=r.readBits(6);if(f===31){const d=8-r.getBitOffset();d!==8&&r.readBits(d);return}(f&32)===0&&(f|=64),o.append(String.fromCharCode(f))}}while(r.available()>0)}static decodeBase256Segment(r,o,l){let f=1+r.getByteOffset();const d=this.unrandomize255State(r.readBits(8),f++);let m;if(d===0?m=r.available()/8|0:d<250?m=d:m=250*(d-249)+this.unrandomize255State(r.readBits(8),f++),m<0)throw new U;const E=new Uint8Array(m);for(let x=0;x<m;x++){if(r.available()<8)throw new U;E[x]=this.unrandomize255State(r.readBits(8),f++)}l.push(E);try{o.append(Y.decode(E,X.ISO88591))}catch(x){throw new Pi("Platform does not support required encoding: "+x.message)}}static unrandomize255State(r,o){const l=149*o%255+1,f=r-l;return f>=0?f:f+256}}Si.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Si.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Si.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Si.TEXT_SHIFT2_SET_CHARS=Si.C40_SHIFT2_SET_CHARS,Si.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Go{constructor(){this.rsDecoder=new pr(Tt.DATA_MATRIX_FIELD_256)}decode(r){const o=new Cs(r),l=o.getVersion(),f=o.readCodewords(),d=vi.getDataBlocks(f,l);let m=0;for(let v of d)m+=v.getNumDataCodewords();const E=new Uint8Array(m),x=d.length;for(let v=0;v<x;v++){const R=d[v],M=R.getCodewords(),P=R.getNumDataCodewords();this.correctErrors(M,P);for(let H=0;H<P;H++)E[H*x+v]=M[H]}return Si.decode(E)}correctErrors(r,o){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-o)}catch{throw new j}for(let f=0;f<o;f++)r[f]=l[f]}}class tt{constructor(r){this.image=r,this.rectangleDetector=new yn(this.image)}detect(){const r=this.rectangleDetector.detect();let o=this.detectSolid1(r);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new he;o=this.shiftToModuleCenter(o);const l=o[0],f=o[1],d=o[2],m=o[3];let E=this.transitionsBetween(l,m)+1,x=this.transitionsBetween(d,m)+1;(E&1)===1&&(E+=1),(x&1)===1&&(x+=1),4*E<7*x&&4*x<7*E&&(E=x=Math.max(E,x));let v=tt.sampleGrid(this.image,l,f,d,m,E,x);return new Ma(v,[l,f,d,m])}static shiftPoint(r,o,l){let f=(o.getX()-r.getX())/(l+1),d=(o.getY()-r.getY())/(l+1);return new Fe(r.getX()+f,r.getY()+d)}static moveAway(r,o,l){let f=r.getX(),d=r.getY();return f<o?f-=1:f+=1,d<l?d-=1:d+=1,new Fe(f,d)}detectSolid1(r){let o=r[0],l=r[1],f=r[3],d=r[2],m=this.transitionsBetween(o,l),E=this.transitionsBetween(l,f),x=this.transitionsBetween(f,d),v=this.transitionsBetween(d,o),R=m,M=[d,o,l,f];return R>E&&(R=E,M[0]=o,M[1]=l,M[2]=f,M[3]=d),R>x&&(R=x,M[0]=l,M[1]=f,M[2]=d,M[3]=o),R>v&&(M[0]=f,M[1]=d,M[2]=o,M[3]=l),M}detectSolid2(r){let o=r[0],l=r[1],f=r[2],d=r[3],m=this.transitionsBetween(o,d),E=tt.shiftPoint(l,f,(m+1)*4),x=tt.shiftPoint(f,l,(m+1)*4),v=this.transitionsBetween(E,o),R=this.transitionsBetween(x,d);return v<R?(r[0]=o,r[1]=l,r[2]=f,r[3]=d):(r[0]=l,r[1]=f,r[2]=d,r[3]=o),r}correctTopRight(r){let o=r[0],l=r[1],f=r[2],d=r[3],m=this.transitionsBetween(o,d),E=this.transitionsBetween(l,d),x=tt.shiftPoint(o,l,(E+1)*4),v=tt.shiftPoint(f,l,(m+1)*4);m=this.transitionsBetween(x,d),E=this.transitionsBetween(v,d);let R=new Fe(d.getX()+(f.getX()-l.getX())/(m+1),d.getY()+(f.getY()-l.getY())/(m+1)),M=new Fe(d.getX()+(o.getX()-l.getX())/(E+1),d.getY()+(o.getY()-l.getY())/(E+1));if(!this.isValid(R))return this.isValid(M)?M:null;if(!this.isValid(M))return R;let P=this.transitionsBetween(x,R)+this.transitionsBetween(v,R),H=this.transitionsBetween(x,M)+this.transitionsBetween(v,M);return P>H?R:M}shiftToModuleCenter(r){let o=r[0],l=r[1],f=r[2],d=r[3],m=this.transitionsBetween(o,d)+1,E=this.transitionsBetween(f,d)+1,x=tt.shiftPoint(o,l,E*4),v=tt.shiftPoint(f,l,m*4);m=this.transitionsBetween(x,d)+1,E=this.transitionsBetween(v,d)+1,(m&1)===1&&(m+=1),(E&1)===1&&(E+=1);let R=(o.getX()+l.getX()+f.getX()+d.getX())/4,M=(o.getY()+l.getY()+f.getY()+d.getY())/4;o=tt.moveAway(o,R,M),l=tt.moveAway(l,R,M),f=tt.moveAway(f,R,M),d=tt.moveAway(d,R,M);let P,H;return x=tt.shiftPoint(o,l,E*4),x=tt.shiftPoint(x,d,m*4),P=tt.shiftPoint(l,o,E*4),P=tt.shiftPoint(P,f,m*4),v=tt.shiftPoint(f,d,E*4),v=tt.shiftPoint(v,l,m*4),H=tt.shiftPoint(d,f,E*4),H=tt.shiftPoint(H,o,m*4),[x,P,v,H]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,o,l,f,d,m,E){return Ei.getInstance().sampleGrid(r,m,E,.5,.5,m-.5,.5,m-.5,E-.5,.5,E-.5,o.getX(),o.getY(),d.getX(),d.getY(),f.getX(),f.getY(),l.getX(),l.getY())}transitionsBetween(r,o){let l=Math.trunc(r.getX()),f=Math.trunc(r.getY()),d=Math.trunc(o.getX()),m=Math.trunc(o.getY()),E=Math.abs(m-f)>Math.abs(d-l);if(E){let $=l;l=f,f=$,$=d,d=m,m=$}let x=Math.abs(d-l),v=Math.abs(m-f),R=-x/2,M=f<m?1:-1,P=l<d?1:-1,H=0,K=this.image.get(E?f:l,E?l:f);for(let $=l,ae=f;$!==d;$+=P){let ye=this.image.get(E?ae:$,E?$:ae);if(ye!==K&&(H++,K=ye),R+=v,R>0){if(ae===m)break;ae+=M,R-=x}}return H}}class Bi{constructor(){this.decoder=new Go}decode(r,o=null){let l,f;if(o!=null&&o.has(Be.PURE_BARCODE)){const v=Bi.extractPureBits(r.getBlackMatrix());l=this.decoder.decode(v),f=Bi.NO_POINTS}else{const v=new tt(r.getBlackMatrix()).detect();l=this.decoder.decode(v.getBits()),f=v.getPoints()}const d=l.getRawBytes(),m=new ke(l.getText(),d,8*d.length,f,Le.DATA_MATRIX,Z.currentTimeMillis()),E=l.getByteSegments();E!=null&&m.putMetadata(xt.BYTE_SEGMENTS,E);const x=l.getECLevel();return x!=null&&m.putMetadata(xt.ERROR_CORRECTION_LEVEL,x),m}reset(){}static extractPureBits(r){const o=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(o==null||l==null)throw new he;const f=this.moduleSize(o,r);let d=o[1];const m=l[1];let E=o[0];const v=(l[0]-E+1)/f,R=(m-d+1)/f;if(v<=0||R<=0)throw new he;const M=f/2;d+=M,E+=M;const P=new We(v,R);for(let H=0;H<R;H++){const K=d+H*f;for(let $=0;$<v;$++)r.get(E+$*f,K)&&P.set($,H)}return P}static moduleSize(r,o){const l=o.getWidth();let f=r[0];const d=r[1];for(;f<l&&o.get(f,d);)f++;if(f===l)throw new he;const m=f-r[0];if(m===0)throw new he;return m}}Bi.NO_POINTS=[];class zr extends Pe{constructor(r=500){super(new Bi,r)}}var ir;(function(D){D[D.L=0]="L",D[D.M=1]="M",D[D.Q=2]="Q",D[D.H=3]="H"})(ir||(ir={}));class pt{constructor(r,o,l){this.value=r,this.stringValue=o,this.bits=l,pt.FOR_BITS.set(l,this),pt.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return pt.L;case"M":return pt.M;case"Q":return pt.Q;case"H":return pt.H;default:throw new S(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof pt))return!1;const o=r;return this.value===o.value}static forBits(r){if(r<0||r>=pt.FOR_BITS.size)throw new b;return pt.FOR_BITS.get(r)}}pt.FOR_BITS=new Map,pt.FOR_VALUE=new Map,pt.L=new pt(ir.L,"L",1),pt.M=new pt(ir.M,"M",0),pt.Q=new pt(ir.Q,"Q",3),pt.H=new pt(ir.H,"H",2);class Dn{constructor(r){this.errorCorrectionLevel=pt.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,o){return ne.bitCount(r^o)}static decodeFormatInformation(r,o){const l=Dn.doDecodeFormatInformation(r,o);return l!==null?l:Dn.doDecodeFormatInformation(r^Dn.FORMAT_INFO_MASK_QR,o^Dn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,o){let l=Number.MAX_SAFE_INTEGER,f=0;for(const d of Dn.FORMAT_INFO_DECODE_LOOKUP){const m=d[0];if(m===r||m===o)return new Dn(d[1]);let E=Dn.numBitsDiffering(r,m);E<l&&(f=d[1],l=E),r!==o&&(E=Dn.numBitsDiffering(o,m),E<l&&(f=d[1],l=E))}return l<=3?new Dn(f):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof Dn))return!1;const o=r;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}Dn.FORMAT_INFO_MASK_QR=21522,Dn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class oe{constructor(r,...o){this.ecCodewordsPerBlock=r,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const o=this.ecBlocks;for(const l of o)r+=l.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class z{constructor(r,o){this.count=r,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ge{constructor(r,o,...l){this.versionNumber=r,this.alignmentPatternCenters=o,this.ecBlocks=l;let f=0;const d=l[0].getECCodewordsPerBlock(),m=l[0].getECBlocks();for(const E of m)f+=E.getCount()*(E.getDataCodewords()+d);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new U;try{return this.getVersionForNumber((r-17)/4)}catch{throw new U}}static getVersionForNumber(r){if(r<1||r>40)throw new b;return Ge.VERSIONS[r-1]}static decodeVersionInformation(r){let o=Number.MAX_SAFE_INTEGER,l=0;for(let f=0;f<Ge.VERSION_DECODE_INFO.length;f++){const d=Ge.VERSION_DECODE_INFO[f];if(d===r)return Ge.getVersionForNumber(f+7);const m=Dn.numBitsDiffering(r,d);m<o&&(l=f+7,o=m)}return o<=3?Ge.getVersionForNumber(l):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),o=new We(r);o.setRegion(0,0,9,9),o.setRegion(r-8,0,8,9),o.setRegion(0,r-8,9,8);const l=this.alignmentPatternCenters.length;for(let f=0;f<l;f++){const d=this.alignmentPatternCenters[f]-2;for(let m=0;m<l;m++)f===0&&(m===0||m===l-1)||f===l-1&&m===0||o.setRegion(this.alignmentPatternCenters[m]-2,d,5,5)}return o.setRegion(6,9,1,r-17),o.setRegion(9,6,r-17,1),this.versionNumber>6&&(o.setRegion(r-11,0,3,6),o.setRegion(0,r-11,6,3)),o}toString(){return""+this.versionNumber}}Ge.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ge.VERSIONS=[new Ge(1,new Int32Array(0),new oe(7,new z(1,19)),new oe(10,new z(1,16)),new oe(13,new z(1,13)),new oe(17,new z(1,9))),new Ge(2,Int32Array.from([6,18]),new oe(10,new z(1,34)),new oe(16,new z(1,28)),new oe(22,new z(1,22)),new oe(28,new z(1,16))),new Ge(3,Int32Array.from([6,22]),new oe(15,new z(1,55)),new oe(26,new z(1,44)),new oe(18,new z(2,17)),new oe(22,new z(2,13))),new Ge(4,Int32Array.from([6,26]),new oe(20,new z(1,80)),new oe(18,new z(2,32)),new oe(26,new z(2,24)),new oe(16,new z(4,9))),new Ge(5,Int32Array.from([6,30]),new oe(26,new z(1,108)),new oe(24,new z(2,43)),new oe(18,new z(2,15),new z(2,16)),new oe(22,new z(2,11),new z(2,12))),new Ge(6,Int32Array.from([6,34]),new oe(18,new z(2,68)),new oe(16,new z(4,27)),new oe(24,new z(4,19)),new oe(28,new z(4,15))),new Ge(7,Int32Array.from([6,22,38]),new oe(20,new z(2,78)),new oe(18,new z(4,31)),new oe(18,new z(2,14),new z(4,15)),new oe(26,new z(4,13),new z(1,14))),new Ge(8,Int32Array.from([6,24,42]),new oe(24,new z(2,97)),new oe(22,new z(2,38),new z(2,39)),new oe(22,new z(4,18),new z(2,19)),new oe(26,new z(4,14),new z(2,15))),new Ge(9,Int32Array.from([6,26,46]),new oe(30,new z(2,116)),new oe(22,new z(3,36),new z(2,37)),new oe(20,new z(4,16),new z(4,17)),new oe(24,new z(4,12),new z(4,13))),new Ge(10,Int32Array.from([6,28,50]),new oe(18,new z(2,68),new z(2,69)),new oe(26,new z(4,43),new z(1,44)),new oe(24,new z(6,19),new z(2,20)),new oe(28,new z(6,15),new z(2,16))),new Ge(11,Int32Array.from([6,30,54]),new oe(20,new z(4,81)),new oe(30,new z(1,50),new z(4,51)),new oe(28,new z(4,22),new z(4,23)),new oe(24,new z(3,12),new z(8,13))),new Ge(12,Int32Array.from([6,32,58]),new oe(24,new z(2,92),new z(2,93)),new oe(22,new z(6,36),new z(2,37)),new oe(26,new z(4,20),new z(6,21)),new oe(28,new z(7,14),new z(4,15))),new Ge(13,Int32Array.from([6,34,62]),new oe(26,new z(4,107)),new oe(22,new z(8,37),new z(1,38)),new oe(24,new z(8,20),new z(4,21)),new oe(22,new z(12,11),new z(4,12))),new Ge(14,Int32Array.from([6,26,46,66]),new oe(30,new z(3,115),new z(1,116)),new oe(24,new z(4,40),new z(5,41)),new oe(20,new z(11,16),new z(5,17)),new oe(24,new z(11,12),new z(5,13))),new Ge(15,Int32Array.from([6,26,48,70]),new oe(22,new z(5,87),new z(1,88)),new oe(24,new z(5,41),new z(5,42)),new oe(30,new z(5,24),new z(7,25)),new oe(24,new z(11,12),new z(7,13))),new Ge(16,Int32Array.from([6,26,50,74]),new oe(24,new z(5,98),new z(1,99)),new oe(28,new z(7,45),new z(3,46)),new oe(24,new z(15,19),new z(2,20)),new oe(30,new z(3,15),new z(13,16))),new Ge(17,Int32Array.from([6,30,54,78]),new oe(28,new z(1,107),new z(5,108)),new oe(28,new z(10,46),new z(1,47)),new oe(28,new z(1,22),new z(15,23)),new oe(28,new z(2,14),new z(17,15))),new Ge(18,Int32Array.from([6,30,56,82]),new oe(30,new z(5,120),new z(1,121)),new oe(26,new z(9,43),new z(4,44)),new oe(28,new z(17,22),new z(1,23)),new oe(28,new z(2,14),new z(19,15))),new Ge(19,Int32Array.from([6,30,58,86]),new oe(28,new z(3,113),new z(4,114)),new oe(26,new z(3,44),new z(11,45)),new oe(26,new z(17,21),new z(4,22)),new oe(26,new z(9,13),new z(16,14))),new Ge(20,Int32Array.from([6,34,62,90]),new oe(28,new z(3,107),new z(5,108)),new oe(26,new z(3,41),new z(13,42)),new oe(30,new z(15,24),new z(5,25)),new oe(28,new z(15,15),new z(10,16))),new Ge(21,Int32Array.from([6,28,50,72,94]),new oe(28,new z(4,116),new z(4,117)),new oe(26,new z(17,42)),new oe(28,new z(17,22),new z(6,23)),new oe(30,new z(19,16),new z(6,17))),new Ge(22,Int32Array.from([6,26,50,74,98]),new oe(28,new z(2,111),new z(7,112)),new oe(28,new z(17,46)),new oe(30,new z(7,24),new z(16,25)),new oe(24,new z(34,13))),new Ge(23,Int32Array.from([6,30,54,78,102]),new oe(30,new z(4,121),new z(5,122)),new oe(28,new z(4,47),new z(14,48)),new oe(30,new z(11,24),new z(14,25)),new oe(30,new z(16,15),new z(14,16))),new Ge(24,Int32Array.from([6,28,54,80,106]),new oe(30,new z(6,117),new z(4,118)),new oe(28,new z(6,45),new z(14,46)),new oe(30,new z(11,24),new z(16,25)),new oe(30,new z(30,16),new z(2,17))),new Ge(25,Int32Array.from([6,32,58,84,110]),new oe(26,new z(8,106),new z(4,107)),new oe(28,new z(8,47),new z(13,48)),new oe(30,new z(7,24),new z(22,25)),new oe(30,new z(22,15),new z(13,16))),new Ge(26,Int32Array.from([6,30,58,86,114]),new oe(28,new z(10,114),new z(2,115)),new oe(28,new z(19,46),new z(4,47)),new oe(28,new z(28,22),new z(6,23)),new oe(30,new z(33,16),new z(4,17))),new Ge(27,Int32Array.from([6,34,62,90,118]),new oe(30,new z(8,122),new z(4,123)),new oe(28,new z(22,45),new z(3,46)),new oe(30,new z(8,23),new z(26,24)),new oe(30,new z(12,15),new z(28,16))),new Ge(28,Int32Array.from([6,26,50,74,98,122]),new oe(30,new z(3,117),new z(10,118)),new oe(28,new z(3,45),new z(23,46)),new oe(30,new z(4,24),new z(31,25)),new oe(30,new z(11,15),new z(31,16))),new Ge(29,Int32Array.from([6,30,54,78,102,126]),new oe(30,new z(7,116),new z(7,117)),new oe(28,new z(21,45),new z(7,46)),new oe(30,new z(1,23),new z(37,24)),new oe(30,new z(19,15),new z(26,16))),new Ge(30,Int32Array.from([6,26,52,78,104,130]),new oe(30,new z(5,115),new z(10,116)),new oe(28,new z(19,47),new z(10,48)),new oe(30,new z(15,24),new z(25,25)),new oe(30,new z(23,15),new z(25,16))),new Ge(31,Int32Array.from([6,30,56,82,108,134]),new oe(30,new z(13,115),new z(3,116)),new oe(28,new z(2,46),new z(29,47)),new oe(30,new z(42,24),new z(1,25)),new oe(30,new z(23,15),new z(28,16))),new Ge(32,Int32Array.from([6,34,60,86,112,138]),new oe(30,new z(17,115)),new oe(28,new z(10,46),new z(23,47)),new oe(30,new z(10,24),new z(35,25)),new oe(30,new z(19,15),new z(35,16))),new Ge(33,Int32Array.from([6,30,58,86,114,142]),new oe(30,new z(17,115),new z(1,116)),new oe(28,new z(14,46),new z(21,47)),new oe(30,new z(29,24),new z(19,25)),new oe(30,new z(11,15),new z(46,16))),new Ge(34,Int32Array.from([6,34,62,90,118,146]),new oe(30,new z(13,115),new z(6,116)),new oe(28,new z(14,46),new z(23,47)),new oe(30,new z(44,24),new z(7,25)),new oe(30,new z(59,16),new z(1,17))),new Ge(35,Int32Array.from([6,30,54,78,102,126,150]),new oe(30,new z(12,121),new z(7,122)),new oe(28,new z(12,47),new z(26,48)),new oe(30,new z(39,24),new z(14,25)),new oe(30,new z(22,15),new z(41,16))),new Ge(36,Int32Array.from([6,24,50,76,102,128,154]),new oe(30,new z(6,121),new z(14,122)),new oe(28,new z(6,47),new z(34,48)),new oe(30,new z(46,24),new z(10,25)),new oe(30,new z(2,15),new z(64,16))),new Ge(37,Int32Array.from([6,28,54,80,106,132,158]),new oe(30,new z(17,122),new z(4,123)),new oe(28,new z(29,46),new z(14,47)),new oe(30,new z(49,24),new z(10,25)),new oe(30,new z(24,15),new z(46,16))),new Ge(38,Int32Array.from([6,32,58,84,110,136,162]),new oe(30,new z(4,122),new z(18,123)),new oe(28,new z(13,46),new z(32,47)),new oe(30,new z(48,24),new z(14,25)),new oe(30,new z(42,15),new z(32,16))),new Ge(39,Int32Array.from([6,26,54,82,110,138,166]),new oe(30,new z(20,117),new z(4,118)),new oe(28,new z(40,47),new z(7,48)),new oe(30,new z(43,24),new z(22,25)),new oe(30,new z(10,15),new z(67,16))),new Ge(40,Int32Array.from([6,30,58,86,114,142,170]),new oe(30,new z(19,118),new z(6,119)),new oe(28,new z(18,47),new z(31,48)),new oe(30,new z(34,24),new z(34,25)),new oe(30,new z(20,15),new z(61,16)))];var Mn;(function(D){D[D.DATA_MASK_000=0]="DATA_MASK_000",D[D.DATA_MASK_001=1]="DATA_MASK_001",D[D.DATA_MASK_010=2]="DATA_MASK_010",D[D.DATA_MASK_011=3]="DATA_MASK_011",D[D.DATA_MASK_100=4]="DATA_MASK_100",D[D.DATA_MASK_101=5]="DATA_MASK_101",D[D.DATA_MASK_110=6]="DATA_MASK_110",D[D.DATA_MASK_111=7]="DATA_MASK_111"})(Mn||(Mn={}));class Xn{constructor(r,o){this.value=r,this.isMasked=o}unmaskBitMatrix(r,o){for(let l=0;l<o;l++)for(let f=0;f<o;f++)this.isMasked(l,f)&&r.flip(f,l)}}Xn.values=new Map([[Mn.DATA_MASK_000,new Xn(Mn.DATA_MASK_000,(D,r)=>(D+r&1)===0)],[Mn.DATA_MASK_001,new Xn(Mn.DATA_MASK_001,(D,r)=>(D&1)===0)],[Mn.DATA_MASK_010,new Xn(Mn.DATA_MASK_010,(D,r)=>r%3===0)],[Mn.DATA_MASK_011,new Xn(Mn.DATA_MASK_011,(D,r)=>(D+r)%3===0)],[Mn.DATA_MASK_100,new Xn(Mn.DATA_MASK_100,(D,r)=>(Math.floor(D/2)+Math.floor(r/3)&1)===0)],[Mn.DATA_MASK_101,new Xn(Mn.DATA_MASK_101,(D,r)=>D*r%6===0)],[Mn.DATA_MASK_110,new Xn(Mn.DATA_MASK_110,(D,r)=>D*r%6<3)],[Mn.DATA_MASK_111,new Xn(Mn.DATA_MASK_111,(D,r)=>(D+r+D*r%3&1)===0)]]);class Ui{constructor(r){const o=r.getHeight();if(o<21||(o&3)!==1)throw new U;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let d=0;d<6;d++)r=this.copyBit(d,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let d=5;d>=0;d--)r=this.copyBit(8,d,r);const o=this.bitMatrix.getHeight();let l=0;const f=o-7;for(let d=o-1;d>=f;d--)l=this.copyBit(8,d,l);for(let d=o-8;d<o;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=Dn.decodeFormatInformation(r,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new U}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),o=Math.floor((r-17)/4);if(o<=6)return Ge.getVersionForNumber(o);let l=0;const f=r-11;for(let m=5;m>=0;m--)for(let E=r-9;E>=f;E--)l=this.copyBit(E,m,l);let d=Ge.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;l=0;for(let m=5;m>=0;m--)for(let E=r-9;E>=f;E--)l=this.copyBit(m,E,l);if(d=Ge.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;throw new U}copyBit(r,o,l){return(this.isMirror?this.bitMatrix.get(o,r):this.bitMatrix.get(r,o))?l<<1|1:l<<1}readCodewords(){const r=this.readFormatInformation(),o=this.readVersion(),l=Xn.values.get(r.getDataMask()),f=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,f);const d=o.buildFunctionPattern();let m=!0;const E=new Uint8Array(o.getTotalCodewords());let x=0,v=0,R=0;for(let M=f-1;M>0;M-=2){M===6&&M--;for(let P=0;P<f;P++){const H=m?f-1-P:P;for(let K=0;K<2;K++)d.get(M-K,H)||(R++,v<<=1,this.bitMatrix.get(M-K,H)&&(v|=1),R===8&&(E[x++]=v,R=0,v=0))}m=!m}if(x!==o.getTotalCodewords())throw new U;return E}remask(){if(this.parsedFormatInfo===null)return;const r=Xn.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,o)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let o=0,l=r.getWidth();o<l;o++)for(let f=o+1,d=r.getHeight();f<d;f++)r.get(o,f)!==r.get(f,o)&&(r.flip(f,o),r.flip(o,f))}}class Ba{constructor(r,o){this.numDataCodewords=r,this.codewords=o}static getDataBlocks(r,o,l){if(r.length!==o.getTotalCodewords())throw new b;const f=o.getECBlocksForLevel(l);let d=0;const m=f.getECBlocks();for(const K of m)d+=K.getCount();const E=new Array(d);let x=0;for(const K of m)for(let $=0;$<K.getCount();$++){const ae=K.getDataCodewords(),ye=f.getECCodewordsPerBlock()+ae;E[x++]=new Ba(ae,new Uint8Array(ye))}const v=E[0].codewords.length;let R=E.length-1;for(;R>=0&&E[R].codewords.length!==v;)R--;R++;const M=v-f.getECCodewordsPerBlock();let P=0;for(let K=0;K<M;K++)for(let $=0;$<x;$++)E[$].codewords[K]=r[P++];for(let K=R;K<x;K++)E[K].codewords[M]=r[P++];const H=E[0].codewords.length;for(let K=M;K<H;K++)for(let $=0;$<x;$++){const ae=$<R?K:K+1;E[$].codewords[ae]=r[P++]}return E}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var fi;(function(D){D[D.TERMINATOR=0]="TERMINATOR",D[D.NUMERIC=1]="NUMERIC",D[D.ALPHANUMERIC=2]="ALPHANUMERIC",D[D.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",D[D.BYTE=4]="BYTE",D[D.ECI=5]="ECI",D[D.KANJI=6]="KANJI",D[D.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",D[D.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",D[D.HANZI=9]="HANZI"})(fi||(fi={}));class Qe{constructor(r,o,l,f){this.value=r,this.stringValue=o,this.characterCountBitsForVersions=l,this.bits=f,Qe.FOR_BITS.set(f,this),Qe.FOR_VALUE.set(r,this)}static forBits(r){const o=Qe.FOR_BITS.get(r);if(o===void 0)throw new b;return o}getCharacterCountBits(r){const o=r.getVersionNumber();let l;return o<=9?l=0:o<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof Qe))return!1;const o=r;return this.value===o.value}toString(){return this.stringValue}}Qe.FOR_BITS=new Map,Qe.FOR_VALUE=new Map,Qe.TERMINATOR=new Qe(fi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Qe.NUMERIC=new Qe(fi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Qe.ALPHANUMERIC=new Qe(fi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Qe.STRUCTURED_APPEND=new Qe(fi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Qe.BYTE=new Qe(fi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Qe.ECI=new Qe(fi.ECI,"ECI",Int32Array.from([0,0,0]),7),Qe.KANJI=new Qe(fi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Qe.FNC1_FIRST_POSITION=new Qe(fi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Qe.FNC1_SECOND_POSITION=new Qe(fi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Qe.HANZI=new Qe(fi.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class $t{static decode(r,o,l,f){const d=new vn(r);let m=new G;const E=new Array;let x=-1,v=-1;try{let R=null,M=!1,P;do{if(d.available()<4)P=Qe.TERMINATOR;else{const H=d.readBits(4);P=Qe.forBits(H)}switch(P){case Qe.TERMINATOR:break;case Qe.FNC1_FIRST_POSITION:case Qe.FNC1_SECOND_POSITION:M=!0;break;case Qe.STRUCTURED_APPEND:if(d.available()<16)throw new U;x=d.readBits(8),v=d.readBits(8);break;case Qe.ECI:const H=$t.parseECIValue(d);if(R=B.getCharacterSetECIByValue(H),R===null)throw new U;break;case Qe.HANZI:const K=d.readBits(4),$=d.readBits(P.getCharacterCountBits(o));K===$t.GB2312_SUBSET&&$t.decodeHanziSegment(d,m,$);break;default:const ae=d.readBits(P.getCharacterCountBits(o));switch(P){case Qe.NUMERIC:$t.decodeNumericSegment(d,m,ae);break;case Qe.ALPHANUMERIC:$t.decodeAlphanumericSegment(d,m,ae,M);break;case Qe.BYTE:$t.decodeByteSegment(d,m,ae,R,E,f);break;case Qe.KANJI:$t.decodeKanjiSegment(d,m,ae);break;default:throw new U}break}}while(P!==Qe.TERMINATOR)}catch{throw new U}return new Jt(r,m.toString(),E.length===0?null:E,l===null?null:l.toString(),x,v)}static decodeHanziSegment(r,o,l){if(l*13>r.available())throw new U;const f=new Uint8Array(2*l);let d=0;for(;l>0;){const m=r.readBits(13);let E=m/96<<8&4294967295|m%96;E<959?E+=41377:E+=42657,f[d]=E>>8&255,f[d+1]=E&255,d+=2,l--}try{o.append(Y.decode(f,X.GB2312))}catch(m){throw new U(m)}}static decodeKanjiSegment(r,o,l){if(l*13>r.available())throw new U;const f=new Uint8Array(2*l);let d=0;for(;l>0;){const m=r.readBits(13);let E=m/192<<8&4294967295|m%192;E<7936?E+=33088:E+=49472,f[d]=E>>8,f[d+1]=E,d+=2,l--}try{o.append(Y.decode(f,X.SHIFT_JIS))}catch(m){throw new U(m)}}static decodeByteSegment(r,o,l,f,d,m){if(8*l>r.available())throw new U;const E=new Uint8Array(l);for(let v=0;v<l;v++)E[v]=r.readBits(8);let x;f===null?x=X.guessEncoding(E,m):x=f.getName();try{o.append(Y.decode(E,x))}catch(v){throw new U(v)}d.push(E)}static toAlphaNumericChar(r){if(r>=$t.ALPHANUMERIC_CHARS.length)throw new U;return $t.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,o,l,f){const d=o.length();for(;l>1;){if(r.available()<11)throw new U;const m=r.readBits(11);o.append($t.toAlphaNumericChar(Math.floor(m/45))),o.append($t.toAlphaNumericChar(m%45)),l-=2}if(l===1){if(r.available()<6)throw new U;o.append($t.toAlphaNumericChar(r.readBits(6)))}if(f)for(let m=d;m<o.length();m++)o.charAt(m)==="%"&&(m<o.length()-1&&o.charAt(m+1)==="%"?o.deleteCharAt(m+1):o.setCharAt(m,""))}static decodeNumericSegment(r,o,l){for(;l>=3;){if(r.available()<10)throw new U;const f=r.readBits(10);if(f>=1e3)throw new U;o.append($t.toAlphaNumericChar(Math.floor(f/100))),o.append($t.toAlphaNumericChar(Math.floor(f/10)%10)),o.append($t.toAlphaNumericChar(f%10)),l-=3}if(l===2){if(r.available()<7)throw new U;const f=r.readBits(7);if(f>=100)throw new U;o.append($t.toAlphaNumericChar(Math.floor(f/10))),o.append($t.toAlphaNumericChar(f%10))}else if(l===1){if(r.available()<4)throw new U;const f=r.readBits(4);if(f>=10)throw new U;o.append($t.toAlphaNumericChar(f))}}static parseECIValue(r){const o=r.readBits(8);if((o&128)===0)return o&127;if((o&192)===128){const l=r.readBits(8);return(o&63)<<8&4294967295|l}if((o&224)===192){const l=r.readBits(16);return(o&31)<<16&4294967295|l}throw new U}}$t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",$t.GB2312_SUBSET=1;class qo{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const o=r[0];r[0]=r[2],r[2]=o}}class vs{constructor(){this.rsDecoder=new pr(Tt.QR_CODE_FIELD_256)}decodeBooleanArray(r,o){return this.decodeBitMatrix(We.parseFromBooleanArray(r),o)}decodeBitMatrix(r,o){const l=new Ui(r);let f=null;try{return this.decodeBitMatrixParser(l,o)}catch(d){f=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,o);return d.setOther(new qo(!0)),d}catch(d){throw f!==null?f:d}}decodeBitMatrixParser(r,o){const l=r.readVersion(),f=r.readFormatInformation().getErrorCorrectionLevel(),d=r.readCodewords(),m=Ba.getDataBlocks(d,l,f);let E=0;for(const R of m)E+=R.getNumDataCodewords();const x=new Uint8Array(E);let v=0;for(const R of m){const M=R.getCodewords(),P=R.getNumDataCodewords();this.correctErrors(M,P);for(let H=0;H<P;H++)x[v++]=M[H]}return $t.decode(x,l,f,o)}correctErrors(r,o){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-o)}catch{throw new j}for(let f=0;f<o;f++)r[f]=l[f]}}class Ss extends Fe{constructor(r,o,l){super(r,o),this.estimatedModuleSize=l}aboutEquals(r,o,l){if(Math.abs(o-this.getY())<=r&&Math.abs(l-this.getX())<=r){const f=Math.abs(r-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(r,o,l){const f=(this.getX()+o)/2,d=(this.getY()+r)/2,m=(this.estimatedModuleSize+l)/2;return new Ss(f,d,m)}}class Vi{constructor(r,o,l,f,d,m,E){this.image=r,this.startX=o,this.startY=l,this.width=f,this.height=d,this.moduleSize=m,this.resultPointCallback=E,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,o=this.height,l=this.width,f=r+l,d=this.startY+o/2,m=new Int32Array(3),E=this.image;for(let x=0;x<o;x++){const v=d+((x&1)===0?Math.floor((x+1)/2):-Math.floor((x+1)/2));m[0]=0,m[1]=0,m[2]=0;let R=r;for(;R<f&&!E.get(R,v);)R++;let M=0;for(;R<f;){if(E.get(R,v))if(M===1)m[1]++;else if(M===2){if(this.foundPatternCross(m)){const P=this.handlePossibleCenter(m,v,R);if(P!==null)return P}m[0]=m[2],m[1]=1,m[2]=0,M=1}else m[++M]++;else M===1&&M++,m[M]++;R++}if(this.foundPatternCross(m)){const P=this.handlePossibleCenter(m,v,f);if(P!==null)return P}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new he}static centerFromEnd(r,o){return o-r[2]-r[1]/2}foundPatternCross(r){const o=this.moduleSize,l=o/2;for(let f=0;f<3;f++)if(Math.abs(o-r[f])>=l)return!1;return!0}crossCheckVertical(r,o,l,f){const d=this.image,m=d.getHeight(),E=this.crossCheckStateCount;E[0]=0,E[1]=0,E[2]=0;let x=r;for(;x>=0&&d.get(o,x)&&E[1]<=l;)E[1]++,x--;if(x<0||E[1]>l)return NaN;for(;x>=0&&!d.get(o,x)&&E[0]<=l;)E[0]++,x--;if(E[0]>l)return NaN;for(x=r+1;x<m&&d.get(o,x)&&E[1]<=l;)E[1]++,x++;if(x===m||E[1]>l)return NaN;for(;x<m&&!d.get(o,x)&&E[2]<=l;)E[2]++,x++;if(E[2]>l)return NaN;const v=E[0]+E[1]+E[2];return 5*Math.abs(v-f)>=2*f?NaN:this.foundPatternCross(E)?Vi.centerFromEnd(E,x):NaN}handlePossibleCenter(r,o,l){const f=r[0]+r[1]+r[2],d=Vi.centerFromEnd(r,l),m=this.crossCheckVertical(o,d,2*r[1],f);if(!isNaN(m)){const E=(r[0]+r[1]+r[2])/3;for(const v of this.possibleCenters)if(v.aboutEquals(E,m,d))return v.combineEstimate(m,d,E);const x=new Ss(d,m,E);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null}}class Ws extends Fe{constructor(r,o,l,f){super(r,o),this.estimatedModuleSize=l,this.count=f,f===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,o,l){if(Math.abs(o-this.getY())<=r&&Math.abs(l-this.getX())<=r){const f=Math.abs(r-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(r,o,l){const f=this.count+1,d=(this.count*this.getX()+o)/f,m=(this.count*this.getY()+r)/f,E=(this.count*this.estimatedModuleSize+l)/f;return new Ws(d,m,E,f)}}class rr{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class fn{constructor(r,o){this.image=r,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const o=r!=null&&r.get(Be.TRY_HARDER)!==void 0,l=r!=null&&r.get(Be.PURE_BARCODE)!==void 0,f=this.image,d=f.getHeight(),m=f.getWidth();let E=Math.floor(3*d/(4*fn.MAX_MODULES));(E<fn.MIN_SKIP||o)&&(E=fn.MIN_SKIP);let x=!1;const v=new Int32Array(5);for(let M=E-1;M<d&&!x;M+=E){v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0;let P=0;for(let H=0;H<m;H++)if(f.get(H,M))(P&1)===1&&P++,v[P]++;else if((P&1)===0)if(P===4)if(fn.foundPatternCross(v)){if(this.handlePossibleCenter(v,M,H,l)===!0)if(E=2,this.hasSkipped===!0)x=this.haveMultiplyConfirmedCenters();else{const $=this.findRowSkip();$>v[2]&&(M+=$-v[2]-E,H=m-1)}else{v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,P=3;continue}P=0,v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0}else v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,P=3;else v[++P]++;else v[P]++;fn.foundPatternCross(v)&&this.handlePossibleCenter(v,M,m,l)===!0&&(E=v[0],this.hasSkipped&&(x=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return Fe.orderBestPatterns(R),new rr(R)}static centerFromEnd(r,o){return o-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let o=0;for(let d=0;d<5;d++){const m=r[d];if(m===0)return!1;o+=m}if(o<7)return!1;const l=o/7,f=l/2;return Math.abs(l-r[0])<f&&Math.abs(l-r[1])<f&&Math.abs(3*l-r[2])<3*f&&Math.abs(l-r[3])<f&&Math.abs(l-r[4])<f}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,o,l,f){const d=this.getCrossCheckStateCount();let m=0;const E=this.image;for(;r>=m&&o>=m&&E.get(o-m,r-m);)d[2]++,m++;if(r<m||o<m)return!1;for(;r>=m&&o>=m&&!E.get(o-m,r-m)&&d[1]<=l;)d[1]++,m++;if(r<m||o<m||d[1]>l)return!1;for(;r>=m&&o>=m&&E.get(o-m,r-m)&&d[0]<=l;)d[0]++,m++;if(d[0]>l)return!1;const x=E.getHeight(),v=E.getWidth();for(m=1;r+m<x&&o+m<v&&E.get(o+m,r+m);)d[2]++,m++;if(r+m>=x||o+m>=v)return!1;for(;r+m<x&&o+m<v&&!E.get(o+m,r+m)&&d[3]<l;)d[3]++,m++;if(r+m>=x||o+m>=v||d[3]>=l)return!1;for(;r+m<x&&o+m<v&&E.get(o+m,r+m)&&d[4]<l;)d[4]++,m++;if(d[4]>=l)return!1;const R=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(R-f)<2*f&&fn.foundPatternCross(d)}crossCheckVertical(r,o,l,f){const d=this.image,m=d.getHeight(),E=this.getCrossCheckStateCount();let x=r;for(;x>=0&&d.get(o,x);)E[2]++,x--;if(x<0)return NaN;for(;x>=0&&!d.get(o,x)&&E[1]<=l;)E[1]++,x--;if(x<0||E[1]>l)return NaN;for(;x>=0&&d.get(o,x)&&E[0]<=l;)E[0]++,x--;if(E[0]>l)return NaN;for(x=r+1;x<m&&d.get(o,x);)E[2]++,x++;if(x===m)return NaN;for(;x<m&&!d.get(o,x)&&E[3]<l;)E[3]++,x++;if(x===m||E[3]>=l)return NaN;for(;x<m&&d.get(o,x)&&E[4]<l;)E[4]++,x++;if(E[4]>=l)return NaN;const v=E[0]+E[1]+E[2]+E[3]+E[4];return 5*Math.abs(v-f)>=2*f?NaN:fn.foundPatternCross(E)?fn.centerFromEnd(E,x):NaN}crossCheckHorizontal(r,o,l,f){const d=this.image,m=d.getWidth(),E=this.getCrossCheckStateCount();let x=r;for(;x>=0&&d.get(x,o);)E[2]++,x--;if(x<0)return NaN;for(;x>=0&&!d.get(x,o)&&E[1]<=l;)E[1]++,x--;if(x<0||E[1]>l)return NaN;for(;x>=0&&d.get(x,o)&&E[0]<=l;)E[0]++,x--;if(E[0]>l)return NaN;for(x=r+1;x<m&&d.get(x,o);)E[2]++,x++;if(x===m)return NaN;for(;x<m&&!d.get(x,o)&&E[3]<l;)E[3]++,x++;if(x===m||E[3]>=l)return NaN;for(;x<m&&d.get(x,o)&&E[4]<l;)E[4]++,x++;if(E[4]>=l)return NaN;const v=E[0]+E[1]+E[2]+E[3]+E[4];return 5*Math.abs(v-f)>=f?NaN:fn.foundPatternCross(E)?fn.centerFromEnd(E,x):NaN}handlePossibleCenter(r,o,l,f){const d=r[0]+r[1]+r[2]+r[3]+r[4];let m=fn.centerFromEnd(r,l),E=this.crossCheckVertical(o,Math.floor(m),r[2],d);if(!isNaN(E)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(E),r[2],d),!isNaN(m)&&(!f||this.crossCheckDiagonal(Math.floor(E),Math.floor(m),r[2],d)))){const x=d/7;let v=!1;const R=this.possibleCenters;for(let M=0,P=R.length;M<P;M++){const H=R[M];if(H.aboutEquals(x,E,m)){R[M]=H.combineEstimate(E,m,x),v=!0;break}}if(!v){const M=new Ws(m,E,x);R.push(M),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(M)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const l of this.possibleCenters)if(l.getCount()>=fn.CENTER_QUORUM)if(o==null)o=l;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-l.getX())-Math.abs(o.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,o=0;const l=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=fn.CENTER_QUORUM&&(r++,o+=m.getEstimatedModuleSize());if(r<3)return!1;const f=o/l;let d=0;for(const m of this.possibleCenters)d+=Math.abs(m.getEstimatedModuleSize()-f);return d<=.05*o}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new he;const o=this.possibleCenters;let l;if(r>3){let f=0,d=0;for(const x of this.possibleCenters){const v=x.getEstimatedModuleSize();f+=v,d+=v*v}l=f/r;let m=Math.sqrt(d/r-l*l);o.sort((x,v)=>{const R=Math.abs(v.getEstimatedModuleSize()-l),M=Math.abs(x.getEstimatedModuleSize()-l);return R<M?-1:R>M?1:0});const E=Math.max(.2*l,m);for(let x=0;x<o.length&&o.length>3;x++){const v=o[x];Math.abs(v.getEstimatedModuleSize()-l)>E&&(o.splice(x,1),x--)}}if(o.length>3){let f=0;for(const d of o)f+=d.getEstimatedModuleSize();l=f/o.length,o.sort((d,m)=>{if(m.getCount()===d.getCount()){const E=Math.abs(m.getEstimatedModuleSize()-l),x=Math.abs(d.getEstimatedModuleSize()-l);return E<x?1:E>x?-1:0}else return m.getCount()-d.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}fn.CENTER_QUORUM=2,fn.MIN_SKIP=3,fn.MAX_MODULES=57;class Fi{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(Be.NEED_RESULT_POINT_CALLBACK);const l=new fn(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(l)}processFinderPatternInfo(r){const o=r.getTopLeft(),l=r.getTopRight(),f=r.getBottomLeft(),d=this.calculateModuleSize(o,l,f);if(d<1)throw new he("No pattern found in proccess finder.");const m=Fi.computeDimension(o,l,f,d),E=Ge.getProvisionalVersionForDimension(m),x=E.getDimensionForVersion()-7;let v=null;if(E.getAlignmentPatternCenters().length>0){const H=l.getX()-o.getX()+f.getX(),K=l.getY()-o.getY()+f.getY(),$=1-3/x,ae=Math.floor(o.getX()+$*(H-o.getX())),ye=Math.floor(o.getY()+$*(K-o.getY()));for(let De=4;De<=16;De<<=1)try{v=this.findAlignmentInRegion(d,ae,ye,De);break}catch(Oe){if(!(Oe instanceof he))throw Oe}}const R=Fi.createTransform(o,l,f,v,m),M=Fi.sampleGrid(this.image,R,m);let P;return v===null?P=[f,o,l]:P=[f,o,l,v],new Ma(M,P)}static createTransform(r,o,l,f,d){const m=d-3.5;let E,x,v,R;return f!==null?(E=f.getX(),x=f.getY(),v=m-3,R=v):(E=o.getX()-r.getX()+l.getX(),x=o.getY()-r.getY()+l.getY(),v=m,R=m),yi.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,v,R,3.5,m,r.getX(),r.getY(),o.getX(),o.getY(),E,x,l.getX(),l.getY())}static sampleGrid(r,o,l){return Ei.getInstance().sampleGridWithTransform(r,l,l,o)}static computeDimension(r,o,l,f){const d=$e.round(Fe.distance(r,o)/f),m=$e.round(Fe.distance(r,l)/f);let E=Math.floor((d+m)/2)+7;switch(E&3){case 0:E++;break;case 2:E--;break;case 3:throw new he("Dimensions could be not found.")}return E}calculateModuleSize(r,o,l){return(this.calculateModuleSizeOneWay(r,o)+this.calculateModuleSizeOneWay(r,l))/2}calculateModuleSizeOneWay(r,o){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(o.getX()),Math.floor(o.getY())),f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(l)?f/7:isNaN(f)?l/7:(l+f)/14}sizeOfBlackWhiteBlackRunBothWays(r,o,l,f){let d=this.sizeOfBlackWhiteBlackRun(r,o,l,f),m=1,E=r-(l-r);E<0?(m=r/(r-E),E=0):E>=this.image.getWidth()&&(m=(this.image.getWidth()-1-r)/(E-r),E=this.image.getWidth()-1);let x=Math.floor(o-(f-o)*m);return m=1,x<0?(m=o/(o-x),x=0):x>=this.image.getHeight()&&(m=(this.image.getHeight()-1-o)/(x-o),x=this.image.getHeight()-1),E=Math.floor(r+(E-r)*m),d+=this.sizeOfBlackWhiteBlackRun(r,o,E,x),d-1}sizeOfBlackWhiteBlackRun(r,o,l,f){const d=Math.abs(f-o)>Math.abs(l-r);if(d){let H=r;r=o,o=H,H=l,l=f,f=H}const m=Math.abs(l-r),E=Math.abs(f-o);let x=-m/2;const v=r<l?1:-1,R=o<f?1:-1;let M=0;const P=l+v;for(let H=r,K=o;H!==P;H+=v){const $=d?K:H,ae=d?H:K;if(M===1===this.image.get($,ae)){if(M===2)return $e.distance(H,K,r,o);M++}if(x+=E,x>0){if(K===f)break;K+=R,x-=m}}return M===2?$e.distance(l+v,f,r,o):NaN}findAlignmentInRegion(r,o,l,f){const d=Math.floor(f*r),m=Math.max(0,o-d),E=Math.min(this.image.getWidth()-1,o+d);if(E-m<r*3)throw new he("Alignment top exceeds estimated module size.");const x=Math.max(0,l-d),v=Math.min(this.image.getHeight()-1,l+d);if(v-x<r*3)throw new he("Alignment bottom exceeds estimated module size.");return new Vi(this.image,m,x,E-m,v-x,r,this.resultPointCallback).find()}}class zi{constructor(){this.decoder=new vs}getDecoder(){return this.decoder}decode(r,o){let l,f;if(o!=null&&o.get(Be.PURE_BARCODE)!==void 0){const x=zi.extractPureBits(r.getBlackMatrix());l=this.decoder.decodeBitMatrix(x,o),f=zi.NO_POINTS}else{const x=new Fi(r.getBlackMatrix()).detect(o);l=this.decoder.decodeBitMatrix(x.getBits(),o),f=x.getPoints()}l.getOther()instanceof qo&&l.getOther().applyMirroredCorrection(f);const d=new ke(l.getText(),l.getRawBytes(),void 0,f,Le.QR_CODE,void 0),m=l.getByteSegments();m!==null&&d.putMetadata(xt.BYTE_SEGMENTS,m);const E=l.getECLevel();return E!==null&&d.putMetadata(xt.ERROR_CORRECTION_LEVEL,E),l.hasStructuredAppend()&&(d.putMetadata(xt.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(xt.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(r){const o=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(o===null||l===null)throw new he;const f=this.moduleSize(o,r);let d=o[1],m=l[1],E=o[0],x=l[0];if(E>=x||d>=m)throw new he;if(m-d!==x-E&&(x=E+(m-d),x>=r.getWidth()))throw new he;const v=Math.round((x-E+1)/f),R=Math.round((m-d+1)/f);if(v<=0||R<=0)throw new he;if(R!==v)throw new he;const M=Math.floor(f/2);d+=M,E+=M;const P=E+Math.floor((v-1)*f)-x;if(P>0){if(P>M)throw new he;E-=P}const H=d+Math.floor((R-1)*f)-m;if(H>0){if(H>M)throw new he;d-=H}const K=new We(v,R);for(let $=0;$<R;$++){const ae=d+Math.floor($*f);for(let ye=0;ye<v;ye++)r.get(E+Math.floor(ye*f),ae)&&K.set(ye,$)}return K}static moduleSize(r,o){const l=o.getHeight(),f=o.getWidth();let d=r[0],m=r[1],E=!0,x=0;for(;d<f&&m<l;){if(E!==o.get(d,m)){if(++x===5)break;E=!E}d++,m++}if(d===f||m===l)throw new he;return(d-r[0])/7}}zi.NO_POINTS=new Array;class Ke{PDF417Common(){}static getBitCountSum(r){return $e.sum(r)}static toIntArray(r){if(r==null||!r.length)return Ke.EMPTY_INT_ARRAY;const o=new Int32Array(r.length);let l=0;for(const f of r)o[l++]=f;return o}static getCodeword(r){const o=le.binarySearch(Ke.SYMBOL_TABLE,r&262143);return o<0?-1:(Ke.CODEWORD_TABLE[o]-1)%Ke.NUMBER_OF_CODEWORDS}}Ke.NUMBER_OF_CODEWORDS=929,Ke.MAX_CODEWORDS_IN_BARCODE=Ke.NUMBER_OF_CODEWORDS-1,Ke.MIN_ROWS_IN_BARCODE=3,Ke.MAX_ROWS_IN_BARCODE=90,Ke.MODULES_IN_CODEWORD=17,Ke.MODULES_IN_STOP_PATTERN=18,Ke.BARS_IN_MODULE=8,Ke.EMPTY_INT_ARRAY=new Int32Array([]),Ke.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ke.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Is{constructor(r,o){this.bits=r,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class et{static detectMultiple(r,o,l){let f=r.getBlackMatrix(),d=et.detect(l,f);return d.length||(f=f.clone(),f.rotate180(),d=et.detect(l,f)),new Is(f,d)}static detect(r,o){const l=new Array;let f=0,d=0,m=!1;for(;f<o.getHeight();){const E=et.findVertices(o,f,d);if(E[0]==null&&E[3]==null){if(!m)break;m=!1,d=0;for(const x of l)x[1]!=null&&(f=Math.trunc(Math.max(f,x[1].getY()))),x[3]!=null&&(f=Math.max(f,Math.trunc(x[3].getY())));f+=et.ROW_STEP;continue}if(m=!0,l.push(E),!r)break;E[2]!=null?(d=Math.trunc(E[2].getX()),f=Math.trunc(E[2].getY())):(d=Math.trunc(E[4].getX()),f=Math.trunc(E[4].getY()))}return l}static findVertices(r,o,l){const f=r.getHeight(),d=r.getWidth(),m=new Array(8);return et.copyToResult(m,et.findRowsWithPattern(r,f,d,o,l,et.START_PATTERN),et.INDEXES_START_PATTERN),m[4]!=null&&(l=Math.trunc(m[4].getX()),o=Math.trunc(m[4].getY())),et.copyToResult(m,et.findRowsWithPattern(r,f,d,o,l,et.STOP_PATTERN),et.INDEXES_STOP_PATTERN),m}static copyToResult(r,o,l){for(let f=0;f<l.length;f++)r[l[f]]=o[f]}static findRowsWithPattern(r,o,l,f,d,m){const E=new Array(4);let x=!1;const v=new Int32Array(m.length);for(;f<o;f+=et.ROW_STEP){let M=et.findGuardPattern(r,d,f,l,!1,m,v);if(M!=null){for(;f>0;){const P=et.findGuardPattern(r,d,--f,l,!1,m,v);if(P!=null)M=P;else{f++;break}}E[0]=new Fe(M[0],f),E[1]=new Fe(M[1],f),x=!0;break}}let R=f+1;if(x){let M=0,P=Int32Array.from([Math.trunc(E[0].getX()),Math.trunc(E[1].getX())]);for(;R<o;R++){const H=et.findGuardPattern(r,P[0],R,l,!1,m,v);if(H!=null&&Math.abs(P[0]-H[0])<et.MAX_PATTERN_DRIFT&&Math.abs(P[1]-H[1])<et.MAX_PATTERN_DRIFT)P=H,M=0;else{if(M>et.SKIPPED_ROW_COUNT_MAX)break;M++}}R-=M+1,E[2]=new Fe(P[0],R),E[3]=new Fe(P[1],R)}return R-f<et.BARCODE_MIN_HEIGHT&&le.fill(E,null),E}static findGuardPattern(r,o,l,f,d,m,E){le.fillWithin(E,0,E.length,0);let x=o,v=0;for(;r.get(x,l)&&x>0&&v++<et.MAX_PIXEL_DRIFT;)x--;let R=x,M=0,P=m.length;for(let H=d;R<f;R++)if(r.get(R,l)!==H)E[M]++;else{if(M===P-1){if(et.patternMatchVariance(E,m,et.MAX_INDIVIDUAL_VARIANCE)<et.MAX_AVG_VARIANCE)return new Int32Array([x,R]);x+=E[0]+E[1],Z.arraycopy(E,2,E,0,M-1),E[M-1]=0,E[M]=0,M--}else M++;E[M]=1,H=!H}return M===P-1&&et.patternMatchVariance(E,m,et.MAX_INDIVIDUAL_VARIANCE)<et.MAX_AVG_VARIANCE?new Int32Array([x,R-1]):null}static patternMatchVariance(r,o,l){let f=r.length,d=0,m=0;for(let v=0;v<f;v++)d+=r[v],m+=o[v];if(d<m)return 1/0;let E=d/m;l*=E;let x=0;for(let v=0;v<f;v++){let R=r[v],M=o[v]*E,P=R>M?R-M:M-R;if(P>l)return 1/0;x+=P}return x/d}}et.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),et.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),et.MAX_AVG_VARIANCE=.42,et.MAX_INDIVIDUAL_VARIANCE=.8,et.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),et.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),et.MAX_PIXEL_DRIFT=3,et.MAX_PATTERN_DRIFT=5,et.SKIPPED_ROW_COUNT_MAX=25,et.ROW_STEP=5,et.BARCODE_MIN_HEIGHT=10;class en{constructor(r,o){if(o.length===0)throw new b;this.field=r;let l=o.length;if(l>1&&o[0]===0){let f=1;for(;f<l&&o[f]===0;)f++;f===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-f),Z.arraycopy(o,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let f=0;for(let d of this.coefficients)f=this.field.add(f,d);return f}let o=this.coefficients[0],l=this.coefficients.length;for(let f=1;f<l;f++)o=this.field.add(this.field.multiply(r,o),this.coefficients[f]);return o}add(r){if(!this.field.equals(r.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let o=this.coefficients,l=r.coefficients;if(o.length>l.length){let m=o;o=l,l=m}let f=new Int32Array(l.length),d=l.length-o.length;Z.arraycopy(l,0,f,0,d);for(let m=d;m<l.length;m++)f[m]=this.field.add(o[m-d],l[m]);return new en(this.field,f)}subtract(r){if(!this.field.equals(r.field))throw new b("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof en?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new en(this.field,new Int32Array([0]));let o=this.coefficients,l=o.length,f=r.coefficients,d=f.length,m=new Int32Array(l+d-1);for(let E=0;E<l;E++){let x=o[E];for(let v=0;v<d;v++)m[E+v]=this.field.add(m[E+v],this.field.multiply(x,f[v]))}return new en(this.field,m)}negative(){let r=this.coefficients.length,o=new Int32Array(r);for(let l=0;l<r;l++)o[l]=this.field.subtract(0,this.coefficients[l]);return new en(this.field,o)}multiplyScalar(r){if(r===0)return new en(this.field,new Int32Array([0]));if(r===1)return this;let o=this.coefficients.length,l=new Int32Array(o);for(let f=0;f<o;f++)l[f]=this.field.multiply(this.coefficients[f],r);return new en(this.field,l)}multiplyByMonomial(r,o){if(r<0)throw new b;if(o===0)return new en(this.field,new Int32Array([0]));let l=this.coefficients.length,f=new Int32Array(l+r);for(let d=0;d<l;d++)f[d]=this.field.multiply(this.coefficients[d],o);return new en(this.field,f)}toString(){let r=new G;for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);l!==0&&(l<0?(r.append(" - "),l=-l):r.length()>0&&r.append(" + "),(o===0||l!==1)&&r.append(l),o!==0&&(o===1?r.append("x"):(r.append("x^"),r.append(o))))}return r.toString()}}class Qs{add(r,o){return(r+o)%this.modulus}subtract(r,o){return(this.modulus+r-o)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new b;return this.logTable[r]}inverse(r){if(r===0)throw new as;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,o){return r===0||o===0?0:this.expTable[(this.logTable[r]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class Wt extends Qs{constructor(r,o){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let l=1;for(let f=0;f<r;f++)this.expTable[f]=l,l=l*o%r;for(let f=0;f<r-1;f++)this.logTable[this.expTable[f]]=f;this.zero=new en(this,new Int32Array([0])),this.one=new en(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,o){if(r<0)throw new b;if(o===0)return this.zero;let l=new Int32Array(r+1);return l[0]=o,new en(this,l)}}Wt.PDF417_GF=new Wt(Ke.NUMBER_OF_CODEWORDS,3);class wr{constructor(){this.field=Wt.PDF417_GF}decode(r,o,l){let f=new en(this.field,r),d=new Int32Array(o),m=!1;for(let K=o;K>0;K--){let $=f.evaluateAt(this.field.exp(K));d[o-K]=$,$!==0&&(m=!0)}if(!m)return 0;let E=this.field.getOne();if(l!=null)for(const K of l){let $=this.field.exp(r.length-1-K),ae=new en(this.field,new Int32Array([this.field.subtract(0,$),1]));E=E.multiply(ae)}let x=new en(this.field,d),v=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),x,o),R=v[0],M=v[1],P=this.findErrorLocations(R),H=this.findErrorMagnitudes(M,R,P);for(let K=0;K<P.length;K++){let $=r.length-1-this.field.log(P[K]);if($<0)throw j.getChecksumInstance();r[$]=this.field.subtract(r[$],H[K])}return P.length}runEuclideanAlgorithm(r,o,l){if(r.getDegree()<o.getDegree()){let P=r;r=o,o=P}let f=r,d=o,m=this.field.getZero(),E=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let P=f,H=m;if(f=d,m=E,f.isZero())throw j.getChecksumInstance();d=P;let K=this.field.getZero(),$=f.getCoefficient(f.getDegree()),ae=this.field.inverse($);for(;d.getDegree()>=f.getDegree()&&!d.isZero();){let ye=d.getDegree()-f.getDegree(),De=this.field.multiply(d.getCoefficient(d.getDegree()),ae);K=K.add(this.field.buildMonomial(ye,De)),d=d.subtract(f.multiplyByMonomial(ye,De))}E=K.multiply(m).subtract(H).negative()}let x=E.getCoefficient(0);if(x===0)throw j.getChecksumInstance();let v=this.field.inverse(x),R=E.multiply(v),M=d.multiply(v);return[R,M]}findErrorLocations(r){let o=r.getDegree(),l=new Int32Array(o),f=0;for(let d=1;d<this.field.getSize()&&f<o;d++)r.evaluateAt(d)===0&&(l[f]=this.field.inverse(d),f++);if(f!==o)throw j.getChecksumInstance();return l}findErrorMagnitudes(r,o,l){let f=o.getDegree(),d=new Int32Array(f);for(let v=1;v<=f;v++)d[f-v]=this.field.multiply(v,o.getCoefficient(v));let m=new en(this.field,d),E=l.length,x=new Int32Array(E);for(let v=0;v<E;v++){let R=this.field.inverse(l[v]),M=this.field.subtract(0,r.evaluateAt(R)),P=this.field.inverse(m.evaluateAt(R));x[v]=this.field.multiply(M,P)}return x}}class xr{constructor(r,o,l,f,d){r instanceof xr?this.constructor_2(r):this.constructor_1(r,o,l,f,d)}constructor_1(r,o,l,f,d){const m=o==null||l==null,E=f==null||d==null;if(m&&E)throw new he;m?(o=new Fe(0,f.getY()),l=new Fe(0,d.getY())):E&&(f=new Fe(r.getWidth()-1,o.getY()),d=new Fe(r.getWidth()-1,l.getY())),this.image=r,this.topLeft=o,this.bottomLeft=l,this.topRight=f,this.bottomRight=d,this.minX=Math.trunc(Math.min(o.getX(),l.getX())),this.maxX=Math.trunc(Math.max(f.getX(),d.getX())),this.minY=Math.trunc(Math.min(o.getY(),f.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,o){return r==null?o:o==null?r:new xr(r.image,r.topLeft,r.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(r,o,l){let f=this.topLeft,d=this.bottomLeft,m=this.topRight,E=this.bottomRight;if(r>0){let x=l?this.topLeft:this.topRight,v=Math.trunc(x.getY()-r);v<0&&(v=0);let R=new Fe(x.getX(),v);l?f=R:m=R}if(o>0){let x=l?this.bottomLeft:this.bottomRight,v=Math.trunc(x.getY()+o);v>=this.image.getHeight()&&(v=this.image.getHeight()-1);let R=new Fe(x.getX(),v);l?d=R:E=R}return new xr(this.image,f,d,m,E)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ks{constructor(r,o,l,f){this.columnCount=r,this.errorCorrectionLevel=f,this.rowCountUpperPart=o,this.rowCountLowerPart=l,this.rowCount=o+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class cs{constructor(){this.buffer=""}static form(r,o){let l=-1;function f(m,E,x,v,R,M){if(m==="%%")return"%";if(o[++l]===void 0)return;m=v?parseInt(v.substr(1)):void 0;let P=R?parseInt(R.substr(1)):void 0,H;switch(M){case"s":H=o[l];break;case"c":H=o[l][0];break;case"f":H=parseFloat(o[l]).toFixed(m);break;case"p":H=parseFloat(o[l]).toPrecision(m);break;case"e":H=parseFloat(o[l]).toExponential(m);break;case"x":H=parseInt(o[l]).toString(P||16);break;case"d":H=parseFloat(parseInt(o[l],P||10).toPrecision(m)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(P);let K=parseInt(x),$=x&&x[0]+""=="0"?"0":" ";for(;H.length<K;)H=E!==void 0?H+$:$+H;return H}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,f)}format(r,...o){this.buffer+=cs.form(r,o)}toString(){return this.buffer}}class Tr{constructor(r){this.boundingBox=new xr(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let o=this.getCodeword(r);if(o!=null)return o;for(let l=1;l<Tr.MAX_NEARBY_DISTANCE;l++){let f=this.imageRowToCodewordIndex(r)-l;if(f>=0&&(o=this.codewords[f],o!=null)||(f=this.imageRowToCodewordIndex(r)+l,f<this.codewords.length&&(o=this.codewords[f],o!=null)))return o}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,o){this.codewords[this.imageRowToCodewordIndex(r)]=o}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new cs;let o=0;for(const l of this.codewords){if(l==null){r.format("%3d:    |   %n",o++);continue}r.format("%3d: %3d|%3d%n",o++,l.getRowNumber(),l.getValue())}return r.toString()}}Tr.MAX_NEARBY_DISTANCE=5;class Qi{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let o=this.values.get(r);o==null&&(o=0),o++,this.values.set(r,o)}getValue(){let r=-1,o=new Array;for(const[l,f]of this.values.entries()){const d={getKey:()=>l,getValue:()=>f};d.getValue()>r?(r=d.getValue(),o=[],o.push(d.getKey())):d.getValue()===r&&o.push(d.getKey())}return Ke.toIntArray(o)}getConfidence(r){return this.values.get(r)}}class sr extends Tr{constructor(r,o){super(r),this._isLeft=o}setRowNumbers(){for(let r of this.getCodewords())r?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,r);let l=this.getBoundingBox(),f=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(f.getY())),E=this.imageRowToCodewordIndex(Math.trunc(d.getY())),x=-1,v=1,R=0;for(let M=m;M<E;M++){if(o[M]==null)continue;let P=o[M],H=P.getRowNumber()-x;if(H===0)R++;else if(H===1)v=Math.max(v,R),R=1,x=P.getRowNumber();else if(H<0||P.getRowNumber()>=r.getRowCount()||H>M)o[M]=null;else{let K;v>2?K=(v-2)*H:K=H;let $=K>=M;for(let ae=1;ae<=K&&!$;ae++)$=o[M-ae]!=null;$?o[M]=null:(x=P.getRowNumber(),R=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let o=new Int32Array(r.getRowCount());for(let l of this.getCodewords())if(l!=null){let f=l.getRowNumber();if(f>=o.length)continue;o[f]++}return o}adjustIncompleteIndicatorColumnRowNumbers(r){let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),f=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(f.getY())),E=this.getCodewords(),x=-1;for(let v=d;v<m;v++){if(E[v]==null)continue;let R=E[v];R.setRowNumberAsRowIndicatorColumn();let M=R.getRowNumber()-x;M===0||(M===1?x=R.getRowNumber():R.getRowNumber()>=r.getRowCount()?E[v]=null:x=R.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),o=new Qi,l=new Qi,f=new Qi,d=new Qi;for(let E of r){if(E==null)continue;E.setRowNumberAsRowIndicatorColumn();let x=E.getValue()%30,v=E.getRowNumber();switch(this._isLeft||(v+=2),v%3){case 0:l.setValue(x*3+1);break;case 1:d.setValue(x/3),f.setValue(x%3);break;case 2:o.setValue(x+1);break}}if(o.getValue().length===0||l.getValue().length===0||f.getValue().length===0||d.getValue().length===0||o.getValue()[0]<1||l.getValue()[0]+f.getValue()[0]<Ke.MIN_ROWS_IN_BARCODE||l.getValue()[0]+f.getValue()[0]>Ke.MAX_ROWS_IN_BARCODE)return null;let m=new Ks(o.getValue()[0],l.getValue()[0],f.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(r,m),m}removeIncorrectCodewords(r,o){for(let l=0;l<r.length;l++){let f=r[l];if(r[l]==null)continue;let d=f.getValue()%30,m=f.getRowNumber();if(m>o.getRowCount()){r[l]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:d*3+1!==o.getRowCountUpperPart()&&(r[l]=null);break;case 1:(Math.trunc(d/3)!==o.getErrorCorrectionLevel()||d%3!==o.getRowCountLowerPart())&&(r[l]=null);break;case 2:d+1!==o.getColumnCount()&&(r[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ln{constructor(r,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=Ke.MAX_CODEWORDS_IN_BARCODE,o;do o=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let l=this.detectionResultColumns[o].getCodewords();for(let f=0;f<l.length;f++)l[f]!=null&&(l[f].hasValidRowNumber()||this.adjustRowNumbers(o,f,l))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<r.length;l++)if(r[l]!=null&&o[l]!=null&&r[l].getRowNumber()===o[l].getRowNumber())for(let f=1;f<=this.barcodeColumnCount;f++){let d=this.detectionResultColumns[f].getCodewords()[l];d!=null&&(d.setRowNumber(r[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[f].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let f=o[l].getRowNumber(),d=0;for(let m=this.barcodeColumnCount+1;m>0&&d<this.ADJUST_ROW_NUMBER_SKIP;m--){let E=this.detectionResultColumns[m].getCodewords()[l];E!=null&&(d=Ln.adjustRowNumberIfValid(f,d,E),E.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,o=this.detectionResultColumns[0].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let f=o[l].getRowNumber(),d=0;for(let m=1;m<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;m++){let E=this.detectionResultColumns[m].getCodewords()[l];E!=null&&(d=Ln.adjustRowNumberIfValid(f,d,E),E.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,o,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(r)?(l.setRowNumber(r),o=0):++o),o}adjustRowNumbers(r,o,l){if(!this.detectionResultColumns[r-1])return;let f=l[o],d=this.detectionResultColumns[r-1].getCodewords(),m=d;this.detectionResultColumns[r+1]!=null&&(m=this.detectionResultColumns[r+1].getCodewords());let E=new Array(14);E[2]=d[o],E[3]=m[o],o>0&&(E[0]=l[o-1],E[4]=d[o-1],E[5]=m[o-1]),o>1&&(E[8]=l[o-2],E[10]=d[o-2],E[11]=m[o-2]),o<l.length-1&&(E[1]=l[o+1],E[6]=d[o+1],E[7]=m[o+1]),o<l.length-2&&(E[9]=l[o+2],E[12]=d[o+2],E[13]=m[o+2]);for(let x of E)if(Ln.adjustRowNumber(f,x))return}static adjustRowNumber(r,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===r.getBucket()?(r.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,o){this.detectionResultColumns[r]=o}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new cs;for(let l=0;l<r.getCodewords().length;l++){o.format("CW %3d:",l);for(let f=0;f<this.barcodeColumnCount+2;f++){if(this.detectionResultColumns[f]==null){o.format("    |   ");continue}let d=this.detectionResultColumns[f].getCodewords()[l];if(d==null){o.format("    |   ");continue}o.format(" %3d|%3d",d.getRowNumber(),d.getValue())}o.format("%n")}return o.toString()}}class Ki{constructor(r,o,l,f){this.rowNumber=Ki.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(o),this.bucket=Math.trunc(l),this.value=Math.trunc(f)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==Ki.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}Ki.BARCODE_ROW_UNKNOWN=-1;class En{static initialize(){for(let r=0;r<Ke.SYMBOL_TABLE.length;r++){let o=Ke.SYMBOL_TABLE[r],l=o&1;for(let f=0;f<Ke.BARS_IN_MODULE;f++){let d=0;for(;(o&1)===l;)d+=1,o>>=1;l=o&1,En.RATIOS_TABLE[r]||(En.RATIOS_TABLE[r]=new Array(Ke.BARS_IN_MODULE)),En.RATIOS_TABLE[r][Ke.BARS_IN_MODULE-f-1]=Math.fround(d/Ke.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let o=En.getDecodedCodewordValue(En.sampleBitCounts(r));return o!==-1?o:En.getClosestDecodedValue(r)}static sampleBitCounts(r){let o=$e.sum(r),l=new Int32Array(Ke.BARS_IN_MODULE),f=0,d=0;for(let m=0;m<Ke.MODULES_IN_CODEWORD;m++){let E=o/(2*Ke.MODULES_IN_CODEWORD)+m*o/Ke.MODULES_IN_CODEWORD;d+r[f]<=E&&(d+=r[f],f++),l[f]++}return l}static getDecodedCodewordValue(r){let o=En.getBitValue(r);return Ke.getCodeword(o)===-1?-1:o}static getBitValue(r){let o=0;for(let l=0;l<r.length;l++)for(let f=0;f<r[l];f++)o=o<<1|(l%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(r){let o=$e.sum(r),l=new Array(Ke.BARS_IN_MODULE);if(o>1)for(let m=0;m<l.length;m++)l[m]=Math.fround(r[m]/o);let f=xn.MAX_VALUE,d=-1;this.bSymbolTableReady||En.initialize();for(let m=0;m<En.RATIOS_TABLE.length;m++){let E=0,x=En.RATIOS_TABLE[m];for(let v=0;v<Ke.BARS_IN_MODULE;v++){let R=Math.fround(x[v]-l[v]);if(E+=Math.fround(R*R),E>=f)break}E<f&&(f=E,d=Ke.SYMBOL_TABLE[m])}return d}}En.bSymbolTableReady=!1,En.RATIOS_TABLE=new Array(Ke.SYMBOL_TABLE.length).map(D=>new Array(Ke.BARS_IN_MODULE));class us{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class Ua{static parseLong(r,o=void 0){return parseInt(r,o)}}class hs extends _{}hs.kind="NullPointerException";class Va{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,o,l){if(r==null)throw new hs;if(o<0||o>r.length||l<0||o+l>r.length||o+l<0)throw new q;if(l===0)return;for(let f=0;f<l;f++)this.write(r[o+f])}flush(){}close(){}}class jr extends _{}class Fa extends Va{constructor(r=32){if(super(),this.count=0,r<0)throw new b("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let l=this.buf.length<<1;if(l-r<0&&(l=r),l<0){if(r<0)throw new jr;l=ne.MAX_VALUE}this.buf=le.copyOfUint8Array(this.buf,l)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,o,l){if(o<0||o>r.length||l<0||o+l-r.length>0)throw new q;this.ensureCapacity(this.count+l),Z.arraycopy(r,o,this.buf,this.count,l),this.count+=l}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return le.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var zt;(function(D){D[D.ALPHA=0]="ALPHA",D[D.LOWER=1]="LOWER",D[D.MIXED=2]="MIXED",D[D.PUNCT=3]="PUNCT",D[D.ALPHA_SHIFT=4]="ALPHA_SHIFT",D[D.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(zt||(zt={}));function bs(){if(typeof window<"u")return window.BigInt||null;if(typeof wf<"u")return wf.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Zs;function Cr(D){if(typeof Zs>"u"&&(Zs=bs()),Zs===null)throw new Error("BigInt is not supported!");return Zs(D)}function Js(){let D=[];D[0]=Cr(1);let r=Cr(900);D[1]=r;for(let o=2;o<16;o++)D[o]=D[o-1]*r;return D}class de{static decode(r,o){let l=new G(""),f=B.ISO8859_1;l.enableDecoding(f);let d=1,m=r[d++],E=new us;for(;d<r[0];){switch(m){case de.TEXT_COMPACTION_MODE_LATCH:d=de.textCompaction(r,d,l);break;case de.BYTE_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:d=de.byteCompaction(m,r,f,d,l);break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[d++]);break;case de.NUMERIC_COMPACTION_MODE_LATCH:d=de.numericCompaction(r,d,l);break;case de.ECI_CHARSET:B.getCharacterSetECIByValue(r[d++]);break;case de.ECI_GENERAL_PURPOSE:d+=2;break;case de.ECI_USER_DEFINED:d++;break;case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=de.decodeMacroBlock(r,d,E);break;case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:throw new U;default:d--,d=de.textCompaction(r,d,l);break}if(d<r.length)m=r[d++];else throw U.getFormatInstance()}if(l.length()===0)throw U.getFormatInstance();let x=new Jt(null,l.toString(),null,o);return x.setOther(E),x}static decodeMacroBlock(r,o,l){if(o+de.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw U.getFormatInstance();let f=new Int32Array(de.NUMBER_OF_SEQUENCE_CODEWORDS);for(let E=0;E<de.NUMBER_OF_SEQUENCE_CODEWORDS;E++,o++)f[E]=r[o];l.setSegmentIndex(ne.parseInt(de.decodeBase900toBase10(f,de.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new G;o=de.textCompaction(r,o,d),l.setFileId(d.toString());let m=-1;for(r[o]===de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=o+1);o<r[0];)switch(r[o]){case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,r[o]){case de.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let E=new G;o=de.textCompaction(r,o+1,E),l.setFileName(E.toString());break;case de.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let x=new G;o=de.textCompaction(r,o+1,x),l.setSender(x.toString());break;case de.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let v=new G;o=de.textCompaction(r,o+1,v),l.setAddressee(v.toString());break;case de.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new G;o=de.numericCompaction(r,o+1,R),l.setSegmentCount(ne.parseInt(R.toString()));break;case de.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let M=new G;o=de.numericCompaction(r,o+1,M),l.setTimestamp(Ua.parseLong(M.toString()));break;case de.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let P=new G;o=de.numericCompaction(r,o+1,P),l.setChecksum(ne.parseInt(P.toString()));break;case de.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let H=new G;o=de.numericCompaction(r,o+1,H),l.setFileSize(Ua.parseLong(H.toString()));break;default:throw U.getFormatInstance()}break;case de.MACRO_PDF417_TERMINATOR:o++,l.setLastSegment(!0);break;default:throw U.getFormatInstance()}if(m!==-1){let E=o-m;l.isLastSegment()&&E--,l.setOptionalData(le.copyOfRange(r,m,m+E))}return o}static textCompaction(r,o,l){let f=new Int32Array((r[0]-o)*2),d=new Int32Array((r[0]-o)*2),m=0,E=!1;for(;o<r[0]&&!E;){let x=r[o++];if(x<de.TEXT_COMPACTION_MODE_LATCH)f[m]=x/30,f[m+1]=x%30,m+=2;else switch(x){case de.TEXT_COMPACTION_MODE_LATCH:f[m++]=de.TEXT_COMPACTION_MODE_LATCH;break;case de.BYTE_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.NUMERIC_COMPACTION_MODE_LATCH:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:o--,E=!0;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f[m]=de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,x=r[o++],d[m]=x,m++;break}}return de.decodeTextCompaction(f,d,m,l),o}static decodeTextCompaction(r,o,l,f){let d=zt.ALPHA,m=zt.ALPHA,E=0;for(;E<l;){let x=r[E],v="";switch(d){case zt.ALPHA:if(x<26)v=String.fromCharCode(65+x);else switch(x){case 26:v=" ";break;case de.LL:d=zt.LOWER;break;case de.ML:d=zt.MIXED;break;case de.PS:m=d,d=zt.PUNCT_SHIFT;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[E]);break;case de.TEXT_COMPACTION_MODE_LATCH:d=zt.ALPHA;break}break;case zt.LOWER:if(x<26)v=String.fromCharCode(97+x);else switch(x){case 26:v=" ";break;case de.AS:m=d,d=zt.ALPHA_SHIFT;break;case de.ML:d=zt.MIXED;break;case de.PS:m=d,d=zt.PUNCT_SHIFT;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[E]);break;case de.TEXT_COMPACTION_MODE_LATCH:d=zt.ALPHA;break}break;case zt.MIXED:if(x<de.PL)v=de.MIXED_CHARS[x];else switch(x){case de.PL:d=zt.PUNCT;break;case 26:v=" ";break;case de.LL:d=zt.LOWER;break;case de.AL:d=zt.ALPHA;break;case de.PS:m=d,d=zt.PUNCT_SHIFT;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[E]);break;case de.TEXT_COMPACTION_MODE_LATCH:d=zt.ALPHA;break}break;case zt.PUNCT:if(x<de.PAL)v=de.PUNCT_CHARS[x];else switch(x){case de.PAL:d=zt.ALPHA;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[E]);break;case de.TEXT_COMPACTION_MODE_LATCH:d=zt.ALPHA;break}break;case zt.ALPHA_SHIFT:if(d=m,x<26)v=String.fromCharCode(65+x);else switch(x){case 26:v=" ";break;case de.TEXT_COMPACTION_MODE_LATCH:d=zt.ALPHA;break}break;case zt.PUNCT_SHIFT:if(d=m,x<de.PAL)v=de.PUNCT_CHARS[x];else switch(x){case de.PAL:d=zt.ALPHA;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[E]);break;case de.TEXT_COMPACTION_MODE_LATCH:d=zt.ALPHA;break}break}v!==""&&f.append(v),E++}}static byteCompaction(r,o,l,f,d){let m=new Fa,E=0,x=0,v=!1;switch(r){case de.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),M=o[f++];for(;f<o[0]&&!v;)switch(R[E++]=M,x=900*x+M,M=o[f++],M){case de.TEXT_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH:case de.NUMERIC_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:f--,v=!0;break;default:if(E%5===0&&E>0){for(let P=0;P<6;++P)m.write(Number(Cr(x)>>Cr(8*(5-P))));x=0,E=0}break}f===o[0]&&M<de.TEXT_COMPACTION_MODE_LATCH&&(R[E++]=M);for(let P=0;P<E;P++)m.write(R[P]);break;case de.BYTE_COMPACTION_MODE_LATCH_6:for(;f<o[0]&&!v;){let P=o[f++];if(P<de.TEXT_COMPACTION_MODE_LATCH)E++,x=900*x+P;else switch(P){case de.TEXT_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH:case de.NUMERIC_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:f--,v=!0;break}if(E%5===0&&E>0){for(let H=0;H<6;++H)m.write(Number(Cr(x)>>Cr(8*(5-H))));x=0,E=0}}break}return d.append(Y.decode(m.toByteArray(),l)),f}static numericCompaction(r,o,l){let f=0,d=!1,m=new Int32Array(de.MAX_NUMERIC_CODEWORDS);for(;o<r[0]&&!d;){let E=r[o++];if(o===r[0]&&(d=!0),E<de.TEXT_COMPACTION_MODE_LATCH)m[f]=E,f++;else switch(E){case de.TEXT_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:o--,d=!0;break}(f%de.MAX_NUMERIC_CODEWORDS===0||E===de.NUMERIC_COMPACTION_MODE_LATCH||d)&&f>0&&(l.append(de.decodeBase900toBase10(m,f)),f=0)}return o}static decodeBase900toBase10(r,o){let l=Cr(0);for(let d=0;d<o;d++)l+=de.EXP900[o-d-1]*Cr(r[d]);let f=l.toString();if(f.charAt(0)!=="1")throw new U;return f.substring(1)}}de.TEXT_COMPACTION_MODE_LATCH=900,de.BYTE_COMPACTION_MODE_LATCH=901,de.NUMERIC_COMPACTION_MODE_LATCH=902,de.BYTE_COMPACTION_MODE_LATCH_6=924,de.ECI_USER_DEFINED=925,de.ECI_GENERAL_PURPOSE=926,de.ECI_CHARSET=927,de.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,de.MACRO_PDF417_TERMINATOR=922,de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,de.MAX_NUMERIC_CODEWORDS=15,de.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,de.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,de.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,de.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,de.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,de.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,de.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,de.PL=25,de.LL=27,de.AS=27,de.ML=28,de.AL=28,de.PS=29,de.PAL=29,de.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,de.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",de.EXP900=bs()?Js():[],de.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ht{constructor(){}static decode(r,o,l,f,d,m,E){let x=new xr(r,o,l,f,d),v=null,R=null,M;for(let K=!0;;K=!1){if(o!=null&&(v=ht.getRowIndicatorColumn(r,x,o,!0,m,E)),f!=null&&(R=ht.getRowIndicatorColumn(r,x,f,!1,m,E)),M=ht.merge(v,R),M==null)throw he.getNotFoundInstance();let $=M.getBoundingBox();if(K&&$!=null&&($.getMinY()<x.getMinY()||$.getMaxY()>x.getMaxY()))x=$;else break}M.setBoundingBox(x);let P=M.getBarcodeColumnCount()+1;M.setDetectionResultColumn(0,v),M.setDetectionResultColumn(P,R);let H=v!=null;for(let K=1;K<=P;K++){let $=H?K:P-K;if(M.getDetectionResultColumn($)!==void 0)continue;let ae;$===0||$===P?ae=new sr(x,$===0):ae=new Tr(x),M.setDetectionResultColumn($,ae);let ye=-1,De=ye;for(let Oe=x.getMinY();Oe<=x.getMaxY();Oe++){if(ye=ht.getStartColumn(M,$,Oe,H),ye<0||ye>x.getMaxX()){if(De===-1)continue;ye=De}let be=ht.detectCodeword(r,x.getMinX(),x.getMaxX(),H,ye,Oe,m,E);be!=null&&(ae.setCodeword(Oe,be),De=ye,m=Math.min(m,be.getWidth()),E=Math.max(E,be.getWidth()))}}return ht.createDecoderResult(M)}static merge(r,o){if(r==null&&o==null)return null;let l=ht.getBarcodeMetadata(r,o);if(l==null)return null;let f=xr.merge(ht.adjustBoundingBox(r),ht.adjustBoundingBox(o));return new Ln(l,f)}static adjustBoundingBox(r){if(r==null)return null;let o=r.getRowHeights();if(o==null)return null;let l=ht.getMax(o),f=0;for(let E of o)if(f+=l-E,E>0)break;let d=r.getCodewords();for(let E=0;f>0&&d[E]==null;E++)f--;let m=0;for(let E=o.length-1;E>=0&&(m+=l-o[E],!(o[E]>0));E--);for(let E=d.length-1;m>0&&d[E]==null;E--)m--;return r.getBoundingBox().addMissingRows(f,m,r.isLeft())}static getMax(r){let o=-1;for(let l of r)o=Math.max(o,l);return o}static getBarcodeMetadata(r,o){let l;if(r==null||(l=r.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let f;return o==null||(f=o.getBarcodeMetadata())==null?l:l.getColumnCount()!==f.getColumnCount()&&l.getErrorCorrectionLevel()!==f.getErrorCorrectionLevel()&&l.getRowCount()!==f.getRowCount()?null:l}static getRowIndicatorColumn(r,o,l,f,d,m){let E=new sr(o,f);for(let x=0;x<2;x++){let v=x===0?1:-1,R=Math.trunc(Math.trunc(l.getX()));for(let M=Math.trunc(Math.trunc(l.getY()));M<=o.getMaxY()&&M>=o.getMinY();M+=v){let P=ht.detectCodeword(r,0,r.getWidth(),f,R,M,d,m);P!=null&&(E.setCodeword(M,P),f?R=P.getStartX():R=P.getEndX())}}return E}static adjustCodewordCount(r,o){let l=o[0][1],f=l.getValue(),d=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-ht.getNumberOfECCodeWords(r.getBarcodeECLevel());if(f.length===0){if(d<1||d>Ke.MAX_CODEWORDS_IN_BARCODE)throw he.getNotFoundInstance();l.setValue(d)}else f[0]!==d&&l.setValue(d)}static createDecoderResult(r){let o=ht.createBarcodeMatrix(r);ht.adjustCodewordCount(r,o);let l=new Array,f=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),d=[],m=new Array;for(let x=0;x<r.getBarcodeRowCount();x++)for(let v=0;v<r.getBarcodeColumnCount();v++){let R=o[x][v+1].getValue(),M=x*r.getBarcodeColumnCount()+v;R.length===0?l.push(M):R.length===1?f[M]=R[0]:(m.push(M),d.push(R))}let E=new Array(d.length);for(let x=0;x<E.length;x++)E[x]=d[x];return ht.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),f,Ke.toIntArray(l),Ke.toIntArray(m),E)}static createDecoderResultFromAmbiguousValues(r,o,l,f,d){let m=new Int32Array(f.length),E=100;for(;E-- >0;){for(let x=0;x<m.length;x++)o[f[x]]=d[x][m[x]];try{return ht.decodeCodewords(o,r,l)}catch(x){if(!(x instanceof j))throw x}if(m.length===0)throw j.getChecksumInstance();for(let x=0;x<m.length;x++)if(m[x]<d[x].length-1){m[x]++;break}else if(m[x]=0,x===m.length-1)throw j.getChecksumInstance()}throw j.getChecksumInstance()}static createBarcodeMatrix(r){let o=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let f=0;f<o.length;f++)for(let d=0;d<o[f].length;d++)o[f][d]=new Qi;let l=0;for(let f of r.getDetectionResultColumns()){if(f!=null){for(let d of f.getCodewords())if(d!=null){let m=d.getRowNumber();if(m>=0){if(m>=o.length)continue;o[m][l].setValue(d.getValue())}}}l++}return o}static isValidBarcodeColumn(r,o){return o>=0&&o<=r.getBarcodeColumnCount()+1}static getStartColumn(r,o,l,f){let d=f?1:-1,m=null;if(ht.isValidBarcodeColumn(r,o-d)&&(m=r.getDetectionResultColumn(o-d).getCodeword(l)),m!=null)return f?m.getEndX():m.getStartX();if(m=r.getDetectionResultColumn(o).getCodewordNearby(l),m!=null)return f?m.getStartX():m.getEndX();if(ht.isValidBarcodeColumn(r,o-d)&&(m=r.getDetectionResultColumn(o-d).getCodewordNearby(l)),m!=null)return f?m.getEndX():m.getStartX();let E=0;for(;ht.isValidBarcodeColumn(r,o-d);){o-=d;for(let x of r.getDetectionResultColumn(o).getCodewords())if(x!=null)return(f?x.getEndX():x.getStartX())+d*E*(x.getEndX()-x.getStartX());E++}return f?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,o,l,f,d,m,E,x){d=ht.adjustCodewordStartColumn(r,o,l,f,d,m);let v=ht.getModuleBitCount(r,o,l,f,d,m);if(v==null)return null;let R,M=$e.sum(v);if(f)R=d+M;else{for(let K=0;K<v.length/2;K++){let $=v[K];v[K]=v[v.length-1-K],v[v.length-1-K]=$}R=d,d=R-M}if(!ht.checkCodewordSkew(M,E,x))return null;let P=En.getDecodedValue(v),H=Ke.getCodeword(P);return H===-1?null:new Ki(d,R,ht.getCodewordBucketNumber(P),H)}static getModuleBitCount(r,o,l,f,d,m){let E=d,x=new Int32Array(8),v=0,R=f?1:-1,M=f;for(;(f?E<l:E>=o)&&v<x.length;)r.get(E,m)===M?(x[v]++,E+=R):(v++,M=!M);return v===x.length||E===(f?l:o)&&v===x.length-1?x:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,o,l,f,d,m){let E=d,x=f?-1:1;for(let v=0;v<2;v++){for(;(f?E>=o:E<l)&&f===r.get(E,m);){if(Math.abs(d-E)>ht.CODEWORD_SKEW_SIZE)return d;E+=x}x=-x,f=!f}return E}static checkCodewordSkew(r,o,l){return o-ht.CODEWORD_SKEW_SIZE<=r&&r<=l+ht.CODEWORD_SKEW_SIZE}static decodeCodewords(r,o,l){if(r.length===0)throw U.getFormatInstance();let f=1<<o+1,d=ht.correctErrors(r,l,f);ht.verifyCodewordCount(r,f);let m=de.decode(r,""+o);return m.setErrorsCorrected(d),m.setErasures(l.length),m}static correctErrors(r,o,l){if(o!=null&&o.length>l/2+ht.MAX_ERRORS||l<0||l>ht.MAX_EC_CODEWORDS)throw j.getChecksumInstance();return ht.errorCorrection.decode(r,l,o)}static verifyCodewordCount(r,o){if(r.length<4)throw U.getFormatInstance();let l=r[0];if(l>r.length)throw U.getFormatInstance();if(l===0)if(o<r.length)r[0]=r.length-o;else throw U.getFormatInstance()}static getBitCountForCodeword(r){let o=new Int32Array(8),l=0,f=o.length-1;for(;!((r&1)!==l&&(l=r&1,f--,f<0));)o[f]++,r>>=1;return o}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return ht.getCodewordBucketNumber(ht.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let o=new cs;for(let l=0;l<r.length;l++){o.format("Row %2d: ",l);for(let f=0;f<r[l].length;f++){let d=r[l][f];d.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}o.format("%n")}return o.toString()}}ht.CODEWORD_SKEW_SIZE=2,ht.MAX_ERRORS=3,ht.MAX_EC_CODEWORDS=512,ht.errorCorrection=new wr;class Sn{decode(r,o=null){let l=Sn.decode(r,o,!1);if(l==null||l.length===0||l[0]==null)throw he.getNotFoundInstance();return l[0]}decodeMultiple(r,o=null){try{return Sn.decode(r,o,!0)}catch(l){throw l instanceof U||l instanceof j?he.getNotFoundInstance():l}}static decode(r,o,l){const f=new Array,d=et.detectMultiple(r,o,l);for(const m of d.getPoints()){const E=ht.decode(d.getBits(),m[4],m[5],m[6],m[7],Sn.getMinCodewordWidth(m),Sn.getMaxCodewordWidth(m)),x=new ke(E.getText(),E.getRawBytes(),void 0,m,Le.PDF_417);x.putMetadata(xt.ERROR_CORRECTION_LEVEL,E.getECLevel());const v=E.getOther();v!=null&&x.putMetadata(xt.PDF417_EXTRA_METADATA,v),f.push(x)}return f.map(m=>m)}static getMaxWidth(r,o){return r==null||o==null?0:Math.trunc(Math.abs(r.getX()-o.getX()))}static getMinWidth(r,o){return r==null||o==null?ne.MAX_VALUE:Math.trunc(Math.abs(r.getX()-o.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Sn.getMaxWidth(r[0],r[4]),Sn.getMaxWidth(r[6],r[2])*Ke.MODULES_IN_CODEWORD/Ke.MODULES_IN_STOP_PATTERN),Math.max(Sn.getMaxWidth(r[1],r[5]),Sn.getMaxWidth(r[7],r[3])*Ke.MODULES_IN_CODEWORD/Ke.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Sn.getMinWidth(r[0],r[4]),Sn.getMinWidth(r[6],r[2])*Ke.MODULES_IN_CODEWORD/Ke.MODULES_IN_STOP_PATTERN),Math.min(Sn.getMinWidth(r[1],r[5]),Sn.getMinWidth(r[7],r[3])*Ke.MODULES_IN_CODEWORD/Ke.MODULES_IN_STOP_PATTERN)))}reset(){}}class $s extends _{}$s.kind="ReaderException";class Yo{constructor(r,o){this.verbose=r===!0,o&&this.setHints(o)}decode(r,o){return o&&this.setHints(o),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const o=!s(r)&&r.get(Be.TRY_HARDER)===!0,l=s(r)?null:r.get(Be.POSSIBLE_FORMATS),f=new Array;if(!s(l)){const d=l.some(m=>m===Le.UPC_A||m===Le.UPC_E||m===Le.EAN_13||m===Le.EAN_8||m===Le.CODABAR||m===Le.CODE_39||m===Le.CODE_93||m===Le.CODE_128||m===Le.ITF||m===Le.RSS_14||m===Le.RSS_EXPANDED);d&&!o&&f.push(new Ci(r,this.verbose)),l.includes(Le.QR_CODE)&&f.push(new zi),l.includes(Le.DATA_MATRIX)&&f.push(new Bi),l.includes(Le.AZTEC)&&f.push(new qs),l.includes(Le.PDF_417)&&f.push(new Sn),d&&o&&f.push(new Ci(r,this.verbose))}f.length===0&&(o||f.push(new Ci(r,this.verbose)),f.push(new zi),f.push(new Bi),f.push(new qs),f.push(new Sn),o&&f.push(new Ci(r,this.verbose))),this.readers=f}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new $s("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(r,this.hints)}catch(l){if(l instanceof $s)continue}throw new he("No MultiFormat Readers were able to detect the code.")}}class Hr extends Pe{constructor(r=null,o=500){const l=new Yo;l.setHints(r),super(l,o)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class Ll extends Pe{constructor(r=500){super(new Sn,r)}}class Pl extends Pe{constructor(r=500){super(new zi,r)}}var za;(function(D){D[D.ERROR_CORRECTION=0]="ERROR_CORRECTION",D[D.CHARACTER_SET=1]="CHARACTER_SET",D[D.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",D[D.MIN_SIZE=3]="MIN_SIZE",D[D.MAX_SIZE=4]="MAX_SIZE",D[D.MARGIN=5]="MARGIN",D[D.PDF417_COMPACT=6]="PDF417_COMPACT",D[D.PDF417_COMPACTION=7]="PDF417_COMPACTION",D[D.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",D[D.AZTEC_LAYERS=9]="AZTEC_LAYERS",D[D.QR_VERSION=10]="QR_VERSION"})(za||(za={}));var In=za;class Gr{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new qn(r,Int32Array.from([1])))}buildGenerator(r){const o=this.cachedGenerators;if(r>=o.length){let l=o[o.length-1];const f=this.field;for(let d=o.length;d<=r;d++){const m=l.multiply(new qn(f,Int32Array.from([1,f.exp(d-1+f.getGeneratorBase())])));o.push(m),l=m}}return o[r]}encode(r,o){if(o===0)throw new b("No error correction bytes");const l=r.length-o;if(l<=0)throw new b("No data bytes provided");const f=this.buildGenerator(o),d=new Int32Array(l);Z.arraycopy(r,0,d,0,l);let m=new qn(this.field,d);m=m.multiplyByMonomial(o,1);const x=m.divide(f)[1].getCoefficients(),v=o-x.length;for(let R=0;R<v;R++)r[l+R]=0;Z.arraycopy(x,0,r,l+v,x.length)}}class vt{constructor(){}static applyMaskPenaltyRule1(r){return vt.applyMaskPenaltyRule1Internal(r,!0)+vt.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let o=0;const l=r.getArray(),f=r.getWidth(),d=r.getHeight();for(let m=0;m<d-1;m++){const E=l[m];for(let x=0;x<f-1;x++){const v=E[x];v===E[x+1]&&v===l[m+1][x]&&v===l[m+1][x+1]&&o++}}return vt.N2*o}static applyMaskPenaltyRule3(r){let o=0;const l=r.getArray(),f=r.getWidth(),d=r.getHeight();for(let m=0;m<d;m++)for(let E=0;E<f;E++){const x=l[m];E+6<f&&x[E]===1&&x[E+1]===0&&x[E+2]===1&&x[E+3]===1&&x[E+4]===1&&x[E+5]===0&&x[E+6]===1&&(vt.isWhiteHorizontal(x,E-4,E)||vt.isWhiteHorizontal(x,E+7,E+11))&&o++,m+6<d&&l[m][E]===1&&l[m+1][E]===0&&l[m+2][E]===1&&l[m+3][E]===1&&l[m+4][E]===1&&l[m+5][E]===0&&l[m+6][E]===1&&(vt.isWhiteVertical(l,E,m-4,m)||vt.isWhiteVertical(l,E,m+7,m+11))&&o++}return o*vt.N3}static isWhiteHorizontal(r,o,l){o=Math.max(o,0),l=Math.min(l,r.length);for(let f=o;f<l;f++)if(r[f]===1)return!1;return!0}static isWhiteVertical(r,o,l,f){l=Math.max(l,0),f=Math.min(f,r.length);for(let d=l;d<f;d++)if(r[d][o]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let o=0;const l=r.getArray(),f=r.getWidth(),d=r.getHeight();for(let x=0;x<d;x++){const v=l[x];for(let R=0;R<f;R++)v[R]===1&&o++}const m=r.getHeight()*r.getWidth();return Math.floor(Math.abs(o*2-m)*10/m)*vt.N4}static getDataMaskBit(r,o,l){let f,d;switch(r){case 0:f=l+o&1;break;case 1:f=l&1;break;case 2:f=o%3;break;case 3:f=(l+o)%3;break;case 4:f=Math.floor(l/2)+Math.floor(o/3)&1;break;case 5:d=l*o,f=(d&1)+d%3;break;case 6:d=l*o,f=(d&1)+d%3&1;break;case 7:d=l*o,f=d%3+(l+o&1)&1;break;default:throw new b("Invalid mask pattern: "+r)}return f===0}static applyMaskPenaltyRule1Internal(r,o){let l=0;const f=o?r.getHeight():r.getWidth(),d=o?r.getWidth():r.getHeight(),m=r.getArray();for(let E=0;E<f;E++){let x=0,v=-1;for(let R=0;R<d;R++){const M=o?m[E][R]:m[R][E];M===v?x++:(x>=5&&(l+=vt.N1+(x-5)),x=1,v=M)}x>=5&&(l+=vt.N1+(x-5))}return l}}vt.N1=3,vt.N2=3,vt.N3=40,vt.N4=10;class ea{constructor(r,o){this.width=r,this.height=o;const l=new Array(o);for(let f=0;f!==o;f++)l[f]=new Uint8Array(r);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(r,o){return this.bytes[o][r]}getArray(){return this.bytes}setNumber(r,o,l){this.bytes[o][r]=l}setBoolean(r,o,l){this.bytes[o][r]=l?1:0}clear(r){for(const o of this.bytes)le.fill(o,r)}equals(r){if(!(r instanceof ea))return!1;const o=r;if(this.width!==o.width||this.height!==o.height)return!1;for(let l=0,f=this.height;l<f;++l){const d=this.bytes[l],m=o.bytes[l];for(let E=0,x=this.width;E<x;++E)if(d[E]!==m[E])return!1}return!0}toString(){const r=new G;for(let o=0,l=this.height;o<l;++o){const f=this.bytes[o];for(let d=0,m=this.width;d<m;++d)switch(f[d]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class qr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new G;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<qr.NUM_MASK_PATTERNS}}qr.NUM_MASK_PATTERNS=8;class bt extends _{}bt.kind="WriterException";class y{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,o,l,f,d){y.clearMatrix(d),y.embedBasicPatterns(l,d),y.embedTypeInfo(o,f,d),y.maybeEmbedVersionInfo(l,d),y.embedDataBits(r,f,d)}static embedBasicPatterns(r,o){y.embedPositionDetectionPatternsAndSeparators(o),y.embedDarkDotAtLeftBottomCorner(o),y.maybeEmbedPositionAdjustmentPatterns(r,o),y.embedTimingPatterns(o)}static embedTypeInfo(r,o,l){const f=new Re;y.makeTypeInfoBits(r,o,f);for(let d=0,m=f.getSize();d<m;++d){const E=f.get(f.getSize()-1-d),x=y.TYPE_INFO_COORDINATES[d],v=x[0],R=x[1];if(l.setBoolean(v,R,E),d<8){const M=l.getWidth()-d-1;l.setBoolean(M,8,E)}else{const P=l.getHeight()-7+(d-8);l.setBoolean(8,P,E)}}}static maybeEmbedVersionInfo(r,o){if(r.getVersionNumber()<7)return;const l=new Re;y.makeVersionInfoBits(r,l);let f=17;for(let d=0;d<6;++d)for(let m=0;m<3;++m){const E=l.get(f);f--,o.setBoolean(d,o.getHeight()-11+m,E),o.setBoolean(o.getHeight()-11+m,d,E)}}static embedDataBits(r,o,l){let f=0,d=-1,m=l.getWidth()-1,E=l.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);E>=0&&E<l.getHeight();){for(let x=0;x<2;++x){const v=m-x;if(!y.isEmpty(l.get(v,E)))continue;let R;f<r.getSize()?(R=r.get(f),++f):R=!1,o!==255&&vt.getDataMaskBit(o,v,E)&&(R=!R),l.setBoolean(v,E,R)}E+=d}d=-d,E+=d,m-=2}if(f!==r.getSize())throw new bt("Not all bits consumed: "+f+"/"+r.getSize())}static findMSBSet(r){return 32-ne.numberOfLeadingZeros(r)}static calculateBCHCode(r,o){if(o===0)throw new b("0 polynomial");const l=y.findMSBSet(o);for(r<<=l-1;y.findMSBSet(r)>=l;)r^=o<<y.findMSBSet(r)-l;return r}static makeTypeInfoBits(r,o,l){if(!qr.isValidMaskPattern(o))throw new bt("Invalid mask pattern");const f=r.getBits()<<3|o;l.appendBits(f,5);const d=y.calculateBCHCode(f,y.TYPE_INFO_POLY);l.appendBits(d,10);const m=new Re;if(m.appendBits(y.TYPE_INFO_MASK_PATTERN,15),l.xor(m),l.getSize()!==15)throw new bt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(r,o){o.appendBits(r.getVersionNumber(),6);const l=y.calculateBCHCode(r.getVersionNumber(),y.VERSION_INFO_POLY);if(o.appendBits(l,12),o.getSize()!==18)throw new bt("should not happen but we got: "+o.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let o=8;o<r.getWidth()-8;++o){const l=(o+1)%2;y.isEmpty(r.get(o,6))&&r.setNumber(o,6,l),y.isEmpty(r.get(6,o))&&r.setNumber(6,o,l)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new bt;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,o,l){for(let f=0;f<8;++f){if(!y.isEmpty(l.get(r+f,o)))throw new bt;l.setNumber(r+f,o,0)}}static embedVerticalSeparationPattern(r,o,l){for(let f=0;f<7;++f){if(!y.isEmpty(l.get(r,o+f)))throw new bt;l.setNumber(r,o+f,0)}}static embedPositionAdjustmentPattern(r,o,l){for(let f=0;f<5;++f){const d=y.POSITION_ADJUSTMENT_PATTERN[f];for(let m=0;m<5;++m)l.setNumber(r+m,o+f,d[m])}}static embedPositionDetectionPattern(r,o,l){for(let f=0;f<7;++f){const d=y.POSITION_DETECTION_PATTERN[f];for(let m=0;m<7;++m)l.setNumber(r+m,o+f,d[m])}}static embedPositionDetectionPatternsAndSeparators(r){const o=y.POSITION_DETECTION_PATTERN[0].length;y.embedPositionDetectionPattern(0,0,r),y.embedPositionDetectionPattern(r.getWidth()-o,0,r),y.embedPositionDetectionPattern(0,r.getWidth()-o,r);const l=8;y.embedHorizontalSeparationPattern(0,l-1,r),y.embedHorizontalSeparationPattern(r.getWidth()-l,l-1,r),y.embedHorizontalSeparationPattern(0,r.getWidth()-l,r);const f=7;y.embedVerticalSeparationPattern(f,0,r),y.embedVerticalSeparationPattern(r.getHeight()-f-1,0,r),y.embedVerticalSeparationPattern(f,r.getHeight()-f,r)}static maybeEmbedPositionAdjustmentPatterns(r,o){if(r.getVersionNumber()<2)return;const l=r.getVersionNumber()-1,f=y.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,m=f.length;d!==m;d++){const E=f[d];if(E>=0)for(let x=0;x!==m;x++){const v=f[x];v>=0&&y.isEmpty(o.get(v,E))&&y.embedPositionAdjustmentPattern(v-2,E-2,o)}}}}y.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),y.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),y.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),y.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),y.VERSION_INFO_POLY=7973,y.TYPE_INFO_POLY=1335,y.TYPE_INFO_MASK_PATTERN=21522;class I{constructor(r,o){this.dataBytes=r,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class O{constructor(){}static calculateMaskPenalty(r){return vt.applyMaskPenaltyRule1(r)+vt.applyMaskPenaltyRule2(r)+vt.applyMaskPenaltyRule3(r)+vt.applyMaskPenaltyRule4(r)}static encode(r,o,l=null){let f=O.DEFAULT_BYTE_MODE_ENCODING;const d=l!==null&&l.get(In.CHARACTER_SET)!==void 0;d&&(f=l.get(In.CHARACTER_SET).toString());const m=this.chooseMode(r,f),E=new Re;if(m===Qe.BYTE&&(d||O.DEFAULT_BYTE_MODE_ENCODING!==f)){const Oe=B.getCharacterSetECIByName(f);Oe!==void 0&&this.appendECI(Oe,E)}this.appendModeInfo(m,E);const x=new Re;this.appendBytes(r,m,x,f);let v;if(l!==null&&l.get(In.QR_VERSION)!==void 0){const Oe=Number.parseInt(l.get(In.QR_VERSION).toString(),10);v=Ge.getVersionForNumber(Oe);const be=this.calculateBitsNeeded(m,E,x,v);if(!this.willFit(be,v,o))throw new bt("Data too big for requested version")}else v=this.recommendVersion(o,m,E,x);const R=new Re;R.appendBitArray(E);const M=m===Qe.BYTE?x.getSizeInBytes():r.length;this.appendLengthInfo(M,v,m,R),R.appendBitArray(x);const P=v.getECBlocksForLevel(o),H=v.getTotalCodewords()-P.getTotalECCodewords();this.terminateBits(H,R);const K=this.interleaveWithECBytes(R,v.getTotalCodewords(),H,P.getNumBlocks()),$=new qr;$.setECLevel(o),$.setMode(m),$.setVersion(v);const ae=v.getDimensionForVersion(),ye=new ea(ae,ae),De=this.chooseMaskPattern(K,o,v,ye);return $.setMaskPattern(De),y.buildMatrix(K,o,v,De,ye),$.setMatrix(ye),$}static recommendVersion(r,o,l,f){const d=this.calculateBitsNeeded(o,l,f,Ge.getVersionForNumber(1)),m=this.chooseVersion(d,r),E=this.calculateBitsNeeded(o,l,f,m);return this.chooseVersion(E,r)}static calculateBitsNeeded(r,o,l,f){return o.getSize()+r.getCharacterCountBits(f)+l.getSize()}static getAlphanumericCode(r){return r<O.ALPHANUMERIC_TABLE.length?O.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,o=null){if(B.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(r))return Qe.KANJI;let l=!1,f=!1;for(let d=0,m=r.length;d<m;++d){const E=r.charAt(d);if(O.isDigit(E))l=!0;else if(this.getAlphanumericCode(E.charCodeAt(0))!==-1)f=!0;else return Qe.BYTE}return f?Qe.ALPHANUMERIC:l?Qe.NUMERIC:Qe.BYTE}static isOnlyDoubleByteKanji(r){let o;try{o=Y.encode(r,B.SJIS)}catch{return!1}const l=o.length;if(l%2!==0)return!1;for(let f=0;f<l;f+=2){const d=o[f]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(r,o,l,f){let d=Number.MAX_SAFE_INTEGER,m=-1;for(let E=0;E<qr.NUM_MASK_PATTERNS;E++){y.buildMatrix(r,o,l,E,f);let x=this.calculateMaskPenalty(f);x<d&&(d=x,m=E)}return m}static chooseVersion(r,o){for(let l=1;l<=40;l++){const f=Ge.getVersionForNumber(l);if(O.willFit(r,f,o))return f}throw new bt("Data too big")}static willFit(r,o,l){const f=o.getTotalCodewords(),m=o.getECBlocksForLevel(l).getTotalECCodewords(),E=f-m,x=(r+7)/8;return E>=x}static terminateBits(r,o){const l=r*8;if(o.getSize()>l)throw new bt("data bits cannot fit in the QR Code"+o.getSize()+" > "+l);for(let m=0;m<4&&o.getSize()<l;++m)o.appendBit(!1);const f=o.getSize()&7;if(f>0)for(let m=f;m<8;m++)o.appendBit(!1);const d=r-o.getSizeInBytes();for(let m=0;m<d;++m)o.appendBits((m&1)===0?236:17,8);if(o.getSize()!==l)throw new bt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,o,l,f,d,m){if(f>=l)throw new bt("Block ID too large");const E=r%l,x=l-E,v=Math.floor(r/l),R=v+1,M=Math.floor(o/l),P=M+1,H=v-M,K=R-P;if(H!==K)throw new bt("EC bytes mismatch");if(l!==x+E)throw new bt("RS blocks mismatch");if(r!==(M+H)*x+(P+K)*E)throw new bt("Total bytes mismatch");f<x?(d[0]=M,m[0]=H):(d[0]=P,m[0]=K)}static interleaveWithECBytes(r,o,l,f){if(r.getSizeInBytes()!==l)throw new bt("Number of bits and data bytes does not match");let d=0,m=0,E=0;const x=new Array;for(let R=0;R<f;++R){const M=new Int32Array(1),P=new Int32Array(1);O.getNumDataBytesAndNumECBytesForBlockID(o,l,f,R,M,P);const H=M[0],K=new Uint8Array(H);r.toBytes(8*d,K,0,H);const $=O.generateECBytes(K,P[0]);x.push(new I(K,$)),m=Math.max(m,H),E=Math.max(E,$.length),d+=M[0]}if(l!==d)throw new bt("Data bytes does not match offset");const v=new Re;for(let R=0;R<m;++R)for(const M of x){const P=M.getDataBytes();R<P.length&&v.appendBits(P[R],8)}for(let R=0;R<E;++R)for(const M of x){const P=M.getErrorCorrectionBytes();R<P.length&&v.appendBits(P[R],8)}if(o!==v.getSizeInBytes())throw new bt("Interleaving error: "+o+" and "+v.getSizeInBytes()+" differ.");return v}static generateECBytes(r,o){const l=r.length,f=new Int32Array(l+o);for(let m=0;m<l;m++)f[m]=r[m]&255;new Gr(Tt.QR_CODE_FIELD_256).encode(f,o);const d=new Uint8Array(o);for(let m=0;m<o;m++)d[m]=f[l+m];return d}static appendModeInfo(r,o){o.appendBits(r.getBits(),4)}static appendLengthInfo(r,o,l,f){const d=l.getCharacterCountBits(o);if(r>=1<<d)throw new bt(r+" is bigger than "+((1<<d)-1));f.appendBits(r,d)}static appendBytes(r,o,l,f){switch(o){case Qe.NUMERIC:O.appendNumericBytes(r,l);break;case Qe.ALPHANUMERIC:O.appendAlphanumericBytes(r,l);break;case Qe.BYTE:O.append8BitBytes(r,l,f);break;case Qe.KANJI:O.appendKanjiBytes(r,l);break;default:throw new bt("Invalid mode: "+o)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const o=O.getDigit(r);return o>=0&&o<=9}static appendNumericBytes(r,o){const l=r.length;let f=0;for(;f<l;){const d=O.getDigit(r.charAt(f));if(f+2<l){const m=O.getDigit(r.charAt(f+1)),E=O.getDigit(r.charAt(f+2));o.appendBits(d*100+m*10+E,10),f+=3}else if(f+1<l){const m=O.getDigit(r.charAt(f+1));o.appendBits(d*10+m,7),f+=2}else o.appendBits(d,4),f++}}static appendAlphanumericBytes(r,o){const l=r.length;let f=0;for(;f<l;){const d=O.getAlphanumericCode(r.charCodeAt(f));if(d===-1)throw new bt;if(f+1<l){const m=O.getAlphanumericCode(r.charCodeAt(f+1));if(m===-1)throw new bt;o.appendBits(d*45+m,11),f+=2}else o.appendBits(d,6),f++}}static append8BitBytes(r,o,l){let f;try{f=Y.encode(r,l)}catch(d){throw new bt(d)}for(let d=0,m=f.length;d!==m;d++){const E=f[d];o.appendBits(E,8)}}static appendKanjiBytes(r,o){let l;try{l=Y.encode(r,B.SJIS)}catch(d){throw new bt(d)}const f=l.length;for(let d=0;d<f;d+=2){const m=l[d]&255,E=l[d+1]&255,x=m<<8&4294967295|E;let v=-1;if(x>=33088&&x<=40956?v=x-33088:x>=57408&&x<=60351&&(v=x-49472),v===-1)throw new bt("Invalid byte sequence");const R=(v>>8)*192+(v&255);o.appendBits(R,13)}}static appendECI(r,o){o.appendBits(Qe.ECI.getBits(),4),o.appendBits(r.getValue(),8)}}O.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),O.DEFAULT_BYTE_MODE_ENCODING=B.UTF8.getName();class V{write(r,o,l,f=null){if(r.length===0)throw new b("Found empty contents");if(o<0||l<0)throw new b("Requested dimensions are too small: "+o+"x"+l);let d=pt.L,m=V.QUIET_ZONE_SIZE;f!==null&&(f.get(In.ERROR_CORRECTION)!==void 0&&(d=pt.fromString(f.get(In.ERROR_CORRECTION).toString())),f.get(In.MARGIN)!==void 0&&(m=Number.parseInt(f.get(In.MARGIN).toString(),10)));const E=O.encode(r,d,f);return this.renderResult(E,o,l,m)}writeToDom(r,o,l,f,d=null){typeof r=="string"&&(r=document.querySelector(r));const m=this.write(o,l,f,d);r&&r.appendChild(m)}renderResult(r,o,l,f){const d=r.getMatrix();if(d===null)throw new Pi;const m=d.getWidth(),E=d.getHeight(),x=m+f*2,v=E+f*2,R=Math.max(o,x),M=Math.max(l,v),P=Math.min(Math.floor(R/x),Math.floor(M/v)),H=Math.floor((R-m*P)/2),K=Math.floor((M-E*P)/2),$=this.createSVGElement(R,M);for(let ae=0,ye=K;ae<E;ae++,ye+=P)for(let De=0,Oe=H;De<m;De++,Oe+=P)if(d.get(De,ae)===1){const be=this.createSvgRectElement(Oe,ye,P,P);$.appendChild(be)}return $}createSVGElement(r,o){const l=document.createElementNS(V.SVG_NS,"svg");return l.setAttributeNS(null,"height",r.toString()),l.setAttributeNS(null,"width",o.toString()),l}createSvgRectElement(r,o,l,f){const d=document.createElementNS(V.SVG_NS,"rect");return d.setAttributeNS(null,"x",r.toString()),d.setAttributeNS(null,"y",o.toString()),d.setAttributeNS(null,"height",l.toString()),d.setAttributeNS(null,"width",f.toString()),d.setAttributeNS(null,"fill","#000000"),d}}V.QUIET_ZONE_SIZE=4,V.SVG_NS="http://www.w3.org/2000/svg";class se{encode(r,o,l,f,d){if(r.length===0)throw new b("Found empty contents");if(o!==Le.QR_CODE)throw new b("Can only encode QR_CODE, but got "+o);if(l<0||f<0)throw new b(`Requested dimensions are too small: ${l}x${f}`);let m=pt.L,E=se.QUIET_ZONE_SIZE;d!==null&&(d.get(In.ERROR_CORRECTION)!==void 0&&(m=pt.fromString(d.get(In.ERROR_CORRECTION).toString())),d.get(In.MARGIN)!==void 0&&(E=Number.parseInt(d.get(In.MARGIN).toString(),10)));const x=O.encode(r,m,d);return se.renderResult(x,l,f,E)}static renderResult(r,o,l,f){const d=r.getMatrix();if(d===null)throw new Pi;const m=d.getWidth(),E=d.getHeight(),x=m+f*2,v=E+f*2,R=Math.max(o,x),M=Math.max(l,v),P=Math.min(Math.floor(R/x),Math.floor(M/v)),H=Math.floor((R-m*P)/2),K=Math.floor((M-E*P)/2),$=new We(R,M);for(let ae=0,ye=K;ae<E;ae++,ye+=P)for(let De=0,Oe=H;De<m;De++,Oe+=P)d.get(De,ae)===1&&$.setRegion(Oe,ye,P,P);return $}}se.QUIET_ZONE_SIZE=4;class Ee{encode(r,o,l,f,d){let m;if(o===Le.QR_CODE)m=new se;else throw new b("No encoder available for format "+o);return m.encode(r,o,l,f,d)}}class Me extends Ye{constructor(r,o,l,f,d,m,E,x){if(super(m,E),this.yuvData=r,this.dataWidth=o,this.dataHeight=l,this.left=f,this.top=d,f+m>o||d+E>l)throw new b("Crop rectangle does not fit within image data.");x&&this.reverseHorizontal(m,E)}getRow(r,o){if(r<0||r>=this.getHeight())throw new b("Requested row is outside the image: "+r);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const f=(r+this.top)*this.dataWidth+this.left;return Z.arraycopy(this.yuvData,f,o,0,l),o}getMatrix(){const r=this.getWidth(),o=this.getHeight();if(r===this.dataWidth&&o===this.dataHeight)return this.yuvData;const l=r*o,f=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Z.arraycopy(this.yuvData,d,f,0,l),f;for(let m=0;m<o;m++){const E=m*r;Z.arraycopy(this.yuvData,d,f,E,r),d+=this.dataWidth}return f}isCropSupported(){return!0}crop(r,o,l,f){return new Me(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+o,l,f,!1)}renderThumbnail(){const r=this.getWidth()/Me.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/Me.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(r*o),f=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let m=0;m<o;m++){const E=m*r;for(let x=0;x<r;x++){const v=f[d+x*Me.THUMBNAIL_SCALE_FACTOR]&255;l[E+x]=4278190080|v*65793}d+=this.dataWidth*Me.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Me.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Me.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,o){const l=this.yuvData;for(let f=0,d=this.top*this.dataWidth+this.left;f<o;f++,d+=this.dataWidth){const m=d+r/2;for(let E=d,x=d+r-1;E<m;E++,x--){const v=l[E];l[E]=l[x],l[x]=v}}}invert(){return new lt(this)}}Me.THUMBNAIL_SCALE_FACTOR=2;class ot extends Ye{constructor(r,o,l,f,d,m,E){if(super(o,l),this.dataWidth=f,this.dataHeight=d,this.left=m,this.top=E,r.BYTES_PER_ELEMENT===4){const x=o*l,v=new Uint8ClampedArray(x);for(let R=0;R<x;R++){const M=r[R],P=M>>16&255,H=M>>7&510,K=M&255;v[R]=(P+H+K)/4&255}this.luminances=v}else this.luminances=r;if(f===void 0&&(this.dataWidth=o),d===void 0&&(this.dataHeight=l),m===void 0&&(this.left=0),E===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+l>this.dataHeight)throw new b("Crop rectangle does not fit within image data.")}getRow(r,o){if(r<0||r>=this.getHeight())throw new b("Requested row is outside the image: "+r);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const f=(r+this.top)*this.dataWidth+this.left;return Z.arraycopy(this.luminances,f,o,0,l),o}getMatrix(){const r=this.getWidth(),o=this.getHeight();if(r===this.dataWidth&&o===this.dataHeight)return this.luminances;const l=r*o,f=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Z.arraycopy(this.luminances,d,f,0,l),f;for(let m=0;m<o;m++){const E=m*r;Z.arraycopy(this.luminances,d,f,E,r),d+=this.dataWidth}return f}isCropSupported(){return!0}crop(r,o,l,f){return new ot(this.luminances,l,f,this.dataWidth,this.dataHeight,this.left+r,this.top+o)}invert(){return new lt(this)}}class bn extends B{static forName(r){return this.getCharacterSetECIByName(r)}}class Vt{}Vt.ISO_8859_1=B.ISO8859_1;class dn{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class Zi{static singletonList(r){return[r]}static min(r,o){return r.sort(o)[0]}}class Yr{constructor(r){this.previous=r}getPrevious(){return this.previous}}class di extends Yr{constructor(r,o,l){super(r),this.value=o,this.bitCount=l}appendTo(r,o){r.appendBits(this.value,this.bitCount)}add(r,o){return new di(this,r,o)}addBinaryShift(r,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new di(this,r,o)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+ne.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class Ji extends di{constructor(r,o,l){super(r,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=l}appendTo(r,o){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):l===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(o[this.binaryShiftStart+l],8)}addBinaryShift(r,o){return new Ji(this,r,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ta(D,r,o){return new Ji(D,r,o)}function Xr(D,r,o){return new di(D,r,o)}const ja=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Rs=0,kl=1,ar=2,zc=3,vr=4,Xo=new di(null,0,0),na=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function jd(D){for(let r of D)le.fill(r,-1);return D[Rs][vr]=0,D[kl][vr]=0,D[kl][Rs]=28,D[zc][vr]=0,D[ar][vr]=0,D[ar][Rs]=15,D}const Wo=jd(le.createInt32Array(6,6));class Sr{constructor(r,o,l,f){this.token=r,this.mode=o,this.binaryShiftByteCount=l,this.bitCount=f}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,o){let l=this.bitCount,f=this.token;if(r!==this.mode){let m=na[this.mode][r];f=Xr(f,m&65535,m>>16),l+=m>>16}let d=r===ar?4:5;return f=Xr(f,o,d),new Sr(f,r,0,l+d)}shiftAndAppend(r,o){let l=this.token,f=this.mode===ar?4:5;return l=Xr(l,Wo[this.mode][r],f),l=Xr(l,o,5),new Sr(l,this.mode,0,this.bitCount+f+5)}addBinaryShiftChar(r){let o=this.token,l=this.mode,f=this.bitCount;if(this.mode===vr||this.mode===ar){let E=na[l][Rs];o=Xr(o,E&65535,E>>16),f+=E>>16,l=Rs}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new Sr(o,l,this.binaryShiftByteCount+1,f+d);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(r+1)),m}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=ta(o,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new Sr(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let o=this.bitCount+(na[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?o+=Sr.calculateBinaryShiftCost(r)-Sr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(o+=10),o<=r.bitCount}toBitArray(r){let o=[];for(let f=this.endBinaryShift(r.length).token;f!==null;f=f.getPrevious())o.unshift(f);let l=new Re;for(const f of o)f.appendTo(l,r);return l}toString(){return X.format("%s bits=%d bytes=%d",ja[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}Sr.INITIAL_STATE=new Sr(Xo,Rs,0,0);function ph(D){const r=X.getCharCode(" "),o=X.getCharCode("."),l=X.getCharCode(",");D[Rs][r]=1;const f=X.getCharCode("Z"),d=X.getCharCode("A");for(let P=d;P<=f;P++)D[Rs][P]=P-d+2;D[kl][r]=1;const m=X.getCharCode("z"),E=X.getCharCode("a");for(let P=E;P<=m;P++)D[kl][P]=P-E+2;D[ar][r]=1;const x=X.getCharCode("9"),v=X.getCharCode("0");for(let P=v;P<=x;P++)D[ar][P]=P-v+2;D[ar][l]=12,D[ar][o]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let P=0;P<R.length;P++)D[zc][X.getCharCode(R[P])]=P;const M=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let P=0;P<M.length;P++)X.getCharCode(M[P])>0&&(D[vr][X.getCharCode(M[P])]=P);return D}const Qo=ph(le.createInt32Array(5,256));class ia{constructor(r){this.text=r}encode(){const r=X.getCharCode(" "),o=X.getCharCode(`
`);let l=Zi.singletonList(Sr.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let m,E=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case X.getCharCode("\r"):m=E===o?2:0;break;case X.getCharCode("."):m=E===r?3:0;break;case X.getCharCode(","):m=E===r?4:0;break;case X.getCharCode(":"):m=E===r?5:0;break;default:m=0}m>0?(l=ia.updateStateListForPair(l,d,m),d++):l=this.updateStateListForChar(l,d)}return Zi.min(l,(d,m)=>d.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,o){const l=[];for(let f of r)this.updateStateForChar(f,o,l);return ia.simplifyStates(l)}updateStateForChar(r,o,l){let f=this.text[o]&255,d=Qo[r.getMode()][f]>0,m=null;for(let E=0;E<=vr;E++){let x=Qo[E][f];if(x>0){if(m==null&&(m=r.endBinaryShift(o)),!d||E===r.getMode()||E===ar){const v=m.latchAndAppend(E,x);l.push(v)}if(!d&&Wo[r.getMode()][E]>=0){const v=m.shiftAndAppend(E,x);l.push(v)}}}if(r.getBinaryShiftByteCount()>0||Qo[r.getMode()][f]===0){let E=r.addBinaryShiftChar(o);l.push(E)}}static updateStateListForPair(r,o,l){const f=[];for(let d of r)this.updateStateForPair(d,o,l,f);return this.simplifyStates(f)}static updateStateForPair(r,o,l,f){let d=r.endBinaryShift(o);if(f.push(d.latchAndAppend(vr,l)),r.getMode()!==vr&&f.push(d.shiftAndAppend(vr,l)),l===3||l===4){let m=d.latchAndAppend(ar,16-l).latchAndAppend(ar,1);f.push(m)}if(r.getBinaryShiftByteCount()>0){let m=r.addBinaryShiftChar(o).addBinaryShiftChar(o+1);f.push(m)}}static simplifyStates(r){let o=[];for(const l of r){let f=!0;for(const d of o){if(d.isBetterThanOrEqualTo(l)){f=!1;break}l.isBetterThanOrEqualTo(d)&&(o=o.filter(m=>m!==d))}f&&o.push(l)}return o}}class Mt{constructor(){}static encodeBytes(r){return Mt.encode(r,Mt.DEFAULT_EC_PERCENT,Mt.DEFAULT_AZTEC_LAYERS)}static encode(r,o,l){let f=new ia(r).encode(),d=ne.truncDivision(f.getSize()*o,100)+11,m=f.getSize()+d,E,x,v,R,M;if(l!==Mt.DEFAULT_AZTEC_LAYERS){if(E=l<0,x=Math.abs(l),x>(E?Mt.MAX_NB_BITS_COMPACT:Mt.MAX_NB_BITS))throw new b(X.format("Illegal value %s for layers",l));v=Mt.totalBitsInLayer(x,E),R=Mt.WORD_SIZE[x];let be=v-v%R;if(M=Mt.stuffBits(f,R),M.getSize()+d>be)throw new b("Data to large for user specified layer");if(E&&M.getSize()>R*64)throw new b("Data to large for user specified layer")}else{R=0,M=null;for(let be=0;;be++){if(be>Mt.MAX_NB_BITS)throw new b("Data too large for an Aztec code");if(E=be<=3,x=E?be+1:be,v=Mt.totalBitsInLayer(x,E),m>v)continue;(M==null||R!==Mt.WORD_SIZE[x])&&(R=Mt.WORD_SIZE[x],M=Mt.stuffBits(f,R));let _t=v-v%R;if(!(E&&M.getSize()>R*64)&&M.getSize()+d<=_t)break}}let P=Mt.generateCheckWords(M,v,R),H=M.getSize()/R,K=Mt.generateModeMessage(E,x,H),$=(E?11:14)+x*4,ae=new Int32Array($),ye;if(E){ye=$;for(let be=0;be<ae.length;be++)ae[be]=be}else{ye=$+1+2*ne.truncDivision(ne.truncDivision($,2)-1,15);let be=ne.truncDivision($,2),_t=ne.truncDivision(ye,2);for(let ct=0;ct<be;ct++){let Vn=ct+ne.truncDivision(ct,15);ae[be-ct-1]=_t-Vn-1,ae[be+ct]=_t+Vn+1}}let De=new We(ye);for(let be=0,_t=0;be<x;be++){let ct=(x-be)*4+(E?9:12);for(let Vn=0;Vn<ct;Vn++){let or=Vn*2;for(let Ii=0;Ii<2;Ii++)P.get(_t+or+Ii)&&De.set(ae[be*2+Ii],ae[be*2+Vn]),P.get(_t+ct*2+or+Ii)&&De.set(ae[be*2+Vn],ae[$-1-be*2-Ii]),P.get(_t+ct*4+or+Ii)&&De.set(ae[$-1-be*2-Ii],ae[$-1-be*2-Vn]),P.get(_t+ct*6+or+Ii)&&De.set(ae[$-1-be*2-Vn],ae[be*2+Ii])}_t+=ct*8}if(Mt.drawModeMessage(De,E,ye,K),E)Mt.drawBullsEye(De,ne.truncDivision(ye,2),5);else{Mt.drawBullsEye(De,ne.truncDivision(ye,2),7);for(let be=0,_t=0;be<ne.truncDivision($,2)-1;be+=15,_t+=16)for(let ct=ne.truncDivision(ye,2)&1;ct<ye;ct+=2)De.set(ne.truncDivision(ye,2)-_t,ct),De.set(ne.truncDivision(ye,2)+_t,ct),De.set(ct,ne.truncDivision(ye,2)-_t),De.set(ct,ne.truncDivision(ye,2)+_t)}let Oe=new dn;return Oe.setCompact(E),Oe.setSize(ye),Oe.setLayers(x),Oe.setCodeWords(H),Oe.setMatrix(De),Oe}static drawBullsEye(r,o,l){for(let f=0;f<l;f+=2)for(let d=o-f;d<=o+f;d++)r.set(d,o-f),r.set(d,o+f),r.set(o-f,d),r.set(o+f,d);r.set(o-l,o-l),r.set(o-l+1,o-l),r.set(o-l,o-l+1),r.set(o+l,o-l),r.set(o+l,o-l+1),r.set(o+l,o+l-1)}static generateModeMessage(r,o,l){let f=new Re;return r?(f.appendBits(o-1,2),f.appendBits(l-1,6),f=Mt.generateCheckWords(f,28,4)):(f.appendBits(o-1,5),f.appendBits(l-1,11),f=Mt.generateCheckWords(f,40,4)),f}static drawModeMessage(r,o,l,f){let d=ne.truncDivision(l,2);if(o)for(let m=0;m<7;m++){let E=d-3+m;f.get(m)&&r.set(E,d-5),f.get(m+7)&&r.set(d+5,E),f.get(20-m)&&r.set(E,d+5),f.get(27-m)&&r.set(d-5,E)}else for(let m=0;m<10;m++){let E=d-5+m+ne.truncDivision(m,5);f.get(m)&&r.set(E,d-7),f.get(m+10)&&r.set(d+7,E),f.get(29-m)&&r.set(E,d+7),f.get(39-m)&&r.set(d-7,E)}}static generateCheckWords(r,o,l){let f=r.getSize()/l,d=new Gr(Mt.getGF(l)),m=ne.truncDivision(o,l),E=Mt.bitsToWords(r,l,m);d.encode(E,m-f);let x=o%l,v=new Re;v.appendBits(0,x);for(const R of Array.from(E))v.appendBits(R,l);return v}static bitsToWords(r,o,l){let f=new Int32Array(l),d,m;for(d=0,m=r.getSize()/o;d<m;d++){let E=0;for(let x=0;x<o;x++)E|=r.get(d*o+x)?1<<o-x-1:0;f[d]=E}return f}static getGF(r){switch(r){case 4:return Tt.AZTEC_PARAM;case 6:return Tt.AZTEC_DATA_6;case 8:return Tt.AZTEC_DATA_8;case 10:return Tt.AZTEC_DATA_10;case 12:return Tt.AZTEC_DATA_12;default:throw new b("Unsupported word size "+r)}}static stuffBits(r,o){let l=new Re,f=r.getSize(),d=(1<<o)-2;for(let m=0;m<f;m+=o){let E=0;for(let x=0;x<o;x++)(m+x>=f||r.get(m+x))&&(E|=1<<o-1-x);(E&d)===d?(l.appendBits(E&d,o),m--):(E&d)===0?(l.appendBits(E|1,o),m--):l.appendBits(E,o)}return l}static totalBitsInLayer(r,o){return((o?88:112)+16*r)*r}}Mt.DEFAULT_EC_PERCENT=33,Mt.DEFAULT_AZTEC_LAYERS=0,Mt.MAX_NB_BITS=32,Mt.MAX_NB_BITS_COMPACT=4,Mt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ko{encode(r,o,l,f){return this.encodeWithHints(r,o,l,f,null)}encodeWithHints(r,o,l,f,d){let m=Vt.ISO_8859_1,E=Mt.DEFAULT_EC_PERCENT,x=Mt.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(In.CHARACTER_SET)&&(m=bn.forName(d.get(In.CHARACTER_SET).toString())),d.has(In.ERROR_CORRECTION)&&(E=ne.parseInt(d.get(In.ERROR_CORRECTION).toString())),d.has(In.AZTEC_LAYERS)&&(x=ne.parseInt(d.get(In.AZTEC_LAYERS).toString()))),Ko.encodeLayers(r,o,l,f,m,E,x)}static encodeLayers(r,o,l,f,d,m,E){if(o!==Le.AZTEC)throw new b("Can only encode AZTEC, but got "+o);let x=Mt.encode(X.getBytes(r,d),m,E);return Ko.renderResult(x,l,f)}static renderResult(r,o,l){let f=r.getMatrix();if(f==null)throw new Pi;let d=f.getWidth(),m=f.getHeight(),E=Math.max(o,d),x=Math.max(l,m),v=Math.min(E/d,x/m),R=(E-d*v)/2,M=(x-m*v)/2,P=new We(E,x);for(let H=0,K=M;H<m;H++,K+=v)for(let $=0,ae=R;$<d;$++,ae+=v)f.get($,H)&&P.setRegion(ae,K,v,v);return P}}t.AbstractExpandedDecoder=Tn,t.ArgumentException=S,t.ArithmeticException=as,t.AztecCode=dn,t.AztecCodeReader=qs,t.AztecCodeWriter=Ko,t.AztecDecoder=qt,t.AztecDetector=Fo,t.AztecDetectorResult=Vo,t.AztecEncoder=Mt,t.AztecHighLevelEncoder=ia,t.AztecPoint=si,t.BarcodeFormat=Le,t.Binarizer=W,t.BinaryBitmap=L,t.BitArray=Re,t.BitMatrix=We,t.BitSource=vn,t.BrowserAztecCodeReader=Dl,t.BrowserBarcodeReader=Ho,t.BrowserCodeReader=Pe,t.BrowserDatamatrixCodeReader=zr,t.BrowserMultiFormatReader=Hr,t.BrowserPDF417Reader=Ll,t.BrowserQRCodeReader=Pl,t.BrowserQRCodeSvgWriter=V,t.CharacterSetECI=B,t.ChecksumException=j,t.Code128Reader=Ne,t.Code39Reader=Xt,t.DataMatrixDecodedBitStreamParser=Si,t.DataMatrixReader=Bi,t.DecodeHintType=Be,t.DecoderResult=Jt,t.DefaultGridSampler=La,t.DetectorResult=Ma,t.EAN13Reader=on,t.EncodeHintType=In,t.Exception=_,t.FormatException=U,t.GenericGF=Tt,t.GenericGFPoly=qn,t.GlobalHistogramBinarizer=me,t.GridSampler=os,t.GridSamplerInstance=Ei,t.HTMLCanvasElementLuminanceSource=mt,t.HybridBinarizer=xe,t.ITFReader=rt,t.IllegalArgumentException=b,t.IllegalStateException=Pi,t.InvertedLuminanceSource=lt,t.LuminanceSource=Ye,t.MathUtils=$e,t.MultiFormatOneDReader=Ci,t.MultiFormatReader=Yo,t.MultiFormatWriter=Ee,t.NotFoundException=he,t.OneDReader=Yt,t.PDF417DecodedBitStreamParser=de,t.PDF417DecoderErrorCorrection=wr,t.PDF417Reader=Sn,t.PDF417ResultMetadata=us,t.PerspectiveTransform=yi,t.PlanarYUVLuminanceSource=Me,t.QRCodeByteMatrix=ea,t.QRCodeDataMask=Xn,t.QRCodeDecodedBitStreamParser=$t,t.QRCodeDecoderErrorCorrectionLevel=pt,t.QRCodeDecoderFormatInformation=Dn,t.QRCodeEncoder=O,t.QRCodeEncoderQRCode=qr,t.QRCodeMaskUtil=vt,t.QRCodeMatrixUtil=y,t.QRCodeMode=Qe,t.QRCodeReader=zi,t.QRCodeVersion=Ge,t.QRCodeWriter=se,t.RGBLuminanceSource=ot,t.RSS14Reader=Gt,t.RSSExpandedReader=Se,t.ReaderException=$s,t.ReedSolomonDecoder=pr,t.ReedSolomonEncoder=Gr,t.ReedSolomonException=pi,t.Result=ke,t.ResultMetadataType=xt,t.ResultPoint=Fe,t.StringUtils=X,t.UnsupportedOperationException=J,t.VideoInputDevice=ee,t.WhiteRectangleDetector=yn,t.WriterException=bt,t.ZXingArrays=le,t.ZXingCharset=bn,t.ZXingInteger=ne,t.ZXingStandardCharsets=Vt,t.ZXingStringBuilder=G,t.ZXingStringEncoding=Y,t.ZXingSystem=Z,t.createAbstractExpandedDecoder=ki,Object.defineProperty(t,"__esModule",{value:!0})}))})(Ou,Ou.exports)),Ou.exports}var Pn=JD();const $D=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var lA=(function(){function n(e,t,s){if(this.formatMap=new Map([[je.QR_CODE,Pn.BarcodeFormat.QR_CODE],[je.AZTEC,Pn.BarcodeFormat.AZTEC],[je.CODABAR,Pn.BarcodeFormat.CODABAR],[je.CODE_39,Pn.BarcodeFormat.CODE_39],[je.CODE_93,Pn.BarcodeFormat.CODE_93],[je.CODE_128,Pn.BarcodeFormat.CODE_128],[je.DATA_MATRIX,Pn.BarcodeFormat.DATA_MATRIX],[je.MAXICODE,Pn.BarcodeFormat.MAXICODE],[je.ITF,Pn.BarcodeFormat.ITF],[je.EAN_13,Pn.BarcodeFormat.EAN_13],[je.EAN_8,Pn.BarcodeFormat.EAN_8],[je.PDF_417,Pn.BarcodeFormat.PDF_417],[je.RSS_14,Pn.BarcodeFormat.RSS_14],[je.RSS_EXPANDED,Pn.BarcodeFormat.RSS_EXPANDED],[je.UPC_A,Pn.BarcodeFormat.UPC_A],[je.UPC_E,Pn.BarcodeFormat.UPC_E],[je.UPC_EAN_EXTENSION,Pn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!$D)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=s;var c=this.createZXingFormats(e),h=new Map;h.set(Pn.DecodeHintType.POSSIBLE_FORMATS,c),h.set(Pn.DecodeHintType.TRY_HARDER,!1),this.hints=h}return n.prototype.decodeAsync=function(e){var t=this;return new Promise(function(s,c){try{s(t.decode(e))}catch(h){c(h)}})},n.prototype.decode=function(e){var t=new Pn.MultiFormatReader(this.verbose,this.hints),s=new Pn.HTMLCanvasElementLuminanceSource(e),c=new Pn.BinaryBitmap(new Pn.HybridBinarizer(s)),h=t.decode(c);return{text:h.text,format:hC.create(this.toHtml5QrcodeSupportedFormats(h.format)),debugData:this.createDebugData()}},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,s,c){e.set(t,s)}),e},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createZXingFormats=function(e){for(var t=[],s=0,c=e;s<c.length;s++){var h=c[s];this.formatMap.has(h)?t.push(this.formatMap.get(h)):this.logger.logError("".concat(h," is not supported by")+"ZXingHtml5QrcodeShim")}return t},n.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},n})(),eM=function(n,e,t,s){function c(h){return h instanceof t?h:new t(function(p){p(h)})}return new(t||(t=Promise))(function(h,p){function T(S){try{_(s.next(S))}catch(b){p(b)}}function w(S){try{_(s.throw(S))}catch(b){p(b)}}function _(S){S.done?h(S.value):c(S.value).then(T,w)}_((s=s.apply(n,e||[])).next())})},tM=function(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(_){return function(S){return w([_,S])}}function w(_){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,_[0]&&(t=0)),t;)try{if(s=1,c&&(h=_[0]&2?c.return:_[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,_[1])).done)return h;switch(c=0,h&&(_=[_[0]&2,h.value]),_[0]){case 0:case 1:h=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,c=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!h||_[1]>h[0]&&_[1]<h[3])){t.label=_[1];break}if(_[0]===6&&t.label<h[1]){t.label=h[1],h=_;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(_);break}h[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(n,t)}catch(S){_=[6,S],c=0}finally{s=h=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},cA=(function(){function n(e,t,s){if(this.formatMap=new Map([[je.QR_CODE,"qr_code"],[je.AZTEC,"aztec"],[je.CODABAR,"codabar"],[je.CODE_39,"code_39"],[je.CODE_93,"code_93"],[je.CODE_128,"code_128"],[je.DATA_MATRIX,"data_matrix"],[je.ITF,"itf"],[je.EAN_13,"ean_13"],[je.EAN_8,"ean_8"],[je.PDF_417,"pdf417"],[je.UPC_A,"upc_a"],[je.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!n.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=s;var c=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(c),!this.detector)throw"BarcodeDetector detector not supported"}return n.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},n.prototype.decodeAsync=function(e){return eM(this,void 0,void 0,function(){var t,s;return tM(this,function(c){switch(c.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=c.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return s=this.selectLargestBarcode(t),[2,{text:s.rawValue,format:hC.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}]}})})},n.prototype.selectLargestBarcode=function(e){for(var t=null,s=0,c=0,h=e;c<h.length;c++){var p=h[c],T=p.boundingBox.width*p.boundingBox.height;T>s&&(s=T,t=p)}if(!t)throw"No largest barcode found";return t},n.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],s=0,c=e;s<c.length;s++){var h=c[s];this.formatMap.has(h)?t.push(this.formatMap.get(h)):this.logger.warn("".concat(h," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,s,c){e.set(t,s)}),e},n.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},n})(),uA=function(n,e,t,s){function c(h){return h instanceof t?h:new t(function(p){p(h)})}return new(t||(t=Promise))(function(h,p){function T(S){try{_(s.next(S))}catch(b){p(b)}}function w(S){try{_(s.throw(S))}catch(b){p(b)}}function _(S){S.done?h(S.value):c(S.value).then(T,w)}_((s=s.apply(n,e||[])).next())})},hA=function(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(_){return function(S){return w([_,S])}}function w(_){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,_[0]&&(t=0)),t;)try{if(s=1,c&&(h=_[0]&2?c.return:_[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,_[1])).done)return h;switch(c=0,h&&(_=[_[0]&2,h.value]),_[0]){case 0:case 1:h=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,c=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!h||_[1]>h[0]&&_[1]<h[3])){t.label=_[1];break}if(_[0]===6&&t.label<h[1]){t.label=h[1],h=_;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(_);break}h[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(n,t)}catch(S){_=[6,S],c=0}finally{s=h=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},nM=(function(){function n(e,t,s,c){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=s,t&&cA.isSupported()?(this.primaryDecoder=new cA(e,s,c),this.secondaryDecoder=new lA(e,s,c)):this.primaryDecoder=new lA(e,s,c)}return n.prototype.decodeAsync=function(e){return uA(this,void 0,void 0,function(){var t;return hA(this,function(s){switch(s.label){case 0:t=performance.now(),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,s.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},n.prototype.decodeRobustlyAsync=function(e){return uA(this,void 0,void 0,function(){var t,s;return hA(this,function(c){switch(c.label){case 0:t=performance.now(),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,c.sent()];case 3:if(s=c.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw s;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},n.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},n.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},n.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,s=this.executionResults;t<s.length;t++){var c=s[t];e+=c}var h=e/this.executionResults.length;console.log("".concat(h," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},n})(),qm=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}})(),dd=function(n,e,t,s){function c(h){return h instanceof t?h:new t(function(p){p(h)})}return new(t||(t=Promise))(function(h,p){function T(S){try{_(s.next(S))}catch(b){p(b)}}function w(S){try{_(s.throw(S))}catch(b){p(b)}}function _(S){S.done?h(S.value):c(S.value).then(T,w)}_((s=s.apply(n,e||[])).next())})},gd=function(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(_){return function(S){return w([_,S])}}function w(_){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,_[0]&&(t=0)),t;)try{if(s=1,c&&(h=_[0]&2?c.return:_[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,_[1])).done)return h;switch(c=0,h&&(_=[_[0]&2,h.value]),_[0]){case 0:case 1:h=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,c=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!h||_[1]>h[0]&&_[1]<h[3])){t.label=_[1];break}if(_[0]===6&&t.label<h[1]){t.label=h[1],h=_;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(_);break}h[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(n,t)}catch(S){_=[6,S],c=0}finally{s=h=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},mC=(function(){function n(e,t){this.name=e,this.track=t}return n.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},n.prototype.apply=function(e){var t={};t[this.name]=e;var s={advanced:[t]};return this.track.applyConstraints(s)},n.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},n})(),iM=(function(n){qm(e,n);function e(t,s){return n.call(this,t,s)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var s={};s[this.name]=t;var c={advanced:[s]};return this.track.applyConstraints(c)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),s=t[this.name];return{min:s.min,max:s.max,step:s.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(mC),rM=(function(n){qm(e,n);function e(t){return n.call(this,"zoom",t)||this}return e})(iM),sM=(function(n){qm(e,n);function e(t){return n.call(this,"torch",t)||this}return e})(mC),aM=(function(){function n(e){this.track=e}return n.prototype.zoomFeature=function(){return new rM(this.track)},n.prototype.torchFeature=function(){return new sM(this.track)},n})(),oM=(function(){function n(e,t,s){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=s,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return n.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},n.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var s=e.surface.clientWidth,c=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(s,c),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},n.create=function(e,t,s,c){return dd(this,void 0,void 0,function(){var h,p;return gd(this,function(T){switch(T.label){case 0:return h=new n(e,t,c),s.aspectRatio?(p={aspectRatio:s.aspectRatio},[4,h.getFirstTrackOrFail().applyConstraints(p)]):[3,2];case 1:T.sent(),T.label=2;case 2:return h.setupSurface(),[2,h]}})})},n.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},n.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},n.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},n.prototype.resume=function(e){this.failIfClosed();var t=this,s=function(){setTimeout(e,200),t.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.play()},n.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},n.prototype.getSurface=function(){return this.failIfClosed(),this.surface},n.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},n.prototype.applyVideoConstraints=function(e){return dd(this,void 0,void 0,function(){return gd(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},n.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,s){var c=e.mediaStream.getVideoTracks(),h=c.length,p=0;e.mediaStream.getVideoTracks().forEach(function(T){e.mediaStream.removeTrack(T),T.stop(),++p,p>=h&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},n.prototype.getCapabilities=function(){return new aM(this.getFirstTrackOrFail())},n})(),lM=(function(){function n(e){this.mediaStream=e}return n.prototype.render=function(e,t,s){return dd(this,void 0,void 0,function(){return gd(this,function(c){return[2,oM.create(e,this.mediaStream,t,s)]})})},n.create=function(e){return dd(this,void 0,void 0,function(){var t,s;return gd(this,function(c){switch(c.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return s=c.sent(),[2,new n(s)]}})})},n})(),fA=function(n,e,t,s){function c(h){return h instanceof t?h:new t(function(p){p(h)})}return new(t||(t=Promise))(function(h,p){function T(S){try{_(s.next(S))}catch(b){p(b)}}function w(S){try{_(s.throw(S))}catch(b){p(b)}}function _(S){S.done?h(S.value):c(S.value).then(T,w)}_((s=s.apply(n,e||[])).next())})},dA=function(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(_){return function(S){return w([_,S])}}function w(_){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,_[0]&&(t=0)),t;)try{if(s=1,c&&(h=_[0]&2?c.return:_[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,_[1])).done)return h;switch(c=0,h&&(_=[_[0]&2,h.value]),_[0]){case 0:case 1:h=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,c=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!h||_[1]>h[0]&&_[1]<h[3])){t.label=_[1];break}if(_[0]===6&&t.label<h[1]){t.label=h[1],h=_;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(_);break}h[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(n,t)}catch(S){_=[6,S],c=0}finally{s=h=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},cM=(function(){function n(){}return n.failIfNotSupported=function(){return fA(this,void 0,void 0,function(){return dA(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new n]})})},n.prototype.create=function(e){return fA(this,void 0,void 0,function(){return dA(this,function(t){return[2,lM.create(e)]})})},n})(),uM=function(n,e,t,s){function c(h){return h instanceof t?h:new t(function(p){p(h)})}return new(t||(t=Promise))(function(h,p){function T(S){try{_(s.next(S))}catch(b){p(b)}}function w(S){try{_(s.throw(S))}catch(b){p(b)}}function _(S){S.done?h(S.value):c(S.value).then(T,w)}_((s=s.apply(n,e||[])).next())})},hM=function(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(_){return function(S){return w([_,S])}}function w(_){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,_[0]&&(t=0)),t;)try{if(s=1,c&&(h=_[0]&2?c.return:_[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,_[1])).done)return h;switch(c=0,h&&(_=[_[0]&2,h.value]),_[0]){case 0:case 1:h=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,c=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!h||_[1]>h[0]&&_[1]<h[3])){t.label=_[1];break}if(_[0]===6&&t.label<h[1]){t.label=h[1],h=_;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(_);break}h[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(n,t)}catch(S){_=[6,S],c=0}finally{s=h=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},fM=(function(){function n(){}return n.retrieve=function(){if(navigator.mediaDevices)return n.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?n.getCamerasFromMediaStreamTrack():n.rejectWithError()},n.rejectWithError=function(){var e=yc.unableToQuerySupportedDevices();return n.isHttpsOrLocalhost()||(e=yc.insecureContextCameraQueryError()),Promise.reject(e)},n.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},n.getCamerasFromMediaDevices=function(){return uM(this,void 0,void 0,function(){var e,t,s,c,h,p,T;return hM(this,function(w){switch(w.label){case 0:return e=function(_){for(var S=_.getVideoTracks(),b=0,L=S;b<L.length;b++){var j=L[b];j.enabled=!1,j.stop(),_.removeTrack(j)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=w.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(s=w.sent(),c=[],h=0,p=s;h<p.length;h++)T=p[h],T.kind==="videoinput"&&c.push({id:T.deviceId,label:T.label});return e(t),[2,c]}})})},n.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var s=function(h){for(var p=[],T=0,w=h;T<w.length;T++){var _=w[T];_.kind==="video"&&p.push({id:_.id,label:_.label})}e(p)},c=MediaStreamTrack;c.getSources(s)})},n})(),Hn;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.NOT_STARTED=1]="NOT_STARTED",n[n.SCANNING=2]="SCANNING",n[n.PAUSED=3]="PAUSED"})(Hn||(Hn={}));var dM=(function(){function n(){this.state=Hn.NOT_STARTED,this.onGoingTransactionNewState=Hn.UNKNOWN}return n.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},n.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},n.prototype.execute=function(){if(this.onGoingTransactionNewState===Hn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Hn.UNKNOWN,this.directTransition(e)},n.prototype.cancel=function(){if(this.onGoingTransactionNewState===Hn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Hn.UNKNOWN},n.prototype.getState=function(){return this.state},n.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Hn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},n.prototype.validateTransition=function(e){switch(this.state){case Hn.UNKNOWN:throw"Transition from unknown is not allowed";case Hn.NOT_STARTED:this.failIfNewStateIs(e,[Hn.PAUSED]);break;case Hn.SCANNING:break;case Hn.PAUSED:break}},n.prototype.failIfNewStateIs=function(e,t){for(var s=0,c=t;s<c.length;s++){var h=c[s];if(e===h)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},n})(),gM=(function(){function n(e){this.stateManager=e}return n.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},n.prototype.directTransition=function(e){this.stateManager.directTransition(e)},n.prototype.getState=function(){return this.stateManager.getState()},n.prototype.canScanFile=function(){return this.stateManager.getState()===Hn.NOT_STARTED},n.prototype.isScanning=function(){return this.stateManager.getState()!==Hn.NOT_STARTED},n.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Hn.SCANNING},n.prototype.isPaused=function(){return this.stateManager.getState()===Hn.PAUSED},n})(),mM=(function(){function n(){}return n.create=function(){return new gM(new dM)},n})(),pM=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}})(),Mr=(function(n){pM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(ps),yM=(function(){function n(e,t){this.logger=t,this.fps=Mr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Mr.DEFAULT_DISABLE_FLIP}return n.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?gC.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},n.prototype.isShadedBoxEnabled=function(){return!Ls(this.qrbox)},n.create=function(e,t){return new n(e,t)},n})(),gA=(function(){function n(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var s;typeof t=="boolean"?this.verbose=t===!0:t&&(s=t,this.verbose=s.verbose===!0,s.experimentalFeatures),this.logger=new dC(this.verbose),this.qrcode=new nM(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(s),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=mM.create()}return n.prototype.start=function(e,t,s,c){var h=this;if(!e)throw"cameraIdOrConfig is required";if(!s||typeof s!="function")throw"qrCodeSuccessCallback is required and should be a function.";var p;c?p=c:p=this.verbose?this.logger.log:function(){};var T=yM.create(t,this.logger);this.clearElement();var w=!1;T.videoConstraints&&(T.isMediaStreamConstraintsValid()?w=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var _=w,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:Mr.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var b=this,L=this.stateManagerProxy.startTransition(Hn.SCANNING);return new Promise(function(j,W){var Z=_?T.videoConstraints:b.createVideoConstraints(e);if(!Z){L.cancel(),W("videoConstraints should be defined");return}var q={};(!_||T.aspectRatio)&&(q.aspectRatio=T.aspectRatio);var pe={onRenderSurfaceReady:function(le,ne){b.setupUi(le,ne,T),b.isScanning=!0,b.foreverScan(T,s,p)}};cM.failIfNotSupported().then(function(le){le.create(Z).then(function(ne){return ne.render(h.element,q,pe).then(function(Re){b.renderedCamera=Re,L.execute(),j(null)}).catch(function(Re){L.cancel(),W(Re)})}).catch(function(ne){L.cancel(),W(yc.errorGettingUserMedia(ne))})}).catch(function(le){L.cancel(),W(yc.cameraStreamingNotSupported())})})},n.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Hn.PAUSED),this.showPausedState(),(Ls(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},n.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(Hn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},n.prototype.getState=function(){return this.stateManagerProxy.getState()},n.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(Hn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var s=function(){if(e.element){var h=document.getElementById(Mr.SHADED_REGION_ELEMENT_ID);h&&e.element.removeChild(h)}},c=this;return this.renderedCamera.close().then(function(){return c.renderedCamera=null,c.element&&(c.element.removeChild(c.canvasElement),c.canvasElement=null),s(),c.qrRegion&&(c.qrRegion=null),c.context&&(c.context=null),t.execute(),c.hidePausedState(),c.isScanning=!1,Promise.resolve()})},n.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(s){return s.decodedText})},n.prototype.scanFileV2=function(e,t){var s=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ls(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(c,h){s.possiblyCloseLastScanImageFile(),s.clearElement(),s.lastScanImageFile=URL.createObjectURL(e);var p=new Image;p.onload=function(){var T=p.width,w=p.height,_=document.getElementById(s.elementId),S=_.clientWidth?_.clientWidth:Mr.DEFAULT_WIDTH,b=Math.max(_.clientHeight?_.clientHeight:w,Mr.FILE_SCAN_MIN_HEIGHT),L=s.computeCanvasDrawConfig(T,w,S,b);if(t){var j=s.createCanvasElement(S,b,"qr-canvas-visible");j.style.display="inline-block",_.appendChild(j);var W=j.getContext("2d");if(!W)throw"Unable to get 2d context from canvas";W.canvas.width=S,W.canvas.height=b,W.drawImage(p,0,0,T,w,L.x,L.y,L.width,L.height)}var Z=Mr.FILE_SCAN_HIDDEN_CANVAS_PADDING,q=Math.max(p.width,L.width),pe=Math.max(p.height,L.height),le=q+2*Z,ne=pe+2*Z,Re=s.createCanvasElement(le,ne);_.appendChild(Re);var He=Re.getContext("2d");if(!He)throw"Unable to get 2d context from canvas";He.canvas.width=le,He.canvas.height=ne,He.drawImage(p,0,0,T,w,Z,Z,q,pe);try{s.qrcode.decodeRobustlyAsync(Re).then(function(Be){c(sA.createFromQrcodeResult(Be))}).catch(h)}catch(Be){h("QR code parse error, error = ".concat(Be))}},p.onerror=h,p.onabort=h,p.onstalled=h,p.onsuspend=h,p.src=URL.createObjectURL(e)})},n.prototype.clear=function(){this.clearElement()},n.getCameras=function(){return fM.retrieve()},n.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},n.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},n.prototype.applyVideoConstraints=function(e){if(e){if(!gC.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},n.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},n.prototype.getSupportedFormats=function(e){var t=[je.QR_CODE,je.AZTEC,je.CODABAR,je.CODE_39,je.CODE_93,je.CODE_128,je.DATA_MATRIX,je.MAXICODE,je.ITF,je.EAN_13,je.EAN_8,je.PDF_417,je.RSS_14,je.RSS_EXPANDED,je.UPC_A,je.UPC_E,je.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var s=[],c=0,h=e.formatsToSupport;c<h.length;c++){var p=h[c];QD(p)?s.push(p):this.logger.warn("Invalid format: ".concat(p," passed in config, ignoring."))}if(s.length===0)throw"None of formatsToSupport match supported values.";return s},n.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Ls(e))return!0;if(!Ls(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Ls(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return Ls(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},n.prototype.validateQrboxSize=function(e,t,s){var c=this,h=s.qrbox;this.validateQrboxConfig(h);var p=this.toQrdimensions(e,t,h),T=function(_){if(_<Mr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Mr.MIN_QR_BOX_SIZE,"px.")},w=function(_){return _>e&&(c.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),_=e),_};T(p.width),T(p.height),p.width=w(p.width)},n.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},n.prototype.toQrdimensions=function(e,t,s){if(typeof s=="number")return{width:s,height:s};if(typeof s=="function")try{return s(e,t)}catch(c){throw new Error("qrbox config was passed as a function but it failed with unknown error"+c)}return s},n.prototype.setupUi=function(e,t,s){s.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,s);var c=Ls(s.qrbox)?{width:e,height:t}:s.qrbox;this.validateQrboxConfig(c);var h=this.toQrdimensions(e,t,c);h.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var p=s.isShadedBoxEnabled()&&h.height<=t,T={x:0,y:0,width:e,height:t},w=p?this.getShadedRegionBounds(e,t,h):T,_=this.createCanvasElement(w.width,w.height),S={willReadFrequently:!0},b=_.getContext("2d",S);b.canvas.width=w.width,b.canvas.height=w.height,this.element.append(_),p&&this.possiblyInsertShadingElement(this.element,e,t,h),this.createScannerPausedUiElement(this.element),this.qrRegion=w,this.context=b,this.canvasElement=_},n.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=yc.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},n.prototype.scanContext=function(e,t){var s=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(c){return e(c.text,sA.createFromQrcodeResult(c)),s.possiblyUpdateShaders(!0),!0}).catch(function(c){s.possiblyUpdateShaders(!1);var h=yc.codeParseError(c);return t(h,fC.createFrom(h)),!1})},n.prototype.foreverScan=function(e,t,s){var c=this;if(this.shouldScan&&this.renderedCamera){var h=this.renderedCamera.getSurface(),p=h.videoWidth/h.clientWidth,T=h.videoHeight/h.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var w=this.qrRegion.width*p,_=this.qrRegion.height*T,S=this.qrRegion.x*p,b=this.qrRegion.y*T;this.context.drawImage(h,S,b,w,_,0,0,this.qrRegion.width,this.qrRegion.height);var L=function(){c.foreverScanTimeout=setTimeout(function(){c.foreverScan(e,t,s)},c.getTimeoutFps(e.fps))};this.scanContext(t,s).then(function(j){!j&&e.disableFlip!==!0?(c.context.translate(c.context.canvas.width,0),c.context.scale(-1,1),c.scanContext(t,s).finally(function(){L()})):L()}).catch(function(j){c.logger.logError("Error happend while scanning context",j),L()})}},n.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",s="deviceId",c={user:!0,environment:!0},h="exact",p=function(W){if(W in c)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(W,"'")},T=Object.keys(e);if(T.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(T.length," keys");var w=Object.keys(e)[0];if(w!==t&&w!==s)throw"Only '".concat(t,"' and '").concat(s,"' ")+" are supported for 'cameraIdOrConfig'";if(w===t){var _=e.facingMode;if(typeof _=="string"){if(p(_))return{facingMode:_}}else if(typeof _=="object")if(h in _){if(p(_["".concat(h)]))return{facingMode:{exact:_["".concat(h)]}}}else throw"'facingMode' should be string or object with"+" ".concat(h," as key.");else{var S=typeof _;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var b=e.deviceId;if(typeof b=="string")return{deviceId:b};if(typeof b=="object"){if(h in b)return{deviceId:{exact:b["".concat(h)]}};throw"'deviceId' should be string or object with"+" ".concat(h," as key.")}else{var L=typeof b;throw"Invalid type of 'deviceId' = ".concat(L)}}}var j=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(j)},n.prototype.computeCanvasDrawConfig=function(e,t,s,c){if(e<=s&&t<=c){var h=(s-e)/2,p=(c-t)/2;return{x:h,y:p,width:e,height:t}}else{var T=e,w=t;return e>s&&(t=s/e*t,e=s),t>c&&(e=c/t*e,t=c),this.logger.log("Image downsampled from "+"".concat(T,"X").concat(w)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,s,c)}},n.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},n.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?Mr.BORDER_SHADER_MATCH_COLOR:Mr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},n.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},n.prototype.createCanvasElement=function(e,t,s){var c=e,h=t,p=document.createElement("canvas");return p.style.width="".concat(c,"px"),p.style.height="".concat(h,"px"),p.style.display="none",p.id=Ls(s)?"qr-canvas":s,p},n.prototype.getShadedRegionBounds=function(e,t,s){if(s.width>e||s.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-s.width)/2,y:(t-s.height)/2,width:s.width,height:s.height}},n.prototype.possiblyInsertShadingElement=function(e,t,s,c){if(!(t-c.width<1||s-c.height<1)){var h=document.createElement("div");h.style.position="absolute";var p=(t-c.width)/2,T=(s-c.height)/2;if(h.style.borderLeft="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderRight="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderTop="".concat(T,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderBottom="".concat(T,"px solid rgba(0, 0, 0, 0.48)"),h.style.boxSizing="border-box",h.style.top="0px",h.style.bottom="0px",h.style.left="0px",h.style.right="0px",h.id="".concat(Mr.SHADED_REGION_ELEMENT_ID),t-c.width<11||s-c.height<11)this.hasBorderShaders=!1;else{var w=5,_=40;this.insertShaderBorders(h,_,w,-w,null,0,!0),this.insertShaderBorders(h,_,w,-w,null,0,!1),this.insertShaderBorders(h,_,w,null,-w,0,!0),this.insertShaderBorders(h,_,w,null,-w,0,!1),this.insertShaderBorders(h,w,_+w,-w,null,-w,!0),this.insertShaderBorders(h,w,_+w,null,-w,-w,!0),this.insertShaderBorders(h,w,_+w,-w,null,-w,!1),this.insertShaderBorders(h,w,_+w,null,-w,-w,!1),this.hasBorderShaders=!0}e.append(h)}},n.prototype.insertShaderBorders=function(e,t,s,c,h,p,T){var w=document.createElement("div");w.style.position="absolute",w.style.backgroundColor=Mr.BORDER_SHADER_DEFAULT_COLOR,w.style.width="".concat(t,"px"),w.style.height="".concat(s,"px"),c!==null&&(w.style.top="".concat(c,"px")),h!==null&&(w.style.bottom="".concat(h,"px")),T?w.style.left="".concat(p,"px"):w.style.right="".concat(p,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(w),e.appendChild(w)},n.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},n.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},n.prototype.getTimeoutFps=function(e){return 1e3/e},n})(),Ym="data:image/svg+xml;base64,",EM=Ym+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",_M=Ym+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",mA=Ym+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",AM="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",pA=(function(){function n(){}return n.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},n})(),wM=(function(){function n(){this.data=pA.createDefault();var e=localStorage.getItem(n.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return n.prototype.hasCameraPermissions=function(){return this.data.hasPermission},n.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},n.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},n.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},n.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},n.prototype.reset=function(){this.data=pA.createDefault(),this.flush()},n.prototype.flush=function(){localStorage.setItem(n.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},n.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",n})(),xM=(function(){function n(){this.infoDiv=document.createElement("div")}return n.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=aA.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var s=document.createElement("br"),c=document.createElement("br");this.infoDiv.appendChild(s),this.infoDiv.appendChild(c);var h=document.createElement("a");h.innerText=aA.reportIssues(),h.href="https://github.com/mebjas/html5-qrcode/issues",h.target="new",h.style.color="white",this.infoDiv.appendChild(h),e.appendChild(this.infoDiv)},n.prototype.show=function(){this.infoDiv.style.display="block"},n.prototype.hide=function(){this.infoDiv.style.display="none"},n})(),TM=(function(){function n(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return n.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=mA,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(s){return t.onHoverIn()},this.infoIcon.onmouseout=function(s){return t.onHoverOut()},this.infoIcon.onclick=function(s){return t.onClick()},e.appendChild(this.infoIcon)},n.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},n.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},n.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=AM,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=mA,this.infoIcon.style.opacity="0.6")},n})(),CM=(function(){function n(){var e=this;this.infoDiv=new xM,this.infoIcon=new TM(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return n.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},n})(),vM=function(n,e,t,s){function c(h){return h instanceof t?h:new t(function(p){p(h)})}return new(t||(t=Promise))(function(h,p){function T(S){try{_(s.next(S))}catch(b){p(b)}}function w(S){try{_(s.throw(S))}catch(b){p(b)}}function _(S){S.done?h(S.value):c(S.value).then(T,w)}_((s=s.apply(n,e||[])).next())})},SM=function(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(_){return function(S){return w([_,S])}}function w(_){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,_[0]&&(t=0)),t;)try{if(s=1,c&&(h=_[0]&2?c.return:_[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,_[1])).done)return h;switch(c=0,h&&(_=[_[0]&2,h.value]),_[0]){case 0:case 1:h=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,c=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!h||_[1]>h[0]&&_[1]<h[3])){t.label=_[1];break}if(_[0]===6&&t.label<h[1]){t.label=h[1],h=_;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(_);break}h[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(n,t)}catch(S){_=[6,S],c=0}finally{s=h=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},yA=(function(){function n(){}return n.hasPermissions=function(){return vM(this,void 0,void 0,function(){var e,t,s,c;return SM(this,function(h){switch(h.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=h.sent(),t=0,s=e;t<s.length;t++)if(c=s[t],c.kind==="videoinput"&&c.label)return[2,!0];return[2,!1]}})})},n})(),go=(function(){function n(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return n.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},n.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},n.prototype.isCameraScanRequired=function(){for(var e=0,t=this.supportedScanTypes;e<t.length;e++){var s=t[e];if(n.isCameraScanType(s))return!0}return!1},n.isCameraScanType=function(e){return e===Lo.SCAN_TYPE_CAMERA},n.isFileScanType=function(e){return e===Lo.SCAN_TYPE_FILE},n.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return ps.DEFAULT_SUPPORTED_SCAN_TYPE;var t=ps.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var s=0,c=e;s<c.length;s++){var h=c[s];if(!ps.DEFAULT_SUPPORTED_SCAN_TYPE.includes(h))throw"Unsupported scan type ".concat(h)}return e},n})(),Pr=(function(){function n(){}return n.ALL_ELEMENT_CLASS="html5-qrcode-element",n.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",n.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",n.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",n.TORCH_BUTTON_ID="html5-qrcode-button-torch",n.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",n.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",n.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",n.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",n.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",n.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",n})(),Ta=(function(){function n(){}return n.createElement=function(e,t){var s=document.createElement(e);return s.id=t,s.classList.add(Pr.ALL_ELEMENT_CLASS),e==="button"&&s.setAttribute("type","button"),s},n})(),pC=function(n,e,t,s){function c(h){return h instanceof t?h:new t(function(p){p(h)})}return new(t||(t=Promise))(function(h,p){function T(S){try{_(s.next(S))}catch(b){p(b)}}function w(S){try{_(s.throw(S))}catch(b){p(b)}}function _(S){S.done?h(S.value):c(S.value).then(T,w)}_((s=s.apply(n,e||[])).next())})},yC=function(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(_){return function(S){return w([_,S])}}function w(_){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,_[0]&&(t=0)),t;)try{if(s=1,c&&(h=_[0]&2?c.return:_[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,_[1])).done)return h;switch(c=0,h&&(_=[_[0]&2,h.value]),_[0]){case 0:case 1:h=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,c=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!h||_[1]>h[0]&&_[1]<h[3])){t.label=_[1];break}if(_[0]===6&&t.label<h[1]){t.label=h[1],h=_;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(_);break}h[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(n,t)}catch(S){_=[6,S],c=0}finally{s=h=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},EA=(function(){function n(e,t,s){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=s}return n.prototype.isTorchEnabled=function(){return this.isTorchOn},n.prototype.flipState=function(){return pC(this,void 0,void 0,function(){var e,t;return yC(this,function(s){switch(s.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return s.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=s.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},n.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?an.torchOffButton():an.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},n.prototype.propagateFailure=function(e,t){var s=e?an.torchOnFailedMessage():an.torchOffFailedMessage();t&&(s+="; Error = "+t),this.onTorchActionFailureCallback(s)},n.prototype.reset=function(){this.isTorchOn=!1},n})(),IM=(function(){function n(e,t){this.onTorchActionFailureCallback=t,this.torchButton=Ta.createElement("button",Pr.TORCH_BUTTON_ID),this.torchController=new EA(e,this,t)}return n.prototype.render=function(e,t){var s=this;this.torchButton.innerText=an.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var c=this;this.torchButton.addEventListener("click",function(h){return pC(s,void 0,void 0,function(){return yC(this,function(p){switch(p.label){case 0:return[4,c.torchController.flipState()];case 1:return p.sent(),c.torchController.isTorchEnabled()?(c.torchButton.classList.remove(Pr.TORCH_BUTTON_CLASS_TORCH_OFF),c.torchButton.classList.add(Pr.TORCH_BUTTON_CLASS_TORCH_ON)):(c.torchButton.classList.remove(Pr.TORCH_BUTTON_CLASS_TORCH_ON),c.torchButton.classList.add(Pr.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},n.prototype.updateTorchCapability=function(e){this.torchController=new EA(e,this,this.onTorchActionFailureCallback)},n.prototype.getTorchButton=function(){return this.torchButton},n.prototype.hide=function(){this.torchButton.style.display="none"},n.prototype.show=function(){this.torchButton.style.display="inline-block"},n.prototype.disable=function(){this.torchButton.disabled=!0},n.prototype.enable=function(){this.torchButton.disabled=!1},n.prototype.setText=function(e){this.torchButton.innerText=e},n.prototype.reset=function(){this.torchButton.innerText=an.torchOnButton(),this.torchController.reset()},n.create=function(e,t,s,c){var h=new n(t,c);return h.render(e,s),h},n})(),bM=(function(){function n(e,t,s){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var c=document.createElement("label");c.setAttribute("for",this.getFileScanInputId()),c.style.display="inline-block",this.fileBasedScanRegion.appendChild(c),this.fileSelectionButton=Ta.createElement("button",Pr.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(T){c.click()}),c.append(this.fileSelectionButton),this.fileScanInput=Ta.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",c.appendChild(this.fileScanInput);var h=this;this.fileScanInput.addEventListener("change",function(T){if(!(T==null||T.target==null)){var w=T.target;if(!(w.files&&w.files.length===0)){var _=w.files,S=_[0],b=S.name;h.setImageNameToButton(b),s(S)}}});var p=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(p),this.fileBasedScanRegion.addEventListener("dragenter",function(T){h.fileBasedScanRegion.style.border=h.fileBasedScanRegionActiveBorder(),T.stopPropagation(),T.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(T){h.fileBasedScanRegion.style.border=h.fileBasedScanRegionDefaultBorder(),T.stopPropagation(),T.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(T){h.fileBasedScanRegion.style.border=h.fileBasedScanRegionActiveBorder(),T.stopPropagation(),T.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(T){T.stopPropagation(),T.preventDefault(),h.fileBasedScanRegion.style.border=h.fileBasedScanRegionDefaultBorder();var w=T.dataTransfer;if(w){var _=w.files;if(!_||_.length===0)return;for(var S=!1,b=0;b<_.length;++b){var L=_.item(b);if(L){var j=/image.*/;if(L.type.match(j)){S=!0;var W=L.name;h.setImageNameToButton(W),s(L),p.innerText=an.dragAndDropMessage();break}}}S||(p.innerText=an.dragAndDropMessageOnlyImages())}})}return n.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},n.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},n.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},n.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},n.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},n.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},n.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},n.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=an.dragAndDropMessage(),e.style.fontWeight="400",e},n.prototype.setImageNameToButton=function(e){var t=20;if(e.length>t){var s=e.substring(0,8),c=e.length,h=e.substring(c-8,c);e="".concat(s,"....").concat(h)}var p=an.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=p},n.prototype.setInitialValueToButton=function(){var e=an.fileSelectionChooseImage()+" - "+an.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},n.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},n.create=function(e,t,s){var c=new n(e,t,s);return c},n})(),RM=(function(){function n(e){this.selectElement=Ta.createElement("select",Pr.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return n.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var s=this.cameras.length;if(s===0)throw new Error("No cameras found");if(s===1)t.style.display="none";else{var c=an.selectCamera();t.innerText="".concat(c," (").concat(this.cameras.length,")  ")}for(var h=1,p=0,T=this.cameras;p<T.length;p++){var w=T[p],_=w.id,S=w.label==null?_:w.label;(!S||S==="")&&(S=[an.anonymousCameraPrefix(),h++].join(" "));var b=document.createElement("option");b.value=_,b.innerText=S,this.options.push(b),this.selectElement.appendChild(b)}t.appendChild(this.selectElement),e.appendChild(t)},n.prototype.disable=function(){this.selectElement.disabled=!0},n.prototype.isDisabled=function(){return this.selectElement.disabled===!0},n.prototype.enable=function(){this.selectElement.disabled=!1},n.prototype.getValue=function(){return this.selectElement.value},n.prototype.hasValue=function(e){for(var t=0,s=this.options;t<s.length;t++){var c=s[t];if(c.value===e)return!0}return!1},n.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},n.prototype.hasSingleItem=function(){return this.cameras.length===1},n.prototype.numCameras=function(){return this.cameras.length},n.create=function(e,t){var s=new n(t);return s.render(e),s},n})(),NM=(function(){function n(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Ta.createElement("input",Pr.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return n.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var s=an.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(s),this.rangeText.style.marginRight="10px";var c=this;this.rangeInput.addEventListener("input",function(){return c.onValueChange()}),this.rangeInput.addEventListener("change",function(){return c.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},n.prototype.onValueChange=function(){var e=an.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},n.prototype.setValues=function(e,t,s,c){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=c.toString(),this.rangeInput.value=s.toString(),this.onValueChange()},n.prototype.show=function(){this.zoomElementContainer.style.display="block"},n.prototype.hide=function(){this.zoomElementContainer.style.display="none"},n.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},n.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},n.create=function(e,t){var s=new n;return s.render(e,t),s},n})(),Lr;(function(n){n[n.STATUS_DEFAULT=0]="STATUS_DEFAULT",n[n.STATUS_SUCCESS=1]="STATUS_SUCCESS",n[n.STATUS_WARNING=2]="STATUS_WARNING",n[n.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Lr||(Lr={}));function OM(n){return{fps:n.fps,qrbox:n.qrbox,aspectRatio:n.aspectRatio,disableFlip:n.disableFlip,videoConstraints:n.videoConstraints}}function DM(n,e){return{formatsToSupport:n.formatsToSupport,useBarCodeDetectorIfSupported:n.useBarCodeDetectorIfSupported,experimentalFeatures:n.experimentalFeatures,verbose:e}}var MM=(function(){function n(e,t,s){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=s===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new go(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new dC(this.verbose),this.persistedDataManager=new wM,t.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return n.prototype.render=function(e,t){var s=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(h,p){if(e)e(h,p);else{if(s.lastMatchFound===h)return;s.lastMatchFound=h,s.setHeaderMessage(an.lastMatch(h),Lr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(h,p){t&&t(h,p)};var c=document.getElementById(this.elementId);if(!c)throw"HTML Element with id=".concat(this.elementId," not found");c.innerHTML="",this.createBasicLayout(c),this.html5Qrcode=new gA(this.getScanRegionId(),DM(this.config,this.verbose))},n.prototype.pause=function(e){(Ls(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},n.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},n.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},n.prototype.clear=function(){var e=this,t=function(){var s=document.getElementById(e.elementId);s&&(s.innerHTML="",e.resetBasicLayout(s))};return this.html5Qrcode?new Promise(function(s,c){if(!e.html5Qrcode){s();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(h){if(!e.html5Qrcode){s();return}e.html5Qrcode.clear(),t(),s()}).catch(function(h){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",h),c(h)}):(e.html5Qrcode.clear(),t(),s())}):Promise.resolve()},n.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},n.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},n.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},n.prototype.createConfig=function(e){return e?(e.fps||(e.fps=ps.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!ps.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=ps.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=ps.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:ps.SCAN_DEFAULT_FPS,rememberLastUsedCamera:ps.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:ps.DEFAULT_SUPPORTED_SCAN_TYPE}},n.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),s=this.getScanRegionId();t.id=s,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),go.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var c=document.createElement("div"),h=this.getDashboardId();c.id=h,c.style.width="100%",e.appendChild(c),this.setupInitialDashboard(c)},n.prototype.resetBasicLayout=function(e){e.style.border="none"},n.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},n.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t);var s=new CM;s.renderInto(t);var c=document.createElement("div");c.id=this.getHeaderMessageContainerId(),c.style.display="none",c.style.textAlign="center",c.style.fontSize="14px",c.style.padding="2px 10px",c.style.margin="4px",c.style.borderTop="1px solid #f6f6f6",t.appendChild(c)},n.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},n.prototype.createCameraListUi=function(e,t,s){var c=this;c.showHideScanTypeSwapLink(!1),c.setHeaderMessage(an.cameraPermissionRequesting());var h=function(){s||c.createPermissionButton(e,t)};gA.getCameras().then(function(p){c.persistedDataManager.setHasPermission(!0),c.showHideScanTypeSwapLink(!0),c.resetHeaderMessage(),p&&p.length>0?(e.removeChild(t),c.renderCameraSelection(p)):(c.setHeaderMessage(an.noCameraFound(),Lr.STATUS_WARNING),h())}).catch(function(p){c.persistedDataManager.setHasPermission(!1),s?s.disabled=!1:h(),c.setHeaderMessage(p,Lr.STATUS_WARNING),c.showHideScanTypeSwapLink(!0)})},n.prototype.createPermissionButton=function(e,t){var s=this,c=Ta.createElement("button",this.getCameraPermissionButtonId());c.innerText=an.cameraPermissionTitle(),c.addEventListener("click",function(){c.disabled=!0,s.createCameraListUi(e,t,c)}),t.appendChild(c)},n.prototype.createPermissionsUi=function(e,t){var s=this;if(go.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){yA.hasPermissions().then(function(c){c?s.createCameraListUi(e,t):(s.persistedDataManager.setHasPermission(!1),s.createPermissionButton(e,t))}).catch(function(c){s.persistedDataManager.setHasPermission(!1),s.createPermissionButton(e,t)});return}this.createPermissionButton(e,t)},n.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var s=document.createElement("div");s.id=this.getDashboardSectionCameraScanRegionId(),s.style.display=go.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(s);var c=document.createElement("div");c.style.textAlign="center",s.appendChild(c),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(s,c),this.renderFileScanUi(t)},n.prototype.renderFileScanUi=function(e){var t=go.isFileScanType(this.currentScanType),s=this,c=function(h){if(!s.html5Qrcode)throw"html5Qrcode not defined";go.isFileScanType(s.currentScanType)&&(s.setHeaderMessage(an.loadingImage()),s.html5Qrcode.scanFileV2(h,!0).then(function(p){s.resetHeaderMessage(),s.qrCodeSuccessCallback(p.decodedText,p)}).catch(function(p){s.setHeaderMessage(p,Lr.STATUS_WARNING),s.qrCodeErrorCallback(p,fC.createFrom(p))}))};this.fileSelectionUi=bM.create(e,t,c)},n.prototype.renderCameraSelection=function(e){var t=this,s=this,c=document.getElementById(this.getDashboardSectionCameraScanRegionId());c.style.textAlign="center";var h=NM.create(c,!1),p=function(Z){var q=Z.zoomFeature();if(q.isSupported()){h.setOnCameraZoomValueChangeCallback(function(le){q.apply(le)});var pe=1;t.config.defaultZoomValueIfSupported&&(pe=t.config.defaultZoomValueIfSupported),pe=KD(pe,q.min(),q.max()),h.setValues(q.min(),q.max(),pe,q.step()),h.show()}},T=RM.create(c,e),w=document.createElement("span"),_=Ta.createElement("button",Pr.CAMERA_START_BUTTON_ID);_.innerText=an.scanButtonStartScanningText(),w.appendChild(_);var S=Ta.createElement("button",Pr.CAMERA_STOP_BUTTON_ID);S.innerText=an.scanButtonStopScanningText(),S.style.display="none",S.disabled=!0,w.appendChild(S);var b,L=function(Z){if(!Z.torchFeature().isSupported()){b&&b.hide();return}b?b.updateTorchCapability(Z.torchFeature()):b=IM.create(w,Z.torchFeature(),{display:"none",marginLeft:"5px"},function(q){s.setHeaderMessage(q,Lr.STATUS_WARNING)}),b.show()};c.appendChild(w);var j=function(Z){Z||(_.style.display="none"),_.innerText=an.scanButtonStartScanningText(),_.style.opacity="1",_.disabled=!1,Z&&(_.style.display="inline-block")};if(_.addEventListener("click",function(Z){_.innerText=an.scanButtonScanningStarting(),T.disable(),_.disabled=!0,_.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&s.showHideScanTypeSwapLink(!1),s.resetHeaderMessage();var q=T.getValue();s.persistedDataManager.setLastUsedCameraId(q),s.html5Qrcode.start(q,OM(s.config),s.qrCodeSuccessCallback,s.qrCodeErrorCallback).then(function(pe){S.disabled=!1,S.style.display="inline-block",j(!1);var le=s.html5Qrcode.getRunningTrackCameraCapabilities();t.config.showTorchButtonIfSupported===!0&&L(le),t.config.showZoomSliderIfSupported===!0&&p(le)}).catch(function(pe){s.showHideScanTypeSwapLink(!0),T.enable(),j(!0),s.setHeaderMessage(pe,Lr.STATUS_WARNING)})}),T.hasSingleItem()&&_.click(),S.addEventListener("click",function(Z){if(!s.html5Qrcode)throw"html5Qrcode not defined";S.disabled=!0,s.html5Qrcode.stop().then(function(q){t.scanTypeSelector.hasMoreThanOneScanType()&&s.showHideScanTypeSwapLink(!0),T.enable(),_.disabled=!1,S.style.display="none",_.style.display="inline-block",b&&(b.reset(),b.hide()),h.removeOnCameraZoomValueChangeCallback(),h.hide(),s.insertCameraScanImageToScanRegion()}).catch(function(q){S.disabled=!1,s.setHeaderMessage(q,Lr.STATUS_WARNING)})}),s.persistedDataManager.getLastUsedCameraId()){var W=s.persistedDataManager.getLastUsedCameraId();T.hasValue(W)?(T.setValue(W),_.click()):s.persistedDataManager.resetLastUsedCameraId()}},n.prototype.createSectionSwap=function(){var e=this,t=an.textIfCameraScanSelected(),s=an.textIfFileScanSelected(),c=document.getElementById(this.getDashboardSectionId()),h=document.createElement("div");h.style.textAlign="center";var p=Ta.createElement("span",this.getDashboardSectionSwapLinkId());p.style.textDecoration="underline",p.style.cursor="pointer",p.innerText=go.isCameraScanType(this.currentScanType)?t:s,p.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,go.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),p.innerText=s,e.currentScanType=Lo.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),p.innerText=t,e.currentScanType=Lo.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),h.appendChild(p),c.appendChild(h)},n.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;if(this.persistedDataManager.hasCameraPermissions()){yA.hasPermissions().then(function(s){if(s){var c=document.getElementById(t.getCameraPermissionButtonId());if(!c)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";c.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(s){t.persistedDataManager.setHasPermission(!1)});return}},n.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},n.prototype.setHeaderMessage=function(e,t){t||(t=Lr.STATUS_DEFAULT);var s=this.getHeaderMessageDiv();switch(s.innerText=e,s.style.display="block",t){case Lr.STATUS_SUCCESS:s.style.background="rgba(106, 175, 80, 0.26)",s.style.color="#477735";break;case Lr.STATUS_WARNING:s.style.background="rgba(203, 36, 49, 0.14)",s.style.color="#cb2431";break;case Lr.STATUS_DEFAULT:default:s.style.background="rgba(0, 0, 0, 0)",s.style.color="rgb(17, 17, 17)";break}},n.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},n.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){t.innerHTML="<br>",t.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(s){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=EM,this.cameraScanImage.alt=an.cameraScanAltText()},n.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage){t.innerHTML="<br>",t.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(s){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=_M,this.fileScanImage.alt=an.fileScanAltText()},n.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},n.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},n.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},n.prototype.getDashboardSectionSwapLinkId=function(){return Pr.SCAN_TYPE_CHANGE_ANCHOR_ID},n.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},n.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},n.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},n.prototype.getCameraPermissionButtonId=function(){return Pr.CAMERA_PERMISSION_BUTTON_ID},n.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},n.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},n.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},n})(),_A;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(_A||(_A={}));var AA;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(AA||(AA={}));var wA;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(wA||(wA={}));const xA=["user","model","function","system"];var TA;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(TA||(TA={}));var CA;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(CA||(CA={}));var vA;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(vA||(vA={}));var SA;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(SA||(SA={}));var Vu;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(Vu||(Vu={}));var IA;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(IA||(IA={}));var bA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(bA||(bA={}));var RA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(RA||(RA={}));class Yi extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class cc extends Yi{constructor(e,t){super(e),this.response=t}}class EC extends Yi{constructor(e,t,s,c){super(e),this.status=t,this.statusText=s,this.errorDetails=c}}class So extends Yi{}class _C extends Yi{}const LM="https://generativelanguage.googleapis.com",PM="v1beta",kM="0.24.1",BM="genai-js";var vl;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(vl||(vl={}));class UM{constructor(e,t,s,c,h){this.model=e,this.task=t,this.apiKey=s,this.stream=c,this.requestOptions=h}toString(){var e,t;const s=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||PM;let h=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||LM}/${s}/${this.model}:${this.task}`;return this.stream&&(h+="?alt=sse"),h}}function VM(n){const e=[];return n?.apiClient&&e.push(n.apiClient),e.push(`${BM}/${kM}`),e.join(" ")}async function FM(n){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",VM(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let s=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(c){throw new So(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${c.message}`)}for(const[c,h]of s.entries()){if(c==="x-goog-api-key")throw new So(`Cannot set reserved header name ${c}`);if(c==="x-goog-api-client")throw new So(`Header name ${c} can only be set using the apiClient field`);t.append(c,h)}}return t}async function zM(n,e,t,s,c,h){const p=new UM(n,e,t,s,h);return{url:p.toString(),fetchOptions:Object.assign(Object.assign({},qM(h)),{method:"POST",headers:await FM(p),body:c})}}async function mh(n,e,t,s,c,h={},p=fetch){const{url:T,fetchOptions:w}=await zM(n,e,t,s,c,h);return jM(T,w,p)}async function jM(n,e,t=fetch){let s;try{s=await t(n,e)}catch(c){HM(c,n)}return s.ok||await GM(s,n),s}function HM(n,e){let t=n;throw t.name==="AbortError"?(t=new _C(`Request aborted when fetching ${e.toString()}: ${n.message}`),t.stack=n.stack):n instanceof EC||n instanceof So||(t=new Yi(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}async function GM(n,e){let t="",s;try{const c=await n.json();t=c.error.message,c.error.details&&(t+=` ${JSON.stringify(c.error.details)}`,s=c.error.details)}catch{}throw new EC(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,s)}function qM(n){const e={};if(n?.signal!==void 0||n?.timeout>=0){const t=new AbortController;n?.timeout>=0&&setTimeout(()=>t.abort(),n.timeout),n?.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}function Xm(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),jf(n.candidates[0]))throw new cc(`${mo(n)}`,n);return YM(n)}else if(n.promptFeedback)throw new cc(`Text not available. ${mo(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),jf(n.candidates[0]))throw new cc(`${mo(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),NA(n)[0]}else if(n.promptFeedback)throw new cc(`Function call not available. ${mo(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),jf(n.candidates[0]))throw new cc(`${mo(n)}`,n);return NA(n)}else if(n.promptFeedback)throw new cc(`Function call not available. ${mo(n)}`,n)},n}function YM(n){var e,t,s,c;const h=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const p of(c=(s=n.candidates)===null||s===void 0?void 0:s[0].content)===null||c===void 0?void 0:c.parts)p.text&&h.push(p.text),p.executableCode&&h.push("\n```"+p.executableCode.language+`
`+p.executableCode.code+"\n```\n"),p.codeExecutionResult&&h.push("\n```\n"+p.codeExecutionResult.output+"\n```\n");return h.length>0?h.join(""):""}function NA(n){var e,t,s,c;const h=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const p of(c=(s=n.candidates)===null||s===void 0?void 0:s[0].content)===null||c===void 0?void 0:c.parts)p.functionCall&&h.push(p.functionCall);if(h.length>0)return h}const XM=[Vu.RECITATION,Vu.SAFETY,Vu.LANGUAGE];function jf(n){return!!n.finishReason&&XM.includes(n.finishReason)}function mo(n){var e,t,s;let c="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)c+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(c+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(c+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((s=n.candidates)===null||s===void 0)&&s[0]){const h=n.candidates[0];jf(h)&&(c+=`Candidate was blocked due to ${h.finishReason}`,h.finishMessage&&(c+=`: ${h.finishMessage}`))}return c}function $u(n){return this instanceof $u?(this.v=n,this):new $u(n)}function WM(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),c,h=[];return c={},p("next"),p("throw"),p("return"),c[Symbol.asyncIterator]=function(){return this},c;function p(L){s[L]&&(c[L]=function(j){return new Promise(function(W,Z){h.push([L,j,W,Z])>1||T(L,j)})})}function T(L,j){try{w(s[L](j))}catch(W){b(h[0][3],W)}}function w(L){L.value instanceof $u?Promise.resolve(L.value.v).then(_,S):b(h[0][2],L)}function _(L){T("next",L)}function S(L){T("throw",L)}function b(L,j){L(j),h.shift(),h.length&&T(h[0][0],h[0][1])}}const OA=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function QM(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=JM(e),[s,c]=t.tee();return{stream:ZM(s),response:KM(c)}}async function KM(n){const e=[],t=n.getReader();for(;;){const{done:s,value:c}=await t.read();if(s)return Xm($M(e));e.push(c)}}function ZM(n){return WM(this,arguments,function*(){const t=n.getReader();for(;;){const{value:s,done:c}=yield $u(t.read());if(c)break;yield yield $u(Xm(s))}})}function JM(n){const e=n.getReader();return new ReadableStream({start(s){let c="";return h();function h(){return e.read().then(({value:p,done:T})=>{if(T){if(c.trim()){s.error(new Yi("Failed to parse stream"));return}s.close();return}c+=p;let w=c.match(OA),_;for(;w;){try{_=JSON.parse(w[1])}catch{s.error(new Yi(`Error parsing JSON response: "${w[1]}"`));return}s.enqueue(_),c=c.substring(w[0].length),w=c.match(OA)}return h()}).catch(p=>{let T=p;throw T.stack=p.stack,T.name==="AbortError"?T=new _C("Request aborted when reading from the stream"):T=new Yi("Error reading from the stream"),T})}}})}function $M(n){const e=n[n.length-1],t={promptFeedback:e?.promptFeedback};for(const s of n){if(s.candidates){let c=0;for(const h of s.candidates)if(t.candidates||(t.candidates=[]),t.candidates[c]||(t.candidates[c]={index:c}),t.candidates[c].citationMetadata=h.citationMetadata,t.candidates[c].groundingMetadata=h.groundingMetadata,t.candidates[c].finishReason=h.finishReason,t.candidates[c].finishMessage=h.finishMessage,t.candidates[c].safetyRatings=h.safetyRatings,h.content&&h.content.parts){t.candidates[c].content||(t.candidates[c].content={role:h.content.role||"user",parts:[]});const p={};for(const T of h.content.parts)T.text&&(p.text=T.text),T.functionCall&&(p.functionCall=T.functionCall),T.executableCode&&(p.executableCode=T.executableCode),T.codeExecutionResult&&(p.codeExecutionResult=T.codeExecutionResult),Object.keys(p).length===0&&(p.text=""),t.candidates[c].content.parts.push(p)}c++}s.usageMetadata&&(t.usageMetadata=s.usageMetadata)}return t}async function AC(n,e,t,s){const c=await mh(e,vl.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),s);return QM(c)}async function wC(n,e,t,s){const h=await(await mh(e,vl.GENERATE_CONTENT,n,!1,JSON.stringify(t),s)).json();return{response:Xm(h)}}function xC(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function eh(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const t of n)typeof t=="string"?e.push({text:t}):e.push(t);return e5(e)}function e5(n){const e={role:"user",parts:[]},t={role:"function",parts:[]};let s=!1,c=!1;for(const h of n)"functionResponse"in h?(t.parts.push(h),c=!0):(e.parts.push(h),s=!0);if(s&&c)throw new Yi("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!c)throw new Yi("No content is provided for sending chat message.");return s?e:t}function t5(n,e){var t;let s={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(t=e?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const c=n.generateContentRequest!=null;if(n.contents){if(c)throw new So("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=n.contents}else if(c)s=Object.assign(Object.assign({},s),n.generateContentRequest);else{const h=eh(n);s.contents=[h]}return{generateContentRequest:s}}function DA(n){let e;return n.contents?e=n:e={contents:[eh(n)]},n.systemInstruction&&(e.systemInstruction=xC(n.systemInstruction)),e}function n5(n){return typeof n=="string"||Array.isArray(n)?{content:eh(n)}:n}const MA=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],i5={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function r5(n){let e=!1;for(const t of n){const{role:s,parts:c}=t;if(!e&&s!=="user")throw new Yi(`First content should be with role 'user', got ${s}`);if(!xA.includes(s))throw new Yi(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(xA)}`);if(!Array.isArray(c))throw new Yi("Content should have 'parts' property with an array of Parts");if(c.length===0)throw new Yi("Each Content should have at least one part");const h={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const T of c)for(const w of MA)w in T&&(h[w]+=1);const p=i5[s];for(const T of MA)if(!p.includes(T)&&h[T]>0)throw new Yi(`Content with role '${s}' can't contain '${T}' part`);e=!0}}function LA(n){var e;if(n.candidates===void 0||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const s of t.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}const PA="SILENT_ERROR";class s5{constructor(e,t,s,c={}){this.model=t,this.params=s,this._requestOptions=c,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,s?.history&&(r5(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var s,c,h,p,T,w;await this._sendPromise;const _=eh(e),S={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(c=this.params)===null||c===void 0?void 0:c.generationConfig,tools:(h=this.params)===null||h===void 0?void 0:h.tools,toolConfig:(p=this.params)===null||p===void 0?void 0:p.toolConfig,systemInstruction:(T=this.params)===null||T===void 0?void 0:T.systemInstruction,cachedContent:(w=this.params)===null||w===void 0?void 0:w.cachedContent,contents:[...this._history,_]},b=Object.assign(Object.assign({},this._requestOptions),t);let L;return this._sendPromise=this._sendPromise.then(()=>wC(this._apiKey,this.model,S,b)).then(j=>{var W;if(LA(j.response)){this._history.push(_);const Z=Object.assign({parts:[],role:"model"},(W=j.response.candidates)===null||W===void 0?void 0:W[0].content);this._history.push(Z)}else{const Z=mo(j.response);Z&&console.warn(`sendMessage() was unsuccessful. ${Z}. Inspect response object for details.`)}L=j}).catch(j=>{throw this._sendPromise=Promise.resolve(),j}),await this._sendPromise,L}async sendMessageStream(e,t={}){var s,c,h,p,T,w;await this._sendPromise;const _=eh(e),S={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(c=this.params)===null||c===void 0?void 0:c.generationConfig,tools:(h=this.params)===null||h===void 0?void 0:h.tools,toolConfig:(p=this.params)===null||p===void 0?void 0:p.toolConfig,systemInstruction:(T=this.params)===null||T===void 0?void 0:T.systemInstruction,cachedContent:(w=this.params)===null||w===void 0?void 0:w.cachedContent,contents:[...this._history,_]},b=Object.assign(Object.assign({},this._requestOptions),t),L=AC(this._apiKey,this.model,S,b);return this._sendPromise=this._sendPromise.then(()=>L).catch(j=>{throw new Error(PA)}).then(j=>j.response).then(j=>{if(LA(j)){this._history.push(_);const W=Object.assign({},j.candidates[0].content);W.role||(W.role="model"),this._history.push(W)}else{const W=mo(j);W&&console.warn(`sendMessageStream() was unsuccessful. ${W}. Inspect response object for details.`)}}).catch(j=>{j.message!==PA&&console.error(j)}),L}}async function a5(n,e,t,s){return(await mh(e,vl.COUNT_TOKENS,n,!1,JSON.stringify(t),s)).json()}async function o5(n,e,t,s){return(await mh(e,vl.EMBED_CONTENT,n,!1,JSON.stringify(t),s)).json()}async function l5(n,e,t,s){const c=t.requests.map(p=>Object.assign(Object.assign({},p),{model:e}));return(await mh(e,vl.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:c}),s)).json()}class kA{constructor(e,t,s={}){this.apiKey=e,this._requestOptions=s,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=xC(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var s;const c=DA(e),h=Object.assign(Object.assign({},this._requestOptions),t);return wC(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},c),h)}async generateContentStream(e,t={}){var s;const c=DA(e),h=Object.assign(Object.assign({},this._requestOptions),t);return AC(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},c),h)}startChat(e){var t;return new s5(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const s=t5(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),c=Object.assign(Object.assign({},this._requestOptions),t);return a5(this.apiKey,this.model,s,c)}async embedContent(e,t={}){const s=n5(e),c=Object.assign(Object.assign({},this._requestOptions),t);return o5(this.apiKey,this.model,s,c)}async batchEmbedContents(e,t={}){const s=Object.assign(Object.assign({},this._requestOptions),t);return l5(this.apiKey,this.model,e,s)}}class c5{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new Yi("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new kA(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,s){if(!e.name)throw new So("Cached content must contain a `name` field.");if(!e.model)throw new So("Cached content must contain a `model` field.");const c=["model","systemInstruction"];for(const p of c)if(t?.[p]&&e[p]&&t?.[p]!==e[p]){if(p==="model"){const T=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,w=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(T===w)continue}throw new So(`Different value for "${p}" specified in modelParams (${t[p]}) and cachedContent (${e[p]})`)}const h=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new kA(this.apiKey,h,s)}}const u5="AIzaSyBkPUyVomxJXKbWEHXC9NKDfy-51n3h1J4",h5=new c5(u5),f5=h5.getGenerativeModel({model:"gemini-3-flash"}),d5=async(n,e)=>{const s=`
    Context: You are a queue management expert. 
    Data: The last few customers took [${n.map(c=>`${c.duration}m`).join(", ")}] to serve.
    Current Queue: There are ${e} people waiting.
    Task: Predict total wait time for the last person. 
    Constraint: Respond with ONLY a JSON object: {"predictedMinutes": number, "confidence": percentage}
  `;try{const h=await(await f5.generateContent(s)).response;return JSON.parse(h.text())}catch(c){return console.error("AI Error:",c),{predictedMinutes:e*5,confidence:0}}},g5=n=>{const e=pd.c(7),{historyData:t,userPosition:s}=n,[c,h]=ge.useState(null);let p,T;e[0]!==t||e[1]!==s?(p=()=>{s>0&&t.length>0&&d5(t,s).then(h)},T=[s,t],e[0]=t,e[1]=s,e[2]=p,e[3]=T):(p=e[2],T=e[3]),ge.useEffect(p,T);let w;e[4]===Symbol.for("react.memo_cache_sentinel")?(w=re.jsx("h4",{className:"text-blue-400 text-xs font-bold uppercase tracking-tighter",children:"AI Prediction"}),e[4]=w):w=e[4];const _=c?`~${c.predictedMinutes} min`:"Calculating...";let S;return e[5]!==_?(S=re.jsxs("div",{className:"p-4 border border-blue-500 rounded-xl bg-slate-900/50",children:[w,re.jsx("div",{className:"text-2xl font-black",children:_})]}),e[5]=_,e[6]=S):S=e[6],S},m5=()=>{const[n,e]=ge.useState(localStorage.getItem("savedQueueId")),[t,s]=ge.useState(localStorage.getItem("savedDocId")),[c,h]=ge.useState(""),[p,T]=ge.useState(!1),[w,_]=ge.useState(null),[S,b]=ge.useState(0),[L,j]=ge.useState(!1),[W,Z]=ge.useState(!1),[q,pe]=ge.useState([]),[le,ne]=ge.useState(0);ge.useEffect(()=>{if(!n)return;const F=Ng(dl(ms,"queues",n,"history"),Og("completedAt","desc"),OD(5)),B=hd(F,J=>{const Y=J.docs.map(X=>X.data());pe(Y)});return()=>B()},[n]);const Re=()=>{new Audio("https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3").play().catch(B=>console.log("Sound blocked by browser")),navigator.vibrate&&navigator.vibrate([200,100,200]),alert(" IT'S YOUR TURN!")};ge.useEffect(()=>{if(n&&t){const F=dl(ms,"queues",n,"waitlist"),B=hd(F,J=>{const Y=J.docs.map(G=>({id:G.id,...G.data()})),X=Y.find(G=>G.id===t);if(!X)_(null),Z(!0),localStorage.removeItem("savedQueueId"),localStorage.removeItem("savedDocId");else{w?.status==="waiting"&&X.status==="called"&&Re(),_(X);const G=Y.filter(We=>We.status==="waiting"&&We.tokenNumber<X.tokenNumber);b(G.length),ne(G.length+1)}});return()=>B()}},[n,t,w?.status]);const He=async()=>{if(window.confirm("Are you sure you want to leave?"))try{j(!0),await Dg(Uu(ms,"queues",n,"waitlist",t)),localStorage.clear(),window.location.reload()}catch(F){console.error(F)}finally{j(!1)}};ge.useEffect(()=>{if(!n&&!W){const F=new MM("reader",{fps:10,qrbox:250});return F.render(async B=>{try{const Y=new URL(B).searchParams.get("id");Y&&(F.clear(),e(Y),T(!0))}catch(J){console.error(J)}}),()=>{try{F.clear()}catch{}}}},[n,W]);const Be=async F=>{F.preventDefault(),j(!0);try{const B=dl(ms,"queues",n,"waitlist"),Y=(await LD(B)).size+1,X=await Mg(B,{name:c,tokenNumber:Y,status:"waiting",joinedAt:Ff()});localStorage.setItem("savedQueueId",n),localStorage.setItem("savedDocId",X.id),s(X.id),T(!1)}catch{alert("Error joining.")}j(!1)},U=()=>{localStorage.clear(),window.location.reload()};return L?re.jsx("div",{className:"h-screen flex items-center justify-center font-bold text-blue-600",children:"Processing..."}):re.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col items-center justify-center p-6",children:[!n&&!W&&re.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-3xl shadow-lg text-center border",children:[re.jsx("h2",{className:"text-xl font-black mb-4 uppercase tracking-tighter",children:"Scan QR to Join"}),re.jsx("div",{id:"reader",className:"rounded-xl overflow-hidden shadow-inner"})]}),p&&!w&&re.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-3xl shadow-xl text-center",children:[re.jsx("h2",{className:"text-2xl font-black mb-4",children:"Identity"}),re.jsxs("form",{onSubmit:Be,className:"space-y-4",children:[re.jsx("input",{autoFocus:!0,className:"w-full p-4 bg-slate-100 rounded-2xl outline-none font-bold",placeholder:"Your Full Name",value:c,onChange:F=>h(F.target.value),required:!0}),re.jsx("button",{className:"w-full bg-blue-600 text-white p-4 rounded-2xl font-black shadow-lg",children:"GET MY TOKEN"})]})]}),w&&re.jsxs("div",{className:"w-full max-w-sm",children:[re.jsxs("div",{className:`relative overflow-hidden rounded-[3rem] shadow-xl transition-all duration-500 ${w.status==="called"?"bg-emerald-600 scale-105":"bg-white"}`,children:[re.jsx("div",{className:`p-8 text-center ${w.status==="called"?"bg-emerald-700/50":"bg-blue-600"}`,children:re.jsx("p",{className:"font-display text-[16px] font-black uppercase tracking-[0.3em] text-white/70",children:"Entry Pass"})}),re.jsxs("div",{className:"p-12 text-center",children:[re.jsx("p",{className:`font-bold uppercase tracking-widest text-[15px] mb-2 ${w.status==="called"?"text-emerald-500":"text-slate-500"}`,children:"Your Position"}),re.jsx("h1",{className:`font-display text-[10rem] font-black leading-none mb-4 tracking-tighter ${w.status==="called"?"text-white":"text-slate-900"}`,children:w.tokenNumber}),re.jsx(g5,{historyData:q,userPosition:le}),re.jsx("div",{className:"mt-8 mb-8",children:re.jsx("p",{className:`text-lg font-black ${w.status==="called"?"text-white":"text-slate-900"}`,children:w.name})}),w.status==="waiting"?re.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-50 px-6 py-3 rounded-2xl",children:[re.jsxs("span",{className:"relative flex h-3 w-3",children:[re.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),re.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-blue-500"})]}),re.jsx("span",{className:"font-black text-blue-700 text-sm",children:S===0?"Prepare to enter!":`${S} people ahead`})]}):re.jsx("div",{className:"bg-white text-emerald-700 py-4 px-8 rounded-2xl font-black text-xl shadow-xl animate-bounce",children:"REACH THE COUNTER"})]})]}),re.jsx("button",{onClick:He,className:"w-full mt-8 py-4 px-6 font-black text-rose-500 border-2 border-rose-500 rounded-2xl transition-all hover:bg-rose-500 hover:text-white",children:"Leave Queue"})]}),W&&re.jsxs("div",{className:"w-full max-w-sm bg-white p-10 rounded-[3rem] shadow-xl text-center border-t-8 border-emerald-500",children:[re.jsx("div",{className:"text-6xl mb-4",children:""}),re.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2",children:"Service Complete"}),re.jsx("button",{onClick:U,className:"w-full bg-slate-900 text-white p-4 rounded-2xl font-bold",children:"Finish & Scan New"})]})]})};function p5(){const n=pd.c(5);let e;n[0]===Symbol.for("react.memo_cache_sentinel")?(e=re.jsx(uc,{path:"/queueflow",element:re.jsx(GI,{})}),n[0]=e):e=n[0];let t;n[1]===Symbol.for("react.memo_cache_sentinel")?(t=re.jsx(uc,{path:"/queueflow/user",element:re.jsx(m5,{})}),n[1]=t):t=n[1];let s;n[2]===Symbol.for("react.memo_cache_sentinel")?(s=re.jsx(uc,{path:"/queueflow/admin-login",element:re.jsx(UD,{})}),n[2]=s):s=n[2];let c;n[3]===Symbol.for("react.memo_cache_sentinel")?(c=re.jsx(uc,{path:"/queueflow/admin-dashboard",element:re.jsx(WD,{})}),n[3]=c):c=n[3];let h;return n[4]===Symbol.for("react.memo_cache_sentinel")?(h=re.jsx(_I,{children:re.jsx("div",{className:"App",children:re.jsxs(QS,{children:[e,t,s,c,re.jsx(uc,{path:"*",element:re.jsx("div",{className:"p-10 text-center",children:"404 - Page Not Found"})})]})})}),n[4]=h):h=n[4],h}Kv.createRoot(document.getElementById("root")).render(re.jsx(ge.StrictMode,{children:re.jsx(p5,{})}));
